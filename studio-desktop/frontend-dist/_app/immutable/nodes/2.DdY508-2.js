import"../chunks/DsnmJJEf.js";import{g as Ve,i as Ye,j as m,G as Ze,p as et,I as N,J as tt,z as $,K as w,t as a,f as at,B as i,A as k,D as o,L as D,C as s,M as fe,N as st,O as B,P as _e,F as z}from"../chunks/hL-aZVJ4.js";import{l as it,s as nt,i as j,b as rt,a as ot,c as be}from"../chunks/B_6VzoXV.js";import{I as lt,s as ct,P as E,e as ee,b as vt,a as dt,c as ut,d as R,f as ye,D as K,g as pt,B as te,h as ae,p as gt,X as mt,i as ht,F as ft,L as _t,l as bt,j as yt}from"../chunks/BWWgRDE1.js";import{g as W}from"../chunks/DEAaRqcq.js";import{p as xe,c as we}from"../chunks/yhLnWQwL.js";import{S as se,I as xt,a as wt}from"../chunks/DWbf9ulZ.js";import"../chunks/D7CioVkw.js";import{A as ze,F as zt}from"../chunks/DaNA2RYx.js";function q(O,I){const U=it(I,["children","$$slots","$$events","$$legacy"]);const G=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]];lt(O,nt({name:"users"},()=>U,{get iconNode(){return G},children:(C,ie)=>{var f=Ve(),u=Ye(f);ct(u,I,"default",{}),m(C,f)},$$slots:{default:!0}}))}var jt=k('<div class="attachment-chip svelte-1uha8ag"><span class="chip-icon svelte-1uha8ag"><!></span> <span class="chip-name svelte-1uha8ag"> </span> <span class="chip-size svelte-1uha8ag"> </span> <button class="chip-remove svelte-1uha8ag" title="Remove"><!></button></div>'),kt=k('<div class="attachment-chips svelte-1uha8ag"></div>'),At=k('<p class="sending-hint svelte-1uha8ag">Creating your project...</p>'),Dt=k('<button class="template-card svelte-1uha8ag"><div class="template-icon svelte-1uha8ag"><!></div> <div class="template-info svelte-1uha8ag"><span class="template-name svelte-1uha8ag"> </span> <span class="template-desc svelte-1uha8ag"> </span></div> <div class="template-arrow svelte-1uha8ag"><!></div></button>'),Pt=k('<button class="recent-card svelte-1uha8ag"><div class="recent-card-icon svelte-1uha8ag"><!></div> <div class="recent-card-info svelte-1uha8ag"><span class="recent-card-name svelte-1uha8ag"> </span> <span class="recent-card-date svelte-1uha8ag"> </span></div> <div class="recent-card-arrow svelte-1uha8ag"><!></div></button>'),Ft=k('<section class="recent-section svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><span class="svelte-1uha8ag">Recent projects</span></div> <div class="recent-row svelte-1uha8ag"></div></section>'),St=k('<div class="home-page svelte-1uha8ag"><div class="bg-effects svelte-1uha8ag" aria-hidden="true"><div class="bg-orb bg-orb-1 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-2 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-3 svelte-1uha8ag"></div> <div class="bg-grid svelte-1uha8ag"></div> <div class="bg-vignette svelte-1uha8ag"></div></div> <div class="page-content svelte-1uha8ag"><section class="hero-section svelte-1uha8ag"><h1 class="hero-title svelte-1uha8ag"><!></h1> <p class="hero-subtitle svelte-1uha8ag">Describe your AI agent pipeline and The Architect will design it for you</p></section> <section class="prompt-section svelte-1uha8ag"><div><textarea class="prompt-input svelte-1uha8ag" placeholder="Describe the AI agent pipeline you want to create..." rows="3"></textarea> <!> <div class="prompt-toolbar svelte-1uha8ag"><div class="toolbar-left svelte-1uha8ag"><button class="toolbar-btn svelte-1uha8ag" title="Attach files"><!></button> <input type="file" multiple="" accept=".py,.js,.ts,.jsx,.tsx,.json,.md,.txt,.csv,.yaml,.yml,.xml,.html,.css,.sql,.sh,.pdf,.doc,.docx,.png,.jpg,.jpeg,.gif,.webp,.svg" style="display:none" class="svelte-1uha8ag"/></div> <div class="toolbar-right svelte-1uha8ag"><button class="send-btn svelte-1uha8ag" title="Send to The Architect"><!></button></div></div></div> <!></section> <section class="templates-section svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Or start from a template</span></div> <div class="templates-row svelte-1uha8ag"></div></section> <!></div></div>');function Rt(O,I){et(I,!0);const U=()=>be(pt,"$settingsData",C),G=()=>be(gt,"$projects",C),[C,ie]=ot();let f=N(""),u=N(!1),H=N(void 0);const ne=B(()=>U()?.user_profile?.name||"");let _=N(tt([]));function je(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function ke(e){if(e.type.startsWith("image/"))return"image";if(e.type.includes("pdf")||e.type.includes("word")||e.type.includes("document"))return"document";if(e.type.startsWith("text/")||e.type.includes("json")||e.type.includes("javascript")||e.type.includes("yaml")||e.type.includes("xml"))return"text";const t=e.name.split(".").pop()?.toLowerCase()??"";return["py","js","ts","jsx","tsx","json","md","txt","csv","yaml","yml","xml","html","css","sql","sh","go","rs","java","rb","r"].includes(t)?"text":["png","jpg","jpeg","gif","webp","svg","bmp"].includes(t)?"image":["pdf","doc","docx","odt","rtf"].includes(t)?"document":"other"}function Ae(e){const t=e.target;if(t.files&&t.files.length>0){for(const r of Array.from(t.files))r.size>20*1024*1024||D(_,[...a(_),{id:`att-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:r.name,size:r.size,category:ke(r),file:r}],!0);t.value=""}}function De(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const c=n.result,v=c.includes(",")?c.split(",")[1]:c;t(v)},n.onerror=r,n.readAsDataURL(e)})}function Pe(e){D(_,a(_).filter(t=>t.id!==e),!0)}function Fe(){a(H)?.click()}const re=B(()=>(G()??[]).slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10)),Se=B(()=>a(re).length>0);function Te(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}}function $e(e){switch(e){case"blank":return E;case"simple-qa":return ae;case"reasoning-pipeline":return te;case"multi-agent":return q;case"rag-pipeline":return K;default:return se}}const Ie=B(()=>[...ye.map(e=>({id:e.id,name:e.name,description:e.description,icon:$e(e.id),exists:!0})),...["multi-agent","rag-pipeline"].filter(e=>!ye.find(t=>t.id===e)).map(e=>({id:e,name:e==="multi-agent"?"Multi-Agent Team":"RAG Pipeline",description:e==="multi-agent"?"Coordinate multiple agents with different roles":"Retrieval-augmented generation with vector search",icon:e==="multi-agent"?q:K,exists:!1}))]);async function oe(){const e=a(f).trim();if(!(!e||a(u))){D(u,!0);try{const t=await Promise.all(a(_).map(async n=>({name:n.file.name,size:n.file.size,category:n.category,type:n.file.type||"application/octet-stream",data:await De(n.file),docType:"auto"})));xe.set({text:e,attachments:t.length>0?t:void 0});const{name:r}=await ut.assistant.inferProjectName(e);await R(r),we.set(!0),W("/construct")}catch(t){console.error("[home] Failed to create project from prompt:",t),xe.set({text:e});const r=`project-${Date.now()}`;await R(r),we.set(!0),W("/construct")}finally{D(u,!1)}}}function Ce(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),oe())}async function Le(e){if(e.exists){const t=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await R(t||"untitled"),bt(e.id)}else{const t=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await R(t||"untitled")}W("/construct")}async function Me(e){yt(e),W("/construct")}var J=St(),le=o(i(J),2),X=i(le),ce=i(X),Ne=i(ce);{var Be=e=>{var t=_e();$(()=>z(t,`What do you want to build, ${a(ne)??""}?`)),m(e,t)},Ee=e=>{var t=_e("What do you want to build?");m(e,t)};j(Ne,e=>{a(ne)?e(Be):e(Ee,!1)})}s(ce),fe(2),s(X);var Q=o(X,2),L=i(Q);let ve;var P=i(L);st(P);var de=o(P,2);{var Re=e=>{var t=kt();ee(t,21,()=>a(_),r=>r.id,(r,n)=>{var c=jt(),v=i(c),b=i(v);{var S=d=>{xt(d,{size:12})},y=d=>{ft(d,{size:12})};j(b,d=>{a(n).category==="image"?d(S):d(y,!1)})}s(v);var p=o(v,2),T=i(p,!0);s(p);var g=o(p,2),x=i(g,!0);s(g);var h=o(g,2),A=i(h);mt(A,{size:10}),s(h),s(c),$(d=>{ht(p,"title",a(n).name),z(T,a(n).name),z(x,d)},[()=>je(a(n).size)]),w("click",h,()=>Pe(a(n).id)),m(r,c)}),s(t),m(e,t)};j(de,e=>{a(_).length>0&&e(Re)})}var ue=o(de,2),V=i(ue),F=i(V),Ke=i(F);E(Ke,{size:16}),s(F);var pe=o(F,2);rt(pe,e=>D(H,e),()=>a(H)),s(V);var ge=o(V,2),M=i(ge),We=i(M);{var qe=e=>{_t(e,{size:16,class:"spinner-icon"})},Oe=e=>{wt(e,{size:16})};j(We,e=>{a(u)?e(qe):e(Oe,!1)})}s(M),s(ge),s(ue),s(L);var Ue=o(L,2);{var Ge=e=>{var t=At();m(e,t)};j(Ue,e=>{a(u)&&e(Ge)})}s(Q);var Y=o(Q,2),Z=i(Y),He=i(Z);se(He,{size:13}),fe(2),s(Z);var me=o(Z,2);ee(me,21,()=>a(Ie),e=>e.id,(e,t)=>{var r=Dt(),n=i(r),c=i(n);{var v=l=>{E(l,{size:18})},b=l=>{ae(l,{size:18})},S=l=>{te(l,{size:18})},y=l=>{q(l,{size:18})},p=l=>{K(l,{size:18})},T=l=>{se(l,{size:18})};j(c,l=>{a(t).icon===E?l(v):a(t).icon===ae?l(b,1):a(t).icon===te?l(S,2):a(t).icon===q?l(y,3):a(t).icon===K?l(p,4):l(T,!1)})}s(n);var g=o(n,2),x=i(g),h=i(x,!0);s(x);var A=o(x,2),d=i(A,!0);s(A),s(g);var he=o(g,2),Qe=i(he);ze(Qe,{size:14}),s(he),s(r),$(()=>{z(h,a(t).name),z(d,a(t).description)}),w("click",r,()=>Le(a(t))),m(e,r)}),s(me),s(Y);var Je=o(Y,2);{var Xe=e=>{var t=Ft(),r=o(i(t),2);ee(r,21,()=>a(re),n=>n.name,(n,c)=>{var v=Pt(),b=i(v),S=i(b);zt(S,{size:15}),s(b);var y=o(b,2),p=i(y),T=i(p,!0);s(p);var g=o(p,2),x=i(g,!0);s(g),s(y);var h=o(y,2),A=i(h);ze(A,{size:14}),s(h),s(v),$(d=>{z(T,a(c).name),z(x,d)},[()=>Te(a(c).created_at)]),w("click",v,()=>Me(a(c))),m(n,v)}),s(r),s(t),m(e,t)};j(Je,e=>{a(Se)&&e(Xe)})}s(le),s(J),$(e=>{ve=dt(L,1,"prompt-box svelte-1uha8ag",null,ve,{disabled:a(u)}),P.disabled=a(u),F.disabled=a(u),M.disabled=e},[()=>a(u)||!a(f).trim()]),w("keydown",P,Ce),vt(P,()=>a(f),e=>D(f,e)),w("click",F,Fe),w("change",pe,Ae),w("click",M,oe),m(O,J),at(),ie()}Ze(["keydown","click","change"]);export{Rt as component};
