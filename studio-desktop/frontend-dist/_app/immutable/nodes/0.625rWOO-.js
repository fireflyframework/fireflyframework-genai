import"../chunks/DsnmJJEf.js";import{h as gn,b as xr,bk as Sr,d as Os,a2 as Ar,bl as $r,bm as Nr,ax as Tr,aL as ps,g as gs,e as fs,i as Mr,aw as Rr,c as qe,f as J,a as d,w as Da,ad as ia,ba as zs,T as Ra,p as Sa,l as Ta,G as u,j as Aa,Q as ie,B as n,W as We,C as t,D as r,t as e,z as D,F as X,V as $,A as g,S as dt,o as wn,X as En,Z as as,U as ka,aq as Un,R as Hn,m as hs,bn as Is,b9 as Cr,bo as Or}from"../chunks/BESIXtBI.js";import{a as Tt,b as Ia,p as Pa,i as Za,c as Ya,d as zr,L as ns,G as Cn,T as Ps,C as ha,e as Qa,f as Fn,g as Na,S as ss,h as rs,P as Gn,F as Ls,j as Ir,R as Pr,A as Lr,k as Dr,l as jr,D as Br,B as fn,W as Ds,m as Ur,n as Hr,o as Fr,q as Gr,r as Kr,s as Wr,M as Kn,Z as _n,t as qr,I as js,E as On,u as Bs,v as Vr,w as Zr,x as Yr,y as Xr,z as Jr,H as Qr,J as zn,K as ei,N as ti,O as ai,Q as ni,U as Wn}from"../chunks/BI8CVrNj.js";import{I as wt,s as Et,y as si,z as cn,A as ri,C as Us,E as xa,c as Qt,a as Rt,L as kn,G as Ga,i as et,b as la,H as qn,J as Ka,p as In,e as yt,T as is,x as Ot,r as Jt,P as os,K as Vn,m as bs,B as ii,h as Hs,D as Zn,M as ma,n as Yn,g as Fs,S as Xn,X as mn,N as Jn,v as Va,t as Fa,O as oi,Q as Gs,R as li,U as Qn,V as ci,j as _s,F as ms,W as dn,Y as di}from"../chunks/0zSFSexy.js";import{B as ui,l as kt,s as xt,p as Ks,i as M,a as Ca,c as zt,b as hn}from"../chunks/CJh9TUc0.js";import{s as vi,a as pi,g as qa}from"../chunks/gvU2Nsg7.js";import{s as sn,c as Wa,d as es,a as un,r as gi,b as Pn,e as ts,f as bn,p as ys}from"../chunks/8I91iWf8.js";import{i as Ws}from"../chunks/CiPkpaXo.js";import{c as tn}from"../chunks/DaAgYj3T.js";import{I as fi}from"../chunks/p0Zj8fW7.js";const hi=Symbol("NaN");function bi(s,i,l){gn&&xr();var c=new ui(s),b=!Sr();Os(()=>{var x=i();x!==x&&(x=hi),b&&x!==null&&typeof x=="object"&&(x={}),c.ensure(x,l)})}function _i(s,i){let l=null,c=gn;var b;if(gn){l=Mr;for(var x=Rr(document.head);x!==null&&(x.nodeType!==Tr||x.data!==s);)x=ps(x);if(x===null)gs(!1);else{var v=ps(x);x.remove(),fs(v)}}gn||(b=document.head.appendChild(Ar()));try{Os(()=>i(b),$r|Nr)}finally{c&&(gs(!0),fs(l))}}const mi=!1,yi=!1,rd=Object.freeze(Object.defineProperty({__proto__:null,prerender:yi,ssr:mi},Symbol.toStringTag,{value:"Module"})),ls="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='100'%20cy='100'%20r='100'%20fill='url(%23paint0_linear_76_8)'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M100%2027C96.9983%2027.0001%2094.0805%2027.9929%2091.6991%2029.8243C89.3177%2031.6558%2087.6058%2034.2235%2086.8289%2037.1294C86.052%2040.0353%2086.2535%2043.1169%2087.4021%2045.8963C88.5507%2048.6758%2090.5823%2050.9977%2093.1818%2052.502V61.1667H72.7273C50.9091%2061.1667%2045.4545%2079.3912%2045.4545%2088.5V136.333C45.4545%20140.891%2048.1818%20150%2059.0909%20150H65.9091V122.667C65.9091%20120.854%2066.6274%20119.116%2067.9061%20117.835C69.1847%20116.553%2070.919%20115.833%2072.7273%20115.833H127.273C129.081%20115.833%20130.815%20116.553%20132.094%20117.835C133.373%20119.116%20134.091%20120.854%20134.091%20122.667V150H140.909C151.818%20150%20154.545%20140.891%20154.545%20136.333V88.5C154.545%2066.6333%20136.361%2061.1667%20127.273%2061.1667H106.818V52.502C109.418%2050.9977%20111.449%2048.6758%20112.598%2045.8963C113.747%2043.1169%20113.948%2040.0353%20113.171%2037.1294C112.394%2034.2235%20110.682%2031.6558%20108.301%2029.8243C105.92%2027.9929%20103.002%2027.0001%20100%2027ZM120.455%20150V129.5H106.818V150H120.455ZM93.1818%20150V129.5H79.5455V150H93.1818ZM161.364%20129.5V95.3333C165.911%2095.3333%20175%2098.0667%20175%20109V115.833C175%20120.391%20172.273%20129.5%20161.364%20129.5ZM38.6364%2095.3333V129.5C27.7273%20129.5%2025%20120.391%2025%20115.833V109C25%2098.0667%2034.0886%2095.3333%2038.6364%2095.3333ZM79.5455%2088.5C77.7372%2088.5%2076.0029%2089.2199%2074.7243%2090.5014C73.4456%2091.7829%2072.7273%2093.521%2072.7273%2095.3333C72.7273%2097.1456%2073.4456%2098.8837%2074.7243%20100.165C76.0029%20101.447%2077.7372%20102.167%2079.5455%20102.167H79.5523C81.3606%20102.167%2083.0948%20101.447%2084.3735%20100.165C85.6521%2098.8837%2086.3705%2097.1456%2086.3705%2095.3333C86.3705%2093.521%2085.6521%2091.7829%2084.3735%2090.5014C83.0948%2089.2199%2081.3606%2088.5%2079.5523%2088.5H79.5455ZM113.636%2095.3333C113.636%2093.521%20114.355%2091.7829%20115.633%2090.5014C116.912%2089.2199%20118.646%2088.5%20120.455%2088.5H120.461C122.27%2088.5%20124.004%2089.2199%20125.283%2090.5014C126.561%2091.7829%20127.28%2093.521%20127.28%2095.3333C127.28%2097.1456%20126.561%2098.8837%20125.283%20100.165C124.004%20101.447%20122.27%20102.167%20120.461%20102.167H120.455C118.646%20102.167%20116.912%20101.447%20115.633%20100.165C114.355%2098.8837%20113.636%2097.1456%20113.636%2095.3333Z'%20fill='white'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_76_8'%20x1='200'%20y1='100'%20x2='0'%20y2='100'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F68000'/%3e%3cstop%20offset='1'%20stop-color='%23FFF9C1'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",wi=()=>{const s=vi;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},Ei={subscribe(s){return wi().page.subscribe(s)}};function qs(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M12 20v-9"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"}],["path",{d:"M14.12 3.88 16 2"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97"}],["path",{d:"M22 13h-4"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97"}],["path",{d:"M6 13H2"}],["path",{d:"m8 2 1.88 1.88"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13"}]];wt(s,xt({name:"bug"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function ki(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}]];wt(s,xt({name:"panel-left"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function xi(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];wt(s,xt({name:"save"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Si(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];wt(s,xt({name:"power"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}const vn=Da(null),pn=Da(!1),La=Da("stopped");let Pt=null;const da=[];function Ai(){Pt||(Pt=new si("/ws/execution"),Pt.connect(),da.push(Pt.on("node_start",s=>{s.node_id&&(Ia.update(i=>{const l=new Set(i);return l.add(s.node_id),l}),cn(s.node_id,"running")),Pa(s)})),da.push(Pt.on("node_complete",s=>{s.node_id&&(Ia.update(i=>{const l=new Set(i);return l.delete(s.node_id),l}),cn(s.node_id,"complete")),Pa(s)})),da.push(Pt.on("node_error",s=>{s.node_id&&(Ia.update(i=>{const l=new Set(i);return l.delete(s.node_id),l}),cn(s.node_id,"error")),Pa(s)})),da.push(Pt.on("node_skip",s=>{s.node_id&&(Ia.update(i=>{const l=new Set(i);return l.delete(s.node_id),l}),cn(s.node_id,"skipped")),Pa(s)})),da.push(Pt.on("debug_enabled",s=>{Pa(s),Tt("Debug mode active","info")})),da.push(Pt.on("error",s=>{Pa(s),Tt(s.message||s.error||"An error occurred","error")})),da.push(Pt.on("pipeline_complete",s=>{Ia.set(new Set),Za.set(!1),Ya.set(!1),Pa(s),ri()})),da.push(Pt.on("checkpoint_created",s=>{zr.update(i=>[...i,s])})),da.push(Pt.on("pipeline_result",s=>{Ia.set(new Set),Za.set(!1),Ya.set(!1),Pa(s)})),da.push(Pt.on("_close",()=>{Ia.set(new Set),Za.set(!1),Ya.set(!1)})),da.push(Pt.on("_error",()=>{Ia.set(new Set),Za.set(!1),Ya.set(!1),Tt("Execution connection lost. Attempting to reconnect...","warning")})),da.push(Pt.on("_reconnect_failed",()=>{Tt("Could not reconnect to execution server. Please refresh the page.","error",0)})))}function $i(){for(const s of da)s();da.length=0,Pt?.disconnect(),Pt=null}function Vs(s,i){if(!Pt||!Pt.connected)return Tt("Cannot run pipeline: not connected to execution server","error"),!1;Us(),Za.set(!0);const l=ia(xa)?.name??"";return Pt.send({action:"run",graph:s,inputs:i??null,project:l}),!0}function cs(s,i){if(!Pt||!Pt.connected)return Tt("Cannot debug pipeline: not connected to execution server","error"),!1;Us(),Ya.set(!0);const l=ia(xa)?.name??"";return Pt.send({action:"debug",graph:s,inputs:null,project:l}),!0}const an=Da("checking"),Zs=Da(""),Ni={subscribe:an.subscribe};Zs.subscribe;zs(an,s=>s==="connected");let nn=null;async function ws(){try{const s=await fetch("/api/health",{signal:AbortSignal.timeout(3e3)});if(s.ok){const i=await s.json();an.set("connected"),Zs.set(i.version??"")}else an.set("disconnected")}catch{an.set("disconnected")}}function Ti(s=1e4){nn||(ws(),nn=setInterval(ws,s))}function Mi(){nn&&(clearInterval(nn),nn=null)}function Ri(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];wt(s,xt({name:"external-link"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}var Ci=g('<span class="spin-icon svelte-1vh905b"><!></span> <span class="svelte-1vh905b"> </span>',1),Oi=g('<!> <span class="svelte-1vh905b"> </span>',1),zi=g('<div class="tunnel-active-badge svelte-1vh905b"><!> <span class="svelte-1vh905b">Publicly accessible</span></div>'),Ii=g(`<div class="install-card svelte-1vh905b"><div class="install-header svelte-1vh905b"><!> <span class="svelte-1vh905b">cloudflared not installed</span></div> <p class="install-desc svelte-1vh905b">Cloudflare Tunnel requires the <code class="svelte-1vh905b">cloudflared</code> CLI tool.
							Install it to enable public tunnel sharing.</p> <div class="install-commands svelte-1vh905b"><div class="install-cmd svelte-1vh905b"><span class="cmd-label svelte-1vh905b">macOS (Homebrew)</span> <div class="cmd-row svelte-1vh905b"><code class="svelte-1vh905b">brew install cloudflared</code> <button class="copy-btn-sm svelte-1vh905b"><!></button></div></div> <div class="install-cmd svelte-1vh905b"><span class="cmd-label svelte-1vh905b">Linux</span> <div class="cmd-row svelte-1vh905b"><code class="svelte-1vh905b">curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /usr/local/bin/cloudflared && chmod +x /usr/local/bin/cloudflared</code> <button class="copy-btn-sm svelte-1vh905b"><!></button></div></div></div> <a class="install-link svelte-1vh905b" href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/downloads/" target="_blank" rel="noopener"><!> <span class="svelte-1vh905b">View all download options</span></a></div>`),Pi=g('<div class="url-card svelte-1vh905b"><div class="url-header svelte-1vh905b"><!> <label class="url-label svelte-1vh905b">Pipeline API Endpoint</label></div> <div class="url-row svelte-1vh905b"><code class="url-value svelte-1vh905b"> </code> <button class="copy-btn svelte-1vh905b"><!></button></div> <p class="url-hint svelte-1vh905b">Send a POST request with JSON to run your pipeline remotely.</p></div> <div class="usage-card svelte-1vh905b"><div class="usage-header svelte-1vh905b"><!> <span class="svelte-1vh905b">Usage Example</span> <button class="copy-btn-sm svelte-1vh905b"><!></button></div> <pre class="usage-code svelte-1vh905b"> </pre></div>',1),Li=g('<div class="urls-section svelte-1vh905b"><div class="url-card svelte-1vh905b"><div class="url-header svelte-1vh905b"><!> <label class="url-label svelte-1vh905b">Public Studio URL</label></div> <div class="url-row svelte-1vh905b"><code class="url-value svelte-1vh905b"> </code> <button class="copy-btn svelte-1vh905b"><!></button></div> <p class="url-hint svelte-1vh905b">Open this URL in any browser to access your studio remotely.</p></div> <!></div>'),Di=g('<span class="footer-warn svelte-1vh905b">Anyone with this URL can access your studio</span>'),ji=g(`<div class="share-backdrop svelte-1vh905b"><div class="share-modal svelte-1vh905b" role="dialog" aria-modal="true" aria-label="Share &amp; Expose"><div class="share-header svelte-1vh905b"><div class="share-title svelte-1vh905b"><!> <span class="svelte-1vh905b">Share & Expose</span></div> <kbd class="share-close-hint svelte-1vh905b">ESC</kbd></div> <div class="share-body svelte-1vh905b"><div class="tunnel-card svelte-1vh905b"><div class="tunnel-status-row svelte-1vh905b"><div class="tunnel-status-info svelte-1vh905b"><span></span> <span class="tunnel-label svelte-1vh905b"> </span></div> <button><!></button></div> <p class="tunnel-desc svelte-1vh905b">Expose your local Firefly Studio via a Cloudflare Tunnel.
						Anyone with the URL can access your studio and run your pipelines remotely.</p> <!></div> <!> <!></div> <div class="share-footer svelte-1vh905b"><!> <button class="btn-close svelte-1vh905b">Close</button></div></div></div>`);function Bi(s,i){Sa(i,!0);const l=()=>zt(vn,"$tunnelUrl",x),c=()=>zt(pn,"$tunnelActive",x),b=()=>zt(xa,"$currentProject",x),[x,v]=Ca();let p=Ks(i,"open",3,!1),K=ie(!1),R=ie(null),N=dt(l),te=dt(c),L=dt(()=>b()?.name??""),Q=ie(!1),Z=dt(()=>e(N)?`${e(N)}/api/projects/${e(L)}/run`:null),q=dt(()=>e(N)?e(N):null),V=dt(()=>e(Z)?`curl -X POST ${e(Z)} \\
  -H "Content-Type: application/json" \\
  -d '{"input": "Hello, world!"}'`:"");Ta(()=>{p()&&le()});async function le(){try{const y=await Qt.tunnel.status();pn.set(y.active),vn.set(y.url),u(Q,y.cloudflared_installed===!1)}catch{}}async function me(){u(K,!0),u(Q,!1);try{const y=await Qt.tunnel.start();y.error?(u(Q,!0),Tt("cloudflared is not installed","error")):(pn.set(!0),vn.set(y.url),Tt("Tunnel started — your studio is now publicly accessible","success"))}catch(y){const se=y?.message||y?.detail||"";se.includes("not installed")?(u(Q,!0),Tt("cloudflared is not installed","error")):Tt(se||"Failed to start tunnel","error")}finally{u(K,!1)}}async function tt(){u(K,!0);try{await Qt.tunnel.stop(),pn.set(!1),vn.set(null),Tt("Tunnel stopped","success")}catch{Tt("Failed to stop tunnel","error")}finally{u(K,!1)}}async function z(y,se){try{await navigator.clipboard.writeText(y),u(R,se,!0),setTimeout(()=>{u(R,null)},2e3)}catch{Tt("Failed to copy","error")}}function ne(y){y.target===y.currentTarget&&i.onclose()}function F(y){y.key==="Escape"&&(y.preventDefault(),i.onclose())}var $e=qe(),ye=J($e);{var Le=y=>{var se=ji(),pe=n(se),we=n(pe),G=n(we),je=n(G);ns(je,{size:18}),We(2),t(G),We(2),t(we);var Be=r(we,2),nt=n(Be),de=n(nt),Se=n(de),Oe=n(Se);let st;var rt=r(Oe,2),Nt=n(rt,!0);t(rt),t(Se);var lt=r(Se,2);let pt;var Ht=n(lt);{var Ft=_=>{var P=Ci(),U=J(P),j=n(U);kn(j,{size:13}),t(U);var be=r(U,2),he=n(be,!0);t(be),D(()=>X(he,e(te)?"Stopping...":"Starting...")),d(_,P)},ta=_=>{var P=Oi(),U=J(P);Cn(U,{size:13});var j=r(U,2),be=n(j,!0);t(j),D(()=>X(be,e(te)?"Stop Tunnel":"Start Tunnel")),d(_,P)};M(Ht,_=>{e(K)?_(Ft):_(ta,!1)})}t(lt),t(de);var at=r(de,4);{var W=_=>{var P=zi(),U=n(P);Cn(U,{size:11}),We(2),t(P),d(_,P)};M(at,_=>{e(te)&&e(N)&&_(W)})}t(nt);var oe=r(nt,2);{var ge=_=>{var P=Ii(),U=n(P),j=n(U);Ps(j,{size:14}),We(2),t(U);var be=r(U,4),he=n(be),Ue=r(n(he),2),Ce=r(n(Ue),2),He=n(Ce);{var St=vt=>{ha(vt,{size:11})},Vt=vt=>{Qa(vt,{size:11})};M(He,vt=>{e(R)==="brew"?vt(St):vt(Vt,!1)})}t(Ce),t(Ue),t(he);var ft=r(he,2),ut=r(n(ft),2),ht=r(n(ut),2),Fe=n(ht);{var It=vt=>{ha(vt,{size:11})},Lt=vt=>{Qa(vt,{size:11})};M(Fe,vt=>{e(R)==="linux"?vt(It):vt(Lt,!1)})}t(ht),t(ut),t(ft),t(be);var aa=r(be,2),ca=n(aa);Ri(ca,{size:12}),We(2),t(aa),t(P),$("click",Ce,()=>z("brew install cloudflared","brew")),$("click",ht,()=>z("curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /usr/local/bin/cloudflared && chmod +x /usr/local/bin/cloudflared","linux")),d(_,P)};M(oe,_=>{e(Q)&&_(ge)})}var w=r(oe,2);{var C=_=>{var P=Li(),U=n(P),j=n(U),be=n(j);Cn(be,{size:13}),We(2),t(j);var he=r(j,2),Ue=n(he),Ce=n(Ue,!0);t(Ue);var He=r(Ue,2),St=n(He);{var Vt=Fe=>{ha(Fe,{size:13})},ft=Fe=>{Qa(Fe,{size:13})};M(St,Fe=>{e(R)==="studio"?Fe(Vt):Fe(ft,!1)})}t(He),t(he),We(2),t(U);var ut=r(U,2);{var ht=Fe=>{var It=Pi(),Lt=J(It),aa=n(Lt),ca=n(aa);Fn(ca,{size:13}),We(2),t(aa);var vt=r(aa,2),Ze=n(vt),Ye=n(Ze,!0);t(Ze);var h=r(Ze,2),k=n(h);{var m=Me=>{ha(Me,{size:13})},a=Me=>{Qa(Me,{size:13})};M(k,Me=>{e(R)==="api"?Me(m):Me(a,!1)})}t(h),t(vt),We(2),t(Lt);var o=r(Lt,2),f=n(o),O=n(f);Fn(O,{size:12});var _e=r(O,4),ze=n(_e);{var T=Me=>{ha(Me,{size:11})},A=Me=>{Qa(Me,{size:11})};M(ze,Me=>{e(R)==="curl"?Me(T):Me(A,!1)})}t(_e),t(f);var B=r(f,2),Je=n(B,!0);t(B),t(o),D(()=>{X(Ye,e(Z)),X(Je,e(V))}),$("click",h,()=>z(e(Z),"api")),$("click",_e,()=>z(e(V),"curl")),d(Fe,It)};M(ut,Fe=>{e(Z)&&Fe(ht)})}t(P),D(()=>X(Ce,e(q))),$("click",He,()=>z(e(q),"studio")),d(_,P)};M(w,_=>{e(te)&&e(N)&&_(C)})}t(Be);var ce=r(Be,2),fe=n(ce);{var Ee=_=>{var P=Di();d(_,P)};M(fe,_=>{e(te)&&_(Ee)})}var ke=r(fe,2);t(ce),t(pe),t(se),D(()=>{st=Rt(Oe,1,"tunnel-dot svelte-1vh905b",null,st,{"tunnel-dot-active":e(te)}),X(Nt,e(te)?"Tunnel Active":"Tunnel Inactive"),pt=Rt(lt,1,"tunnel-toggle-btn svelte-1vh905b",null,pt,{"tunnel-stop":e(te)}),lt.disabled=e(K)}),$("click",se,ne),$("keydown",se,F),$("click",lt,function(..._){(e(te)?tt:me)?.apply(this,_)}),$("click",ke,function(..._){i.onclose?.apply(this,_)}),d(y,se)};M(ye,y=>{p()&&y(Le)})}d(s,$e),Aa(),v()}Ra(["click","keydown"]);var Ui=g('<a href="/" class="brand-link svelte-11yu8dz"><img alt="Firefly Agentic Studio" class="brand-logo svelte-11yu8dz"/> <span class="brand svelte-11yu8dz">Firefly Agentic Studio</span></a>'),Hi=g("<span></span>"),Fi=g('<div class="dropdown-confirm-delete svelte-11yu8dz"><p class="confirm-delete-msg svelte-11yu8dz">Delete <strong class="svelte-11yu8dz"> </strong>?</p> <p class="confirm-delete-warn svelte-11yu8dz">This action cannot be undone.</p> <div class="confirm-delete-actions svelte-11yu8dz"><button class="confirm-cancel-btn svelte-11yu8dz">Cancel</button> <button class="confirm-delete-btn svelte-11yu8dz">Delete</button></div></div>'),Gi=g('<span class="dropdown-active-label svelte-11yu8dz">active</span>'),Ki=g('<button class="dropdown-item-delete svelte-11yu8dz" title="Delete project"><!></button>'),Wi=g('<div><span></span> <span class="dropdown-item-name svelte-11yu8dz"> </span> <!> <!></div>'),qi=g('<div class="dropdown-items svelte-11yu8dz"></div> <div class="dropdown-create svelte-11yu8dz"><input class="dropdown-input svelte-11yu8dz" type="text" placeholder="New project name..."/> <button class="dropdown-create-btn svelte-11yu8dz"><!></button></div>',1),Vi=g('<div class="project-backdrop svelte-11yu8dz"></div> <div class="project-dropdown svelte-11yu8dz"><div class="dropdown-header svelte-11yu8dz"><span class="svelte-11yu8dz">Projects</span> <span class="dropdown-count svelte-11yu8dz"> </span></div> <!></div>',1),Zi=g('<span class="dirty-dot svelte-11yu8dz"></span>'),Yi=g("<button><!> <!></button>"),Xi=g('<!> <span class="separator svelte-11yu8dz">/</span> <div class="project-container svelte-11yu8dz"><button class="project-selector svelte-11yu8dz"><span class="project-dot svelte-11yu8dz"></span> <span class="project-name svelte-11yu8dz"> </span> <!></button> <!></div> <!>',1),Ji=g('<span class="spin-icon svelte-11yu8dz"><!></span> <span class="svelte-11yu8dz">Running...</span> <span class="pulse-dot svelte-11yu8dz"></span>',1),Qi=g('<!> <span class="svelte-11yu8dz">Run</span>',1),eo=g("<button><!></button>"),to=g('<span class="pulse-dot debug-dot svelte-11yu8dz"></span>'),ao=g("<button><!> <!></button>"),no=g("<button><span></span> <!></button>"),so=g('<!> <!> <!> <div class="divider svelte-11yu8dz"></div>',1),ro=g('<button class="btn-icon svelte-11yu8dz"><!></button>'),io=g('<button class="btn-icon svelte-11yu8dz"><!></button>'),oo=g("<button><!></button>"),lo=g('<div class="run-dialog-backdrop svelte-11yu8dz"><div class="run-dialog svelte-11yu8dz"><h3 class="run-dialog-title svelte-11yu8dz">Run Pipeline</h3> <p class="run-dialog-hint svelte-11yu8dz">Provide input for your pipeline (or leave blank to run without input)</p> <textarea class="run-dialog-input svelte-11yu8dz" placeholder="Enter your question or input..."></textarea> <div class="run-dialog-actions svelte-11yu8dz"><button class="run-dialog-cancel svelte-11yu8dz">Cancel</button> <button class="run-dialog-go svelte-11yu8dz"><!> Run</button></div></div></div>'),co=g('<header class="top-bar svelte-11yu8dz"><div class="top-bar-left svelte-11yu8dz"><!> <!></div> <div class="top-bar-spacer svelte-11yu8dz"></div> <div class="top-bar-right svelte-11yu8dz"><!> <!> <!> <!></div></header> <!> <!>',1);function uo(s,i){Sa(i,!0);const l=()=>zt(Za,"$isRunning",N),c=()=>zt(Ya,"$isDebugging",N),b=()=>zt(Ni,"$connectionState",N),x=()=>zt(La,"$runtimeStatus",N),v=()=>zt(xa,"$currentProject",N),p=()=>zt(In,"$projects",N),K=()=>zt(qn,"$isDirty",N),R=()=>zt(Wa,"$architectSidebarOpen",N),[N,te]=Ca();let L=Ks(i,"isHomePage",3,!1),Q=dt(l),Z=dt(c),q=dt(()=>e(Q)||e(Z)),V=dt(b),le=ie(!1),me=ie(""),tt=ie(!1),z=ie(null),ne=ie(!1),F=ie(!1),$e=ie("");pi(()=>{u(le,!1),u(F,!1),u(ne,!1),u(z,null)}),wn(()=>{function _(){je()}return window.addEventListener("firefly:run-pipeline",_),()=>window.removeEventListener("firefly:run-pipeline",_)});function ye(){u(le,!e(le)),u(me,"")}async function Le(){const _=e(me).trim();if(!(!_||e(tt))){u(tt,!0);try{await Qt.projects.create(_),await Vn();const U=ia(In).find(j=>j.name===_);U&&bs(U),u(me,""),u(le,!1)}catch{Tt("Failed to create project","error")}finally{u(tt,!1)}}}async function y(_){_&&(bs(_),u(le,!1))}function se(_){if(ia(In).length<=1){Tt("Cannot delete the only project","error");return}u(z,_,!0)}async function pe(){if(!e(z))return;const _=e(z);u(z,null);try{await Qt.projects.delete(_),await Vn(),Tt(`Project "${_}" deleted`,"success")}catch{Tt("Failed to delete project","error")}}function we(){u(z,null)}async function G(){const _=ia(xa);if(_)try{const P=Ka();await Qt.projects.savePipeline(_.name,"main",P),qn.set(!1),Tt("Pipeline saved","success")}catch{Tt("Failed to save pipeline","error")}}function je(){ia(Ga).length!==0&&(u(F,!0),u($e,""))}function Be(){u(F,!1),Vs(Ka(),e($e)||void 0)}function nt(){cs(Ka())}function de(){Wa.update(_=>!_)}let Se=dt(x),Oe=ie(!1);Ta(()=>{const _=v();_&&!L()&&Qt.runtime.status(_.name).then(P=>{La.set(P.status)}).catch(()=>{La.set("stopped")})});async function st(){const _=ia(xa);if(!_||e(Oe))return;if(ia(Ga).length===0){Tt("Add nodes to your pipeline before starting the runtime","error");return}u(Oe,!0);try{e(Se)==="running"?(La.set("stopped"),await Qt.runtime.stop(_.name),La.set("stopped"),Tt("Runtime stopped","success")):(La.set("starting"),await Qt.runtime.start(_.name),La.set("running"),Tt("Runtime started","success"))}catch(U){La.set("error");const j=U?.message||"Runtime toggle failed";Tt(j,"error")}finally{u(Oe,!1)}}var rt=co(),Nt=J(rt),lt=n(Nt),pt=n(lt);Na(pt,{text:"Home",description:"Return to the home page",children:(_,P)=>{var U=Ui(),j=n(U);We(2),t(U),D(()=>et(j,"src",ls)),d(_,U)},$$slots:{default:!0}});var Ht=r(pt,2);{var Ft=_=>{var P=Xi(),U=J(P);{let ft=dt(()=>e(V)==="connected"?"Connected":e(V)==="disconnected"?"Disconnected":"Checking..."),ut=dt(()=>e(V)==="connected"?"Backend server is running and reachable":e(V)==="disconnected"?"Cannot reach the backend server":"Verifying connection to backend...");Na(U,{get text(){return e(ft)},get description(){return e(ut)},children:(ht,Fe)=>{var It=Hi();let Lt;D(()=>Lt=Rt(It,1,"conn-dot svelte-11yu8dz",null,Lt,{"conn-ok":e(V)==="connected","conn-fail":e(V)==="disconnected","conn-check":e(V)==="checking"})),d(ht,It)},$$slots:{default:!0}})}var j=r(U,4),be=n(j),he=r(n(be),2),Ue=n(he,!0);t(he);var Ce=r(he,2);rs(Ce,{size:10,class:"project-chevron"}),t(be);var He=r(be,2);{var St=ft=>{var ut=Vi(),ht=J(ut),Fe=r(ht,2),It=n(Fe),Lt=r(n(It),2),aa=n(Lt,!0);t(Lt),t(It);var ca=r(It,2);{var vt=Ye=>{var h=Fi(),k=n(h),m=r(n(k)),a=n(m,!0);t(m),We(),t(k);var o=r(k,4),f=n(o),O=r(f,2);t(o),t(h),D(()=>X(a,e(z))),$("click",f,we),$("click",O,pe),d(Ye,h)},Ze=Ye=>{var h=qi(),k=J(h);yt(k,5,p,Ot,(O,_e)=>{var ze=Wi();let T;var A=n(ze);let B;var Je=r(A,2),Me=n(Je,!0);t(Je);var Ae=r(Je,2);{var Ne=gt=>{var Mt=Gi();d(gt,Mt)};M(Ae,gt=>{v()?.name===e(_e).name&&gt(Ne)})}var At=r(Ae,2);{var Gt=gt=>{var Mt=Ki(),bt=n(Mt);is(bt,{size:12}),t(Mt),$("click",Mt,Zt=>{Zt.stopPropagation(),se(e(_e).name)}),d(gt,Mt)};M(At,gt=>{p().length>1&&gt(Gt)})}t(ze),D(()=>{T=Rt(ze,1,"dropdown-item svelte-11yu8dz",null,T,{active:v()?.name===e(_e).name}),B=Rt(A,1,"dropdown-item-dot svelte-11yu8dz",null,B,{"dot-active":v()?.name===e(_e).name}),X(Me,e(_e).name)}),$("click",ze,()=>y(e(_e))),d(O,ze)}),t(k);var m=r(k,2),a=n(m);Jt(a);var o=r(a,2),f=n(o);os(f,{size:14}),t(o),t(m),D(O=>o.disabled=O,[()=>!e(me).trim()||e(tt)]),$("keydown",a,O=>O.key==="Enter"&&Le()),la(a,()=>e(me),O=>u(me,O)),$("click",o,Le),d(Ye,h)};M(ca,Ye=>{e(z)?Ye(vt):Ye(Ze,!1)})}t(Fe),D(()=>X(aa,p().length)),$("click",ht,()=>{u(le,!1),u(z,null)}),$("keydown",ht,()=>{}),d(ft,ut)};M(He,ft=>{e(le)&&ft(St)})}t(j);var Vt=r(j,2);{let ft=dt(()=>K()?"Save Pipeline (unsaved changes)":"Save Pipeline");Na(Vt,{get text(){return e(ft)},shortcut:"Cmd+S",description:"Save the current pipeline graph to this project",children:(ut,ht)=>{var Fe=Yi();let It;var Lt=n(Fe);xi(Lt,{size:14});var aa=r(Lt,2);{var ca=vt=>{var Ze=Zi();d(vt,Ze)};M(aa,vt=>{K()&&vt(ca)})}t(Fe),D(()=>It=Rt(Fe,1,"btn-save svelte-11yu8dz",null,It,{"has-changes":K()})),$("click",Fe,G),d(ut,Fe)},$$slots:{default:!0}})}D(()=>X(Ue,v()?.name??"No project")),$("click",be,ye),d(_,P)};M(Ht,_=>{L()||_(Ft)})}t(lt);var ta=r(lt,4),at=n(ta);{var W=_=>{var P=so(),U=J(P);Na(U,{text:"Run Pipeline",description:"Execute the pipeline with an optional input prompt",children:(he,Ue)=>{var Ce=eo();let He;var St=n(Ce);{var Vt=ut=>{var ht=Ji(),Fe=J(ht),It=n(Fe);kn(It,{size:14}),t(Fe),We(4),d(ut,ht)},ft=ut=>{var ht=Qi(),Fe=J(ht);Gn(Fe,{size:14}),We(2),d(ut,ht)};M(St,ut=>{e(Q)?ut(Vt):ut(ft,!1)})}t(Ce),D(()=>{He=Rt(Ce,1,"btn-run svelte-11yu8dz",null,He,{"btn-run-active":e(Q)}),Ce.disabled=e(q)}),$("click",Ce,je),d(he,Ce)},$$slots:{default:!0}});var j=r(U,2);Na(j,{text:"Debug",description:"Run the pipeline in debug mode with step-by-step node execution",children:(he,Ue)=>{var Ce=ao();let He;var St=n(Ce);qs(St,{size:16});var Vt=r(St,2);{var ft=ut=>{var ht=to();d(ut,ht)};M(Vt,ut=>{e(Z)&&ut(ft)})}t(Ce),D(()=>{He=Rt(Ce,1,"btn-icon svelte-11yu8dz",null,He,{"btn-debug-active":e(Z)}),Ce.disabled=e(q)}),$("click",Ce,nt),d(he,Ce)},$$slots:{default:!0}});var be=r(j,2);{let he=dt(()=>e(Se)==="running"?"Stop Runtime":e(Se)==="starting"?"Starting...":e(Se)==="error"?"Runtime Error":"Start Runtime"),Ue=dt(()=>e(Se)==="running"?"Stop background processes (queue consumers, schedulers)":e(Se)==="starting"?"Runtime is initialising queue consumers and schedulers":e(Se)==="error"?"The runtime encountered an error — click to retry":"Start background processes for queue triggers, schedules, and live API serving");Na(be,{get text(){return e(he)},get description(){return e(Ue)},children:(Ce,He)=>{var St=no();let Vt;var ft=n(St);let ut;var ht=r(ft,2);Si(ht,{size:13}),t(St),D(()=>{Vt=Rt(St,1,"btn-runtime svelte-11yu8dz",null,Vt,{"runtime-running":e(Se)==="running","runtime-error":e(Se)==="error","runtime-starting":e(Se)==="starting"}),St.disabled=e(Oe),ut=Rt(ft,1,"runtime-dot svelte-11yu8dz",null,ut,{"rt-running":e(Se)==="running","rt-stopped":e(Se)==="stopped","rt-error":e(Se)==="error","rt-starting":e(Se)==="starting"})}),$("click",St,st),d(Ce,St)},$$slots:{default:!0}})}We(2),d(_,P)};M(at,_=>{L()||_(W)})}var oe=r(at,2);{var ge=_=>{Na(_,{text:"Share & Expose",description:"Create a public tunnel URL to share your studio with others via Cloudflare",children:(P,U)=>{var j=ro(),be=n(j);ns(be,{size:16}),t(j),$("click",j,()=>u(ne,!0)),d(P,j)},$$slots:{default:!0}})};M(oe,_=>{L()||_(ge)})}var w=r(oe,2);Na(w,{text:"Settings",description:"Configure API keys, model defaults, and studio preferences",children:(_,P)=>{var U=io(),j=n(U);ss(j,{size:16}),t(U),$("click",U,()=>sn.set(!0)),d(_,U)},$$slots:{default:!0}});var C=r(w,2);{var ce=_=>{Na(_,{text:"The Architect",shortcut:"Cmd+/",description:"Toggle the AI assistant sidebar — describe what you want to build and The Architect will design it",children:(P,U)=>{var j=oo();let be;var he=n(j);ki(he,{size:16}),t(j),D(()=>be=Rt(j,1,"btn-icon svelte-11yu8dz",null,be,{"architect-active":R()})),$("click",j,de),d(P,j)},$$slots:{default:!0}})};M(C,_=>{L()||_(ce)})}t(ta),t(Nt);var fe=r(Nt,2);Bi(fe,{get open(){return e(ne)},onclose:()=>u(ne,!1)});var Ee=r(fe,2);{var ke=_=>{var P=lo(),U=n(P),j=r(n(U),4);En(j),et(j,"rows",4);var be=r(j,2),he=n(be),Ue=r(he,2),Ce=n(Ue);Gn(Ce,{size:14}),We(),t(Ue),t(be),t(U),t(P),$("click",P,()=>u(F,!1)),$("keydown",P,He=>He.key==="Escape"&&u(F,!1)),$("click",U,He=>He.stopPropagation()),$("keydown",U,()=>{}),$("keydown",j,He=>{He.key==="Enter"&&(He.metaKey||He.ctrlKey)&&Be()}),la(j,()=>e($e),He=>u($e,He)),$("click",he,()=>u(F,!1)),$("click",Ue,Be),d(_,P)};M(Ee,_=>{e(F)&&_(ke)})}d(s,rt),Aa(),te()}Ra(["click","keydown"]);function vo(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 15h18"}]];wt(s,xt({name:"panel-bottom"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function po(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M15 3v18"}]];wt(s,xt({name:"panel-right"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function go(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"m18 16 4-4-4-4"}],["path",{d:"m6 8-4 4 4 4"}],["path",{d:"m14.5 4-5 16"}]];wt(s,xt({name:"code-xml"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}var fo=g('<div class="command-palette-empty svelte-1g6akjj">No matching commands</div>'),ho=g('<kbd class="command-palette-item-shortcut svelte-1g6akjj"> </kbd>'),bo=g('<button role="option"><span class="command-palette-item-icon svelte-1g6akjj"><!></span> <span class="command-palette-item-label svelte-1g6akjj"> </span> <!></button>'),_o=g('<div class="command-palette-category svelte-1g6akjj"> </div> <!>',1),mo=g('<div class="command-palette-backdrop svelte-1g6akjj"><div class="command-palette svelte-1g6akjj" role="dialog" aria-modal="true" aria-label="Command palette"><div class="command-palette-input-wrapper svelte-1g6akjj"><!> <input type="text" class="command-palette-input svelte-1g6akjj" placeholder="Type a command..." spellcheck="false" autocomplete="off" role="combobox" aria-expanded="true" aria-controls="command-palette-results"/> <kbd class="command-palette-kbd svelte-1g6akjj">ESC</kbd></div> <div id="command-palette-results" class="command-palette-results svelte-1g6akjj" role="listbox"><!></div> <div class="command-palette-footer svelte-1g6akjj"><span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">↑↓</kbd> navigate</span> <span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">↵</kbd> select</span> <span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">esc</kbd> close</span></div></div></div>');function yo(s,i){Sa(i,!0);const l=()=>zt(es,"$commandPaletteOpen",c),[c,b]=Ca(),x=[{id:"nav-construct",label:"Go to Construct",category:"Navigation",icon:ii,action:()=>qa("/construct")},{id:"nav-evaluate",label:"Go to Evaluate",category:"Navigation",icon:Ls,action:()=>qa("/evaluate")},{id:"nav-experiments",label:"Go to Experiments",category:"Navigation",icon:Ir,action:()=>qa("/experiments")},{id:"nav-deploy",label:"Go to Deploy",category:"Navigation",icon:Pr,action:()=>qa("/deploy")},{id:"nav-monitor",label:"Go to Monitor",category:"Navigation",icon:Lr,action:()=>qa("/monitor")},{id:"nav-files",label:"Go to Files",category:"Navigation",icon:Dr,action:()=>qa("/files")},{id:"node-input",label:"Add Input Node",category:"Add Node",icon:jr,action:()=>ma("input","Input")},{id:"node-output",label:"Add Output Node",category:"Add Node",icon:Br,action:()=>ma("output","Output")},{id:"node-agent",label:"Add Agent Node",category:"Add Node",icon:fn,action:()=>ma("agent","Agent")},{id:"node-tool",label:"Add Tool Node",category:"Add Node",icon:Ds,action:()=>ma("tool","Tool")},{id:"node-reasoning",label:"Add Reasoning Node",category:"Add Node",icon:Hs,action:()=>ma("reasoning","Reasoning")},{id:"node-condition",label:"Add Condition Node",category:"Add Node",icon:Ur,action:()=>ma("condition","Condition")},{id:"node-memory",label:"Add Memory Node",category:"Add Node",icon:Zn,action:()=>ma("memory","Memory")},{id:"node-validator",label:"Add Validator Node",category:"Add Node",icon:Hr,action:()=>ma("validator","Validator")},{id:"node-code",label:"Add Code Node",category:"Add Node",icon:Fr,action:()=>ma("custom_code","Code")},{id:"node-fanout",label:"Add Fan Out Node",category:"Add Node",icon:Gr,action:()=>ma("fan_out","Fan Out")},{id:"node-fanin",label:"Add Fan In Node",category:"Add Node",icon:Kr,action:()=>ma("fan_in","Fan In")},{id:"open-settings",label:"Open Settings",category:"Settings",icon:ss,action:()=>sn.set(!0),shortcut:"⌘,"},{id:"pipeline-run",label:"Run Pipeline",category:"Pipeline Actions",icon:Gn,action:()=>Vs(Ka())},{id:"pipeline-debug",label:"Debug Pipeline",category:"Pipeline Actions",icon:qs,action:()=>cs(Ka())},{id:"view-bottom-panel",label:"Toggle Bottom Panel",category:"View",icon:vo,action:()=>un.update(z=>!z)},{id:"view-right-panel",label:"Toggle Right Panel",category:"View",icon:po,action:()=>gi.update(z=>!z)},{id:"view-tab-console",label:"Switch to Console Tab",category:"View",icon:Fn,action:()=>{un.set(!0),Pn.set("console")}},{id:"view-tab-code",label:"Switch to Code Tab",category:"View",icon:go,action:()=>{un.set(!0),Pn.set("code")}},{id:"view-tab-timeline",label:"Switch to Timeline Tab",category:"View",icon:Wr,action:()=>{un.set(!0),Pn.set("timeline")}},{id:"view-tab-chat",label:"Toggle AI Assistant Sidebar",category:"View",icon:Kn,action:()=>{Wa.update(z=>!z)}}];let v=ie(""),p=ie(0),K=ie(null);function R(z,ne){let F=0,$e=0,ye=-1;for(let Le=0;Le<z.length&&F<ne.length;Le++)z[Le]===ne[F]&&(ye>=0&&($e+=Le-ye-1),ye=Le,F++);return F===ne.length?$e:-1}let N=dt(()=>{if(!e(v).trim())return x;const z=e(v).toLowerCase(),ne=x.map(F=>{const $e=R(F.label.toLowerCase(),z),ye=R(F.category.toLowerCase(),z),Le=$e>=0&&ye>=0?Math.min($e,ye):Math.max($e,ye);return{cmd:F,score:Le}}).filter(F=>F.score>=0);return ne.sort((F,$e)=>F.score-$e.score),ne.map(F=>F.cmd)}),te=dt(()=>{const z=[];let ne=0;const F=new Map,$e=[];for(const ye of e(N))F.has(ye.category)||(F.set(ye.category,[]),$e.push(ye.category)),F.get(ye.category).push({...ye,globalIndex:ne}),ne++;for(const ye of $e)z.push({category:ye,items:F.get(ye)});return z});Ta(()=>{e(p)>=e(N).length&&u(p,Math.max(0,e(N).length-1),!0)}),Ta(()=>{l()&&(u(v,""),u(p,0),queueMicrotask(()=>e(K)?.focus()))});function L(){es.set(!1)}function Q(z){L(),queueMicrotask(()=>z.action())}function Z(z){if(z.key==="Escape"){z.preventDefault(),L();return}if(z.key==="ArrowDown"){z.preventDefault(),u(p,(e(p)+1)%e(N).length),q();return}if(z.key==="ArrowUp"){z.preventDefault(),u(p,(e(p)-1+e(N).length)%e(N).length),q();return}if(z.key==="Enter"){z.preventDefault();const ne=e(N)[e(p)];ne&&Q(ne);return}}function q(){queueMicrotask(()=>{const z=e(N)[e(p)];z&&document.getElementById(`cmd-item-${z.id}`)?.scrollIntoView({block:"nearest"})})}function V(z){z.target===z.currentTarget&&L()}var le=qe(),me=J(le);{var tt=z=>{var ne=mo(),F=n(ne),$e=n(F),ye=n($e);Yn(ye,{size:16});var Le=r(ye,2);Jt(Le),hn(Le,G=>u(K,G),()=>e(K)),We(2),t($e);var y=r($e,2),se=n(y);{var pe=G=>{var je=fo();d(G,je)},we=G=>{var je=qe(),Be=J(je);yt(Be,17,()=>e(te),Ot,(nt,de)=>{var Se=_o(),Oe=J(Se),st=n(Oe,!0);t(Oe);var rt=r(Oe,2);yt(rt,17,()=>e(de).items,Ot,(Nt,lt)=>{var pt=bo();let Ht;var Ft=n(pt),ta=n(Ft);tn(ta,()=>e(lt).icon,(w,C)=>{C(w,{size:16})}),t(Ft);var at=r(Ft,2),W=n(at,!0);t(at);var oe=r(at,2);{var ge=w=>{var C=ho(),ce=n(C,!0);t(C),D(()=>X(ce,e(lt).shortcut)),d(w,C)};M(oe,w=>{e(lt).shortcut&&w(ge)})}t(pt),D(()=>{et(pt,"id",`cmd-item-${e(lt).id??""}`),Ht=Rt(pt,1,"command-palette-item svelte-1g6akjj",null,Ht,{selected:e(lt).globalIndex===e(p)}),et(pt,"aria-selected",e(lt).globalIndex===e(p)),X(W,e(lt).label)}),$("click",pt,()=>Q(e(lt))),as("mouseenter",pt,()=>{u(p,e(lt).globalIndex,!0)}),d(Nt,pt)}),D(()=>X(st,e(de).category)),d(nt,Se)}),d(G,je)};M(se,G=>{e(N).length===0?G(pe):G(we,!1)})}t(y),We(2),t(F),t(ne),D(()=>et(Le,"aria-activedescendant",e(N).length>0?`cmd-item-${e(N)[e(p)]?.id}`:void 0)),$("click",ne,V),$("keydown",Le,Z),la(Le,()=>e(v),G=>u(v,G)),d(z,ne)};M(me,z=>{l()&&z(tt)})}d(s,le),Aa(),b()}Ra(["click","keydown"]);function wo(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M10 8h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M14 8h.01"}],["path",{d:"M16 12h.01"}],["path",{d:"M18 8h.01"}],["path",{d:"M6 8h.01"}],["path",{d:"M7 16h10"}],["path",{d:"M8 12h.01"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}]];wt(s,xt({name:"keyboard"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}var Eo=g('<span class="shortcuts-separator svelte-9545z7">+</span>'),ko=g('<!> <kbd class="shortcuts-kbd svelte-9545z7"> </kbd>',1),xo=g('<div class="shortcuts-row svelte-9545z7"><span class="shortcuts-description svelte-9545z7"> </span> <span class="shortcuts-keys svelte-9545z7"></span></div>'),So=g('<div class="shortcuts-group svelte-9545z7"><div class="shortcuts-category svelte-9545z7"> </div> <!></div>'),Ao=g('<div class="shortcuts-backdrop svelte-9545z7"><div class="shortcuts-modal svelte-9545z7" role="dialog" aria-modal="true" aria-label="Keyboard Shortcuts"><div class="shortcuts-header svelte-9545z7"><div class="shortcuts-title svelte-9545z7"><!> <span>Keyboard Shortcuts</span></div> <kbd class="shortcuts-close-hint svelte-9545z7">ESC</kbd></div> <div class="shortcuts-body svelte-9545z7"></div></div></div>');function $o(s,i){Sa(i,!1);const l=()=>zt(ts,"$shortcutsModalOpen",c),[c,b]=Ca(),v=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"⌘":"Ctrl",p=[{category:"General",shortcuts:[{keys:`${v} + K`,description:"Open command palette"},{keys:`${v} + ,`,description:"Open settings"},{keys:`${v} + /`,description:"Toggle AI assistant"},{keys:"?",description:"Show keyboard shortcuts"},{keys:"Esc",description:"Close modal / palette"}]},{category:"Pipeline",shortcuts:[{keys:`${v} + Enter`,description:"Run pipeline"},{keys:`${v} + Shift + D`,description:"Toggle debug mode"}]},{category:"Canvas",shortcuts:[{keys:"Delete / Backspace",description:"Remove selected node"},{keys:`${v} + D`,description:"Duplicate selected node"},{keys:"Space (hold)",description:"Pan canvas"},{keys:`${v} + +`,description:"Zoom in"},{keys:`${v} + -`,description:"Zoom out"}]}];function K(){ts.set(!1)}function R(Z){Z.target===Z.currentTarget&&K()}function N(Z){Z.key==="Escape"&&(Z.preventDefault(),K())}Ws();var te=qe(),L=J(te);{var Q=Z=>{var q=Ao(),V=n(q),le=n(V),me=n(le),tt=n(me);wo(tt,{size:18}),We(2),t(me),We(2),t(le);var z=r(le,2);yt(z,5,()=>p,Ot,(ne,F)=>{var $e=So(),ye=n($e),Le=n(ye,!0);t(ye);var y=r(ye,2);yt(y,1,()=>e(F).shortcuts,Ot,(se,pe)=>{var we=xo(),G=n(we),je=n(G,!0);t(G);var Be=r(G,2);yt(Be,5,()=>e(pe).keys.split(" + "),Ot,(nt,de,Se)=>{var Oe=ko(),st=J(Oe);{var rt=pt=>{var Ht=Eo();d(pt,Ht)};M(st,pt=>{Se>0&&pt(rt)})}var Nt=r(st,2),lt=n(Nt,!0);t(Nt),D(pt=>X(lt,pt),[()=>e(de).trim()]),d(nt,Oe)}),t(Be),t(we),D(()=>X(je,e(pe).description)),d(se,we)}),t($e),D(()=>X(Le,e(F).category)),d(ne,$e)}),t(z),t(V),t(q),$("click",q,R),$("keydown",q,N),d(Z,q)};M(L,Z=>{l()&&Z(Q)})}d(s,te),Aa(),b()}Ra(["click","keydown"]);function Ys(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];wt(s,xt({name:"user"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function No(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"}]];wt(s,xt({name:"key-round"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Es(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M12 20v2"}],["path",{d:"M12 2v2"}],["path",{d:"M17 20v2"}],["path",{d:"M17 2v2"}],["path",{d:"M2 12h2"}],["path",{d:"M2 17h2"}],["path",{d:"M2 7h2"}],["path",{d:"M20 12h2"}],["path",{d:"M20 17h2"}],["path",{d:"M20 7h2"}],["path",{d:"M7 20v2"}],["path",{d:"M7 2v2"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1"}]];wt(s,xt({name:"cpu"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Ln(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];wt(s,xt({name:"eye-off"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function To(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z"}],["path",{d:"M2 9h20"}]];wt(s,xt({name:"gem"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Mo(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2"}]];wt(s,xt({name:"wind"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Ro(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44"}],["path",{d:"m13.56 11.747 4.332-.924"}],["path",{d:"m16 21-3.105-6.21"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z"}],["path",{d:"m6.158 8.633 1.114 4.456"}],["path",{d:"m8 21 3.105-6.21"}],["circle",{cx:"12",cy:"13",r:"2"}]];wt(s,xt({name:"telescope"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Co(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];wt(s,xt({name:"layers"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Oo(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];wt(s,xt({name:"cloud"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function ks(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18"}]];wt(s,xt({name:"server"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Xs(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];wt(s,xt({name:"monitor"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}var zo=g('<span class="sidebar-badge svelte-1hvu725"> </span>'),Io=g('<button><!> <div class="sidebar-item-text svelte-1hvu725"><span class="sidebar-item-label svelte-1hvu725"> </span> <span class="sidebar-item-desc svelte-1hvu725"> </span></div> <!></button>'),Po=g('<span class="save-success svelte-1hvu725"><!> Saved</span>'),Lo=g('<div class="personality-preview svelte-1hvu725"><!> <span class="svelte-1hvu725">The Architect speaks with measured authority and philosophical precision. He will address you by name and guide you through the design of your pipeline.</span></div>'),Do=g('<div class="personality-preview neutral svelte-1hvu725"><!> <span class="svelte-1hvu725">A friendly, helpful AI assistant that guides you through building pipelines.</span></div>'),jo=g(`<div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Your Information</h3> <p class="card-desc svelte-1hvu725">The Architect and Oracle use this to personalise interactions.</p> <div class="fields-grid svelte-1hvu725"><div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-name">Name</label> <input id="settings-name" type="text" class="field-input svelte-1hvu725" placeholder="Your name"/></div> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-role">Role</label> <input id="settings-role" type="text" class="field-input svelte-1hvu725" placeholder="e.g. ML Engineer"/></div></div> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-context">Context <span class="field-optional svelte-1hvu725">(optional)</span></label> <textarea id="settings-context" class="field-textarea svelte-1hvu725" placeholder="Tell the assistant about your project, preferences, or constraints..." rows="3"></textarea></div></div> <div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Assistant Personality</h3> <p class="card-desc svelte-1hvu725">Choose the AI assistant's persona. "The Architect" uses a philosophical,
								Matrix-inspired personality. Any other name uses a standard helpful assistant.</p> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-assistant-name">Assistant Name</label> <input id="settings-assistant-name" type="text" class="field-input svelte-1hvu725" placeholder="The Architect"/></div> <!></div>`,1),Bo=g('<span class="provider-badge svelte-1hvu725"><!> Active</span>'),Uo=g('<div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725"> </label> <div class="field-with-toggle svelte-1hvu725"><input class="field-input field-mono svelte-1hvu725"/> <button class="field-toggle svelte-1hvu725" type="button"><!></button></div></div>'),Ho=g('<div><div class="provider-header svelte-1hvu725"><div class="provider-icon-wrap svelte-1hvu725"><!></div> <span class="provider-name svelte-1hvu725"> </span> <!></div> <div class="provider-fields svelte-1hvu725"></div></div>'),Fo=g('<p class="section-intro svelte-1hvu725">Configure API keys for your LLM providers. Keys are stored locally and never sent to external services.</p> <div class="providers-grid svelte-1hvu725"></div>',1),Go=g('<span class="provider-badge svelte-1hvu725"><!> Active</span>'),Ko=g('<div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725"> </label> <div class="field-with-toggle svelte-1hvu725"><input class="field-input field-mono svelte-1hvu725"/> <button class="field-toggle svelte-1hvu725" type="button"><!></button></div></div>'),Wo=g('<div><div class="provider-header svelte-1hvu725"><div class="provider-icon-wrap svelte-1hvu725"><!></div> <span class="provider-name svelte-1hvu725"> </span> <!></div> <div class="provider-fields svelte-1hvu725"></div></div>'),qo=g('<button class="dropdown-item svelte-1hvu725"><span class="dropdown-item-dot svelte-1hvu725"></span> </button>'),Vo=g('<div class="dropdown-category svelte-1hvu725"><span class="dropdown-category-label svelte-1hvu725"> </span> <!></div>'),Zo=g('<div class="dropdown-backdrop svelte-1hvu725"></div> <div class="add-service-dropdown svelte-1hvu725"></div>',1),Yo=g('<div class="empty-services svelte-1hvu725"><span class="empty-services-text svelte-1hvu725">No service connections configured yet. Click "Add Service" to get started.</span></div>'),Xo=g("<div> </div>"),Jo=g('<label class="toggle-switch svelte-1hvu725"><input type="checkbox" class="svelte-1hvu725"/> <span class="toggle-slider svelte-1hvu725"></span></label>'),Qo=g('<input type="number" class="field-input field-mono field-narrow svelte-1hvu725"/>'),el=g('<div class="field-with-toggle svelte-1hvu725"><input class="field-input field-mono svelte-1hvu725"/> <button class="field-toggle svelte-1hvu725" type="button"><!></button></div>'),tl=g('<input type="text" class="field-input field-mono svelte-1hvu725"/>'),al=g('<div class="service-field-row svelte-1hvu725"><label class="field-label svelte-1hvu725"> </label> <!></div>'),nl=g('<div class="service-card svelte-1hvu725"><div class="service-card-header svelte-1hvu725"><div class="service-card-icon svelte-1hvu725"><!></div> <span class="service-card-label svelte-1hvu725"> </span> <span class="service-card-type svelte-1hvu725"> </span> <div class="service-card-actions svelte-1hvu725"><button class="btn-service-action svelte-1hvu725" title="Test connection"><!></button> <button class="btn-service-action btn-service-delete svelte-1hvu725" title="Remove service"><!></button></div></div> <!> <div class="service-card-fields svelte-1hvu725"></div></div>'),sl=g('<div class="service-category-group svelte-1hvu725"><span class="service-category-label svelte-1hvu725"> </span> <div class="service-cards-list svelte-1hvu725"></div></div>'),rl=g('<p class="section-intro svelte-1hvu725">Configure credentials for pipeline tools. These enable search, database, and messaging capabilities in your pipelines.</p> <div class="providers-grid svelte-1hvu725"></div> <div class="service-connections-section svelte-1hvu725"><div class="service-connections-header svelte-1hvu725"><div class="service-connections-title-row svelte-1hvu725"><!> <h3 class="card-title svelte-1hvu725" style="margin: 0;">Service Connections</h3></div> <p class="card-desc svelte-1hvu725" style="margin-bottom: 0;">Manage external service connections for databases, queues, and third-party APIs.</p></div> <div class="add-service-wrap svelte-1hvu725"><button class="btn-add-service svelte-1hvu725"><!> <span class="svelte-1hvu725">Add Service</span> <!></button> <!></div> <!></div>',1),il=g('<div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Default Model</h3> <p class="card-desc svelte-1hvu725">This model is used for new agent nodes and The Architect. You can override per-node.</p> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725">Model</label> <!></div></div> <div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Generation Parameters</h3> <p class="card-desc svelte-1hvu725">Control the creativity and reliability of model outputs.</p> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-temperature">Temperature</label> <div class="range-row svelte-1hvu725"><input id="settings-temperature" type="range" class="field-range svelte-1hvu725" min="0" max="2" step="0.01"/> <span class="range-value svelte-1hvu725"> </span></div> <div class="range-labels svelte-1hvu725"><span class="svelte-1hvu725">Precise</span> <span class="svelte-1hvu725">Creative</span></div></div> <div class="field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-retries">Max Retries</label> <p class="field-hint svelte-1hvu725">Number of retry attempts if a model call fails.</p> <input id="settings-retries" type="number" class="field-input field-narrow svelte-1hvu725" min="0" max="10"/></div></div>',1),ol=g('<div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Firefly Agentic Studio</h3> <p class="card-desc svelte-1hvu725">A visual IDE for building, testing, and deploying AI agent pipelines.</p> <div class="about-rows svelte-1hvu725"><div class="about-row svelte-1hvu725"><span class="about-label svelte-1hvu725">Version</span> <span class="about-value svelte-1hvu725">0.1.0-alpha</span></div> <div class="about-row svelte-1hvu725"><span class="about-label svelte-1hvu725">Framework</span> <span class="about-value svelte-1hvu725">Firefly Framework GenAI</span></div> <div class="about-row svelte-1hvu725"><span class="about-label svelte-1hvu725">Backend</span> <span class="about-value svelte-1hvu725">FastAPI + Python 3.11+</span></div> <div class="about-row svelte-1hvu725"><span class="about-label svelte-1hvu725">Frontend</span> <span class="about-value svelte-1hvu725">SvelteKit 5 + TypeScript</span></div> <div class="about-row svelte-1hvu725"><span class="about-label svelte-1hvu725">License</span> <span class="about-value svelte-1hvu725">Apache 2.0</span></div></div></div> <div class="section-card svelte-1hvu725"><h3 class="card-title svelte-1hvu725">Keyboard Shortcuts</h3> <div class="shortcuts-grid svelte-1hvu725"><div class="shortcut-row svelte-1hvu725"><span class="shortcut-label svelte-1hvu725">Save Pipeline</span> <kbd class="svelte-1hvu725">Cmd + S</kbd></div> <div class="shortcut-row svelte-1hvu725"><span class="shortcut-label svelte-1hvu725">Toggle Architect</span> <kbd class="svelte-1hvu725">Cmd + /</kbd></div> <div class="shortcut-row svelte-1hvu725"><span class="shortcut-label svelte-1hvu725">Command Palette</span> <kbd class="svelte-1hvu725">Cmd + K</kbd></div> <div class="shortcut-row svelte-1hvu725"><span class="shortcut-label svelte-1hvu725">Close Modal / Panel</span> <kbd class="svelte-1hvu725">ESC</kbd></div></div></div>',1),ll=g('<div class="settings-overlay svelte-1hvu725"><div class="settings-page svelte-1hvu725"><aside class="settings-sidebar svelte-1hvu725"><div class="sidebar-header svelte-1hvu725"><!> <span class="svelte-1hvu725">Settings</span></div> <nav class="sidebar-nav svelte-1hvu725"></nav> <div class="sidebar-footer svelte-1hvu725"><button class="btn-close-sidebar svelte-1hvu725"><!> <span class="svelte-1hvu725">Close</span> <kbd class="esc-hint svelte-1hvu725">ESC</kbd></button></div></aside> <main class="settings-content svelte-1hvu725"><div class="content-header svelte-1hvu725"><h2 class="content-title svelte-1hvu725"> </h2> <div class="content-actions svelte-1hvu725"><!> <button class="btn-save svelte-1hvu725"> </button></div></div> <div class="content-body svelte-1hvu725"><!></div></main></div></div>');function cl(s,i){Sa(i,!0);const l=()=>zt(sn,"$settingsModalOpen",b),c=()=>zt(Fs,"$settingsData",b),[b,x]=Ca(),v=[{id:"profile",label:"Profile",icon:Ys,desc:"Your name, role, and assistant personality"},{id:"providers",label:"API Keys",icon:No,desc:"Configure LLM provider credentials"},{id:"tools",label:"Tool Credentials",icon:Ds,desc:"Search, database, and messaging keys"},{id:"models",label:"Model Defaults",icon:qr,desc:"Default model, temperature, and retries"},{id:"about",label:"About",icon:js,desc:"Version and system information"}],p=[{label:"Search",icon:Yn,color:"#f59e0b",fields:[{key:"serpapi_api_key",label:"SerpAPI Key",placeholder:"API key"},{key:"serper_api_key",label:"Serper Key",placeholder:"API key"},{key:"tavily_api_key",label:"Tavily Key",placeholder:"tvly-..."}]},{label:"Data",icon:Zn,color:"#3b82f6",fields:[{key:"database_url",label:"Database URL",placeholder:"postgresql://..."},{key:"redis_url",label:"Redis URL",placeholder:"redis://localhost:6379"}]},{label:"Messaging",icon:Kn,color:"#8b5cf6",fields:[{key:"slack_bot_token",label:"Slack Bot Token",placeholder:"xoxb-..."},{key:"telegram_bot_token",label:"Telegram Bot Token",placeholder:"Bot token"}]}],K=[{id:"openai",label:"OpenAI",icon:Xn,color:"#10a37f",fields:[{key:"openai_api_key",label:"API Key",placeholder:"sk-..."}]},{id:"anthropic",label:"Anthropic",icon:Hs,color:"#d4a574",fields:[{key:"anthropic_api_key",label:"API Key",placeholder:"sk-ant-..."}]},{id:"google",label:"Google Gemini",icon:To,color:"#4285f4",fields:[{key:"google_api_key",label:"API Key",placeholder:"AIza..."}]},{id:"groq",label:"Groq",icon:_n,color:"#f55036",fields:[{key:"groq_api_key",label:"API Key",placeholder:"gsk_..."}]},{id:"mistral",label:"Mistral",icon:Mo,color:"#ff7000",fields:[{key:"mistral_api_key",label:"API Key",placeholder:"API key"}]},{id:"deepseek",label:"DeepSeek",icon:Ro,color:"#4d6bfe",fields:[{key:"deepseek_api_key",label:"API Key",placeholder:"API key"}]},{id:"cohere",label:"Cohere",icon:Co,color:"#39594d",fields:[{key:"cohere_api_key",label:"API Key",placeholder:"API key"}]},{id:"azure",label:"Azure OpenAI",icon:Oo,color:"#0078d4",fields:[{key:"azure_openai_api_key",label:"API Key",placeholder:"API key"},{key:"azure_openai_endpoint",label:"Endpoint URL",placeholder:"https://your-resource.openai.azure.com/"}]},{id:"bedrock",label:"Amazon Bedrock",icon:ks,color:"#ff9900",fields:[{key:"aws_access_key_id",label:"Access Key ID",placeholder:"AKIA..."},{key:"aws_secret_access_key",label:"Secret Access Key",placeholder:"Secret key"},{key:"aws_default_region",label:"Region",placeholder:"us-east-1"}]},{id:"ollama",label:"Ollama (Local)",icon:Xs,color:"#ffffff",fields:[{key:"ollama_base_url",label:"Base URL",placeholder:"http://localhost:11434"}]}],R=[{type:"serpapi",label:"SerpAPI",category:"Search",fields:["api_key"]},{type:"serper",label:"Serper",category:"Search",fields:["api_key"]},{type:"tavily",label:"Tavily",category:"Search",fields:["api_key"]},{type:"postgresql",label:"PostgreSQL",category:"Databases",fields:["host","port","username","password","database","ssl_enabled"],defaultPort:5432},{type:"mysql",label:"MySQL",category:"Databases",fields:["host","port","username","password","database","ssl_enabled"],defaultPort:3306},{type:"sqlite",label:"SQLite",category:"Databases",fields:["database"]},{type:"mongodb",label:"MongoDB",category:"Databases",fields:["host","port","username","password","database","connection_url"],defaultPort:27017},{type:"redis",label:"Redis",category:"Queues",fields:["host","port","password","database","ssl_enabled"],defaultPort:6379},{type:"rabbitmq",label:"RabbitMQ",category:"Queues",fields:["host","port","username","password","ssl_enabled"],defaultPort:5672},{type:"slack",label:"Slack",category:"Messaging",fields:["token"]},{type:"telegram",label:"Telegram",category:"Messaging",fields:["token"]},{type:"discord",label:"Discord",category:"Messaging",fields:["token"]}],N={Search:"#f59e0b",Databases:"#3b82f6",Queues:"#10b981",Messaging:"#8b5cf6"},te={api_key:"API Key",host:"Host",port:"Port",username:"Username",password:"Password",database:"Database",ssl_enabled:"SSL Enabled",connection_url:"Connection URL",token:"Token"};let L=ie(ka([])),Q=ie(!1),Z=ie(null),q=ie(null),V=ie(null),le=ie(!1);async function me(){try{u(L,await Qt.settings.services.list(),!0)}catch{u(L,[],!0)}u(le,!0)}async function tt(w){const C={id:globalThis.crypto.randomUUID(),service_type:w.type,label:w.label};"defaultPort"in w&&(C.port=w.defaultPort);try{const ce=await Qt.settings.services.add(C);await me(),u(Q,!1)}catch{}}async function z(w){u(V,w,!0);try{await Qt.settings.services.delete(w),u(L,e(L).filter(C=>C.id!==w),!0)}catch{}finally{u(V,null)}}async function ne(w){u(Z,w,!0),u(q,null);try{const C=await Qt.settings.services.test(w);u(q,{id:w,status:C.status,message:C.message},!0)}catch(C){u(q,{id:w,status:"error",message:C.message||"Connection failed"},!0)}finally{u(Z,null)}}async function F(w,C,ce){const fe=e(L).find(ke=>ke.id===w);if(!fe)return;const Ee={...fe,[C]:ce};try{await Qt.settings.services.add(Ee),u(L,e(L).map(ke=>ke.id===w?Ee:ke),!0)}catch{}}function $e(){const w={};for(const C of e(L)){const fe=R.find(Ee=>Ee.type===C.service_type)?.category??"Other";w[fe]||(w[fe]=[]),w[fe].push(C)}return Object.entries(w).map(([C,ce])=>({category:C,items:ce}))}function ye(w){return R.find(C=>C.type===w)?.fields??[]}const Le=[...new Set(R.map(w=>w.category))];let y=ie("profile"),se=ie(!1),pe=ie(!1),we=ie(ka({})),G=ie("openai:gpt-4o"),je=ie(.7),Be=ie(3),nt=ie(""),de=ie(""),Se=ie(""),Oe=ie("The Architect"),st=ie(ka({})),rt=ie(ka(new Set));function Nt(w){const C=new Set(e(rt));C.has(w)?C.delete(w):C.add(w),u(rt,C,!0)}Ta(()=>{l()&&c()&&(u(we,{},!0),u(st,{},!0),u(G,c().model_defaults.default_model,!0),u(je,c().model_defaults.temperature,!0),u(Be,c().model_defaults.retries,!0),c().user_profile&&(u(nt,c().user_profile.name||"",!0),u(de,c().user_profile.role||"",!0),u(Se,c().user_profile.context||"",!0),u(Oe,c().user_profile.assistant_name||"The Architect",!0)),u(y,"profile"),u(pe,!1),u(rt,new Set,!0),u(le,!1),u(L,[],!0))}),Ta(()=>{e(y)==="tools"&&!e(le)&&me()});function lt(w){if(!c())return!1;const C=c().credentials[w];return C!=null}function pt(w){if(!c())return!1;const C=c().tool_credentials;if(!C)return!1;const ce=C[w];return ce!=null&&ce!==""}let Ht=dt(()=>c()?K.filter(w=>w.fields.every(C=>lt(C.key))).length:0);function Ft(){sn.set(!1)}async function ta(){u(se,!0);try{const w={};for(const[Ee,ke]of Object.entries(e(we)))ke.trim()&&(w[Ee]=ke.trim());const C={name:e(nt).trim(),role:e(de).trim(),context:e(Se).trim(),assistant_name:e(Oe).trim()||"The Architect"},ce={};for(const[Ee,ke]of Object.entries(e(st)))ce[Ee]=ke.trim()||null;const fe=K.some(Ee=>Ee.fields.every(ke=>lt(ke.key)))||Object.values(w).some(Ee=>Ee!==null);await Jn(Object.keys(w).length>0?w:null,{default_model:e(G),temperature:e(je),retries:e(Be)},fe,C,Object.keys(ce).length>0?ce:null),u(pe,!0),setTimeout(()=>{u(pe,!1)},2e3)}catch{}finally{u(se,!1)}}function at(w){w.key==="Escape"&&(w.preventDefault(),Ft())}var W=qe(),oe=J(W);{var ge=w=>{var C=ll(),ce=n(C),fe=n(ce),Ee=n(fe),ke=n(Ee);ss(ke,{size:18}),We(2),t(Ee);var _=r(Ee,2);yt(_,21,()=>v,Ot,(Ze,Ye)=>{var h=Io();let k;var m=n(h);tn(m,()=>e(Ye).icon,(A,B)=>{B(A,{size:16})});var a=r(m,2),o=n(a),f=n(o,!0);t(o);var O=r(o,2),_e=n(O,!0);t(O),t(a);var ze=r(a,2);{var T=A=>{var B=zo(),Je=n(B);t(B),D(()=>X(Je,`${e(Ht)??""}/${K.length??""}`)),d(A,B)};M(ze,A=>{e(Ye).id==="providers"&&A(T)})}t(h),D(()=>{k=Rt(h,1,"sidebar-item svelte-1hvu725",null,k,{active:e(y)===e(Ye).id}),X(f,e(Ye).label),X(_e,e(Ye).desc)}),$("click",h,()=>u(y,e(Ye).id,!0)),d(Ze,h)}),t(_);var P=r(_,2),U=n(P),j=n(U);mn(j,{size:14}),We(4),t(U),t(P),t(fe);var be=r(fe,2),he=n(be),Ue=n(he),Ce=n(Ue,!0);t(Ue);var He=r(Ue,2),St=n(He);{var Vt=Ze=>{var Ye=Po(),h=n(Ye);ha(h,{size:14}),We(),t(Ye),d(Ze,Ye)};M(St,Ze=>{e(pe)&&Ze(Vt)})}var ft=r(St,2),ut=n(ft,!0);t(ft),t(He),t(he);var ht=r(he,2),Fe=n(ht);{var It=Ze=>{var Ye=jo(),h=J(Ye),k=r(n(h),4),m=n(k),a=r(n(m),2);Jt(a),t(m);var o=r(m,2),f=r(n(o),2);Jt(f),t(o),t(k);var O=r(k,2),_e=r(n(O),2);En(_e),t(O),t(h);var ze=r(h,2),T=r(n(ze),4),A=r(n(T),2);Jt(A),t(T);var B=r(T,2);{var Je=Ae=>{var Ne=Lo(),At=n(Ne);Es(At,{size:14}),We(2),t(Ne),d(Ae,Ne)},Me=Ae=>{var Ne=Do(),At=n(Ne);Es(At,{size:14}),We(2),t(Ne),d(Ae,Ne)};M(B,Ae=>{e(Oe)==="The Architect"?Ae(Je):Ae(Me,!1)})}t(ze),la(a,()=>e(nt),Ae=>u(nt,Ae)),la(f,()=>e(de),Ae=>u(de,Ae)),la(_e,()=>e(Se),Ae=>u(Se,Ae)),la(A,()=>e(Oe),Ae=>u(Oe,Ae)),d(Ze,Ye)},Lt=Ze=>{var Ye=Fo(),h=r(J(Ye),2);yt(h,21,()=>K,Ot,(k,m)=>{const a=dt(()=>e(m).fields.every(Ae=>lt(Ae.key)));var o=Ho();let f;var O=n(o),_e=n(O),ze=n(_e);tn(ze,()=>e(m).icon,(Ae,Ne)=>{Ne(Ae,{size:15})}),t(_e);var T=r(_e,2),A=n(T,!0);t(T);var B=r(T,2);{var Je=Ae=>{var Ne=Bo(),At=n(Ne);ha(At,{size:10}),We(),t(Ne),d(Ae,Ne)};M(B,Ae=>{e(a)&&Ae(Je)})}t(O);var Me=r(O,2);yt(Me,21,()=>e(m).fields,Ot,(Ae,Ne)=>{var At=Uo(),Gt=n(At),gt=n(Gt,!0);t(Gt);var Mt=r(Gt,2),bt=n(Mt);Jt(bt);var Zt=r(bt,2),oa=n(Zt);{var ea=Ct=>{Ln(Ct,{size:14})},Ge=dt(()=>e(rt).has(e(Ne).key)),Wt=Ct=>{On(Ct,{size:14})};M(oa,Ct=>{e(Ge)?Ct(ea):Ct(Wt,!1)})}t(Zt),t(Mt),t(At),D((Ct,_t)=>{et(Gt,"for",`settings-${e(Ne).key??""}`),X(gt,e(Ne).label),et(bt,"id",`settings-${e(Ne).key??""}`),et(bt,"type",Ct),et(bt,"placeholder",_t),Va(bt,e(we)[e(Ne).key]??"")},[()=>e(rt).has(e(Ne).key)?"text":"password",()=>lt(e(Ne).key)?"••••••••  (configured)":e(Ne).placeholder]),$("input",bt,Ct=>{e(we)[e(Ne).key]=Ct.target.value}),$("click",Zt,()=>Nt(e(Ne).key)),d(Ae,At)}),t(Me),t(o),D(()=>{f=Rt(o,1,"provider-card svelte-1hvu725",null,f,{configured:e(a)}),Fa(_e,`--provider-color: ${e(m).color??""}`),X(A,e(m).label)}),d(k,o)}),t(h),d(Ze,Ye)},aa=Ze=>{var Ye=rl(),h=r(J(Ye),2);yt(h,21,()=>p,Ot,(Ae,Ne)=>{const At=dt(()=>e(Ne).fields.some(_t=>pt(_t.key)));var Gt=Wo();let gt;var Mt=n(Gt),bt=n(Mt),Zt=n(bt);tn(Zt,()=>e(Ne).icon,(_t,$t)=>{$t(_t,{size:15})}),t(bt);var oa=r(bt,2),ea=n(oa,!0);t(oa);var Ge=r(oa,2);{var Wt=_t=>{var $t=Go(),Yt=n($t);ha(Yt,{size:10}),We(),t($t),d(_t,$t)};M(Ge,_t=>{e(At)&&_t(Wt)})}t(Mt);var Ct=r(Mt,2);yt(Ct,21,()=>e(Ne).fields,Ot,(_t,$t)=>{var Yt=Ko(),Xt=n(Yt),Oa=n(Xt,!0);t(Xt);var va=r(Xt,2),na=n(va);Jt(na);var pa=r(na,2),E=n(pa);{var re=H=>{Ln(H,{size:14})},Ie=dt(()=>e(rt).has(e($t).key)),ct=H=>{On(H,{size:14})};M(E,H=>{e(Ie)?H(re):H(ct,!1)})}t(pa),t(va),t(Yt),D((H,De)=>{et(Xt,"for",`settings-tool-${e($t).key??""}`),X(Oa,e($t).label),et(na,"id",`settings-tool-${e($t).key??""}`),et(na,"type",H),et(na,"placeholder",De),Va(na,e(st)[e($t).key]??"")},[()=>e(rt).has(e($t).key)?"text":"password",()=>pt(e($t).key)?"••••••••  (configured)":e($t).placeholder]),$("input",na,H=>{e(st)[e($t).key]=H.target.value}),$("click",pa,()=>Nt(e($t).key)),d(_t,Yt)}),t(Ct),t(Gt),D(()=>{gt=Rt(Gt,1,"provider-card svelte-1hvu725",null,gt,{configured:e(At)}),Fa(bt,`--provider-color: ${e(Ne).color??""}`),X(ea,e(Ne).label)}),d(Ae,Gt)}),t(h);var k=r(h,2),m=n(k),a=n(m),o=n(a);ns(o,{size:16}),We(2),t(a),We(2),t(m);var f=r(m,2),O=n(f),_e=n(O);os(_e,{size:14});var ze=r(_e,4);rs(ze,{size:12}),t(O);var T=r(O,2);{var A=Ae=>{var Ne=Zo(),At=J(Ne),Gt=r(At,2);yt(Gt,21,()=>Le,Ot,(gt,Mt)=>{var bt=Vo(),Zt=n(bt),oa=n(Zt,!0);t(Zt);var ea=r(Zt,2);yt(ea,17,()=>R.filter(Ge=>Ge.category===e(Mt)),Ot,(Ge,Wt)=>{var Ct=qo(),_t=n(Ct),$t=r(_t);t(Ct),D(()=>{Fa(_t,`background: ${N[e(Mt)]??"#888"??""}`),X($t,` ${e(Wt).label??""}`)}),$("click",Ct,()=>tt(e(Wt))),d(Ge,Ct)}),t(bt),D(()=>X(oa,e(Mt))),d(gt,bt)}),t(Gt),$("click",At,()=>u(Q,!1)),$("keydown",At,()=>{}),d(Ae,Ne)};M(T,Ae=>{e(Q)&&Ae(A)})}t(f);var B=r(f,2);{var Je=Ae=>{var Ne=Yo();d(Ae,Ne)},Me=Ae=>{var Ne=qe(),At=J(Ne);yt(At,17,$e,Ot,(Gt,gt)=>{var Mt=sl(),bt=n(Mt),Zt=n(bt,!0);t(bt);var oa=r(bt,2);yt(oa,21,()=>e(gt).items,ea=>ea.id,(ea,Ge)=>{const Wt=dt(()=>R.find(Qe=>Qe.type===e(Ge).service_type)),Ct=dt(()=>ye(e(Ge).service_type));var _t=nl(),$t=n(_t),Yt=n($t),Xt=n(Yt);{var Oa=Qe=>{Zn(Qe,{size:14})},va=Qe=>{ks(Qe,{size:14})},na=Qe=>{Kn(Qe,{size:14})},pa=Qe=>{Yn(Qe,{size:14})};M(Xt,Qe=>{e(gt).category==="Databases"?Qe(Oa):e(gt).category==="Queues"?Qe(va,1):e(gt).category==="Messaging"?Qe(na,2):Qe(pa,!1)})}t(Yt);var E=r(Yt,2),re=n(E,!0);t(E);var Ie=r(E,2),ct=n(Ie,!0);t(Ie);var H=r(Ie,2),De=n(H),it=n(De);{var Pe=Qe=>{kn(Qe,{size:13,class:"spinning"})},ue=Qe=>{Ls(Qe,{size:13})};M(it,Qe=>{e(Z)===e(Ge).id?Qe(Pe):Qe(ue,!1)})}t(De);var ot=r(De,2),Dt=n(ot);is(Dt,{size:13}),t(ot),t(H),t($t);var qt=r($t,2);{var ga=Qe=>{var Re=Xo();let sa;var jt=n(Re,!0);t(Re),D(()=>{sa=Rt(Re,1,"test-result-banner svelte-1hvu725",null,sa,{"test-success":e(q).status==="ok","test-error":e(q).status!=="ok"}),X(jt,e(q).message)}),d(Qe,Re)};M(qt,Qe=>{e(q)&&e(q).id===e(Ge).id&&Qe(ga)})}var ba=r(qt,2);yt(ba,21,()=>e(Ct),Ot,(Qe,Re)=>{var sa=al(),jt=n(sa),fa=n(jt,!0);t(jt);var Kt=r(jt,2);{var ya=Xe=>{var ee=Jo(),ae=n(ee);Jt(ae),We(2),t(ee),D(()=>{et(ae,"id",`svc-${e(Ge).id??""}-${e(Re)??""}`),oi(ae,e(Ge)[e(Re)]??!1)}),$("change",ae,Ke=>F(e(Ge).id,e(Re),Ke.target.checked)),d(Xe,ee)},ra=Xe=>{var ee=Qo();Jt(ee),D(ae=>{et(ee,"id",`svc-${e(Ge).id??""}-${e(Re)??""}`),et(ee,"placeholder",ae),Va(ee,e(Ge)[e(Re)]??"")},[()=>String(e(Wt)&&"defaultPort"in e(Wt)?e(Wt).defaultPort:"")]),$("change",ee,ae=>F(e(Ge).id,e(Re),parseInt(ae.target.value)||null)),d(Xe,ee)},ve=Xe=>{var ee=el(),ae=n(ee);Jt(ae);var Ke=r(ae,2),Ve=n(Ke);{var mt=Y=>{Ln(Y,{size:14})},S=dt(()=>e(rt).has(`svc-${e(Ge).id}-${e(Re)}`)),I=Y=>{On(Y,{size:14})};M(Ve,Y=>{e(S)?Y(mt):Y(I,!1)})}t(Ke),t(ee),D(Y=>{et(ae,"id",`svc-${e(Ge).id??""}-${e(Re)??""}`),et(ae,"type",Y),et(ae,"placeholder",te[e(Re)]??e(Re)),Va(ae,e(Ge)[e(Re)]??"")},[()=>e(rt).has(`svc-${e(Ge).id}-${e(Re)}`)?"text":"password"]),$("change",ae,Y=>F(e(Ge).id,e(Re),Y.target.value)),$("click",Ke,()=>Nt(`svc-${e(Ge).id}-${e(Re)}`)),d(Xe,ee)},ua=Xe=>{var ee=tl();Jt(ee),D(()=>{et(ee,"id",`svc-${e(Ge).id??""}-${e(Re)??""}`),et(ee,"placeholder",te[e(Re)]??e(Re)),Va(ee,e(Ge)[e(Re)]??"")}),$("change",ee,ae=>F(e(Ge).id,e(Re),ae.target.value)),d(Xe,ee)};M(Kt,Xe=>{e(Re)==="ssl_enabled"?Xe(ya):e(Re)==="port"?Xe(ra,1):e(Re)==="password"||e(Re)==="api_key"||e(Re)==="token"?Xe(ve,2):Xe(ua,!1)})}t(sa),D(()=>{et(jt,"for",`svc-${e(Ge).id??""}-${e(Re)??""}`),X(fa,te[e(Re)]??e(Re))}),d(Qe,sa)}),t(ba),t(_t),D(()=>{Fa(Yt,`background: ${N[e(gt).category]??"#888"??""}20; color: ${N[e(gt).category]??"#888"??""}`),X(re,e(Ge).label||e(Wt)?.label||e(Ge).service_type),X(ct,e(Ge).service_type),De.disabled=e(Z)===e(Ge).id,ot.disabled=e(V)===e(Ge).id}),$("click",De,()=>ne(e(Ge).id)),$("click",ot,()=>z(e(Ge).id)),d(ea,_t)}),t(oa),t(Mt),D(()=>{Fa(bt,`color: ${N[e(gt).category]??"#888"??""}`),X(Zt,e(gt).category)}),d(Gt,Mt)}),d(Ae,Ne)};M(B,Ae=>{e(L).length===0&&e(le)?Ae(Je):Ae(Me,!1)})}t(k),$("click",O,()=>u(Q,!e(Q))),d(Ze,Ye)},ca=Ze=>{var Ye=il(),h=J(Ye),k=r(n(h),4),m=r(n(k),2);Bs(m,{placeholder:"Select or type a model...",get value(){return e(G)},set value(B){u(G,B,!0)}}),t(k),t(h);var a=r(h,2),o=r(n(a),4),f=r(n(o),2),O=n(f);Jt(O);var _e=r(O,2),ze=n(_e,!0);t(_e),t(f),We(2),t(o);var T=r(o,2),A=r(n(T),4);Jt(A),t(T),t(a),D(B=>X(ze,B),[()=>e(je).toFixed(2)]),la(O,()=>e(je),B=>u(je,B)),la(A,()=>e(Be),B=>u(Be,B)),d(Ze,Ye)},vt=Ze=>{var Ye=ol();We(2),d(Ze,Ye)};M(Fe,Ze=>{e(y)==="profile"?Ze(It):e(y)==="providers"?Ze(Lt,1):e(y)==="tools"?Ze(aa,2):e(y)==="models"?Ze(ca,3):e(y)==="about"&&Ze(vt,4)})}t(ht),t(be),t(ce),t(C),D(Ze=>{X(Ce,Ze),ft.disabled=e(se),X(ut,e(se)?"Saving...":"Save Changes")},[()=>v.find(Ze=>Ze.id===e(y))?.label]),$("keydown",C,at),$("click",U,Ft),$("click",ft,ta),d(w,C)};M(oe,w=>{l()&&w(ge)})}d(s,W),Aa(),x()}Ra(["keydown","click","input","change"]);function dl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]];wt(s,xt({name:"key"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}var ul=g('<span class="wizard-step-num svelte-tj3wu"></span>'),vl=g("<div></div>"),pl=g('<div><div class="wizard-step-dot svelte-tj3wu"><!></div> <!></div>'),gl=g(`<div class="wizard-welcome svelte-tj3wu"><img alt="Firefly Agentic Studio" class="wizard-logo svelte-tj3wu"/> <h2 class="wizard-heading svelte-tj3wu">Welcome to Firefly Agentic Studio</h2> <p class="wizard-text svelte-tj3wu">Build, test, and deploy AI agent pipelines visually.
							We'll help you configure your AI providers in just a few steps.</p> <div class="wizard-features svelte-tj3wu"><div class="wizard-feature svelte-tj3wu"><!> <span>Visual pipeline builder</span></div> <div class="wizard-feature svelte-tj3wu"><!> <span>Multi-provider AI support</span></div> <div class="wizard-feature svelte-tj3wu"><!> <span>Local credential storage</span></div></div></div>`),fl=g('<span class="wizard-provider-check svelte-tj3wu"><!></span>'),hl=g('<button><!> <span class="wizard-provider-label svelte-tj3wu"> </span> <span class="wizard-provider-desc svelte-tj3wu"> </span></button>'),bl=g('<p class="wizard-hint svelte-tj3wu">Select at least one provider to continue</p>'),_l=g('<h3 class="wizard-step-title svelte-tj3wu">Choose your AI providers</h3> <p class="wizard-text svelte-tj3wu">Select the providers you have API keys for. You can add more later in Settings.</p> <div class="wizard-providers-grid svelte-tj3wu"></div> <!>',1),ml=g('<div class="wizard-key-field svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu"> </label> <input type="password" class="wizard-key-input svelte-tj3wu"/></div>'),yl=g('<div class="wizard-key-section svelte-tj3wu"><span class="wizard-key-provider svelte-tj3wu"> </span> <!></div>'),wl=g('<h3 class="wizard-step-title svelte-tj3wu">Enter your API keys</h3> <p class="wizard-text svelte-tj3wu">Credentials are stored locally at <code class="svelte-tj3wu">~/.firefly-studio/settings.json</code> and never sent to our servers.</p> <div class="wizard-keys-list svelte-tj3wu"></div>',1),El=g('<span class="wizard-model-hint svelte-tj3wu">This will be used for all new agent nodes</span>'),kl=g('<h3 class="wizard-step-title svelte-tj3wu">Configure defaults</h3> <p class="wizard-text svelte-tj3wu">Choose the default model for new agent nodes. You can override per-node later.</p> <div class="wizard-defaults svelte-tj3wu"><div class="wizard-default-card svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu">Default Model</label> <!> <!></div> <div class="wizard-defaults-row svelte-tj3wu"><div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-temp">Temperature</label> <div class="wizard-range-wrapper svelte-tj3wu"><input id="wizard-temp" type="range" class="wizard-range svelte-tj3wu" min="0" max="2" step="0.01"/> <span class="wizard-range-value svelte-tj3wu"> </span></div></div> <div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-retries">Retries</label> <input id="wizard-retries" type="number" class="wizard-key-input svelte-tj3wu" min="0" max="10"/></div></div></div>',1),xl=g('<h3 class="wizard-step-title svelte-tj3wu">Personalise your experience</h3> <p class="wizard-text svelte-tj3wu">Tell us about yourself so the AI assistant can address you properly and provide contextual help.</p> <div class="wizard-defaults svelte-tj3wu"><div class="wizard-defaults-row svelte-tj3wu"><div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-name">Your Name</label> <input id="wizard-name" type="text" class="wizard-key-input wizard-text-input svelte-tj3wu" placeholder="e.g. Alex Chen"/></div> <div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-role">Your Role</label> <input id="wizard-role" type="text" class="wizard-key-input wizard-text-input svelte-tj3wu" placeholder="e.g. ML Engineer, Product Manager"/></div></div> <div class="wizard-default-card svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-context">Additional Context <span class="wizard-optional svelte-tj3wu">(optional)</span></label> <textarea id="wizard-context" class="wizard-textarea svelte-tj3wu" placeholder="e.g. Working on a customer support chatbot, focusing on healthcare domain..." rows="3"></textarea></div></div>',1),Sl=g(`<div class="wizard-welcome svelte-tj3wu"><div class="wizard-done-icon svelte-tj3wu"><!></div> <h2 class="wizard-heading svelte-tj3wu"><!></h2> <p class="wizard-text svelte-tj3wu"> <strong class="svelte-tj3wu"> </strong> as default. <strong class="svelte-tj3wu">The Architect</strong> and <strong class="svelte-tj3wu">The Oracle</strong> are ready.
							The Architect will build your pipelines, and The Oracle will guide your decisions.</p> <p class="wizard-text wizard-text-subtle svelte-tj3wu">You can change these anytime from the Settings menu.</p></div>`),Al=g('<button class="wizard-btn-skip svelte-tj3wu">Skip setup</button> <button class="wizard-btn-next svelte-tj3wu">Get started</button>',1),$l=g('<div></div> <button class="wizard-btn-next wizard-btn-launch svelte-tj3wu"><!> Open Studio</button>',1),Nl=g('<button class="wizard-btn-next svelte-tj3wu"> </button>'),Tl=g('<button class="wizard-btn-next svelte-tj3wu">Next</button>'),Ml=g('<div class="wizard-footer-left svelte-tj3wu"><button class="wizard-btn-skip svelte-tj3wu">Skip</button> <button class="wizard-btn-back svelte-tj3wu">Back</button></div> <!>',1),Rl=g('<div class="wizard-backdrop svelte-tj3wu"><div class="wizard-modal svelte-tj3wu" role="dialog" aria-modal="true" aria-label="Setup Wizard"><div class="wizard-progress svelte-tj3wu"></div> <div class="wizard-body svelte-tj3wu"><!></div> <div class="wizard-footer svelte-tj3wu"><!></div></div></div>');function Cl(s,i){Sa(i,!0);const l=()=>zt(bn,"$firstStartWizardOpen",c),[c,b]=Ca(),x=[{id:"openai",label:"OpenAI",description:"GPT-4.1, o3, o4-mini",fields:[{key:"openai_api_key",label:"API Key",placeholder:"sk-..."}]},{id:"anthropic",label:"Anthropic",description:"Claude Sonnet, Opus, Haiku",fields:[{key:"anthropic_api_key",label:"API Key",placeholder:"sk-ant-..."}]},{id:"google",label:"Google Gemini",description:"Gemini 2.5 Pro & Flash",fields:[{key:"google_api_key",label:"API Key",placeholder:"AIza..."}]},{id:"groq",label:"Groq",description:"Fast Llama & Mixtral",fields:[{key:"groq_api_key",label:"API Key",placeholder:"gsk_..."}]},{id:"mistral",label:"Mistral",description:"Mistral Large & Codestral",fields:[{key:"mistral_api_key",label:"API Key",placeholder:"API key"}]},{id:"deepseek",label:"DeepSeek",description:"DeepSeek Chat & Reasoner",fields:[{key:"deepseek_api_key",label:"API Key",placeholder:"API key"}]},{id:"cohere",label:"Cohere",description:"Command R & R+",fields:[{key:"cohere_api_key",label:"API Key",placeholder:"API key"}]},{id:"azure",label:"Azure OpenAI",description:"Azure-hosted OpenAI models",fields:[{key:"azure_openai_api_key",label:"API Key",placeholder:"API key"},{key:"azure_openai_endpoint",label:"Endpoint URL",placeholder:"https://your-resource.openai.azure.com/"}]},{id:"bedrock",label:"Amazon Bedrock",description:"AWS-hosted foundation models",fields:[{key:"aws_access_key_id",label:"Access Key ID",placeholder:"AKIA..."},{key:"aws_secret_access_key",label:"Secret Access Key",placeholder:"Secret key"},{key:"aws_default_region",label:"Region",placeholder:"us-east-1"}]},{id:"ollama",label:"Ollama",description:"Local open-source models",fields:[{key:"ollama_base_url",label:"Base URL",placeholder:"http://localhost:11434"}]}],v=[{label:"Welcome"},{label:"Providers"},{label:"API Keys"},{label:"Defaults"},{label:"Profile"},{label:"Ready"}];let p=ie(0),K=ie(ka(new Set)),R=ka({}),N=ie(""),te=ie(.7),L=ie(3),Q=ie(!1),Z=ie(""),q=ie(""),V=ie("");const le=v.length;function me(){if(e(N))return;const we=["anthropic","openai","google","groq","mistral","deepseek","cohere","azure","bedrock","ollama"];for(const G of we)if(e(K).has(G)){const je=Vr(G);if(je){u(N,je.id,!0);return}}}function tt(we){const G=new Set(e(K));G.has(we)?G.delete(we):G.add(we),u(K,G,!0)}function z(){return x.filter(we=>e(K).has(we.id))}function ne(){e(p)===1&&e(K).size===0||e(p)<le-1&&(Un(p),e(p)===3&&me())}function F(){e(p)>0&&Un(p,-1)}async function $e(){u(Q,!0);try{const we={};for(const[je,Be]of Object.entries(R))Be.trim()&&(we[je]=Be.trim());const G={};e(Z).trim()&&(G.name=e(Z).trim()),e(q).trim()&&(G.role=e(q).trim()),e(V).trim()&&(G.context=e(V).trim()),G.assistant_name="The Architect",await Jn(Object.keys(we).length>0?we:null,{default_model:e(N),temperature:e(te),retries:e(L)},!0,Object.keys(G).length>0?G:null),u(p,le-1)}catch{}finally{u(Q,!1)}}async function ye(){try{await Jn(null,null,!0)}catch{}bn.set(!1)}async function Le(){await Gs(),bn.set(!1)}var y=qe(),se=J(y);{var pe=we=>{var G=Rl(),je=n(G),Be=n(je);yt(Be,21,()=>v,Ot,(W,oe,ge)=>{var w=pl();let C;var ce=n(w),fe=n(ce);{var Ee=U=>{ha(U,{size:10})},ke=U=>{var j=ul();j.textContent=ge+1,d(U,j)};M(fe,U=>{ge<e(p)?U(Ee):U(ke,!1)})}t(ce);var _=r(ce,2);{var P=U=>{var j=vl();let be;D(()=>be=Rt(j,1,"wizard-step-line svelte-tj3wu",null,be,{filled:ge<e(p)})),d(U,j)};M(_,U=>{ge<v.length-1&&U(P)})}t(w),D(()=>C=Rt(w,1,"wizard-step-indicator svelte-tj3wu",null,C,{active:ge===e(p),completed:ge<e(p)})),d(W,w)}),t(Be);var nt=r(Be,2),de=n(nt);{var Se=W=>{var oe=gl(),ge=n(oe),w=r(ge,6),C=n(w),ce=n(C);_n(ce,{size:16}),We(2),t(C);var fe=r(C,2),Ee=n(fe);Xn(Ee,{size:16}),We(2),t(fe);var ke=r(fe,2),_=n(ke);dl(_,{size:16}),We(2),t(ke),t(w),t(oe),D(()=>et(ge,"src",ls)),d(W,oe)},Oe=W=>{var oe=_l(),ge=r(J(oe),4);yt(ge,21,()=>x,Ot,(ce,fe)=>{var Ee=hl();let ke;var _=n(Ee);{var P=Ce=>{var He=fl(),St=n(He);ha(St,{size:10}),t(He),d(Ce,He)},U=dt(()=>e(K).has(e(fe).id));M(_,Ce=>{e(U)&&Ce(P)})}var j=r(_,2),be=n(j,!0);t(j);var he=r(j,2),Ue=n(he,!0);t(he),t(Ee),D(Ce=>{ke=Rt(Ee,1,"wizard-provider-card svelte-tj3wu",null,ke,Ce),X(be,e(fe).label),X(Ue,e(fe).description)},[()=>({selected:e(K).has(e(fe).id)})]),$("click",Ee,()=>tt(e(fe).id)),d(ce,Ee)}),t(ge);var w=r(ge,2);{var C=ce=>{var fe=bl();d(ce,fe)};M(w,ce=>{e(K).size===0&&ce(C)})}d(W,oe)},st=W=>{var oe=wl(),ge=r(J(oe),4);yt(ge,21,z,Ot,(w,C)=>{var ce=yl(),fe=n(ce),Ee=n(fe,!0);t(fe);var ke=r(fe,2);yt(ke,17,()=>e(C).fields,Ot,(_,P)=>{var U=ml(),j=n(U),be=n(j,!0);t(j);var he=r(j,2);Jt(he),t(U),D(()=>{et(j,"for",`wizard-${e(P).key??""}`),X(be,e(P).label),et(he,"id",`wizard-${e(P).key??""}`),et(he,"placeholder",e(P).placeholder),Va(he,R[e(P).key]??"")}),$("input",he,Ue=>{R[e(P).key]=Ue.target.value}),d(_,U)}),t(ce),D(()=>X(Ee,e(C).label)),d(w,ce)}),t(ge),d(W,oe)},rt=W=>{var oe=kl(),ge=r(J(oe),4),w=n(ge),C=r(n(w),2);Bs(C,{placeholder:"Select or type a model...",get value(){return e(N)},set value(Ue){u(N,Ue,!0)}});var ce=r(C,2);{var fe=Ue=>{var Ce=El();d(Ue,Ce)};M(ce,Ue=>{e(N)&&Ue(fe)})}t(w);var Ee=r(w,2),ke=n(Ee),_=r(n(ke),2),P=n(_);Jt(P);var U=r(P,2),j=n(U,!0);t(U),t(_),t(ke);var be=r(ke,2),he=r(n(be),2);Jt(he),t(be),t(Ee),t(ge),D(Ue=>X(j,Ue),[()=>e(te).toFixed(2)]),la(P,()=>e(te),Ue=>u(te,Ue)),la(he,()=>e(L),Ue=>u(L,Ue)),d(W,oe)},Nt=W=>{var oe=xl(),ge=r(J(oe),4),w=n(ge),C=n(w),ce=r(n(C),2);Jt(ce),t(C);var fe=r(C,2),Ee=r(n(fe),2);Jt(Ee),t(fe),t(w);var ke=r(w,2),_=r(n(ke),2);En(_),t(ke),t(ge),la(ce,()=>e(Z),P=>u(Z,P)),la(Ee,()=>e(q),P=>u(q,P)),la(_,()=>e(V),P=>u(V,P)),d(W,oe)},lt=W=>{var oe=Sl(),ge=n(oe),w=n(ge);ha(w,{size:32}),t(ge);var C=r(ge,2),ce=n(C);{var fe=j=>{var be=Hn();D(()=>X(be,`Welcome, ${e(Z)??""}!`)),d(j,be)},Ee=j=>{var be=Hn("You're all set!");d(j,be)};M(ce,j=>{e(Z)?j(fe):j(Ee,!1)})}t(C);var ke=r(C,2),_=n(ke),P=r(_),U=n(P,!0);t(P),We(5),t(ke),We(2),t(oe),D(j=>{X(_,`Your ${e(K).size??""} provider${e(K).size!==1?"s are":" is"} configured
							with `),X(U,j)},[()=>e(N)?e(N).split(":")[1]:"default model"]),d(W,oe)};M(de,W=>{e(p)===0?W(Se):e(p)===1?W(Oe,1):e(p)===2?W(st,2):e(p)===3?W(rt,3):e(p)===4?W(Nt,4):W(lt,!1)})}t(nt);var pt=r(nt,2),Ht=n(pt);{var Ft=W=>{var oe=Al(),ge=J(oe),w=r(ge,2);$("click",ge,ye),$("click",w,ne),d(W,oe)},ta=W=>{var oe=$l(),ge=r(J(oe),2),w=n(ge);Xn(w,{size:14}),We(),t(ge),$("click",ge,Le),d(W,oe)},at=W=>{var oe=Ml(),ge=J(oe),w=n(ge),C=r(w,2);t(ge);var ce=r(ge,2);{var fe=ke=>{var _=Nl(),P=n(_,!0);t(_),D(()=>{_.disabled=e(Q)||!e(N),X(P,e(Q)?"Saving...":"Finish Setup")}),$("click",_,$e),d(ke,_)},Ee=ke=>{var _=Tl();D(()=>_.disabled=e(p)===1&&e(K).size===0),$("click",_,ne),d(ke,_)};M(ce,ke=>{e(p)===4?ke(fe):ke(Ee,!1)})}$("click",w,ye),$("click",C,F),d(W,oe)};M(Ht,W=>{e(p)===0?W(Ft):e(p)===le-1?W(ta,1):W(at,!1)})}t(pt),t(je),t(G),d(we,G)};M(se,we=>{l()&&we(pe)})}d(s,y),Aa(),b()}Ra(["click","input"]);var Ol=g('<div class="toast svelte-lxvwit" role="alert"><span class="toast-icon svelte-lxvwit"><!></span> <span class="toast-message svelte-lxvwit"> </span> <button class="toast-close svelte-lxvwit"><!></button></div>'),zl=g('<div class="toast-container svelte-lxvwit"></div>');function Il(s,i){Sa(i,!1);const l=()=>zt(Zr,"$toasts",c),[c,b]=Ca(),x={success:ha,error:Yr,warning:Ps,info:js},v={success:"var(--color-success)",error:"var(--color-error)",warning:"var(--color-warning)",info:"var(--color-info)"};Ws();var p=qe(),K=J(p);{var R=N=>{var te=zl();yt(te,5,l,L=>L.id,(L,Q)=>{var Z=Ol();let q;var V=n(Z),le=n(V);tn(le,()=>x[e(Q).type],(F,$e)=>{$e(F,{size:16})}),t(V);var me=r(V,2),tt=n(me,!0);t(me);var z=r(me,2),ne=n(z);mn(ne,{size:14}),t(z),t(Z),D(()=>{q=Fa(Z,"",q,{"--toast-color":v[e(Q).type]}),X(tt,e(Q).message)}),$("click",z,()=>Xr(e(Q).id)),Jr(3,Z,()=>Qr,()=>({y:16,duration:200})),d(L,Z)}),t(te),d(N,te)};M(K,N=>{l().length>0&&N(R)})}d(s,p),Aa(),b()}Ra(["click"]);function Pl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];wt(s,xt({name:"camera"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Ll(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M8 13h2"}],["path",{d:"M14 13h2"}],["path",{d:"M8 17h2"}],["path",{d:"M14 17h2"}]];wt(s,xt({name:"file-spreadsheet"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Dl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];wt(s,xt({name:"moon"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function jl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m16 15-3-3 3-3"}]];wt(s,xt({name:"panel-left-close"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Bl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]];wt(s,xt({name:"paperclip"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Ul(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["path",{d:"M2 3h20"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3"}],["path",{d:"m7 21 5-5 5 5"}]];wt(s,xt({name:"presentation"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Hl(s,i){const l=kt(i,["children","$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];wt(s,xt({name:"sun"},()=>l,{get iconNode(){return c},children:(b,x)=>{var v=qe(),p=J(v);Et(p,i,"default",{}),d(b,v)},$$slots:{default:!0}}))}function Fl(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Dn,xs;function Gl(){if(xs)return Dn;xs=1;function s(a){return a instanceof Map?a.clear=a.delete=a.set=function(){throw new Error("map is read-only")}:a instanceof Set&&(a.add=a.clear=a.delete=function(){throw new Error("set is read-only")}),Object.freeze(a),Object.getOwnPropertyNames(a).forEach(o=>{const f=a[o],O=typeof f;(O==="object"||O==="function")&&!Object.isFrozen(f)&&s(f)}),a}class i{constructor(o){o.data===void 0&&(o.data={}),this.data=o.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function l(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function c(a,...o){const f=Object.create(null);for(const O in a)f[O]=a[O];return o.forEach(function(O){for(const _e in O)f[_e]=O[_e]}),f}const b="</span>",x=a=>!!a.scope,v=(a,{prefix:o})=>{if(a.startsWith("language:"))return a.replace("language:","language-");if(a.includes(".")){const f=a.split(".");return[`${o}${f.shift()}`,...f.map((O,_e)=>`${O}${"_".repeat(_e+1)}`)].join(" ")}return`${o}${a}`};class p{constructor(o,f){this.buffer="",this.classPrefix=f.classPrefix,o.walk(this)}addText(o){this.buffer+=l(o)}openNode(o){if(!x(o))return;const f=v(o.scope,{prefix:this.classPrefix});this.span(f)}closeNode(o){x(o)&&(this.buffer+=b)}value(){return this.buffer}span(o){this.buffer+=`<span class="${o}">`}}const K=(a={})=>{const o={children:[]};return Object.assign(o,a),o};class R{constructor(){this.rootNode=K(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(o){this.top.children.push(o)}openNode(o){const f=K({scope:o});this.add(f),this.stack.push(f)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(o){return this.constructor._walk(o,this.rootNode)}static _walk(o,f){return typeof f=="string"?o.addText(f):f.children&&(o.openNode(f),f.children.forEach(O=>this._walk(o,O)),o.closeNode(f)),o}static _collapse(o){typeof o!="string"&&o.children&&(o.children.every(f=>typeof f=="string")?o.children=[o.children.join("")]:o.children.forEach(f=>{R._collapse(f)}))}}class N extends R{constructor(o){super(),this.options=o}addText(o){o!==""&&this.add(o)}startScope(o){this.openNode(o)}endScope(){this.closeNode()}__addSublanguage(o,f){const O=o.root;f&&(O.scope=`language:${f}`),this.add(O)}toHTML(){return new p(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function te(a){return a?typeof a=="string"?a:a.source:null}function L(a){return q("(?=",a,")")}function Q(a){return q("(?:",a,")*")}function Z(a){return q("(?:",a,")?")}function q(...a){return a.map(f=>te(f)).join("")}function V(a){const o=a[a.length-1];return typeof o=="object"&&o.constructor===Object?(a.splice(a.length-1,1),o):{}}function le(...a){return"("+(V(a).capture?"":"?:")+a.map(O=>te(O)).join("|")+")"}function me(a){return new RegExp(a.toString()+"|").exec("").length-1}function tt(a,o){const f=a&&a.exec(o);return f&&f.index===0}const z=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ne(a,{joinWith:o}){let f=0;return a.map(O=>{f+=1;const _e=f;let ze=te(O),T="";for(;ze.length>0;){const A=z.exec(ze);if(!A){T+=ze;break}T+=ze.substring(0,A.index),ze=ze.substring(A.index+A[0].length),A[0][0]==="\\"&&A[1]?T+="\\"+String(Number(A[1])+_e):(T+=A[0],A[0]==="("&&f++)}return T}).map(O=>`(${O})`).join(o)}const F=/\b\B/,$e="[a-zA-Z]\\w*",ye="[a-zA-Z_]\\w*",Le="\\b\\d+(\\.\\d+)?",y="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",se="\\b(0b[01]+)",pe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",we=(a={})=>{const o=/^#![ ]*\//;return a.binary&&(a.begin=q(o,/.*\b/,a.binary,/\b.*/)),c({scope:"meta",begin:o,end:/$/,relevance:0,"on:begin":(f,O)=>{f.index!==0&&O.ignoreMatch()}},a)},G={begin:"\\\\[\\s\\S]",relevance:0},je={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[G]},Be={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[G]},nt={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},de=function(a,o,f={}){const O=c({scope:"comment",begin:a,end:o,contains:[]},f);O.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const _e=le("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return O.contains.push({begin:q(/[ ]+/,"(",_e,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),O},Se=de("//","$"),Oe=de("/\\*","\\*/"),st=de("#","$"),rt={scope:"number",begin:Le,relevance:0},Nt={scope:"number",begin:y,relevance:0},lt={scope:"number",begin:se,relevance:0},pt={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[G,{begin:/\[/,end:/\]/,relevance:0,contains:[G]}]},Ht={scope:"title",begin:$e,relevance:0},Ft={scope:"title",begin:ye,relevance:0},ta={begin:"\\.\\s*"+ye,relevance:0};var W=Object.freeze({__proto__:null,APOS_STRING_MODE:je,BACKSLASH_ESCAPE:G,BINARY_NUMBER_MODE:lt,BINARY_NUMBER_RE:se,COMMENT:de,C_BLOCK_COMMENT_MODE:Oe,C_LINE_COMMENT_MODE:Se,C_NUMBER_MODE:Nt,C_NUMBER_RE:y,END_SAME_AS_BEGIN:function(a){return Object.assign(a,{"on:begin":(o,f)=>{f.data._beginMatch=o[1]},"on:end":(o,f)=>{f.data._beginMatch!==o[1]&&f.ignoreMatch()}})},HASH_COMMENT_MODE:st,IDENT_RE:$e,MATCH_NOTHING_RE:F,METHOD_GUARD:ta,NUMBER_MODE:rt,NUMBER_RE:Le,PHRASAL_WORDS_MODE:nt,QUOTE_STRING_MODE:Be,REGEXP_MODE:pt,RE_STARTERS_RE:pe,SHEBANG:we,TITLE_MODE:Ht,UNDERSCORE_IDENT_RE:ye,UNDERSCORE_TITLE_MODE:Ft});function oe(a,o){a.input[a.index-1]==="."&&o.ignoreMatch()}function ge(a,o){a.className!==void 0&&(a.scope=a.className,delete a.className)}function w(a,o){o&&a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",a.__beforeBegin=oe,a.keywords=a.keywords||a.beginKeywords,delete a.beginKeywords,a.relevance===void 0&&(a.relevance=0))}function C(a,o){Array.isArray(a.illegal)&&(a.illegal=le(...a.illegal))}function ce(a,o){if(a.match){if(a.begin||a.end)throw new Error("begin & end are not supported with match");a.begin=a.match,delete a.match}}function fe(a,o){a.relevance===void 0&&(a.relevance=1)}const Ee=(a,o)=>{if(!a.beforeMatch)return;if(a.starts)throw new Error("beforeMatch cannot be used with starts");const f=Object.assign({},a);Object.keys(a).forEach(O=>{delete a[O]}),a.keywords=f.keywords,a.begin=q(f.beforeMatch,L(f.begin)),a.starts={relevance:0,contains:[Object.assign(f,{endsParent:!0})]},a.relevance=0,delete f.beforeMatch},ke=["of","and","for","in","not","or","if","then","parent","list","value"],_="keyword";function P(a,o,f=_){const O=Object.create(null);return typeof a=="string"?_e(f,a.split(" ")):Array.isArray(a)?_e(f,a):Object.keys(a).forEach(function(ze){Object.assign(O,P(a[ze],o,ze))}),O;function _e(ze,T){o&&(T=T.map(A=>A.toLowerCase())),T.forEach(function(A){const B=A.split("|");O[B[0]]=[ze,U(B[0],B[1])]})}}function U(a,o){return o?Number(o):j(a)?0:1}function j(a){return ke.includes(a.toLowerCase())}const be={},he=a=>{console.error(a)},Ue=(a,...o)=>{console.log(`WARN: ${a}`,...o)},Ce=(a,o)=>{be[`${a}/${o}`]||(console.log(`Deprecated as of ${a}. ${o}`),be[`${a}/${o}`]=!0)},He=new Error;function St(a,o,{key:f}){let O=0;const _e=a[f],ze={},T={};for(let A=1;A<=o.length;A++)T[A+O]=_e[A],ze[A+O]=!0,O+=me(o[A-1]);a[f]=T,a[f]._emit=ze,a[f]._multi=!0}function Vt(a){if(Array.isArray(a.begin)){if(a.skip||a.excludeBegin||a.returnBegin)throw he("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),He;if(typeof a.beginScope!="object"||a.beginScope===null)throw he("beginScope must be object"),He;St(a,a.begin,{key:"beginScope"}),a.begin=ne(a.begin,{joinWith:""})}}function ft(a){if(Array.isArray(a.end)){if(a.skip||a.excludeEnd||a.returnEnd)throw he("skip, excludeEnd, returnEnd not compatible with endScope: {}"),He;if(typeof a.endScope!="object"||a.endScope===null)throw he("endScope must be object"),He;St(a,a.end,{key:"endScope"}),a.end=ne(a.end,{joinWith:""})}}function ut(a){a.scope&&typeof a.scope=="object"&&a.scope!==null&&(a.beginScope=a.scope,delete a.scope)}function ht(a){ut(a),typeof a.beginScope=="string"&&(a.beginScope={_wrap:a.beginScope}),typeof a.endScope=="string"&&(a.endScope={_wrap:a.endScope}),Vt(a),ft(a)}function Fe(a){function o(T,A){return new RegExp(te(T),"m"+(a.case_insensitive?"i":"")+(a.unicodeRegex?"u":"")+(A?"g":""))}class f{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(A,B){B.position=this.position++,this.matchIndexes[this.matchAt]=B,this.regexes.push([B,A]),this.matchAt+=me(A)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const A=this.regexes.map(B=>B[1]);this.matcherRe=o(ne(A,{joinWith:"|"}),!0),this.lastIndex=0}exec(A){this.matcherRe.lastIndex=this.lastIndex;const B=this.matcherRe.exec(A);if(!B)return null;const Je=B.findIndex((Ae,Ne)=>Ne>0&&Ae!==void 0),Me=this.matchIndexes[Je];return B.splice(0,Je),Object.assign(B,Me)}}class O{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(A){if(this.multiRegexes[A])return this.multiRegexes[A];const B=new f;return this.rules.slice(A).forEach(([Je,Me])=>B.addRule(Je,Me)),B.compile(),this.multiRegexes[A]=B,B}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(A,B){this.rules.push([A,B]),B.type==="begin"&&this.count++}exec(A){const B=this.getMatcher(this.regexIndex);B.lastIndex=this.lastIndex;let Je=B.exec(A);if(this.resumingScanAtSamePosition()&&!(Je&&Je.index===this.lastIndex)){const Me=this.getMatcher(0);Me.lastIndex=this.lastIndex+1,Je=Me.exec(A)}return Je&&(this.regexIndex+=Je.position+1,this.regexIndex===this.count&&this.considerAll()),Je}}function _e(T){const A=new O;return T.contains.forEach(B=>A.addRule(B.begin,{rule:B,type:"begin"})),T.terminatorEnd&&A.addRule(T.terminatorEnd,{type:"end"}),T.illegal&&A.addRule(T.illegal,{type:"illegal"}),A}function ze(T,A){const B=T;if(T.isCompiled)return B;[ge,ce,ht,Ee].forEach(Me=>Me(T,A)),a.compilerExtensions.forEach(Me=>Me(T,A)),T.__beforeBegin=null,[w,C,fe].forEach(Me=>Me(T,A)),T.isCompiled=!0;let Je=null;return typeof T.keywords=="object"&&T.keywords.$pattern&&(T.keywords=Object.assign({},T.keywords),Je=T.keywords.$pattern,delete T.keywords.$pattern),Je=Je||/\w+/,T.keywords&&(T.keywords=P(T.keywords,a.case_insensitive)),B.keywordPatternRe=o(Je,!0),A&&(T.begin||(T.begin=/\B|\b/),B.beginRe=o(B.begin),!T.end&&!T.endsWithParent&&(T.end=/\B|\b/),T.end&&(B.endRe=o(B.end)),B.terminatorEnd=te(B.end)||"",T.endsWithParent&&A.terminatorEnd&&(B.terminatorEnd+=(T.end?"|":"")+A.terminatorEnd)),T.illegal&&(B.illegalRe=o(T.illegal)),T.contains||(T.contains=[]),T.contains=[].concat(...T.contains.map(function(Me){return Lt(Me==="self"?T:Me)})),T.contains.forEach(function(Me){ze(Me,B)}),T.starts&&ze(T.starts,A),B.matcher=_e(B),B}if(a.compilerExtensions||(a.compilerExtensions=[]),a.contains&&a.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return a.classNameAliases=c(a.classNameAliases||{}),ze(a)}function It(a){return a?a.endsWithParent||It(a.starts):!1}function Lt(a){return a.variants&&!a.cachedVariants&&(a.cachedVariants=a.variants.map(function(o){return c(a,{variants:null},o)})),a.cachedVariants?a.cachedVariants:It(a)?c(a,{starts:a.starts?c(a.starts):null}):Object.isFrozen(a)?c(a):a}var aa="11.11.1";class ca extends Error{constructor(o,f){super(o),this.name="HTMLInjectionError",this.html=f}}const vt=l,Ze=c,Ye=Symbol("nomatch"),h=7,k=function(a){const o=Object.create(null),f=Object.create(null),O=[];let _e=!0;const ze="Could not find the language '{}', did you forget to load/include a language module?",T={disableAutodetect:!0,name:"Plain text",contains:[]};let A={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:N};function B(E){return A.noHighlightRe.test(E)}function Je(E){let re=E.className+" ";re+=E.parentNode?E.parentNode.className:"";const Ie=A.languageDetectRe.exec(re);if(Ie){const ct=_t(Ie[1]);return ct||(Ue(ze.replace("{}",Ie[1])),Ue("Falling back to no-highlight mode for this block.",E)),ct?Ie[1]:"no-highlight"}return re.split(/\s+/).find(ct=>B(ct)||_t(ct))}function Me(E,re,Ie){let ct="",H="";typeof re=="object"?(ct=E,Ie=re.ignoreIllegals,H=re.language):(Ce("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ce("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),H=E,ct=re),Ie===void 0&&(Ie=!0);const De={code:ct,language:H};na("before:highlight",De);const it=De.result?De.result:Ae(De.language,De.code,Ie);return it.code=De.code,na("after:highlight",it),it}function Ae(E,re,Ie,ct){const H=Object.create(null);function De(S,I){return S.keywords[I]}function it(){if(!ve.keywords){Xe.addText(ee);return}let S=0;ve.keywordPatternRe.lastIndex=0;let I=ve.keywordPatternRe.exec(ee),Y="";for(;I;){Y+=ee.substring(S,I.index);const Te=Kt.case_insensitive?I[0].toLowerCase():I[0],xe=De(ve,Te);if(xe){const[Bt,wa]=xe;if(Xe.addText(Y),Y="",H[Te]=(H[Te]||0)+1,H[Te]<=h&&(ae+=wa),Bt.startsWith("_"))Y+=I[0];else{const ja=Kt.classNameAliases[Bt]||Bt;ot(I[0],ja)}}else Y+=I[0];S=ve.keywordPatternRe.lastIndex,I=ve.keywordPatternRe.exec(ee)}Y+=ee.substring(S),Xe.addText(Y)}function Pe(){if(ee==="")return;let S=null;if(typeof ve.subLanguage=="string"){if(!o[ve.subLanguage]){Xe.addText(ee);return}S=Ae(ve.subLanguage,ee,!0,ua[ve.subLanguage]),ua[ve.subLanguage]=S._top}else S=At(ee,ve.subLanguage.length?ve.subLanguage:null);ve.relevance>0&&(ae+=S.relevance),Xe.__addSublanguage(S._emitter,S.language)}function ue(){ve.subLanguage!=null?Pe():it(),ee=""}function ot(S,I){S!==""&&(Xe.startScope(I),Xe.addText(S),Xe.endScope())}function Dt(S,I){let Y=1;const Te=I.length-1;for(;Y<=Te;){if(!S._emit[Y]){Y++;continue}const xe=Kt.classNameAliases[S[Y]]||S[Y],Bt=I[Y];xe?ot(Bt,xe):(ee=Bt,it(),ee=""),Y++}}function qt(S,I){return S.scope&&typeof S.scope=="string"&&Xe.openNode(Kt.classNameAliases[S.scope]||S.scope),S.beginScope&&(S.beginScope._wrap?(ot(ee,Kt.classNameAliases[S.beginScope._wrap]||S.beginScope._wrap),ee=""):S.beginScope._multi&&(Dt(S.beginScope,I),ee="")),ve=Object.create(S,{parent:{value:ve}}),ve}function ga(S,I,Y){let Te=tt(S.endRe,Y);if(Te){if(S["on:end"]){const xe=new i(S);S["on:end"](I,xe),xe.isMatchIgnored&&(Te=!1)}if(Te){for(;S.endsParent&&S.parent;)S=S.parent;return S}}if(S.endsWithParent)return ga(S.parent,I,Y)}function ba(S){return ve.matcher.regexIndex===0?(ee+=S[0],1):(mt=!0,0)}function Qe(S){const I=S[0],Y=S.rule,Te=new i(Y),xe=[Y.__beforeBegin,Y["on:begin"]];for(const Bt of xe)if(Bt&&(Bt(S,Te),Te.isMatchIgnored))return ba(I);return Y.skip?ee+=I:(Y.excludeBegin&&(ee+=I),ue(),!Y.returnBegin&&!Y.excludeBegin&&(ee=I)),qt(Y,S),Y.returnBegin?0:I.length}function Re(S){const I=S[0],Y=re.substring(S.index),Te=ga(ve,S,Y);if(!Te)return Ye;const xe=ve;ve.endScope&&ve.endScope._wrap?(ue(),ot(I,ve.endScope._wrap)):ve.endScope&&ve.endScope._multi?(ue(),Dt(ve.endScope,S)):xe.skip?ee+=I:(xe.returnEnd||xe.excludeEnd||(ee+=I),ue(),xe.excludeEnd&&(ee=I));do ve.scope&&Xe.closeNode(),!ve.skip&&!ve.subLanguage&&(ae+=ve.relevance),ve=ve.parent;while(ve!==Te.parent);return Te.starts&&qt(Te.starts,S),xe.returnEnd?0:I.length}function sa(){const S=[];for(let I=ve;I!==Kt;I=I.parent)I.scope&&S.unshift(I.scope);S.forEach(I=>Xe.openNode(I))}let jt={};function fa(S,I){const Y=I&&I[0];if(ee+=S,Y==null)return ue(),0;if(jt.type==="begin"&&I.type==="end"&&jt.index===I.index&&Y===""){if(ee+=re.slice(I.index,I.index+1),!_e){const Te=new Error(`0 width match regex (${E})`);throw Te.languageName=E,Te.badRule=jt.rule,Te}return 1}if(jt=I,I.type==="begin")return Qe(I);if(I.type==="illegal"&&!Ie){const Te=new Error('Illegal lexeme "'+Y+'" for mode "'+(ve.scope||"<unnamed>")+'"');throw Te.mode=ve,Te}else if(I.type==="end"){const Te=Re(I);if(Te!==Ye)return Te}if(I.type==="illegal"&&Y==="")return ee+=`
`,1;if(Ve>1e5&&Ve>I.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ee+=Y,Y.length}const Kt=_t(E);if(!Kt)throw he(ze.replace("{}",E)),new Error('Unknown language: "'+E+'"');const ya=Fe(Kt);let ra="",ve=ct||ya;const ua={},Xe=new A.__emitter(A);sa();let ee="",ae=0,Ke=0,Ve=0,mt=!1;try{if(Kt.__emitTokens)Kt.__emitTokens(re,Xe);else{for(ve.matcher.considerAll();;){Ve++,mt?mt=!1:ve.matcher.considerAll(),ve.matcher.lastIndex=Ke;const S=ve.matcher.exec(re);if(!S)break;const I=re.substring(Ke,S.index),Y=fa(I,S);Ke=S.index+Y}fa(re.substring(Ke))}return Xe.finalize(),ra=Xe.toHTML(),{language:E,value:ra,relevance:ae,illegal:!1,_emitter:Xe,_top:ve}}catch(S){if(S.message&&S.message.includes("Illegal"))return{language:E,value:vt(re),illegal:!0,relevance:0,_illegalBy:{message:S.message,index:Ke,context:re.slice(Ke-100,Ke+100),mode:S.mode,resultSoFar:ra},_emitter:Xe};if(_e)return{language:E,value:vt(re),illegal:!1,relevance:0,errorRaised:S,_emitter:Xe,_top:ve};throw S}}function Ne(E){const re={value:vt(E),illegal:!1,relevance:0,_top:T,_emitter:new A.__emitter(A)};return re._emitter.addText(E),re}function At(E,re){re=re||A.languages||Object.keys(o);const Ie=Ne(E),ct=re.filter(_t).filter(Yt).map(ue=>Ae(ue,E,!1));ct.unshift(Ie);const H=ct.sort((ue,ot)=>{if(ue.relevance!==ot.relevance)return ot.relevance-ue.relevance;if(ue.language&&ot.language){if(_t(ue.language).supersetOf===ot.language)return 1;if(_t(ot.language).supersetOf===ue.language)return-1}return 0}),[De,it]=H,Pe=De;return Pe.secondBest=it,Pe}function Gt(E,re,Ie){const ct=re&&f[re]||Ie;E.classList.add("hljs"),E.classList.add(`language-${ct}`)}function gt(E){let re=null;const Ie=Je(E);if(B(Ie))return;if(na("before:highlightElement",{el:E,language:Ie}),E.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",E);return}if(E.children.length>0&&(A.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(E)),A.throwUnescapedHTML))throw new ca("One of your code blocks includes unescaped HTML.",E.innerHTML);re=E;const ct=re.textContent,H=Ie?Me(ct,{language:Ie,ignoreIllegals:!0}):At(ct);E.innerHTML=H.value,E.dataset.highlighted="yes",Gt(E,Ie,H.language),E.result={language:H.language,re:H.relevance,relevance:H.relevance},H.secondBest&&(E.secondBest={language:H.secondBest.language,relevance:H.secondBest.relevance}),na("after:highlightElement",{el:E,result:H,text:ct})}function Mt(E){A=Ze(A,E)}const bt=()=>{ea(),Ce("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Zt(){ea(),Ce("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let oa=!1;function ea(){function E(){ea()}if(document.readyState==="loading"){oa||window.addEventListener("DOMContentLoaded",E,!1),oa=!0;return}document.querySelectorAll(A.cssSelector).forEach(gt)}function Ge(E,re){let Ie=null;try{Ie=re(a)}catch(ct){if(he("Language definition for '{}' could not be registered.".replace("{}",E)),_e)he(ct);else throw ct;Ie=T}Ie.name||(Ie.name=E),o[E]=Ie,Ie.rawDefinition=re.bind(null,a),Ie.aliases&&$t(Ie.aliases,{languageName:E})}function Wt(E){delete o[E];for(const re of Object.keys(f))f[re]===E&&delete f[re]}function Ct(){return Object.keys(o)}function _t(E){return E=(E||"").toLowerCase(),o[E]||o[f[E]]}function $t(E,{languageName:re}){typeof E=="string"&&(E=[E]),E.forEach(Ie=>{f[Ie.toLowerCase()]=re})}function Yt(E){const re=_t(E);return re&&!re.disableAutodetect}function Xt(E){E["before:highlightBlock"]&&!E["before:highlightElement"]&&(E["before:highlightElement"]=re=>{E["before:highlightBlock"](Object.assign({block:re.el},re))}),E["after:highlightBlock"]&&!E["after:highlightElement"]&&(E["after:highlightElement"]=re=>{E["after:highlightBlock"](Object.assign({block:re.el},re))})}function Oa(E){Xt(E),O.push(E)}function va(E){const re=O.indexOf(E);re!==-1&&O.splice(re,1)}function na(E,re){const Ie=E;O.forEach(function(ct){ct[Ie]&&ct[Ie](re)})}function pa(E){return Ce("10.7.0","highlightBlock will be removed entirely in v12.0"),Ce("10.7.0","Please use highlightElement now."),gt(E)}Object.assign(a,{highlight:Me,highlightAuto:At,highlightAll:ea,highlightElement:gt,highlightBlock:pa,configure:Mt,initHighlighting:bt,initHighlightingOnLoad:Zt,registerLanguage:Ge,unregisterLanguage:Wt,listLanguages:Ct,getLanguage:_t,registerAliases:$t,autoDetection:Yt,inherit:Ze,addPlugin:Oa,removePlugin:va}),a.debugMode=function(){_e=!1},a.safeMode=function(){_e=!0},a.versionString=aa,a.regex={concat:q,lookahead:L,either:le,optional:Z,anyNumberOfTimes:Q};for(const E in W)typeof W[E]=="object"&&s(W[E]);return Object.assign(a,W),a},m=k({});return m.newInstance=()=>k({}),Dn=m,m.HighlightJS=m,m.default=m,Dn}var Kl=Gl();const Ut=Fl(Kl),Ss="[A-Za-z$_][0-9A-Za-z$_]*",Wl=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],ql=["true","false","null","undefined","NaN","Infinity"],Js=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Qs=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],er=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Vl=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Zl=[].concat(er,Js,Qs);function As(s){const i=s.regex,l=(de,{after:Se})=>{const Oe="</"+de[0].slice(1);return de.input.indexOf(Oe,Se)!==-1},c=Ss,b={begin:"<>",end:"</>"},x=/<[A-Za-z0-9\\._:-]+\s*\/>/,v={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(de,Se)=>{const Oe=de[0].length+de.index,st=de.input[Oe];if(st==="<"||st===","){Se.ignoreMatch();return}st===">"&&(l(de,{after:Oe})||Se.ignoreMatch());let rt;const Nt=de.input.substring(Oe);if(rt=Nt.match(/^\s*=/)){Se.ignoreMatch();return}if((rt=Nt.match(/^\s+extends\s+/))&&rt.index===0){Se.ignoreMatch();return}}},p={$pattern:Ss,keyword:Wl,literal:ql,built_in:Zl,"variable.language":Vl},K="[0-9](_?[0-9])*",R=`\\.(${K})`,N="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",te={className:"number",variants:[{begin:`(\\b(${N})((${R})|\\.)?|(${R}))[eE][+-]?(${K})\\b`},{begin:`\\b(${N})\\b((${R})\\b|\\.)?|(${R})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},L={className:"subst",begin:"\\$\\{",end:"\\}",keywords:p,contains:[]},Q={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"xml"}},Z={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"css"}},q={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"graphql"}},V={className:"string",begin:"`",end:"`",contains:[s.BACKSLASH_ESCAPE,L]},me={className:"comment",variants:[s.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:c+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),s.C_BLOCK_COMMENT_MODE,s.C_LINE_COMMENT_MODE]},tt=[s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,Q,Z,q,V,{match:/\$\d+/},te];L.contains=tt.concat({begin:/\{/,end:/\}/,keywords:p,contains:["self"].concat(tt)});const z=[].concat(me,L.contains),ne=z.concat([{begin:/(\s*)\(/,end:/\)/,keywords:p,contains:["self"].concat(z)}]),F={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:ne},$e={variants:[{match:[/class/,/\s+/,c,/\s+/,/extends/,/\s+/,i.concat(c,"(",i.concat(/\./,c),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,c],scope:{1:"keyword",3:"title.class"}}]},ye={relevance:0,match:i.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Js,...Qs]}},Le={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},y={variants:[{match:[/function/,/\s+/,c,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[F],illegal:/%/},se={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function pe(de){return i.concat("(?!",de.join("|"),")")}const we={match:i.concat(/\b/,pe([...er,"super","import"].map(de=>`${de}\\s*\\(`)),c,i.lookahead(/\s*\(/)),className:"title.function",relevance:0},G={begin:i.concat(/\./,i.lookahead(i.concat(c,/(?![0-9A-Za-z$_(])/))),end:c,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},je={match:[/get|set/,/\s+/,c,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},F]},Be="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+s.UNDERSCORE_IDENT_RE+")\\s*=>",nt={match:[/const|var|let/,/\s+/,c,/\s*/,/=\s*/,/(async\s*)?/,i.lookahead(Be)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[F]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:p,exports:{PARAMS_CONTAINS:ne,CLASS_REFERENCE:ye},illegal:/#(?![$_A-z])/,contains:[s.SHEBANG({label:"shebang",binary:"node",relevance:5}),Le,s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,Q,Z,q,V,me,{match:/\$\d+/},te,ye,{scope:"attr",match:c+i.lookahead(":"),relevance:0},nt,{begin:"("+s.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[me,s.REGEXP_MODE,{className:"function",begin:Be,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:s.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:ne}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:b.begin,end:b.end},{match:x},{begin:v.begin,"on:begin":v.isTrulyOpeningTag,end:v.end}],subLanguage:"xml",contains:[{begin:v.begin,end:v.end,skip:!0,contains:["self"]}]}]},y,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+s.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[F,s.inherit(s.TITLE_MODE,{begin:c,className:"title.function"})]},{match:/\.\.\./,relevance:0},G,{match:"\\$"+c,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[F]},we,se,$e,je,{match:/\$[(.]/}]}}const yn="[A-Za-z$_][0-9A-Za-z$_]*",tr=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],ar=["true","false","null","undefined","NaN","Infinity"],nr=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],sr=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rr=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],ir=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],or=[].concat(rr,nr,sr);function Yl(s){const i=s.regex,l=(de,{after:Se})=>{const Oe="</"+de[0].slice(1);return de.input.indexOf(Oe,Se)!==-1},c=yn,b={begin:"<>",end:"</>"},x=/<[A-Za-z0-9\\._:-]+\s*\/>/,v={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(de,Se)=>{const Oe=de[0].length+de.index,st=de.input[Oe];if(st==="<"||st===","){Se.ignoreMatch();return}st===">"&&(l(de,{after:Oe})||Se.ignoreMatch());let rt;const Nt=de.input.substring(Oe);if(rt=Nt.match(/^\s*=/)){Se.ignoreMatch();return}if((rt=Nt.match(/^\s+extends\s+/))&&rt.index===0){Se.ignoreMatch();return}}},p={$pattern:yn,keyword:tr,literal:ar,built_in:or,"variable.language":ir},K="[0-9](_?[0-9])*",R=`\\.(${K})`,N="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",te={className:"number",variants:[{begin:`(\\b(${N})((${R})|\\.)?|(${R}))[eE][+-]?(${K})\\b`},{begin:`\\b(${N})\\b((${R})\\b|\\.)?|(${R})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},L={className:"subst",begin:"\\$\\{",end:"\\}",keywords:p,contains:[]},Q={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"xml"}},Z={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"css"}},q={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[s.BACKSLASH_ESCAPE,L],subLanguage:"graphql"}},V={className:"string",begin:"`",end:"`",contains:[s.BACKSLASH_ESCAPE,L]},me={className:"comment",variants:[s.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:c+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),s.C_BLOCK_COMMENT_MODE,s.C_LINE_COMMENT_MODE]},tt=[s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,Q,Z,q,V,{match:/\$\d+/},te];L.contains=tt.concat({begin:/\{/,end:/\}/,keywords:p,contains:["self"].concat(tt)});const z=[].concat(me,L.contains),ne=z.concat([{begin:/(\s*)\(/,end:/\)/,keywords:p,contains:["self"].concat(z)}]),F={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:ne},$e={variants:[{match:[/class/,/\s+/,c,/\s+/,/extends/,/\s+/,i.concat(c,"(",i.concat(/\./,c),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,c],scope:{1:"keyword",3:"title.class"}}]},ye={relevance:0,match:i.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...nr,...sr]}},Le={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},y={variants:[{match:[/function/,/\s+/,c,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[F],illegal:/%/},se={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function pe(de){return i.concat("(?!",de.join("|"),")")}const we={match:i.concat(/\b/,pe([...rr,"super","import"].map(de=>`${de}\\s*\\(`)),c,i.lookahead(/\s*\(/)),className:"title.function",relevance:0},G={begin:i.concat(/\./,i.lookahead(i.concat(c,/(?![0-9A-Za-z$_(])/))),end:c,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},je={match:[/get|set/,/\s+/,c,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},F]},Be="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+s.UNDERSCORE_IDENT_RE+")\\s*=>",nt={match:[/const|var|let/,/\s+/,c,/\s*/,/=\s*/,/(async\s*)?/,i.lookahead(Be)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[F]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:p,exports:{PARAMS_CONTAINS:ne,CLASS_REFERENCE:ye},illegal:/#(?![$_A-z])/,contains:[s.SHEBANG({label:"shebang",binary:"node",relevance:5}),Le,s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,Q,Z,q,V,me,{match:/\$\d+/},te,ye,{scope:"attr",match:c+i.lookahead(":"),relevance:0},nt,{begin:"("+s.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[me,s.REGEXP_MODE,{className:"function",begin:Be,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:s.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:ne}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:b.begin,end:b.end},{match:x},{begin:v.begin,"on:begin":v.isTrulyOpeningTag,end:v.end}],subLanguage:"xml",contains:[{begin:v.begin,end:v.end,skip:!0,contains:["self"]}]}]},y,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+s.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[F,s.inherit(s.TITLE_MODE,{begin:c,className:"title.function"})]},{match:/\.\.\./,relevance:0},G,{match:"\\$"+c,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[F]},we,se,$e,je,{match:/\$[(.]/}]}}function $s(s){const i=s.regex,l=Yl(s),c=yn,b=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],x={begin:[/namespace/,/\s+/,s.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},v={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:b},contains:[l.exports.CLASS_REFERENCE]},p={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},K=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],R={$pattern:yn,keyword:tr.concat(K),literal:ar,built_in:or.concat(b),"variable.language":ir},N={className:"meta",begin:"@"+c},te=(q,V,le)=>{const me=q.contains.findIndex(tt=>tt.label===V);if(me===-1)throw new Error("can not find mode to replace");q.contains.splice(me,1,le)};Object.assign(l.keywords,R),l.exports.PARAMS_CONTAINS.push(N);const L=l.contains.find(q=>q.scope==="attr"),Q=Object.assign({},L,{match:i.concat(c,i.lookahead(/\s*\?:/))});l.exports.PARAMS_CONTAINS.push([l.exports.CLASS_REFERENCE,L,Q]),l.contains=l.contains.concat([N,x,v,Q]),te(l,"shebang",s.SHEBANG()),te(l,"use_strict",p);const Z=l.contains.find(q=>q.label==="func.def");return Z.relevance=0,Object.assign(l,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),l}function Ns(s){const i=s.regex,l=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),c=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],p={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:c,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},K={className:"meta",begin:/^(>>>|\.\.\.) /},R={className:"subst",begin:/\{/,end:/\}/,keywords:p,illegal:/#/},N={begin:/\{\{/,relevance:0},te={className:"string",contains:[s.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[s.BACKSLASH_ESCAPE,K],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[s.BACKSLASH_ESCAPE,K],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[s.BACKSLASH_ESCAPE,K,N,R]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[s.BACKSLASH_ESCAPE,K,N,R]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[s.BACKSLASH_ESCAPE,N,R]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[s.BACKSLASH_ESCAPE,N,R]},s.APOS_STRING_MODE,s.QUOTE_STRING_MODE]},L="[0-9](_?[0-9])*",Q=`(\\b(${L}))?\\.(${L})|\\b(${L})\\.`,Z=`\\b|${c.join("|")}`,q={className:"number",relevance:0,variants:[{begin:`(\\b(${L})|(${Q}))[eE][+-]?(${L})[jJ]?(?=${Z})`},{begin:`(${Q})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${Z})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${Z})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${Z})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${Z})`},{begin:`\\b(${L})[jJ](?=${Z})`}]},V={className:"comment",begin:i.lookahead(/# type:/),end:/$/,keywords:p,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},le={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:["self",K,q,te,s.HASH_COMMENT_MODE]}]};return R.contains=[te,q,K],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:p,illegal:/(<\/|\?)|=>/,contains:[K,q,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},te,V,s.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,l],scope:{1:"keyword",3:"title.function"},contains:[le]},{variants:[{match:[/\bclass/,/\s+/,l,/\s*/,/\(\s*/,l,/\s*\)/]},{match:[/\bclass/,/\s+/,l]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[q,le,te]}]}}function Xl(s){const i={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},l={match:/[{}[\],:]/,className:"punctuation",relevance:0},c=["true","false","null"],b={scope:"literal",beginKeywords:c.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:c},contains:[i,l,s.QUOTE_STRING_MODE,b,s.C_NUMBER_MODE,s.C_LINE_COMMENT_MODE,s.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function jn(s){const i=s.regex,l={},c={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[l]}]};Object.assign(l,{className:"variable",variants:[{begin:i.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},c]});const b={className:"subst",begin:/\$\(/,end:/\)/,contains:[s.BACKSLASH_ESCAPE]},x=s.inherit(s.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),v={begin:/<<-?\s*(?=\w+)/,starts:{contains:[s.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},p={className:"string",begin:/"/,end:/"/,contains:[s.BACKSLASH_ESCAPE,l,b]};b.contains.push(p);const K={match:/\\"/},R={className:"string",begin:/'/,end:/'/},N={match:/\\'/},te={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},s.NUMBER_MODE,l]},L=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],Q=s.SHEBANG({binary:`(${L.join("|")})`,relevance:10}),Z={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[s.inherit(s.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},q=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],V=["true","false"],le={match:/(\/[a-z._-]+)+/},me=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],tt=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],z=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],ne=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:q,literal:V,built_in:[...me,...tt,"set","shopt",...z,...ne]},contains:[Q,s.SHEBANG(),Z,te,x,v,le,p,K,R,N,l]}}function Ts(s){const i="true false yes no null",l="[\\w#;/?:@&=+$,.~*'()[\\]]+",c={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},b={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},x={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},v={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[s.BACKSLASH_ESCAPE,b]},p=s.inherit(v,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),L={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},Q={end:",",endsWithParent:!0,excludeEnd:!0,keywords:i,relevance:0},Z={begin:/\{/,end:/\}/,contains:[Q],illegal:"\\n",relevance:0},q={begin:"\\[",end:"\\]",contains:[Q],illegal:"\\n",relevance:0},V=[c,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+l},{className:"type",begin:"!<"+l+">"},{className:"type",begin:"!"+l},{className:"type",begin:"!!"+l},{className:"meta",begin:"&"+s.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+s.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},s.HASH_COMMENT_MODE,{beginKeywords:i,keywords:{literal:i}},L,{className:"number",begin:s.C_NUMBER_RE+"\\b",relevance:0},Z,q,x,v],le=[...V];return le.pop(),le.push(p),Q.contains=le,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:V}}function Ms(s){const i=s.regex,l=i.concat(/[\p{L}_]/u,i.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),c=/[\p{L}0-9._:-]+/u,b={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},x={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},v=s.inherit(x,{begin:/\(/,end:/\)/}),p=s.inherit(s.APOS_STRING_MODE,{className:"string"}),K=s.inherit(s.QUOTE_STRING_MODE,{className:"string"}),R={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:c,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[b]},{begin:/'/,end:/'/,contains:[b]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[x,K,p,v,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[x,v,K,p]}]}]},s.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},b,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[K]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[R],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[R],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:i.concat(/</,i.lookahead(i.concat(l,i.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:l,relevance:0,starts:R}]},{className:"tag",begin:i.concat(/<\//,i.lookahead(i.concat(l,/>/))),contains:[{className:"name",begin:l,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const Jl=s=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:s.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[s.APOS_STRING_MODE,s.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:s.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Ql=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ec=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],tc=[...Ql,...ec],ac=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),nc=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),sc=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),rc=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function ic(s){const i=s.regex,l=Jl(s),c={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},b="and or not only",x=/@-?\w[\w]*(-\w+)*/,v="[a-zA-Z-][a-zA-Z0-9_-]*",p=[s.APOS_STRING_MODE,s.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[l.BLOCK_COMMENT,c,l.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+v,relevance:0},l.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+nc.join("|")+")"},{begin:":(:)?("+sc.join("|")+")"}]},l.CSS_VARIABLE,{className:"attribute",begin:"\\b("+rc.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[l.BLOCK_COMMENT,l.HEXCOLOR,l.IMPORTANT,l.CSS_NUMBER_MODE,...p,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...p,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},l.FUNCTION_DISPATCH]},{begin:i.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:x},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:b,attribute:ac.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...p,l.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+tc.join("|")+")\\b"}]}}function oc(s){const i=s.regex,l=s.COMMENT("--","$"),c={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},b={begin:/"/,end:/"/,contains:[{match:/""/}]},x=["true","false","unknown"],v=["double precision","large object","with timezone","without timezone"],p=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],K=["add","asc","collation","desc","final","first","last","view"],R=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],N=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],te=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],L=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],Q=N,Z=[...R,...K].filter(ne=>!N.includes(ne)),q={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},V={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},le={match:i.concat(/\b/,i.either(...Q),/\s*\(/),relevance:0,keywords:{built_in:Q}};function me(ne){return i.concat(/\b/,i.either(...ne.map(F=>F.replace(/\s+/,"\\s+"))),/\b/)}const tt={scope:"keyword",match:me(L),relevance:0};function z(ne,{exceptions:F,when:$e}={}){const ye=$e;return F=F||[],ne.map(Le=>Le.match(/\|\d+$/)||F.includes(Le)?Le:ye(Le)?`${Le}|0`:Le)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:z(Z,{when:ne=>ne.length<3}),literal:x,type:p,built_in:te},contains:[{scope:"type",match:me(v)},tt,le,q,c,b,s.C_NUMBER_MODE,s.C_BLOCK_COMMENT_MODE,l,V]}}function Rs(s){const i=s.regex,l={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},c={begin:"^[-\\*]{3,}",end:"$"},b={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},x={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},v={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},p=/[A-Za-z][A-Za-z0-9+.-]*/,K={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:i.concat(/\[.+?\]\(/,p,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},R={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},N={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},te=s.inherit(R,{contains:[]}),L=s.inherit(N,{contains:[]});R.contains.push(L),N.contains.push(te);let Q=[l,K];return[R,N,te,L].forEach(le=>{le.contains=le.contains.concat(Q)}),Q=Q.concat(R,N),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:Q},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:Q}]}]},l,x,R,N,{className:"quote",begin:"^>\\s+",contains:Q,end:"$"},b,c,K,v,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}const Ma=Da([]),Ea=Da(!1);let lr=0;function en(s){const i=`msg_${++lr}`;return Ma.update(l=>[...l,{id:i,role:"user",content:s,timestamp:new Date().toISOString()}]),i}function Ha(){const s=`msg_${++lr}`;return Ma.update(i=>[...i,{id:s,role:"assistant",content:"",timestamp:new Date().toISOString(),streaming:!0,toolCalls:[]}]),Ea.set(!0),s}function lc(s,i){Ma.update(l=>l.map(c=>c.id===s?{...c,content:c.content+i}:c))}function Bn(s,i){Ma.update(l=>l.map(c=>c.id===s?{...c,content:i,streaming:!1}:c)),Ea.set(!1)}function cc(s,i){Ma.update(l=>l.map(c=>c.id===s?{...c,toolCalls:[...c.toolCalls||[],i]}:c))}function Cs(){Ma.set([]),Ea.set(!1)}var dc=g('<div class="empty-state svelte-mwxll1"><div class="empty-icon-circle svelte-mwxll1"><!></div> <span class="empty-title svelte-mwxll1"> </span> <span class="empty-hint svelte-mwxll1"> </span></div>'),uc=g('<span class="thinking-message svelte-mwxll1"> </span>'),vc=g('<div class="thinking-indicator svelte-mwxll1"><span class="thinking-spinner svelte-mwxll1"> </span> <!></div>'),pc=g('<span class="streaming-cursor svelte-mwxll1"></span>'),gc=g("<!> <!>",1),fc=g('<div class="tool-arg-line svelte-mwxll1"><span class="tool-arg-key svelte-mwxll1"> </span> <span class="tool-arg-val svelte-mwxll1"> </span></div>'),hc=g('<div class="tool-call-args svelte-mwxll1"></div>'),bc=g('<div class="tool-call-result svelte-mwxll1"><span class="tool-result-label svelte-mwxll1">result</span> <span class="tool-result-val svelte-mwxll1"> </span></div>'),_c=g('<div class="tool-call-item svelte-mwxll1"><div class="tool-call-row svelte-mwxll1"><span class="tool-call-index svelte-mwxll1"></span> <span class="tool-call-name svelte-mwxll1"> </span> <!></div> <!> <!></div>'),mc=g('<div class="tool-calls-body svelte-mwxll1"></div>'),yc=g('<div class="tool-calls-container svelte-mwxll1"><div class="tool-calls-header svelte-mwxll1"><div class="tool-calls-header-left svelte-mwxll1"><div><!></div> <!> <span class="tool-calls-count svelte-mwxll1"> </span></div> <span class="tool-calls-summary svelte-mwxll1"> </span></div> <!></div>'),wc=g('<div><div class="message-avatar svelte-mwxll1"><!></div> <div class="message-body svelte-mwxll1"><div class="message-header svelte-mwxll1"><span class="message-role svelte-mwxll1"> </span> <span class="message-time svelte-mwxll1"> </span></div> <div><!></div> <!></div></div>'),Ec=g('<p class="plan-summary svelte-mwxll1"> </p>'),kc=g('<div class="plan-step svelte-mwxll1"><span class="step-number svelte-mwxll1"></span> <span class="step-text svelte-mwxll1"> </span></div>'),xc=g('<div class="plan-steps svelte-mwxll1"></div>'),Sc=g('<p class="plan-question svelte-mwxll1"> </p>'),Ac=g('<button class="plan-option-btn svelte-mwxll1"><span class="plan-option-key svelte-mwxll1"> </span> <span class="plan-option-text svelte-mwxll1"> </span></button>'),$c=g('<div class="plan-options svelte-mwxll1"></div>'),Nc=g('<div class="plan-card svelte-mwxll1"><div class="plan-header svelte-mwxll1"><div class="plan-header-left svelte-mwxll1"><div class="plan-icon svelte-mwxll1"><!></div> <span class="plan-title svelte-mwxll1">Plan</span></div> <button class="plan-dismiss svelte-mwxll1" title="Dismiss"><!></button></div> <div class="plan-body svelte-mwxll1"><!> <!> <!></div> <div class="plan-footer svelte-mwxll1"><!> <div class="plan-custom-input svelte-mwxll1"><textarea class="plan-answer-input svelte-mwxll1"></textarea> <button class="plan-send-btn svelte-mwxll1" title="Send"><!></button></div></div></div>'),Tc=g('<button class="retry-btn svelte-mwxll1">Retry</button>'),Mc=g('<div class="error-bar svelte-mwxll1"><span class="svelte-mwxll1"> </span> <!></div>'),Rc=g('<img class="attachment-thumb svelte-mwxll1"/>'),Cc=g('<div class="attachment-icon svelte-mwxll1"><!></div>'),Oc=g("<button> </button>"),zc=g('<div class="type-dropdown svelte-mwxll1"></div>'),Ic=g('<div class="attachment-badge-wrapper svelte-mwxll1"><div><!> <div class="attachment-info svelte-mwxll1"><span class="attachment-name svelte-mwxll1"> </span> <button class="attachment-type-btn svelte-mwxll1"><span class="svelte-mwxll1"> </span> <!></button></div> <button class="attachment-remove svelte-mwxll1" title="Remove file"><!></button></div> <!></div>'),Pc=g('<div class="attachment-badges svelte-mwxll1"></div>'),Lc=g('<div class="attach-dropdown svelte-mwxll1"><button class="attach-option svelte-mwxll1"><!> <span class="svelte-mwxll1">File</span></button> <button class="attach-option svelte-mwxll1"><!> <span class="svelte-mwxll1">Screenshot</span></button></div>'),Dc=g('<aside><div class="sidebar-header svelte-mwxll1"><div class="header-left svelte-mwxll1"><div class="header-icon-circle svelte-mwxll1"><!></div> <span class="header-name svelte-mwxll1"> </span></div> <button class="collapse-btn svelte-mwxll1" title="Collapse sidebar"><!></button></div> <div class="messages svelte-mwxll1"><!></div> <!> <!> <div class="input-area svelte-mwxll1"><!> <div class="input-row svelte-mwxll1"><div class="attach-container svelte-mwxll1"><button class="action-btn attach-btn svelte-mwxll1" title="Attach"><!></button> <!></div> <input type="file" multiple="" class="file-input-hidden svelte-mwxll1"/> <textarea class="chat-input svelte-mwxll1"></textarea> <div class="input-actions svelte-mwxll1"><button class="action-btn clear-btn svelte-mwxll1" title="Clear chat"><!></button> <button class="action-btn send-btn svelte-mwxll1" title="Send message"><!></button></div></div></div>  <div class="resize-handle svelte-mwxll1"></div></aside>');function jc(s,i){Sa(i,!0);const l=()=>zt(Ma,"$chatMessages",p),c=()=>zt(Fs,"$settingsData",p),b=()=>zt(Ea,"$chatStreaming",p),x=()=>zt(xa,"$currentProjectStore",p),v=()=>zt(Wa,"$architectSidebarOpen",p),[p,K]=Ca();let R=ie(null);Ut.registerLanguage("javascript",As),Ut.registerLanguage("js",As),Ut.registerLanguage("typescript",$s),Ut.registerLanguage("ts",$s),Ut.registerLanguage("python",Ns),Ut.registerLanguage("py",Ns),Ut.registerLanguage("json",Xl),Ut.registerLanguage("bash",jn),Ut.registerLanguage("sh",jn),Ut.registerLanguage("shell",jn),Ut.registerLanguage("yaml",Ts),Ut.registerLanguage("yml",Ts),Ut.registerLanguage("xml",Ms),Ut.registerLanguage("html",Ms),Ut.registerLanguage("css",ic),Ut.registerLanguage("sql",oc),Ut.registerLanguage("markdown",Rs),Ut.registerLanguage("md",Rs);const N=new zn.Renderer;N.code=({text:h,lang:k})=>{const m=k&&Ut.getLanguage(k)?k:"";let a;try{a=m?Ut.highlight(h,{language:m}).value:Ut.highlightAuto(h).value}catch{a=h.replace(/</g,"&lt;").replace(/>/g,"&gt;")}return`<div class="code-block-wrapper"><div class="code-block-header"><span class="code-lang">${k||"code"}</span><button class="code-copy-btn" onclick="(function(btn){var code=btn.closest('.code-block-wrapper').querySelector('code').textContent;navigator.clipboard.writeText(code);btn.dataset.copied='true';setTimeout(function(){btn.dataset.copied='';},1500);})(this)" title="Copy code">Copy</button></div><pre><code class="hljs${m?" language-"+m:""}">${a}</code></pre></div>`},zn.setOptions({renderer:N});const te=[{value:"auto",label:"Auto-detect"},{value:"requirements",label:"Requirements Doc"},{value:"api_spec",label:"API Spec / OpenAPI"},{value:"data_sample",label:"Data Sample"},{value:"diagram",label:"Architecture Diagram"},{value:"config",label:"Config / Settings"},{value:"code",label:"Source Code"},{value:"documentation",label:"Documentation"},{value:"test_cases",label:"Test Cases"},{value:"schema",label:"Schema / Model"}],L={"image/png":"image","image/jpeg":"image","image/gif":"image","image/webp":"image","image/svg+xml":"image","image/bmp":"image","application/pdf":"pdf","application/msword":"document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"document","application/vnd.oasis.opendocument.text":"document","application/rtf":"document","application/vnd.ms-excel":"spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"spreadsheet","application/vnd.oasis.opendocument.spreadsheet":"spreadsheet","text/csv":"spreadsheet","application/vnd.ms-powerpoint":"presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation":"presentation","application/vnd.oasis.opendocument.presentation":"presentation","text/plain":"text","text/markdown":"text","application/json":"text","text/html":"text","text/css":"text","application/javascript":"text","application/x-yaml":"text","text/yaml":"text","application/xml":"text","text/xml":"text"},Q={".py":"text",".js":"text",".ts":"text",".jsx":"text",".tsx":"text",".json":"text",".md":"text",".txt":"text",".csv":"spreadsheet",".yaml":"text",".yml":"text",".xml":"text",".html":"text",".css":"text",".sql":"text",".sh":"text",".bash":"text",".r":"text",".rb":"text",".go":"text",".rs":"text",".java":"text",".kt":"text",".swift":"text",".pdf":"pdf",".doc":"document",".docx":"document",".odt":"document",".rtf":"document",".xls":"spreadsheet",".xlsx":"spreadsheet",".ods":"spreadsheet",".ppt":"presentation",".pptx":"presentation",".odp":"presentation",".png":"image",".jpg":"image",".jpeg":"image",".gif":"image",".webp":"image",".svg":"image",".bmp":"image"},Z=Object.keys(L).join(",")+",.py,.js,.ts,.jsx,.tsx,.sql,.sh,.r,.rb,.go,.rs,.java,.kt,.swift";function q(h){if(h.type&&L[h.type])return L[h.type];const k="."+h.name.split(".").pop()?.toLowerCase();return k&&Q[k]?Q[k]:"other"}let V=ie(ka([])),le=ie(void 0),me=ie(!1);async function tt(h){const k=Array.from(h);for(const m of k){if(m.size>20*1024*1024)continue;const a=q(m),o=await z(m),f={id:`file-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:m.name,type:m.type||"application/octet-stream",size:m.size,category:a,data:o,docType:"auto"};a==="image"&&(f.preview=`data:${m.type};base64,${o}`),u(V,[...e(V),f],!0)}}function z(h){return new Promise((k,m)=>{const a=new FileReader;a.onload=()=>{const o=a.result,f=o.includes(",")?o.split(",")[1]:o;k(f)},a.onerror=m,a.readAsDataURL(h)})}function ne(h){u(V,e(V).filter(k=>k.id!==h),!0)}let F=ie(null);function $e(h,k){u(V,e(V).map(m=>m.id===h?{...m,docType:k}:m),!0),u(F,null)}function ye(h){return!h||h==="auto"?"Auto-detect":te.find(k=>k.value===h)?.label??h}function Le(h){const k=h.target;k.files&&k.files.length>0&&(tt(k.files),k.value="")}function y(h){const k=h.clipboardData?.items;if(!k)return;const m=[];for(const a of Array.from(k))if(a.kind==="file"){const o=a.getAsFile();o&&m.push(o)}m.length>0&&(h.preventDefault(),tt(m))}const se=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"],pe=["Drafting the blueprint...","Consulting the Oracle...","Aligning the nodes...","Designing the inevitable...","Architecting a masterpiece...","Tracing the path of causality...","Reshaping the construct...","Balancing the equation...","Loading the next iteration...","Surveying the pipeline...","Engineering the solution...","Selecting the right components...","Orchestrating the agents...","Running the simulation...","Weaving the connections...","Compiling the grand design...","Evaluating all possible paths...","Constructing the framework...","Visualizing the architecture...","Reticulating splines..."];let we=ie(ka(se[0])),G=ie(ka(pe[0])),je=null,Be=null,nt=0,de=0;const Se=dt(()=>l().some(h=>h.streaming&&!h.content));Ta(()=>{e(Se)?(nt=0,de=Math.floor(Math.random()*pe.length),u(G,pe[de],!0),je=setInterval(()=>{nt=(nt+1)%se.length,u(we,se[nt],!0)},80),Be=setInterval(()=>{de=(de+1)%pe.length,u(G,pe[de],!0)},2500)):(je&&(clearInterval(je),je=null),Be&&(clearInterval(Be),Be=null))});const Oe=dt(()=>c()?.user_profile?.assistant_name||"The Architect");let st=ka({});function rt(h){st[h]=!st[h]}function Nt(h){const k={};for(const m of h)k[m.tool]=(k[m.tool]||0)+1;return Object.entries(k).map(([m,a])=>a>1?`${m} x${a}`:m).join(", ")}function lt(h){return h.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/\bon\w+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+)/gi,"")}function pt(h){if(!h)return"";const k=zn(h,{async:!1});return lt(k)}let Ht=ie(""),Ft=ie(void 0),ta=ie(void 0),at=ie(null),W=ie(""),oe=ie(""),ge=null,w=ie(0),C=!1;const ce=5;let fe=ie(380),Ee=ie(!1),ke=ie(0),_=ie(0);const P=280,U=.5;function j(h){h.preventDefault(),u(Ee,!0),u(ke,h.clientX,!0),u(_,e(fe),!0),document.addEventListener("mousemove",be),document.addEventListener("mouseup",he)}function be(h){if(!e(Ee))return;const k=Math.floor(window.innerWidth*U),m=h.clientX-e(ke);u(fe,Math.max(P,Math.min(k,e(_)+m)),!0)}function he(){u(Ee,!1),document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",he)}function Ue(h){Ga.update(k=>{const m=new Map;for(const o of k)m.set(o.id,o);for(const o of h.nodes){const f=m.get(o.id);f&&(f.data={...f.data,label:o.label||f.data.label,...o.config},o.position&&(f.position=o.position))}const a=h.nodes.filter(o=>!m.has(o.id)).map(o=>({id:o.id,type:o.type,position:o.position??{x:250,y:200},data:{label:o.label||o.id,...o.config}}));return[...k,...a]}),Qn.update(k=>{const m=new Set;for(const o of k)m.add(o.id);const a=h.edges.filter(o=>!m.has(o.id)).map(o=>({id:o.id,source:o.source,target:o.target,sourceHandle:o.source_handle??void 0,targetHandle:o.target_handle??void 0}));return[...k,...a]}),h.nodes.length===0&&(Ga.set([]),Qn.set([])),ci()}function Ce(){const h=window.location.protocol==="https:"?"wss:":"ws:",k=ia(xa),m=k?`?project=${encodeURIComponent(k.name)}`:"";return`${h}//${window.location.host}/ws/assistant${m}`}function He(){if(e(at)&&e(at).readyState===WebSocket.OPEN)return;u(oe,""),C=!1;let h;try{h=new WebSocket(Ce())}catch{u(oe,"AI Assistant requires a configured LLM provider. Check Settings.");return}h.onopen=()=>{u(oe,""),u(w,0);const k=ia(ys);if(k){ys.set(null),en(k.text),u(W,Ha(),!0);const m={action:"chat",message:k.text};k.attachments&&k.attachments.length>0&&(m.attachments=k.attachments);try{h.send(JSON.stringify(m))}catch{u(oe,"Failed to send initial message."),Ea.set(!1),u(W,"")}Fe()}},h.onmessage=k=>{let m;try{m=JSON.parse(k.data)}catch{return}if(m.type==="token")e(W)||u(W,Ha(),!0),lc(e(W),m.content),Fe();else if(m.type==="response_complete"){e(W)&&Bn(e(W),m.full_text),u(W,""),Fe();const a=ia(xa);if(a){const o=ia(Ma);Qt.assistant.saveHistory(a.name,o.map(f=>({role:f.role,content:f.content,timestamp:f.timestamp??new Date().toISOString(),toolCalls:f.toolCalls??[]}))).catch(()=>{})}}else if(m.type==="plan"){e(W)||u(W,Ha(),!0);let a=[],o=[];try{a=JSON.parse(m.steps)}catch{a=[]}try{o=JSON.parse(m.options)}catch{o=[]}u(R,{summary:m.summary||"",steps:a,options:o,question:m.question||"",msgId:e(W)},!0),Fe()}else if(m.type==="tool_call"){if(e(W)||u(W,Ha(),!0),m.tool==="present_plan"){Fe();return}let a=m.args;if(typeof a=="string")try{a=JSON.parse(a)}catch{a={raw:a}}(!a||typeof a!="object"||Array.isArray(a))&&(a={}),cc(e(W),{tool:m.tool,args:a,result:m.result}),Fe()}else if(m.type==="canvas_sync"){const a=m.canvas;a&&(Ue(a),li(a.nodes,a.edges))}else m.type==="error"&&(u(oe,m.message,!0),C=!0,e(W)?Bn(e(W),""):Ea.set(!1),u(W,""))},h.onclose=()=>{if(e(W)?(Bn(e(W),"[Connection lost]"),u(W,"")):Ea.set(!1),u(at,null),C){C=!1,u(w,ce);return}Un(w),e(w)<ce?(u(oe,`Connecting to assistant... (attempt ${e(w)}/${ce})`),ge=setTimeout(He,3e3)):u(oe,"Could not connect to AI Assistant. Ensure an LLM API key is configured in Settings.")},h.onerror=()=>{},u(at,h,!0)}function St(){u(w,0),He()}function Vt(){ge&&(clearTimeout(ge),ge=null),e(at)?.close(),u(at,null)}function ft(){const h=e(Ht).trim();if(!h&&e(V).length===0||b()||!e(at))return;const k=h||`[${e(V).length} file${e(V).length>1?"s":""} attached]`;en(k),u(W,Ha(),!0);const m={action:"chat",message:h||"Please analyze the attached files."};e(V).length>0&&(m.attachments=e(V).map(a=>({name:a.name,type:a.type,category:a.category,size:a.size,data:a.data,docType:a.docType}))),u(Ht,""),u(V,[],!0);try{e(at).send(JSON.stringify(m))}catch{u(oe,"Failed to send message. Connection may be lost."),Ea.set(!1),u(W,"");return}Fe()}function ut(h){h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),ft())}function ht(){if(Cs(),e(at)&&e(at).readyState===WebSocket.OPEN)try{e(at).send(JSON.stringify({action:"clear_history"}))}catch{}u(oe,"")}function Fe(){requestAnimationFrame(()=>{e(Ft)&&(e(Ft).scrollTop=e(Ft).scrollHeight)})}function It(h){return new Date(h).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function Lt(h){if(!(!e(R)||!e(at))){en(h),u(W,Ha(),!0);try{e(at).send(JSON.stringify({action:"chat",message:h}))}catch{u(oe,"Failed to send plan selection."),Ea.set(!1),u(W,"")}u(R,null),Fe()}}function aa(){Wa.set(!1)}Ta(()=>{const h=x();hs(()=>{h&&e(at)&&(e(at).close(),u(at,null),He())})}),Ta(()=>{const h=x();h&&hs(()=>{Cs(),u(oe,""),Qt.assistant.getHistory(h.name).then(k=>{if(k&&k.length>0)for(const m of k)m.role==="user"?en(m.content):m.role==="assistant"&&Ma.update(a=>[...a,{id:`msg_hist_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,role:"assistant",content:m.content,timestamp:m.timestamp||new Date().toISOString(),streaming:!1,toolCalls:m.toolCalls??[]}])}).catch(()=>{})})});function ca(h){const m=h.detail?.instruction;if(!m||!e(at)||e(at).readyState!==WebSocket.OPEN)return;const o=`[Oracle Approved Insight]
`+m;en(o),u(W,Ha(),!0);try{e(at).send(JSON.stringify({action:"chat",message:o}))}catch{u(oe,"Failed to forward Oracle instruction."),Ea.set(!1),u(W,"")}Fe(),Wa.set(!0)}wn(()=>{He(),e(ta)?.focus(),window.addEventListener("oracle-approved",ca)}),Is(()=>{Vt(),window.removeEventListener("oracle-approved",ca),je&&clearInterval(je),Be&&clearInterval(Be),document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",he)});var vt=qe(),Ze=J(vt);{var Ye=h=>{var k=Dc();let m,a;var o=n(k),f=n(o),O=n(f),_e=n(O);fn(_e,{size:16}),t(O);var ze=r(O,2),T=n(ze,!0);t(ze),t(f);var A=r(f,2),B=n(A);jl(B,{size:14}),t(A),t(o);var Je=r(o,2),Me=n(Je);{var Ae=H=>{var De=dc(),it=n(De),Pe=n(it);fn(Pe,{size:48}),t(it);var ue=r(it,2),ot=n(ue,!0);t(ue);var Dt=r(ue,2),qt=n(Dt,!0);t(Dt),t(De),D(()=>{X(ot,e(Oe)),X(qt,e(Oe)==="The Architect"?"I am The Architect. I designed the canvas upon which your agent pipelines take form. Describe what you wish to construct, and I shall design it.":`Ask ${e(Oe)} to help build your agent pipeline.`)}),d(H,De)},Ne=H=>{var De=qe(),it=J(De);yt(it,1,l,Pe=>Pe.id,(Pe,ue)=>{var ot=wc();let Dt;var qt=n(ot),ga=n(qt);{var ba=Ve=>{Ys(Ve,{size:18})},Qe=Ve=>{fn(Ve,{size:18})};M(ga,Ve=>{e(ue).role==="user"?Ve(ba):Ve(Qe,!1)})}t(qt);var Re=r(qt,2),sa=n(Re),jt=n(sa),fa=n(jt,!0);t(jt);var Kt=r(jt,2),ya=n(Kt,!0);t(Kt),t(sa);var ra=r(sa,2);let ve;var ua=n(ra);{var Xe=Ve=>{var mt=qe(),S=J(mt);{var I=Te=>{var xe=vc(),Bt=n(xe),wa=n(Bt,!0);t(Bt);var ja=r(Bt,2);bi(ja,()=>e(G),za=>{var Ba=uc(),xn=n(Ba,!0);t(Ba),D(()=>X(xn,e(G))),d(za,Ba)}),t(xe),D(()=>X(wa,e(we))),d(Te,xe)},Y=Te=>{var xe=gc(),Bt=J(xe);ti(Bt,()=>pt(e(ue).content));var wa=r(Bt,2);{var ja=za=>{var Ba=pc();d(za,Ba)};M(wa,za=>{e(ue).streaming&&za(ja)})}d(Te,xe)};M(S,Te=>{e(ue).streaming&&!e(ue).content?Te(I):Te(Y,!1)})}d(Ve,mt)},ee=Ve=>{var mt=Hn();D(()=>X(mt,e(ue).content)),d(Ve,mt)};M(ua,Ve=>{e(ue).role==="assistant"?Ve(Xe):Ve(ee,!1)})}t(ra);var ae=r(ra,2);{var Ke=Ve=>{var mt=yc(),S=n(mt),I=n(S),Y=n(I);let Te;var xe=n(Y);ei(xe,{size:12}),t(Y);var Bt=r(Y,2);_n(Bt,{size:12});var wa=r(Bt,2),ja=n(wa);t(wa),t(I);var za=r(I,2),Ba=n(za,!0);t(za),t(S);var xn=r(S,2);{var dr=Xa=>{var Sn=mc();yt(Sn,21,()=>e(ue).toolCalls,Ot,(ur,$a,vr)=>{var An=_c(),$n=n(An),ds=n($n);ds.textContent=vr+1;var Nn=r(ds,2),pr=n(Nn,!0);t(Nn);var gr=r(Nn,2);{var fr=_a=>{ai(_a,{size:11,class:"tool-call-ok"})};M(gr,_a=>{e($a).result&&_a(fr)})}t($n);var us=r($n,2);{var hr=_a=>{var Ua=hc();yt(Ua,21,()=>Object.entries(e($a).args),Ot,(on,Tn)=>{var ln=dt(()=>Cr(e(Tn),2));let yr=()=>e(ln)[0],Ja=()=>e(ln)[1];var Mn=fc(),Rn=n(Mn),wr=n(Rn);t(Rn);var vs=r(Rn,2),Er=n(vs,!0);t(vs),t(Mn),D(kr=>{X(wr,`${yr()??""}:`),X(Er,kr)},[()=>typeof Ja()=="string"?Ja().length>120?Ja().slice(0,117)+"...":Ja():JSON.stringify(Ja())]),d(on,Mn)}),t(Ua),d(_a,Ua)},br=dt(()=>e($a).args&&Object.keys(e($a).args).length>0);M(us,_a=>{e(br)&&_a(hr)})}var _r=r(us,2);{var mr=_a=>{var Ua=bc(),on=r(n(Ua),2),Tn=n(on,!0);t(on),t(Ua),D(ln=>X(Tn,ln),[()=>e($a).result.length>200?e($a).result.slice(0,197)+"...":e($a).result]),d(_a,Ua)};M(_r,_a=>{e($a).result&&_a(mr)})}t(An),D(()=>X(pr,e($a).tool)),d(ur,An)}),t(Sn),d(Xa,Sn)};M(xn,Xa=>{st[e(ue).id]&&Xa(dr)})}t(mt),D(Xa=>{Te=Rt(Y,1,"tool-chevron svelte-mwxll1",null,Te,{expanded:st[e(ue).id]}),X(ja,`${e(ue).toolCalls.length??""} tool
												call${e(ue).toolCalls.length!==1?"s":""}`),X(Ba,Xa)},[()=>Nt(e(ue).toolCalls)]),$("click",S,()=>rt(e(ue).id)),d(Ve,mt)};M(ae,Ve=>{e(ue).toolCalls&&e(ue).toolCalls.length>0&&Ve(Ke)})}t(Re),t(ot),D(Ve=>{Dt=Rt(ot,1,"message svelte-mwxll1",null,Dt,{user:e(ue).role==="user",assistant:e(ue).role==="assistant"}),X(fa,e(ue).role==="user"?"You":e(Oe)),X(ya,Ve),ve=Rt(ra,1,"message-content svelte-mwxll1",null,ve,{markdown:e(ue).role==="assistant"})},[()=>It(e(ue).timestamp)]),d(Pe,ot)}),d(H,De)};M(Me,H=>{l().length===0?H(Ae):H(Ne,!1)})}t(Je),hn(Je,H=>u(Ft,H),()=>e(Ft));var At=r(Je,2);{var Gt=H=>{var De=Nc(),it=n(De),Pe=n(it),ue=n(Pe),ot=n(ue);_n(ot,{size:11}),t(ue),We(2),t(Pe);var Dt=r(Pe,2),qt=n(Dt);mn(qt,{size:12}),t(Dt),t(it);var ga=r(it,2),ba=n(ga);{var Qe=ae=>{var Ke=Ec(),Ve=n(Ke,!0);t(Ke),D(()=>X(Ve,e(R).summary)),d(ae,Ke)};M(ba,ae=>{e(R).summary&&ae(Qe)})}var Re=r(ba,2);{var sa=ae=>{var Ke=xc();yt(Ke,21,()=>e(R).steps,Ot,(Ve,mt,S)=>{var I=kc(),Y=n(I);Y.textContent=S+1;var Te=r(Y,2),xe=n(Te,!0);t(Te),t(I),D(()=>X(xe,e(mt))),d(Ve,I)}),t(Ke),d(ae,Ke)};M(Re,ae=>{e(R).steps.length>0&&ae(sa)})}var jt=r(Re,2);{var fa=ae=>{var Ke=Sc(),Ve=n(Ke,!0);t(Ke),D(()=>X(Ve,e(R).question)),d(ae,Ke)};M(jt,ae=>{e(R).question&&ae(fa)})}t(ga);var Kt=r(ga,2),ya=n(Kt);{var ra=ae=>{var Ke=$c();yt(Ke,21,()=>e(R).options,Ot,(Ve,mt,S)=>{var I=Ac(),Y=n(I),Te=n(Y,!0);t(Y);var xe=r(Y,2),Bt=n(xe,!0);t(xe),t(I),D(wa=>{X(Te,wa),X(Bt,e(mt))},[()=>String.fromCharCode(65+S)]),$("click",I,()=>Lt(e(mt))),d(Ve,I)}),t(Ke),d(ae,Ke)};M(ya,ae=>{e(R).options.length>0&&ae(ra)})}var ve=r(ya,2),ua=n(ve);et(ua,"rows",2);var Xe=r(ua,2),ee=n(Xe);_s(ee,{size:12}),t(Xe),t(ve),t(Kt),t(De),D(()=>et(ua,"placeholder",e(R).options.length>0?"Or type your own response...":"Type your response...")),$("click",Dt,()=>u(R,null)),$("keydown",ua,ae=>{if(ae.key==="Enter"&&!ae.shiftKey){ae.preventDefault();const Ke=ae.currentTarget;Ke.value.trim()&&Lt(Ke.value.trim())}}),$("click",Xe,ae=>{const Ke=ae.currentTarget.previousElementSibling;Ke?.value.trim()&&Lt(Ke.value.trim())}),d(H,De)};M(At,H=>{e(R)&&H(Gt)})}var gt=r(At,2);{var Mt=H=>{var De=Mc(),it=n(De),Pe=n(it,!0);t(it);var ue=r(it,2);{var ot=Dt=>{var qt=Tc();$("click",qt,St),d(Dt,qt)};M(ue,Dt=>{e(w)>=ce&&Dt(ot)})}t(De),D(()=>X(Pe,e(oe))),d(H,De)};M(gt,H=>{e(oe)&&H(Mt)})}var bt=r(gt,2),Zt=n(bt);{var oa=H=>{var De=Pc();yt(De,21,()=>e(V),it=>it.id,(it,Pe)=>{var ue=Ic(),ot=n(ue);let Dt;var qt=n(ot);{var ga=ee=>{var ae=Rc();D(()=>{et(ae,"src",e(Pe).preview),et(ae,"alt",e(Pe).name)}),d(ee,ae)},ba=ee=>{var ae=Cc(),Ke=n(ae);{var Ve=xe=>{ms(xe,{size:14})},mt=xe=>{Ll(xe,{size:14})},S=xe=>{Ul(xe,{size:14})},I=xe=>{ms(xe,{size:14})},Y=xe=>{fi(xe,{size:14})},Te=xe=>{ni(xe,{size:14})};M(Ke,xe=>{e(Pe).category==="pdf"?xe(Ve):e(Pe).category==="spreadsheet"?xe(mt,1):e(Pe).category==="presentation"?xe(S,2):e(Pe).category==="document"?xe(I,3):e(Pe).category==="image"?xe(Y,4):xe(Te,!1)})}t(ae),d(ee,ae)};M(qt,ee=>{e(Pe).category==="image"&&e(Pe).preview?ee(ga):ee(ba,!1)})}var Qe=r(qt,2),Re=n(Qe),sa=n(Re,!0);t(Re);var jt=r(Re,2),fa=n(jt),Kt=n(fa,!0);t(fa);var ya=r(fa,2);rs(ya,{size:9}),t(jt),t(Qe);var ra=r(Qe,2),ve=n(ra);mn(ve,{size:12}),t(ra),t(ot);var ua=r(ot,2);{var Xe=ee=>{var ae=zc();yt(ae,21,()=>te,Ot,(Ke,Ve)=>{var mt=Oc();let S;var I=n(mt,!0);t(mt),D(()=>{S=Rt(mt,1,"type-option svelte-mwxll1",null,S,{selected:e(Pe).docType===e(Ve).value}),X(I,e(Ve).label)}),$("click",mt,()=>$e(e(Pe).id,e(Ve).value)),d(Ke,mt)}),t(ae),d(ee,ae)};M(ua,ee=>{e(F)===e(Pe).id&&ee(Xe)})}t(ue),D((ee,ae)=>{Dt=Rt(ot,1,"attachment-badge svelte-mwxll1",null,Dt,{"has-preview":e(Pe).category==="image"&&e(Pe).preview}),et(Re,"title",e(Pe).name),X(sa,ee),X(Kt,ae)},[()=>e(Pe).name.length>20?e(Pe).name.slice(0,17)+"...":e(Pe).name,()=>ye(e(Pe).docType)]),$("click",jt,()=>u(F,e(F)===e(Pe).id?null:e(Pe).id,!0)),$("click",ra,()=>ne(e(Pe).id)),d(it,ue)}),t(De),d(H,De)};M(Zt,H=>{e(V).length>0&&H(oa)})}var ea=r(Zt,2),Ge=n(ea),Wt=n(Ge),Ct=n(Wt);os(Ct,{size:16}),t(Wt);var _t=r(Wt,2);{var $t=H=>{var De=Lc(),it=n(De),Pe=n(it);Bl(Pe,{size:14}),We(2),t(it);var ue=r(it,2),ot=n(ue);Pl(ot,{size:14}),We(2),t(ue),t(De),$("click",it,()=>{e(le)?.click(),u(me,!1)}),$("click",ue,()=>{console.log("Screenshot not yet implemented"),u(me,!1)}),d(H,De)};M(_t,H=>{e(me)&&H($t)})}t(Ge);var Yt=r(Ge,2);hn(Yt,H=>u(le,H),()=>e(le));var Xt=r(Yt,2);En(Xt),et(Xt,"rows",1),hn(Xt,H=>u(ta,H),()=>e(ta));var Oa=r(Xt,2),va=n(Oa),na=n(va);is(na,{size:14}),t(va);var pa=r(va,2),E=n(pa);{var re=H=>{kn(H,{size:14,class:"spin-icon"})},Ie=H=>{_s(H,{size:14})};M(E,H=>{b()?H(re):H(Ie,!1)})}t(pa),t(Oa),t(ea),t(bt);var ct=r(bt,2);t(k),D(H=>{m=Rt(k,1,"architect-sidebar svelte-mwxll1",null,m,{dragging:e(Ee)}),a=Fa(k,"",a,{width:`${e(fe)??""}px`}),X(T,e(Oe)),Wt.disabled=b(),et(Yt,"accept",Z),et(Xt,"placeholder",`Ask ${e(Oe)??""}...`),Xt.disabled=b(),va.disabled=l().length===0,pa.disabled=H},[()=>!e(Ht).trim()&&e(V).length===0||b()||!e(at)]),$("click",A,aa),$("click",Wt,()=>u(me,!e(me))),$("change",Yt,Le),$("keydown",Xt,ut),as("paste",Xt,y),la(Xt,()=>e(Ht),H=>u(Ht,H)),$("click",va,ht),$("click",pa,ft),$("mousedown",ct,j),d(h,k)};M(Ze,h=>{v()&&h(Ye)})}d(s,vt),Aa(),K()}Ra(["click","keydown","change","mousedown"]);const cr="fireflyStudio:theme";function Bc(){const s=localStorage.getItem(cr);return s==="dark"||s==="light"||s==="system"?s:"dark"}const rn=Da(Bc()),Uc=zs(rn,s=>s!=="system"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");function Hc(){rn.subscribe(i=>{localStorage.setItem(cr,i)}),Uc.subscribe(i=>{document.documentElement.setAttribute("data-theme",i)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{rn.update(i=>i)})}function Fc(){rn.update(s=>s==="dark"?"light":s==="light"?"system":"dark")}var Gc=g('<main class="app-content home-content svelte-vr1z90"><!></main>'),Kc=g('<div class="app-body svelte-vr1z90"><!> <main class="app-content svelte-vr1z90"><!></main></div>'),Wc=g('<div class="app-shell svelte-vr1z90"><!> <!> <footer class="app-footer svelte-vr1z90"><span class="svelte-vr1z90">Made with</span> <span class="heart svelte-vr1z90">&#10084;</span> <span class="svelte-vr1z90">by Firefly Software Solutions</span> <button class="theme-toggle svelte-vr1z90"><!></button></footer></div> <!> <!> <!> <!> <!>',1);function qc(s,i){Sa(i,!0);const l=()=>zt(Ei,"$page",b),c=()=>zt(rn,"$themeMode",b),[b,x]=Ca(),v=dt(()=>l().url.pathname==="/"||l().url.pathname==="/index.html");wn(()=>{Ti();function y(se){se.preventDefault();const pe=se.reason instanceof Error?se.reason.message:String(se.reason);Tt(`Unhandled error: ${pe}`,"error"),console.error("[AppShell] Unhandled rejection:",se.reason)}return window.addEventListener("unhandledrejection",y),()=>{Mi(),window.removeEventListener("unhandledrejection",y)}});function p(){const y=document.activeElement;if(!y)return!1;const se=y.tagName.toLowerCase();return!!(se==="input"||se==="textarea"||y.isContentEditable)}function K(y){if(e(v))return;const se=y.metaKey||y.ctrlKey;if(y.key==="s"&&se){y.preventDefault();const pe=ia(xa);pe&&Qt.projects.savePipeline(pe.name,"main",Ka()).then(()=>{qn.set(!1),Tt("Pipeline saved","success")}).catch(()=>Tt("Failed to save pipeline","error"));return}if(y.key===","&&se){y.preventDefault(),sn.set(!0);return}if(y.key==="k"&&se){y.preventDefault(),es.update(pe=>!pe);return}if(y.key==="Enter"&&se){y.preventDefault(),window.dispatchEvent(new CustomEvent("firefly:run-pipeline"));return}if(y.key==="D"&&se&&y.shiftKey){y.preventDefault(),cs(Ka());return}if(y.key==="/"&&se){y.preventDefault(),Wa.update(pe=>!pe);return}if(y.key==="d"&&se&&!y.shiftKey){if(p())return;y.preventDefault();const pe=ia(dn);if(!pe)return;const G=ia(Ga).find(nt=>nt.id===pe);if(!G)return;const je=`${G.type}-dup-${Date.now()}`,Be=40;Ga.update(nt=>[...nt,{...G,id:je,position:{x:G.position.x+Be,y:G.position.y+Be},data:{...G.data}}]),dn.set(je);return}if((y.key==="Delete"||y.key==="Backspace")&&!se&&!y.shiftKey&&!y.altKey){if(p())return;const pe=ia(dn);if(!pe)return;y.preventDefault(),Ga.update(we=>we.filter(G=>G.id!==pe)),Qn.update(we=>we.filter(G=>G.source!==pe&&G.target!==pe)),dn.set(null);return}if(y.key==="?"&&!se&&!y.altKey){if(p())return;y.preventDefault(),ts.update(pe=>!pe);return}}var R=Wc();as("keydown",Or,K);var N=J(R),te=n(N);uo(te,{get isHomePage(){return e(v)}});var L=r(te,2);{var Q=y=>{var se=Gc(),pe=n(se);Wn(pe,()=>i.children),t(se),d(y,se)},Z=y=>{var se=Kc(),pe=n(se);jc(pe,{});var we=r(pe,2),G=n(we);Wn(G,()=>i.children),t(we),t(se),d(y,se)};M(L,y=>{e(v)?y(Q):y(Z,!1)})}var q=r(L,2),V=r(n(q),6),le=n(V);{var me=y=>{Dl(y,{size:14})},tt=y=>{Hl(y,{size:14})},z=y=>{Xs(y,{size:14})};M(le,y=>{c()==="dark"?y(me):c()==="light"?y(tt,1):y(z,!1)})}t(V),t(q),t(N);var ne=r(N,2);yo(ne,{});var F=r(ne,2);$o(F,{});var $e=r(F,2);cl($e,{});var ye=r($e,2);Cl(ye,{});var Le=r(ye,2);Il(Le,{}),D(()=>et(V,"title",`Theme: ${c()}`)),$("click",V,function(...y){Fc?.apply(this,y)}),d(s,R),Aa(),x()}Ra(["click"]);var Vc=g('<link rel="icon"/>');function id(s,i){Sa(i,!0),wn(async()=>{Hc(),await Vn(),di(),Ai();try{const l=await Qt.settings.status();(l.first_start||!l.setup_complete)&&bn.set(!0),await Gs()}catch{}}),Is(()=>$i()),_i("12qhfyh",l=>{var c=Vc();D(()=>et(c,"href",ls)),d(l,c)}),qc(s,{children:(l,c)=>{var b=qe(),x=J(b);Wn(x,()=>i.children),d(l,b)},$$slots:{default:!0}}),Aa()}export{id as component,rd as universal};
