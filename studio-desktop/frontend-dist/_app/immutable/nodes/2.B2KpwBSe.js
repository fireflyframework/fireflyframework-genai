import"../chunks/DsnmJJEf.js";import{c as ne,f as re,a as d,T as Ja,p as et,Q as D,U as at,z as E,V as h,t as a,j as tt,B as n,A as _,D as c,G as l,C as s,W as te,X as st,S as se,R as na,F as $,Y as ra,Z as la}from"../chunks/BESIXtBI.js";import{l as Re,s as Ue,i as x,b as nt,a as rt,c as ia}from"../chunks/CJh9TUc0.js";import{I as qe,s as We,P as ge,S as he,e as Te,b as me,a as lt,c as it,d as Ee,f as ot,g as ct,B as fe,D as Ie,h as Le,p as vt,X as oa,i as ut,F as dt,L as pt,j as gt,l as ht,k as mt,m as ft,n as _t,r as Ne,T as bt,o as yt,u as xt,q as Pt}from"../chunks/0zSFSexy.js";import{g as _e}from"../chunks/gvU2Nsg7.js";import{p as Me,c as Be}from"../chunks/8I91iWf8.js";import{U as be,A as ca,F as wt}from"../chunks/Biw60Ycb.js";import{I as kt}from"../chunks/p0Zj8fW7.js";import"../chunks/CiPkpaXo.js";function zt(R,A){const U=Re(A,["children","$$slots","$$events","$$legacy"]);const q=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];qe(R,Ue({name:"ellipsis-vertical"},()=>U,{get iconNode(){return q},children:(L,le)=>{var k=ne(),P=re(k);We(P,A,"default",{}),d(L,k)},$$slots:{default:!0}}))}function Dt(R,A){const U=Re(A,["children","$$slots","$$events","$$legacy"]);const q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];qe(R,Ue({name:"pencil"},()=>U,{get iconNode(){return q},children:(L,le)=>{var k=ne(),P=re(k);We(P,A,"default",{}),d(L,k)},$$slots:{default:!0}}))}function jt(R,A){const U=Re(A,["children","$$slots","$$events","$$legacy"]);const q=[["path",{d:"M12 4v16"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2"}],["path",{d:"M9 20h6"}]];qe(R,Ue({name:"type"},()=>U,{get iconNode(){return q},children:(L,le)=>{var k=ne(),P=re(k);We(P,A,"default",{}),d(L,k)},$$slots:{default:!0}}))}var $t=_('<div class="attachment-chip svelte-1uha8ag"><span class="chip-icon svelte-1uha8ag"><!></span> <span class="chip-name svelte-1uha8ag"> </span> <span class="chip-size svelte-1uha8ag"> </span> <button class="chip-remove svelte-1uha8ag" title="Remove"><!></button></div>'),At=_('<div class="attachment-chips svelte-1uha8ag"></div>'),Ft=_('<p class="sending-hint svelte-1uha8ag">Creating your project...</p>'),St=_('<button class="template-card svelte-1uha8ag"><div class="template-icon svelte-1uha8ag"><!></div> <div class="template-info svelte-1uha8ag"><span class="template-name svelte-1uha8ag"> </span> <span class="template-desc svelte-1uha8ag"> </span></div> <div class="template-arrow svelte-1uha8ag"><!></div></button>'),Ct=_('<div class="delete-all-confirm svelte-1uha8ag"><span class="delete-all-text svelte-1uha8ag"> </span> <button class="confirm-btn danger svelte-1uha8ag">Delete</button> <button class="confirm-btn cancel svelte-1uha8ag">Cancel</button></div>'),Tt=_('<button class="clear-all-btn svelte-1uha8ag">Clear all</button>'),Et=_('<button class="search-clear svelte-1uha8ag"><!></button>'),It=_('<div class="search-bar svelte-1uha8ag"><!> <input class="search-input svelte-1uha8ag" placeholder="Search projects..."/> <!></div>'),Lt=_('<div class="project-card deleting svelte-1uha8ag"><div class="delete-confirm-content svelte-1uha8ag"><span class="delete-confirm-text svelte-1uha8ag"> </span> <div class="delete-confirm-actions svelte-1uha8ag"><button class="confirm-btn danger svelte-1uha8ag">Delete</button> <button class="confirm-btn cancel svelte-1uha8ag">Cancel</button></div></div></div>'),Nt=_('<input class="rename-input svelte-1uha8ag" type="text"/>'),Mt=_('<span class="project-name svelte-1uha8ag"> </span>'),Bt=_('<input class="desc-input svelte-1uha8ag" type="text" placeholder="Add a description..."/>'),Rt=_('<span class="project-desc svelte-1uha8ag"> </span>'),Ut=_('<span class="project-date svelte-1uha8ag"> </span>'),qt=_('<div class="card-menu svelte-1uha8ag"><button class="menu-item svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Rename</span></button> <button class="menu-item svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Description</span></button> <div class="menu-divider svelte-1uha8ag"></div> <button class="menu-item danger svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Delete</span></button></div>'),Wt=_('<div class="project-card svelte-1uha8ag"><div class="project-icon svelte-1uha8ag"><!></div> <div class="project-info svelte-1uha8ag"><!> <!></div> <div class="project-arrow svelte-1uha8ag"><!></div> <button class="card-menu-btn svelte-1uha8ag" title="Project actions"><!></button> <!></div>'),Vt=_('<p class="no-results svelte-1uha8ag"> </p>'),Kt=_('<section class="projects-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><span class="svelte-1uha8ag">Your projects</span></div> <!></div> <!> <div class="projects-grid svelte-1uha8ag"></div> <!></section>'),Ot=_('<button class="backdrop svelte-1uha8ag" aria-label="Close menu"></button>'),Qt=_('<div class="home-page svelte-1uha8ag"><div class="bg-effects svelte-1uha8ag" aria-hidden="true"><div class="bg-orb bg-orb-1 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-2 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-3 svelte-1uha8ag"></div> <div class="bg-grid svelte-1uha8ag"></div> <div class="bg-vignette svelte-1uha8ag"></div></div> <div class="page-content svelte-1uha8ag"><section class="hero-section svelte-1uha8ag"><h1 class="hero-title svelte-1uha8ag"><!></h1> <p class="hero-subtitle svelte-1uha8ag">Describe your AI agent pipeline and The Architect will design it for you</p></section> <section class="prompt-section svelte-1uha8ag"><div><textarea class="prompt-input svelte-1uha8ag" placeholder="Describe the AI agent pipeline you want to create..." rows="3"></textarea> <!> <div class="prompt-toolbar svelte-1uha8ag"><div class="toolbar-left svelte-1uha8ag"><button class="toolbar-btn svelte-1uha8ag" title="Attach files"><!></button> <input type="file" multiple="" accept=".py,.js,.ts,.jsx,.tsx,.json,.md,.txt,.csv,.yaml,.yml,.xml,.html,.css,.sql,.sh,.pdf,.doc,.docx,.png,.jpg,.jpeg,.gif,.webp,.svg" style="display:none" class="svelte-1uha8ag"/></div> <div class="toolbar-right svelte-1uha8ag"><button class="send-btn svelte-1uha8ag" title="Send to The Architect"><!></button></div></div></div> <!></section> <section class="templates-section svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Or start from a template</span></div> <div class="templates-row svelte-1uha8ag"></div></section> <!> <!></div></div>');function ss(R,A){et(A,!0);const U=()=>ia(ct,"$settingsData",L),q=()=>ia(vt,"$projects",L),[L,le]=rt();let k=D(""),P=D(!1),W=D(""),ye=D(void 0);const Ve=se(()=>U()?.user_profile?.name||"");let V=D(at([])),F=D(null),S=D(null),ie=D(""),I=D(null),oe=D(""),N=D(null),Y=D(!1);function va(){l(F,null),l(S,null),l(I,null),l(N,null),l(Y,!1)}function ua(e,t){t.stopPropagation(),l(F,null),l(S,e,!0),l(ie,e,!0)}let xe=!1;async function Ke(e,t){if(t?.stopPropagation(),xe||a(S)===null)return;const i=a(ie).trim();if(!i||i===e){l(S,null);return}xe=!0;try{await yt(e,i)}catch(p){console.error("[home] Rename failed:",p)}l(S,null),xe=!1}function da(e,t,i){i.stopPropagation(),l(F,null),l(I,e,!0),l(oe,t||"",!0)}let Pe=!1;async function Oe(e,t){if(t?.stopPropagation(),!Pe&&a(I)!==null){Pe=!0;try{await xt(e,a(oe).trim())}catch(i){console.error("[home] Update description failed:",i)}l(I,null),Pe=!1}}function pa(e,t){t.stopPropagation(),l(F,null),l(N,e,!0)}async function ga(e,t){t?.stopPropagation();try{await mt(e)}catch(i){console.error("[home] Delete failed:",i)}l(N,null)}async function ha(){try{await Pt()}catch(e){console.error("[home] Delete all failed:",e)}l(Y,!1)}function ma(e,t){t.stopPropagation(),l(F,a(F)===e?null:e,!0),l(S,null),l(I,null),l(N,null)}function fa(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function _a(e){if(e.type.startsWith("image/"))return"image";if(e.type.includes("pdf")||e.type.includes("word")||e.type.includes("document"))return"document";if(e.type.startsWith("text/")||e.type.includes("json")||e.type.includes("javascript")||e.type.includes("yaml")||e.type.includes("xml"))return"text";const t=e.name.split(".").pop()?.toLowerCase()??"";return["py","js","ts","jsx","tsx","json","md","txt","csv","yaml","yml","xml","html","css","sql","sh","go","rs","java","rb","r"].includes(t)?"text":["png","jpg","jpeg","gif","webp","svg","bmp"].includes(t)?"image":["pdf","doc","docx","odt","rtf"].includes(t)?"document":"other"}function ba(e){const t=e.target;if(t.files&&t.files.length>0){for(const i of Array.from(t.files))i.size>20*1024*1024||l(V,[...a(V),{id:`att-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:i.name,size:i.size,category:_a(i),file:i}],!0);t.value=""}}function ya(e){return new Promise((t,i)=>{const p=new FileReader;p.onload=()=>{const j=p.result,C=j.includes(",")?j.split(",")[1]:j;t(C)},p.onerror=i,p.readAsDataURL(e)})}function xa(e){l(V,a(V).filter(t=>t.id!==e),!0)}function Pa(){a(ye)?.click()}const X=se(()=>(q()??[]).slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())),Qe=se(()=>(()=>{const e=a(W).trim().toLowerCase();return e?a(X).filter(t=>t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)):a(X)})()),wa=se(()=>a(X).length>0);function ka(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}}function za(e){switch(e){case"blank":return ge;case"simple-qa":return fe;case"reasoning-pipeline":return Le;case"multi-agent":return be;case"rag-pipeline":return Ie;case"content-pipeline":return he;case"data-processing":return fe;case"parallel-analysis":return be;default:return he}}const Da=se(()=>ot.map(e=>({id:e.id,name:e.name,description:e.description,icon:za(e.id),architectPrompt:e.architectPrompt})));async function Xe(){const e=a(k).trim();if(!(!e||a(P))){l(P,!0);try{const t=await Promise.all(a(V).map(async p=>({name:p.file.name,size:p.file.size,category:p.category,type:p.file.type||"application/octet-stream",data:await ya(p.file),docType:"auto"})));Me.set({text:e,attachments:t.length>0?t:void 0});const{name:i}=await it.assistant.inferProjectName(e);await Ee(i),Be.set(!0),_e("/construct")}catch(t){console.error("[home] Failed to create project from prompt:",t),Me.set({text:e});const i=`project-${Date.now()}`;await Ee(i),Be.set(!0),_e("/construct")}finally{l(P,!1)}}}function ja(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),Xe())}async function $a(e){const t=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await Ee(t||"untitled"),e.architectPrompt?(Me.set({text:e.architectPrompt}),Be.set(!0)):ht(e.id),_e("/construct")}async function Aa(e,t){if(a(S)||a(I)||a(F)||a(N)){t.stopPropagation();return}ft(e),_e("/construct")}var we=Qt(),Ye=c(n(we),2),ke=n(Ye),Ge=n(ke),Fa=n(Ge);{var Sa=e=>{var t=na();E(()=>$(t,`What do you want to build, ${a(Ve)??""}?`)),d(e,t)},Ca=e=>{var t=na("What do you want to build?");d(e,t)};x(Fa,e=>{a(Ve)?e(Sa):e(Ca,!1)})}s(Ge),te(2),s(ke);var ze=c(ke,2),ce=n(ze);let Ze;var G=n(ce);st(G);var He=c(G,2);{var Ta=e=>{var t=At();Te(t,21,()=>a(V),i=>i.id,(i,p)=>{var j=$t(),C=n(j),H=n(C);{var K=f=>{kt(f,{size:12})},J=f=>{dt(f,{size:12})};x(H,f=>{a(p).category==="image"?f(K):f(J,!1)})}s(C);var M=c(C,2),b=n(M,!0);s(M);var r=c(M,2),w=n(r,!0);s(r);var z=c(r,2),T=n(z);oa(T,{size:10}),s(z),s(j),E(f=>{ut(M,"title",a(p).name),$(b,a(p).name),$(w,f)},[()=>fa(a(p).size)]),h("click",z,()=>xa(a(p).id)),d(i,j)}),s(t),d(e,t)};x(He,e=>{a(V).length>0&&e(Ta)})}var Je=c(He,2),De=n(Je),Z=n(De),Ea=n(Z);ge(Ea,{size:16}),s(Z);var ea=c(Z,2);nt(ea,e=>l(ye,e),()=>a(ye)),s(De);var aa=c(De,2),ve=n(aa),Ia=n(ve);{var La=e=>{pt(e,{size:16,class:"spinner-icon"})},Na=e=>{gt(e,{size:16})};x(Ia,e=>{a(P)?e(La):e(Na,!1)})}s(ve),s(aa),s(Je),s(ce);var Ma=c(ce,2);{var Ba=e=>{var t=Ft();d(e,t)};x(Ma,e=>{a(P)&&e(Ba)})}s(ze);var je=c(ze,2),$e=n(je),Ra=n($e);he(Ra,{size:13}),te(2),s($e);var ta=c($e,2);Te(ta,21,()=>a(Da),e=>e.id,(e,t)=>{var i=St(),p=n(i),j=n(p);{var C=u=>{ge(u,{size:18})},H=u=>{fe(u,{size:18})},K=u=>{Le(u,{size:18})},J=u=>{be(u,{size:18})},M=u=>{Ie(u,{size:18})},b=u=>{he(u,{size:18})};x(j,u=>{a(t).icon===ge?u(C):a(t).icon===fe?u(H,1):a(t).icon===Le?u(K,2):a(t).icon===be?u(J,3):a(t).icon===Ie?u(M,4):u(b,!1)})}s(p);var r=c(p,2),w=n(r),z=n(w,!0);s(w);var T=c(w,2),f=n(T,!0);s(T),s(r);var m=c(r,2),y=n(m);ca(y,{size:14}),s(m),s(i),E(()=>{$(z,a(t).name),$(f,a(t).description)}),h("click",i,()=>$a(a(t))),d(e,i)}),s(ta),s(je);var sa=c(je,2);{var Ua=e=>{var t=Kt(),i=n(t),p=c(n(i),2);{var j=b=>{var r=ne(),w=re(r);{var z=f=>{var m=Ct(),y=n(m),u=n(y);s(y);var B=c(y,2),O=c(B,2);s(m),E(()=>$(u,`Delete all ${a(X).length??""} projects?`)),h("click",B,()=>ha()),h("click",O,()=>l(Y,!1)),d(f,m)},T=f=>{var m=Tt();h("click",m,()=>{l(Y,!0),l(F,null)}),d(f,m)};x(w,f=>{a(Y)?f(z):f(T,!1)})}d(b,r)};x(p,b=>{a(X).length>1&&b(j)})}s(i);var C=c(i,2);{var H=b=>{var r=It(),w=n(r);_t(w,{size:14});var z=c(w,2);Ne(z);var T=c(z,2);{var f=m=>{var y=Et(),u=n(y);oa(u,{size:12}),s(y),h("click",y,()=>l(W,"")),d(m,y)};x(T,m=>{a(W)&&m(f)})}s(r),me(z,()=>a(W),m=>l(W,m)),d(b,r)};x(C,b=>{a(X).length>3&&b(H)})}var K=c(C,2);Te(K,21,()=>a(Qe),b=>b.name,(b,r)=>{var w=ne(),z=re(w);{var T=m=>{var y=Lt(),u=n(y),B=n(u),O=n(B);s(B);var ee=c(B,2),ue=n(ee),Ae=c(ue,2);s(ee),s(u),s(y),E(()=>$(O,`Delete "${a(r).name??""}"?`)),h("click",ue,ae=>ga(a(r).name,ae)),h("click",Ae,ae=>{ae.stopPropagation(),l(N,null)}),d(m,y)},f=m=>{var y=Wt(),u=n(y),B=n(u);wt(B,{size:18}),s(u);var O=c(u,2),ee=n(O);{var ue=g=>{var v=Nt();Ne(v),ra(v,!0),h("click",v,o=>o.stopPropagation()),h("keydown",v,o=>{o.stopPropagation(),o.key==="Enter"&&(o.preventDefault(),Ke(a(r).name,o)),o.key==="Escape"&&l(S,null)}),la("blur",v,o=>Ke(a(r).name,o)),me(v,()=>a(ie),o=>l(ie,o)),d(g,v)},Ae=g=>{var v=Mt(),o=n(v,!0);s(v),E(()=>$(o,a(r).name)),d(g,v)};x(ee,g=>{a(S)===a(r).name?g(ue):g(Ae,!1)})}var ae=c(ee,2);{var Va=g=>{var v=Bt();Ne(v),ra(v,!0),h("click",v,o=>o.stopPropagation()),h("keydown",v,o=>{o.stopPropagation(),o.key==="Enter"&&(o.preventDefault(),Oe(a(r).name,o)),o.key==="Escape"&&l(I,null)}),la("blur",v,o=>Oe(a(r).name,o)),me(v,()=>a(oe),o=>l(oe,o)),d(g,v)},Ka=g=>{var v=Rt(),o=n(v,!0);s(v),E(()=>$(o,a(r).description)),d(g,v)},Oa=g=>{var v=Ut(),o=n(v,!0);s(v),E(Se=>$(o,Se),[()=>ka(a(r).created_at)]),d(g,v)};x(ae,g=>{a(I)===a(r).name?g(Va):a(r).description?g(Ka,1):g(Oa,!1)})}s(O);var Fe=c(O,2),Qa=n(Fe);ca(Qa,{size:14}),s(Fe);var de=c(Fe,2),Xa=n(de);zt(Xa,{size:14}),s(de);var Ya=c(de,2);{var Ga=g=>{var v=qt(),o=n(v),Se=n(o);Dt(Se,{size:12}),te(2),s(o);var pe=c(o,2),Za=n(pe);jt(Za,{size:12}),te(2),s(pe);var Ce=c(pe,4),Ha=n(Ce);bt(Ha,{size:12}),te(2),s(Ce),s(v),h("click",v,Q=>Q.stopPropagation()),h("click",o,Q=>ua(a(r).name,Q)),h("click",pe,Q=>da(a(r).name,a(r).description,Q)),h("click",Ce,Q=>pa(a(r).name,Q)),d(g,v)};x(Ya,g=>{a(F)===a(r).name&&g(Ga)})}s(y),h("click",y,g=>Aa(a(r),g)),h("click",de,g=>ma(a(r).name,g)),d(m,y)};x(z,m=>{a(N)===a(r).name?m(T):m(f,!1)})}d(b,w)}),s(K);var J=c(K,2);{var M=b=>{var r=Vt(),w=n(r);s(r),E(()=>$(w,`No projects matching "${a(W)??""}"`)),d(b,r)};x(J,b=>{a(W)&&a(Qe).length===0&&b(M)})}s(t),d(e,t)};x(sa,e=>{a(wa)&&e(Ua)})}var qa=c(sa,2);{var Wa=e=>{var t=Ot();h("click",t,va),d(e,t)};x(qa,e=>{(a(F)||a(I)||a(S)||a(N))&&e(Wa)})}s(Ye),s(we),E(e=>{Ze=lt(ce,1,"prompt-box svelte-1uha8ag",null,Ze,{disabled:a(P)}),G.disabled=a(P),Z.disabled=a(P),ve.disabled=e},[()=>a(P)||!a(k).trim()]),h("keydown",G,ja),me(G,()=>a(k),e=>l(k,e)),h("click",Z,Pa),h("change",ea,ba),h("click",ve,Xe),d(R,we),tt(),le()}Ja(["keydown","click","change"]);export{ss as component};
