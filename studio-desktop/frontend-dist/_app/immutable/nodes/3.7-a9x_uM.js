import"../chunks/DsnmJJEf.js";import{i as nc}from"../chunks/CiPkpaXo.js";import{aC as ac,b4 as oc,bp as rc,h as sc,e as ic,aw as lc,a8 as vi,a7 as fi,m as un,v as cc,bq as dc,c as Te,f as oe,a as g,br as uc,bs as Or,bt as pi,p as Ee,u as vc,j as Ne,B as d,C as c,A as x,t as a,ab as ha,S as k,b9 as zn,z as U,D as h,F as Y,W as he,bu as hi,l as xe,Q as G,G as y,b8 as Mt,R as fc,bv as pc,bw as mr,V as fe,Z as bo,T as Tt,bn as ga,bx as Ft,bo as Gt,by as hc,U as pn,X as Rr,w as Fa,ad as na,ba as gc,o as gi}from"../chunks/BESIXtBI.js";import{l as ht,s as $e,p as ue,r as Pn,i as W,b as mn,a as Xt,d as _s,m as ys,c as dt}from"../chunks/CJh9TUc0.js";import{I as gt,s as mt,Z as Mn,_ as Lr,$ as Ro,i as ze,a as Oe,a0 as Gn,t as pt,e as Qe,h as xo,D as Vr,W as Nn,U as Fn,G as qn,b as Lt,r as Nt,x as Vt,a1 as za,a2 as nr,a3 as mc,X as Lo,T as Bn,a4 as ar,a5 as or,B as _c,M as bs,L as mi,c as kt,E as ma,m as yc,P as wo,J as _i,F as xs,a6 as bc,A as xc,a7 as wc,j as kc,a8 as yi,a9 as zc,aa as Sc,ab as Cc,ac as Ec,S as Nc,ad as Pc,ae as Mc}from"../chunks/0zSFSexy.js";import{U as Jt,S as Hr,B as Pa,E as ko,O as an,z as on,x as Qt,V as rn,W as Kn,j as Ma,n as Fr,o as qa,q as qr,r as Br,l as bi,D as Vo,m as xi,u as Tc,L as Ic,I as wi,t as Ac,g as ws,X as _r,N as Dc,h as la,K as Ta,C as Ia,e as ki,P as zi,d as Rn,s as Kr,a as Je,Z as yr,G as ks,M as Oc,F as Si,R as br,A as Ci,k as Ei,Q as Rc,T as Lc,J as Vc,f as Hc}from"../chunks/BI8CVrNj.js";import{c as hn}from"../chunks/DaAgYj3T.js";import{A as zs,U as Fc,F as qc}from"../chunks/Biw60Ycb.js";import{b as xr,a as rr}from"../chunks/8I91iWf8.js";const Bc=[];function Ni(t,e=!1,n=!1){return co(t,new Map,"",Bc,null,n)}function co(t,e,n,o,r=null,i=!1){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(ac(t)){var l=Array(t.length);e.set(t,l),r!==null&&e.set(r,l);for(var u=0;u<t.length;u+=1){var v=t[u];u in t&&(l[u]=co(v,e,n,o,null,i))}return l}if(oc(t)===rc){l={},e.set(t,l),r!==null&&e.set(r,l);for(var p of Object.keys(t))l[p]=co(t[p],e,n,o,null,i);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!i)return co(t.toJSON(),e,n,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function Kc(t,e){sc&&ic(lc(t)),vi(()=>{var n=e();for(var o in n){var r=n[o];r?t.style.setProperty(o,r):t.style.removeProperty(o)}})}function qt(t,e,n){fi(()=>{var o=un(()=>e(t,n?.())||{});if(n&&o?.update){var r=!1,i={};vi(()=>{var s=n();cc(s),r&&dc(i,s)&&(i=s,o.update(s))}),r=!0}if(o?.destroy)return()=>o.destroy()})}class jr{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var o=this.#e.get(e)||new Set;return o.add(n),this.#e.set(e,o),this.#a().observe(e,this.#n),()=>{var r=this.#e.get(e);r.delete(n),r.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#a(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){jr.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var jc=new jr({box:"border-box"});function Ss(t,e,n){var o=jc.observe(t,()=>n(t[e]));fi(()=>(un(()=>n(t[e])),o))}function Wc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];gt(t,$e({name:"arrow-left"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Zc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"}],["path",{d:"m7 16.5-4.74-2.85"}],["path",{d:"m7 16.5 5-3"}],["path",{d:"M7 16.5v5.17"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"}],["path",{d:"m17 16.5-5-3"}],["path",{d:"m17 16.5 4.74-2.85"}],["path",{d:"M17 16.5v5.17"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"}],["path",{d:"M12 8 7.26 5.15"}],["path",{d:"m12 8 4.74-2.85"}],["path",{d:"M12 13.5V8"}]];gt(t,$e({name:"boxes"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Yc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z"}],["path",{d:"M17 21v-2"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10"}],["path",{d:"M21 21v-2"}],["path",{d:"M3 5V3"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z"}],["path",{d:"M7 5V3"}]];gt(t,$e({name:"cable"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Pi(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m18 15-6-6-6 6"}]];gt(t,$e({name:"chevron-up"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Xc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];gt(t,$e({name:"circle-check-big"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Gc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];gt(t,$e({name:"circle-x"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Uc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];gt(t,$e({name:"dollar-sign"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Cs(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"3"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12"}]];gt(t,$e({name:"git-commit-horizontal"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Jc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"18",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9"}]];gt(t,$e({name:"git-compare"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Qc(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"18",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21"}]];gt(t,$e({name:"git-pull-request"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Mi(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]];gt(t,$e({name:"hash"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function $c(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];gt(t,$e({name:"history"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function ed(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];gt(t,$e({name:"lightbulb"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Ti(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M13 5h8"}],["path",{d:"M13 12h8"}],["path",{d:"M13 19h8"}],["path",{d:"m3 17 2 2 4-4"}],["path",{d:"m3 7 2 2 4-4"}]];gt(t,$e({name:"list-checks"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function td(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m10 17 5-5-5-5"}],["path",{d:"M15 12H3"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}]];gt(t,$e({name:"log-in"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function nd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];gt(t,$e({name:"log-out"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function ad(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}]];gt(t,$e({name:"mail"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function od(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"}]];gt(t,$e({name:"message-circle"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function uo(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 22v-5"}],["path",{d:"M15 8V2"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z"}],["path",{d:"M9 8V2"}]];gt(t,$e({name:"plug"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Pt(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];gt(t,$e({name:"refresh-cw"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function rd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];gt(t,$e({name:"rotate-ccw"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function sd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}]];gt(t,$e({name:"scan"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function Ii(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];gt(t,$e({name:"send"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function id(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]];gt(t,$e({name:"shield-alert"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function ld(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z"}],["path",{d:"M3 20V4"}]];gt(t,$e({name:"skip-back"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function cd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]];gt(t,$e({name:"star"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function dd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"}],["path",{d:"M8.5 2h7"}],["path",{d:"M14.5 16h-5"}]];gt(t,$e({name:"test-tube"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function ud(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]];gt(t,$e({name:"upload"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}function vd(t,e){const n=ht(e,["children","$$slots","$$events","$$legacy"]);const o=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2"}]];gt(t,$e({name:"workflow"},()=>n,{get iconNode(){return o},children:(r,i)=>{var s=Te(),l=oe(s);mt(l,e,"default",{}),g(r,s)},$$slots:{default:!0}}))}var fd={value:()=>{}};function Ho(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new vo(n)}function vo(t){this._=t}function pd(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}vo.prototype=Ho.prototype={constructor:vo,on:function(t,e){var n=this._,o=pd(t+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(t=o[i]).type)&&(r=hd(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(r=(t=o[i]).type)n[r]=Es(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Es(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vo(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)}};function hd(t,e){for(var n=0,o=t.length,r;n<o;++n)if((r=t[n]).name===e)return r.value}function Es(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=fd,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var wr="http://www.w3.org/1999/xhtml";const Ns={svg:"http://www.w3.org/2000/svg",xhtml:wr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fo(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ns.hasOwnProperty(e)?{space:Ns[e],local:t}:t}function gd(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wr&&e.documentElement.namespaceURI===wr?e.createElement(t):e.createElementNS(n,t)}}function md(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ai(t){var e=Fo(t);return(e.local?md:gd)(e)}function _d(){}function Wr(t){return t==null?_d:function(){return this.querySelector(t)}}function yd(t){typeof t!="function"&&(t=Wr(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,l=o[r]=new Array(s),u,v,p=0;p<s;++p)(u=i[p])&&(v=t.call(u,u.__data__,p,i))&&("__data__"in u&&(v.__data__=u.__data__),l[p]=v);return new Yt(o,this._parents)}function bd(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function xd(){return[]}function Di(t){return t==null?xd:function(){return this.querySelectorAll(t)}}function wd(t){return function(){return bd(t.apply(this,arguments))}}function kd(t){typeof t=="function"?t=wd(t):t=Di(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var s=e[i],l=s.length,u,v=0;v<l;++v)(u=s[v])&&(o.push(t.call(u,u.__data__,v,s)),r.push(u));return new Yt(o,r)}function Oi(t){return function(){return this.matches(t)}}function Ri(t){return function(e){return e.matches(t)}}var zd=Array.prototype.find;function Sd(t){return function(){return zd.call(this.children,t)}}function Cd(){return this.firstElementChild}function Ed(t){return this.select(t==null?Cd:Sd(typeof t=="function"?t:Ri(t)))}var Nd=Array.prototype.filter;function Pd(){return Array.from(this.children)}function Md(t){return function(){return Nd.call(this.children,t)}}function Td(t){return this.selectAll(t==null?Pd:Md(typeof t=="function"?t:Ri(t)))}function Id(t){typeof t!="function"&&(t=Oi(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,l=o[r]=[],u,v=0;v<s;++v)(u=i[v])&&t.call(u,u.__data__,v,i)&&l.push(u);return new Yt(o,this._parents)}function Li(t){return new Array(t.length)}function Ad(){return new Yt(this._enter||this._groups.map(Li),this._parents)}function zo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zo.prototype={constructor:zo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Dd(t){return function(){return t}}function Od(t,e,n,o,r,i){for(var s=0,l,u=e.length,v=i.length;s<v;++s)(l=e[s])?(l.__data__=i[s],o[s]=l):n[s]=new zo(t,i[s]);for(;s<u;++s)(l=e[s])&&(r[s]=l)}function Rd(t,e,n,o,r,i,s){var l,u,v=new Map,p=e.length,m=i.length,f=new Array(p),w;for(l=0;l<p;++l)(u=e[l])&&(f[l]=w=s.call(u,u.__data__,l,e)+"",v.has(w)?r[l]=u:v.set(w,u));for(l=0;l<m;++l)w=s.call(t,i[l],l,i)+"",(u=v.get(w))?(o[l]=u,u.__data__=i[l],v.delete(w)):n[l]=new zo(t,i[l]);for(l=0;l<p;++l)(u=e[l])&&v.get(f[l])===u&&(r[l]=u)}function Ld(t){return t.__data__}function Vd(t,e){if(!arguments.length)return Array.from(this,Ld);var n=e?Rd:Od,o=this._parents,r=this._groups;typeof t!="function"&&(t=Dd(t));for(var i=r.length,s=new Array(i),l=new Array(i),u=new Array(i),v=0;v<i;++v){var p=o[v],m=r[v],f=m.length,w=Hd(t.call(p,p&&p.__data__,v,o)),S=w.length,z=l[v]=new Array(S),P=s[v]=new Array(S),L=u[v]=new Array(f);n(p,m,z,P,L,w,e);for(var A=0,V=0,M,O;A<S;++A)if(M=z[A]){for(A>=V&&(V=A+1);!(O=P[V])&&++V<S;);M._next=O||null}}return s=new Yt(s,o),s._enter=l,s._exit=u,s}function Hd(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fd(){return new Yt(this._exit||this._groups.map(Li),this._parents)}function qd(t,e,n){var o=this.enter(),r=this,i=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Bd(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,i=o.length,s=Math.min(r,i),l=new Array(r),u=0;u<s;++u)for(var v=n[u],p=o[u],m=v.length,f=l[u]=new Array(m),w,S=0;S<m;++S)(w=v[S]||p[S])&&(f[S]=w);for(;u<r;++u)l[u]=n[u];return new Yt(l,this._parents)}function Kd(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function jd(t){t||(t=Wd);function e(m,f){return m&&f?t(m.__data__,f.__data__):!m-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],l=s.length,u=r[i]=new Array(l),v,p=0;p<l;++p)(v=s[p])&&(u[p]=v);u.sort(e)}return new Yt(r,this._parents).order()}function Wd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zd(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Yd(){return Array.from(this)}function Xd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function Gd(){let t=0;for(const e of this)++t;return t}function Ud(){return!this.node()}function Jd(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r=e[n],i=0,s=r.length,l;i<s;++i)(l=r[i])&&t.call(l,l.__data__,i,r);return this}function Qd(t){return function(){this.removeAttribute(t)}}function $d(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eu(t,e){return function(){this.setAttribute(t,e)}}function tu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function au(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ou(t,e){var n=Fo(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?$d:Qd:typeof e=="function"?n.local?au:nu:n.local?tu:eu)(n,e))}function Vi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ru(t){return function(){this.style.removeProperty(t)}}function su(t,e,n){return function(){this.style.setProperty(t,e,n)}}function iu(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function lu(t,e,n){return arguments.length>1?this.each((e==null?ru:typeof e=="function"?iu:su)(t,e,n??"")):ca(this.node(),t)}function ca(t,e){return t.style.getPropertyValue(e)||Vi(t).getComputedStyle(t,null).getPropertyValue(e)}function cu(t){return function(){delete this[t]}}function du(t,e){return function(){this[t]=e}}function uu(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vu(t,e){return arguments.length>1?this.each((e==null?cu:typeof e=="function"?uu:du)(t,e)):this.node()[t]}function Hi(t){return t.trim().split(/^|\s+/)}function Zr(t){return t.classList||new Fi(t)}function Fi(t){this._node=t,this._names=Hi(t.getAttribute("class")||"")}Fi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qi(t,e){for(var n=Zr(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function Bi(t,e){for(var n=Zr(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function fu(t){return function(){qi(this,t)}}function pu(t){return function(){Bi(this,t)}}function hu(t,e){return function(){(e.apply(this,arguments)?qi:Bi)(this,t)}}function gu(t,e){var n=Hi(t+"");if(arguments.length<2){for(var o=Zr(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?hu:e?fu:pu)(n,e))}function mu(){this.textContent=""}function _u(t){return function(){this.textContent=t}}function yu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function bu(t){return arguments.length?this.each(t==null?mu:(typeof t=="function"?yu:_u)(t)):this.node().textContent}function xu(){this.innerHTML=""}function wu(t){return function(){this.innerHTML=t}}function ku(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function zu(t){return arguments.length?this.each(t==null?xu:(typeof t=="function"?ku:wu)(t)):this.node().innerHTML}function Su(){this.nextSibling&&this.parentNode.appendChild(this)}function Cu(){return this.each(Su)}function Eu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nu(){return this.each(Eu)}function Pu(t){var e=typeof t=="function"?t:Ai(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Mu(){return null}function Tu(t,e){var n=typeof t=="function"?t:Ai(t),o=e==null?Mu:typeof e=="function"?e:Wr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Iu(){var t=this.parentNode;t&&t.removeChild(this)}function Au(){return this.each(Iu)}function Du(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ou(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ru(t){return this.select(t?Ou:Du)}function Lu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Vu(t){return function(e){t.call(this,e,this.__data__)}}function Hu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function Fu(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++o]=i;++o?e.length=o:delete this.__on}}}function qu(t,e,n){return function(){var o=this.__on,r,i=Vu(e);if(o){for(var s=0,l=o.length;s<l;++s)if((r=o[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Bu(t,e,n){var o=Hu(t+""),r,i=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,v=l.length,p;u<v;++u)for(r=0,p=l[u];r<i;++r)if((s=o[r]).type===p.type&&s.name===p.name)return p.value}return}for(l=e?qu:Fu,r=0;r<i;++r)this.each(l(o[r],e,n));return this}function Ki(t,e,n){var o=Vi(t),r=o.CustomEvent;typeof r=="function"?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ku(t,e){return function(){return Ki(this,t,e)}}function ju(t,e){return function(){return Ki(this,t,e.apply(this,arguments))}}function Wu(t,e){return this.each((typeof e=="function"?ju:Ku)(t,e))}function*Zu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var ji=[null];function Yt(t,e){this._groups=t,this._parents=e}function Ba(){return new Yt([[document.documentElement]],ji)}function Yu(){return this}Yt.prototype=Ba.prototype={constructor:Yt,select:yd,selectAll:kd,selectChild:Ed,selectChildren:Td,filter:Id,data:Vd,enter:Ad,exit:Fd,join:qd,merge:Bd,selection:Yu,order:Kd,sort:jd,call:Zd,nodes:Yd,node:Xd,size:Gd,empty:Ud,each:Jd,attr:ou,style:lu,property:vu,classed:gu,text:bu,html:zu,raise:Cu,lower:Nu,append:Pu,insert:Tu,remove:Au,clone:Ru,datum:Lu,on:Bu,dispatch:Wu,[Symbol.iterator]:Zu};function Ut(t){return typeof t=="string"?new Yt([[document.querySelector(t)]],[document.documentElement]):new Yt([[t]],ji)}function Xu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function en(t,e){if(t=Xu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Gu={passive:!1},Aa={capture:!0,passive:!1};function sr(t){t.stopImmediatePropagation()}function oa(t){t.preventDefault(),t.stopImmediatePropagation()}function Wi(t){var e=t.document.documentElement,n=Ut(t).on("dragstart.drag",oa,Aa);"onselectstart"in e?n.on("selectstart.drag",oa,Aa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zi(t,e){var n=t.document.documentElement,o=Ut(t).on("dragstart.drag",null);e&&(o.on("click.drag",oa,Aa),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const no=t=>()=>t;function kr(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:i,x:s,y:l,dx:u,dy:v,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:p}})}kr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Uu(t){return!t.ctrlKey&&!t.button}function Ju(){return this.parentNode}function Qu(t,e){return e??{x:t.x,y:t.y}}function $u(){return navigator.maxTouchPoints||"ontouchstart"in this}function ev(){var t=Uu,e=Ju,n=Qu,o=$u,r={},i=Ho("start","drag","end"),s=0,l,u,v,p,m=0;function f(M){M.on("mousedown.drag",w).filter(o).on("touchstart.drag",P).on("touchmove.drag",L,Gu).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(M,O){if(!(p||!t.call(this,M,O))){var b=V(this,e.call(this,M,O),M,O,"mouse");b&&(Ut(M.view).on("mousemove.drag",S,Aa).on("mouseup.drag",z,Aa),Wi(M.view),sr(M),v=!1,l=M.clientX,u=M.clientY,b("start",M))}}function S(M){if(oa(M),!v){var O=M.clientX-l,b=M.clientY-u;v=O*O+b*b>m}r.mouse("drag",M)}function z(M){Ut(M.view).on("mousemove.drag mouseup.drag",null),Zi(M.view,v),oa(M),r.mouse("end",M)}function P(M,O){if(t.call(this,M,O)){var b=M.changedTouches,I=e.call(this,M,O),H=b.length,B,X;for(B=0;B<H;++B)(X=V(this,I,M,O,b[B].identifier,b[B]))&&(sr(M),X("start",M,b[B]))}}function L(M){var O=M.changedTouches,b=O.length,I,H;for(I=0;I<b;++I)(H=r[O[I].identifier])&&(oa(M),H("drag",M,O[I]))}function A(M){var O=M.changedTouches,b=O.length,I,H;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),I=0;I<b;++I)(H=r[O[I].identifier])&&(sr(M),H("end",M,O[I]))}function V(M,O,b,I,H,B){var X=i.copy(),N=en(B||b,O),E,C,_;if((_=n.call(M,new kr("beforestart",{sourceEvent:b,target:f,identifier:H,active:s,x:N[0],y:N[1],dx:0,dy:0,dispatch:X}),I))!=null)return E=_.x-N[0]||0,C=_.y-N[1]||0,function T(D,R,F){var q=N,K;switch(D){case"start":r[H]=T,K=s++;break;case"end":delete r[H],--s;case"drag":N=en(F||R,O),K=s;break}X.call(D,M,new kr(D,{sourceEvent:R,subject:_,target:f,identifier:H,active:K,x:N[0]+E,y:N[1]+C,dx:N[0]-q[0],dy:N[1]-q[1],dispatch:X}),I)}}return f.filter=function(M){return arguments.length?(t=typeof M=="function"?M:no(!!M),f):t},f.container=function(M){return arguments.length?(e=typeof M=="function"?M:no(M),f):e},f.subject=function(M){return arguments.length?(n=typeof M=="function"?M:no(M),f):n},f.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:no(!!M),f):o},f.on=function(){var M=i.on.apply(i,arguments);return M===i?f:M},f.clickDistance=function(M){return arguments.length?(m=(M=+M)*M,f):Math.sqrt(m)},f}function Yr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yi(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Ka(){}var Da=.7,So=1/Da,ra="\\s*([+-]?\\d+)\\s*",Oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tv=/^#([0-9a-f]{3,8})$/,nv=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),av=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),ov=new RegExp(`^rgba\\(${ra},${ra},${ra},${Oa}\\)$`),rv=new RegExp(`^rgba\\(${fn},${fn},${fn},${Oa}\\)$`),sv=new RegExp(`^hsl\\(${Oa},${fn},${fn}\\)$`),iv=new RegExp(`^hsla\\(${Oa},${fn},${fn},${Oa}\\)$`),Ps={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yr(Ka,jn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ms,formatHex:Ms,formatHex8:lv,formatHsl:cv,formatRgb:Ts,toString:Ts});function Ms(){return this.rgb().formatHex()}function lv(){return this.rgb().formatHex8()}function cv(){return Xi(this).formatHsl()}function Ts(){return this.rgb().formatRgb()}function jn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=tv.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Is(e):n===3?new Kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ao(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ao(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nv.exec(t))?new Kt(e[1],e[2],e[3],1):(e=av.exec(t))?new Kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ov.exec(t))?ao(e[1],e[2],e[3],e[4]):(e=rv.exec(t))?ao(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sv.exec(t))?Os(e[1],e[2]/100,e[3]/100,1):(e=iv.exec(t))?Os(e[1],e[2]/100,e[3]/100,e[4]):Ps.hasOwnProperty(t)?Is(Ps[t]):t==="transparent"?new Kt(NaN,NaN,NaN,0):null}function Is(t){return new Kt(t>>16&255,t>>8&255,t&255,1)}function ao(t,e,n,o){return o<=0&&(t=e=n=NaN),new Kt(t,e,n,o)}function dv(t){return t instanceof Ka||(t=jn(t)),t?(t=t.rgb(),new Kt(t.r,t.g,t.b,t.opacity)):new Kt}function zr(t,e,n,o){return arguments.length===1?dv(t):new Kt(t,e,n,o??1)}function Kt(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}Yr(Kt,zr,Yi(Ka,{brighter(t){return t=t==null?So:Math.pow(So,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Da:Math.pow(Da,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kt(Hn(this.r),Hn(this.g),Hn(this.b),Co(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:As,formatHex:As,formatHex8:uv,formatRgb:Ds,toString:Ds}));function As(){return`#${Vn(this.r)}${Vn(this.g)}${Vn(this.b)}`}function uv(){return`#${Vn(this.r)}${Vn(this.g)}${Vn(this.b)}${Vn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ds(){const t=Co(this.opacity);return`${t===1?"rgb(":"rgba("}${Hn(this.r)}, ${Hn(this.g)}, ${Hn(this.b)}${t===1?")":`, ${t})`}`}function Co(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vn(t){return t=Hn(t),(t<16?"0":"")+t.toString(16)}function Os(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new tn(t,e,n,o)}function Xi(t){if(t instanceof tn)return new tn(t.h,t.s,t.l,t.opacity);if(t instanceof Ka||(t=jn(t)),!t)return new tn;if(t instanceof tn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),s=NaN,l=i-r,u=(i+r)/2;return l?(e===i?s=(n-o)/l+(n<o)*6:n===i?s=(o-e)/l+2:s=(e-n)/l+4,l/=u<.5?i+r:2-i-r,s*=60):l=u>0&&u<1?0:s,new tn(s,l,u,t.opacity)}function vv(t,e,n,o){return arguments.length===1?Xi(t):new tn(t,e,n,o??1)}function tn(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}Yr(tn,vv,Yi(Ka,{brighter(t){return t=t==null?So:Math.pow(So,t),new tn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Da:Math.pow(Da,t),new tn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Kt(ir(t>=240?t-240:t+120,r,o),ir(t,r,o),ir(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new tn(Rs(this.h),oo(this.s),oo(this.l),Co(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Co(this.opacity);return`${t===1?"hsl(":"hsla("}${Rs(this.h)}, ${oo(this.s)*100}%, ${oo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Rs(t){return t=(t||0)%360,t<0?t+360:t}function oo(t){return Math.max(0,Math.min(1,t||0))}function ir(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Xr=t=>()=>t;function fv(t,e){return function(n){return t+n*e}}function pv(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}function hv(t){return(t=+t)==1?Gi:function(e,n){return n-e?pv(e,n,t):Xr(isNaN(e)?n:e)}}function Gi(t,e){var n=e-t;return n?fv(t,n):Xr(isNaN(t)?e:t)}const Eo=(function t(e){var n=hv(e);function o(r,i){var s=n((r=zr(r)).r,(i=zr(i)).r),l=n(r.g,i.g),u=n(r.b,i.b),v=Gi(r.opacity,i.opacity);return function(p){return r.r=s(p),r.g=l(p),r.b=u(p),r.opacity=v(p),r+""}}return o.gamma=t,o})(1);function gv(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,o=e.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=t[r]*(1-i)+e[r]*i;return o}}function mv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _v(t,e){var n=e?e.length:0,o=t?Math.min(n,t.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=Ea(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(l){for(s=0;s<o;++s)i[s]=r[s](l);return i}}function yv(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function dn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function bv(t,e){var n={},o={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Ea(t[r],e[r]):o[r]=e[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lr=new RegExp(Sr.source,"g");function xv(t){return function(){return t}}function wv(t){return function(e){return t(e)+""}}function Ui(t,e){var n=Sr.lastIndex=lr.lastIndex=0,o,r,i,s=-1,l=[],u=[];for(t=t+"",e=e+"";(o=Sr.exec(t))&&(r=lr.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(o=o[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,u.push({i:s,x:dn(o,r)})),n=lr.lastIndex;return n<e.length&&(i=e.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?wv(u[0].x):xv(e):(e=u.length,function(v){for(var p=0,m;p<e;++p)l[(m=u[p]).i]=m.x(v);return l.join("")})}function Ea(t,e){var n=typeof e,o;return e==null||n==="boolean"?Xr(e):(n==="number"?dn:n==="string"?(o=jn(e))?(e=o,Eo):Ui:e instanceof jn?Eo:e instanceof Date?yv:mv(e)?gv:Array.isArray(e)?_v:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bv:dn)(t,e)}var Ls=180/Math.PI,Cr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ji(t,e,n,o,r,i){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*o)&&(n-=t*u,o-=e*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*Ls,skewX:Math.atan(u)*Ls,scaleX:s,scaleY:l}}var ro;function kv(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cr:Ji(e.a,e.b,e.c,e.d,e.e,e.f)}function zv(t){return t==null||(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",t),!(t=ro.transform.baseVal.consolidate()))?Cr:(t=t.matrix,Ji(t.a,t.b,t.c,t.d,t.e,t.f))}function Qi(t,e,n,o){function r(v){return v.length?v.pop()+" ":""}function i(v,p,m,f,w,S){if(v!==m||p!==f){var z=w.push("translate(",null,e,null,n);S.push({i:z-4,x:dn(v,m)},{i:z-2,x:dn(p,f)})}else(m||f)&&w.push("translate("+m+e+f+n)}function s(v,p,m,f){v!==p?(v-p>180?p+=360:p-v>180&&(v+=360),f.push({i:m.push(r(m)+"rotate(",null,o)-2,x:dn(v,p)})):p&&m.push(r(m)+"rotate("+p+o)}function l(v,p,m,f){v!==p?f.push({i:m.push(r(m)+"skewX(",null,o)-2,x:dn(v,p)}):p&&m.push(r(m)+"skewX("+p+o)}function u(v,p,m,f,w,S){if(v!==m||p!==f){var z=w.push(r(w)+"scale(",null,",",null,")");S.push({i:z-4,x:dn(v,m)},{i:z-2,x:dn(p,f)})}else(m!==1||f!==1)&&w.push(r(w)+"scale("+m+","+f+")")}return function(v,p){var m=[],f=[];return v=t(v),p=t(p),i(v.translateX,v.translateY,p.translateX,p.translateY,m,f),s(v.rotate,p.rotate,m,f),l(v.skewX,p.skewX,m,f),u(v.scaleX,v.scaleY,p.scaleX,p.scaleY,m,f),v=p=null,function(w){for(var S=-1,z=f.length,P;++S<z;)m[(P=f[S]).i]=P.x(w);return m.join("")}}}var Sv=Qi(kv,"px, ","px)","deg)"),Cv=Qi(zv,", ",")",")"),Ev=1e-12;function Vs(t){return((t=Math.exp(t))+1/t)/2}function Nv(t){return((t=Math.exp(t))-1/t)/2}function Pv(t){return((t=Math.exp(2*t))-1)/(t+1)}const fo=(function t(e,n,o){function r(i,s){var l=i[0],u=i[1],v=i[2],p=s[0],m=s[1],f=s[2],w=p-l,S=m-u,z=w*w+S*S,P,L;if(z<Ev)L=Math.log(f/v)/e,P=function(I){return[l+I*w,u+I*S,v*Math.exp(e*I*L)]};else{var A=Math.sqrt(z),V=(f*f-v*v+o*z)/(2*v*n*A),M=(f*f-v*v-o*z)/(2*f*n*A),O=Math.log(Math.sqrt(V*V+1)-V),b=Math.log(Math.sqrt(M*M+1)-M);L=(b-O)/e,P=function(I){var H=I*L,B=Vs(O),X=v/(n*A)*(B*Pv(e*H+O)-Nv(O));return[l+X*w,u+X*S,v*B/Vs(e*H+O)]}}return P.duration=L*1e3*e/Math.SQRT2,P}return r.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return t(s,l,u)},r})(Math.SQRT2,2,4);var da=0,Sa=0,wa=0,$i=1e3,No,Ca,Po=0,Wn=0,qo=0,Ra=typeof performance=="object"&&performance.now?performance:Date,el=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gr(){return Wn||(el(Mv),Wn=Ra.now()+qo)}function Mv(){Wn=0}function Mo(){this._call=this._time=this._next=null}Mo.prototype=tl.prototype={constructor:Mo,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Gr():+n)+(e==null?0:+e),!this._next&&Ca!==this&&(Ca?Ca._next=this:No=this,Ca=this),this._call=t,this._time=n,Er()},stop:function(){this._call&&(this._call=null,this._time=1/0,Er())}};function tl(t,e,n){var o=new Mo;return o.restart(t,e,n),o}function Tv(){Gr(),++da;for(var t=No,e;t;)(e=Wn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--da}function Hs(){Wn=(Po=Ra.now())+qo,da=Sa=0;try{Tv()}finally{da=0,Av(),Wn=0}}function Iv(){var t=Ra.now(),e=t-Po;e>$i&&(qo-=e,Po=t)}function Av(){for(var t,e=No,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:No=n);Ca=t,Er(o)}function Er(t){if(!da){Sa&&(Sa=clearTimeout(Sa));var e=t-Wn;e>24?(t<1/0&&(Sa=setTimeout(Hs,t-Ra.now()-qo)),wa&&(wa=clearInterval(wa))):(wa||(Po=Ra.now(),wa=setInterval(Iv,$i)),da=1,el(Hs))}}function Fs(t,e,n){var o=new Mo;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var Dv=Ho("start","end","cancel","interrupt"),Ov=[],nl=0,qs=1,Nr=2,po=3,Bs=4,Pr=5,ho=6;function Bo(t,e,n,o,r,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Rv(t,n,{name:e,index:o,group:r,on:Dv,tween:Ov,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:nl})}function Ur(t,e){var n=sn(t,e);if(n.state>nl)throw new Error("too late; already scheduled");return n}function _n(t,e){var n=sn(t,e);if(n.state>po)throw new Error("too late; already running");return n}function sn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Rv(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=tl(i,0,n.time);function i(v){n.state=qs,n.timer.restart(s,n.delay,n.time),n.delay<=v&&s(v-n.delay)}function s(v){var p,m,f,w;if(n.state!==qs)return u();for(p in o)if(w=o[p],w.name===n.name){if(w.state===po)return Fs(s);w.state===Bs?(w.state=ho,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete o[p]):+p<e&&(w.state=ho,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete o[p])}if(Fs(function(){n.state===po&&(n.state=Bs,n.timer.restart(l,n.delay,n.time),l(v))}),n.state=Nr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Nr){for(n.state=po,r=new Array(f=n.tween.length),p=0,m=-1;p<f;++p)(w=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(r[++m]=w);r.length=m+1}}function l(v){for(var p=v<n.duration?n.ease.call(null,v/n.duration):(n.timer.restart(u),n.state=Pr,1),m=-1,f=r.length;++m<f;)r[m].call(t,p);n.state===Pr&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=ho,n.timer.stop(),delete o[e];for(var v in o)return;delete t.__transition}}function go(t,e){var n=t.__transition,o,r,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((o=n[s]).name!==e){i=!1;continue}r=o.state>Nr&&o.state<Pr,o.state=ho,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[s]}i&&delete t.__transition}}function Lv(t){return this.each(function(){go(this,t)})}function Vv(t,e){var n,o;return function(){var r=_n(this,t),i=r.tween;if(i!==n){o=n=i;for(var s=0,l=o.length;s<l;++s)if(o[s].name===e){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Hv(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=_n(this,t),s=i.tween;if(s!==o){r=(o=s).slice();for(var l={name:e,value:n},u=0,v=r.length;u<v;++u)if(r[u].name===e){r[u]=l;break}u===v&&r.push(l)}i.tween=r}}function Fv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=sn(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===t)return s.value;return null}return this.each((e==null?Vv:Hv)(n,t,e))}function Jr(t,e,n){var o=t._id;return t.each(function(){var r=_n(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return sn(r,o).value[e]}}function al(t,e){var n;return(typeof e=="number"?dn:e instanceof jn?Eo:(n=jn(e))?(e=n,Eo):Ui)(t,e)}function qv(t){return function(){this.removeAttribute(t)}}function Bv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kv(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttribute(t);return s===r?null:s===o?i:i=e(o=s,n)}}function jv(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===o?i:i=e(o=s,n)}}function Wv(t,e,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=e(o=s,l)))}}function Zv(t,e,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=e(o=s,l)))}}function Yv(t,e){var n=Fo(t),o=n==="transform"?Cv:al;return this.attrTween(t,typeof e=="function"?(n.local?Zv:Wv)(n,o,Jr(this,"attr."+t,e)):e==null?(n.local?Bv:qv)(n):(n.local?jv:Kv)(n,o,e))}function Xv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Gv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uv(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Gv(t,i)),n}return r._value=e,r}function Jv(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Xv(t,i)),n}return r._value=e,r}function Qv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=Fo(t);return this.tween(n,(o.local?Uv:Jv)(o,e))}function $v(t,e){return function(){Ur(this,t).delay=+e.apply(this,arguments)}}function ef(t,e){return e=+e,function(){Ur(this,t).delay=e}}function tf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$v:ef)(e,t)):sn(this.node(),e).delay}function nf(t,e){return function(){_n(this,t).duration=+e.apply(this,arguments)}}function af(t,e){return e=+e,function(){_n(this,t).duration=e}}function of(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nf:af)(e,t)):sn(this.node(),e).duration}function rf(t,e){if(typeof e!="function")throw new Error;return function(){_n(this,t).ease=e}}function sf(t){var e=this._id;return arguments.length?this.each(rf(e,t)):sn(this.node(),e).ease}function lf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_n(this,t).ease=n}}function cf(t){if(typeof t!="function")throw new Error;return this.each(lf(this._id,t))}function df(t){typeof t!="function"&&(t=Oi(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,l=o[r]=[],u,v=0;v<s;++v)(u=i[v])&&t.call(u,u.__data__,v,i)&&l.push(u);return new Sn(o,this._parents,this._name,this._id)}function uf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),s=new Array(o),l=0;l<i;++l)for(var u=e[l],v=n[l],p=u.length,m=s[l]=new Array(p),f,w=0;w<p;++w)(f=u[w]||v[w])&&(m[w]=f);for(;l<o;++l)s[l]=e[l];return new Sn(s,this._parents,this._name,this._id)}function vf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ff(t,e,n){var o,r,i=vf(e)?Ur:_n;return function(){var s=i(this,t),l=s.on;l!==o&&(r=(o=l).copy()).on(e,n),s.on=r}}function pf(t,e){var n=this._id;return arguments.length<2?sn(this.node(),n).on.on(t):this.each(ff(n,t,e))}function hf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gf(){return this.on("end.remove",hf(this._id))}function mf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Wr(t));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var l=o[s],u=l.length,v=i[s]=new Array(u),p,m,f=0;f<u;++f)(p=l[f])&&(m=t.call(p,p.__data__,f,l))&&("__data__"in p&&(m.__data__=p.__data__),v[f]=m,Bo(v[f],e,n,f,v,sn(p,n)));return new Sn(i,this._parents,e,n)}function _f(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Di(t));for(var o=this._groups,r=o.length,i=[],s=[],l=0;l<r;++l)for(var u=o[l],v=u.length,p,m=0;m<v;++m)if(p=u[m]){for(var f=t.call(p,p.__data__,m,u),w,S=sn(p,n),z=0,P=f.length;z<P;++z)(w=f[z])&&Bo(w,e,n,z,f,S);i.push(f),s.push(p)}return new Sn(i,s,e,n)}var yf=Ba.prototype.constructor;function bf(){return new yf(this._groups,this._parents)}function xf(t,e){var n,o,r;return function(){var i=ca(this,t),s=(this.style.removeProperty(t),ca(this,t));return i===s?null:i===n&&s===o?r:r=e(n=i,o=s)}}function ol(t){return function(){this.style.removeProperty(t)}}function wf(t,e,n){var o,r=n+"",i;return function(){var s=ca(this,t);return s===r?null:s===o?i:i=e(o=s,n)}}function kf(t,e,n){var o,r,i;return function(){var s=ca(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),ca(this,t))),s===u?null:s===o&&u===r?i:(r=u,i=e(o=s,l))}}function zf(t,e){var n,o,r,i="style."+e,s="end."+i,l;return function(){var u=_n(this,t),v=u.on,p=u.value[i]==null?l||(l=ol(e)):void 0;(v!==n||r!==p)&&(o=(n=v).copy()).on(s,r=p),u.on=o}}function Sf(t,e,n){var o=(t+="")=="transform"?Sv:al;return e==null?this.styleTween(t,xf(t,o)).on("end.style."+t,ol(t)):typeof e=="function"?this.styleTween(t,kf(t,o,Jr(this,"style."+t,e))).each(zf(this._id,t)):this.styleTween(t,wf(t,o,e),n).on("end.style."+t,null)}function Cf(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function Ef(t,e,n){var o,r;function i(){var s=e.apply(this,arguments);return s!==r&&(o=(r=s)&&Cf(t,s,n)),o}return i._value=e,i}function Nf(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,Ef(t,e,n??""))}function Pf(t){return function(){this.textContent=t}}function Mf(t){return function(){var e=t(this);this.textContent=e??""}}function Tf(t){return this.tween("text",typeof t=="function"?Mf(Jr(this,"text",t)):Pf(t==null?"":t+""))}function If(t){return function(e){this.textContent=t.call(this,e)}}function Af(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&If(r)),e}return o._value=t,o}function Df(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Af(t))}function Of(){for(var t=this._name,e=this._id,n=rl(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,v=0;v<l;++v)if(u=s[v]){var p=sn(u,e);Bo(u,t,n,v,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Sn(o,this._parents,t,n)}function Rf(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--r===0&&i()}};n.each(function(){var v=_n(this,o),p=v.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),v.on=e}),r===0&&i()})}var Lf=0;function Sn(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function rl(){return++Lf}var bn=Ba.prototype;Sn.prototype={constructor:Sn,select:mf,selectAll:_f,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:df,merge:uf,selection:bf,transition:Of,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:pf,attr:Yv,attrTween:Qv,style:Sf,styleTween:Nf,text:Tf,textTween:Df,remove:gf,tween:Fv,delay:tf,duration:of,ease:sf,easeVarying:cf,end:Rf,[Symbol.iterator]:bn[Symbol.iterator]};function Vf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Hf={time:null,delay:0,duration:250,ease:Vf};function Ff(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function qf(t){var e,n;t instanceof Sn?(e=t._id,t=t._name):(e=rl(),(n=Hf).time=Gr(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,v=0;v<l;++v)(u=s[v])&&Bo(u,t,e,v,s,n||Ff(u,e));return new Sn(o,this._parents,t,e)}Ba.prototype.interrupt=Lv;Ba.prototype.transition=qf;const so=t=>()=>t;function Bf(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function xn(t,e,n){this.k=t,this.x=e,this.y=n}xn.prototype={constructor:xn,scale:function(t){return t===1?this:new xn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ko=new xn(1,0,0);sl.prototype=xn.prototype;function sl(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ko;return t.__zoom}function cr(t){t.stopImmediatePropagation()}function ka(t){t.preventDefault(),t.stopImmediatePropagation()}function Kf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function jf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ks(){return this.__zoom||Ko}function Wf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Zf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yf(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function il(){var t=Kf,e=jf,n=Yf,o=Wf,r=Zf,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=fo,v=Ho("start","zoom","end"),p,m,f,w=500,S=150,z=0,P=10;function L(_){_.property("__zoom",Ks).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",X).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}L.transform=function(_,T,D,R){var F=_.selection?_.selection():_;F.property("__zoom",Ks),_!==F?O(_,T,D,R):F.interrupt().each(function(){b(this,arguments).event(R).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},L.scaleBy=function(_,T,D,R){L.scaleTo(_,function(){var F=this.__zoom.k,q=typeof T=="function"?T.apply(this,arguments):T;return F*q},D,R)},L.scaleTo=function(_,T,D,R){L.transform(_,function(){var F=e.apply(this,arguments),q=this.__zoom,K=D==null?M(F):typeof D=="function"?D.apply(this,arguments):D,Z=q.invert(K),ee=typeof T=="function"?T.apply(this,arguments):T;return n(V(A(q,ee),K,Z),F,s)},D,R)},L.translateBy=function(_,T,D,R){L.transform(_,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof D=="function"?D.apply(this,arguments):D),e.apply(this,arguments),s)},null,R)},L.translateTo=function(_,T,D,R,F){L.transform(_,function(){var q=e.apply(this,arguments),K=this.__zoom,Z=R==null?M(q):typeof R=="function"?R.apply(this,arguments):R;return n(Ko.translate(Z[0],Z[1]).scale(K.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof D=="function"?-D.apply(this,arguments):-D),q,s)},R,F)};function A(_,T){return T=Math.max(i[0],Math.min(i[1],T)),T===_.k?_:new xn(T,_.x,_.y)}function V(_,T,D){var R=T[0]-D[0]*_.k,F=T[1]-D[1]*_.k;return R===_.x&&F===_.y?_:new xn(_.k,R,F)}function M(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function O(_,T,D,R){_.on("start.zoom",function(){b(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(R).end()}).tween("zoom",function(){var F=this,q=arguments,K=b(F,q).event(R),Z=e.apply(F,q),ee=D==null?M(Z):typeof D=="function"?D.apply(F,q):D,J=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),ne=F.__zoom,le=typeof T=="function"?T.apply(F,q):T,re=u(ne.invert(ee).concat(J/ne.k),le.invert(ee).concat(J/le.k));return function(Q){if(Q===1)Q=le;else{var j=re(Q),$=J/j[2];Q=new xn($,ee[0]-j[0]*$,ee[1]-j[1]*$)}K.zoom(null,Q)}})}function b(_,T,D){return!D&&_.__zooming||new I(_,T)}function I(_,T){this.that=_,this.args=T,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,T),this.taps=0}I.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,T){return this.mouse&&_!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var T=Ut(this.that).datum();v.call(_,this.that,new Bf(_,{sourceEvent:this.sourceEvent,target:L,transform:this.that.__zoom,dispatch:v}),T)}};function H(_,...T){if(!t.apply(this,arguments))return;var D=b(this,T).event(_),R=this.__zoom,F=Math.max(i[0],Math.min(i[1],R.k*Math.pow(2,o.apply(this,arguments)))),q=en(_);if(D.wheel)(D.mouse[0][0]!==q[0]||D.mouse[0][1]!==q[1])&&(D.mouse[1]=R.invert(D.mouse[0]=q)),clearTimeout(D.wheel);else{if(R.k===F)return;D.mouse=[q,R.invert(q)],go(this),D.start()}ka(_),D.wheel=setTimeout(K,S),D.zoom("mouse",n(V(A(R,F),D.mouse[0],D.mouse[1]),D.extent,s));function K(){D.wheel=null,D.end()}}function B(_,...T){if(f||!t.apply(this,arguments))return;var D=_.currentTarget,R=b(this,T,!0).event(_),F=Ut(_.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",J,!0),q=en(_,D),K=_.clientX,Z=_.clientY;Wi(_.view),cr(_),R.mouse=[q,this.__zoom.invert(q)],go(this),R.start();function ee(ne){if(ka(ne),!R.moved){var le=ne.clientX-K,re=ne.clientY-Z;R.moved=le*le+re*re>z}R.event(ne).zoom("mouse",n(V(R.that.__zoom,R.mouse[0]=en(ne,D),R.mouse[1]),R.extent,s))}function J(ne){F.on("mousemove.zoom mouseup.zoom",null),Zi(ne.view,R.moved),ka(ne),R.event(ne).end()}}function X(_,...T){if(t.apply(this,arguments)){var D=this.__zoom,R=en(_.changedTouches?_.changedTouches[0]:_,this),F=D.invert(R),q=D.k*(_.shiftKey?.5:2),K=n(V(A(D,q),R,F),e.apply(this,T),s);ka(_),l>0?Ut(this).transition().duration(l).call(O,K,R,_):Ut(this).call(L.transform,K,R,_)}}function N(_,...T){if(t.apply(this,arguments)){var D=_.touches,R=D.length,F=b(this,T,_.changedTouches.length===R).event(_),q,K,Z,ee;for(cr(_),K=0;K<R;++K)Z=D[K],ee=en(Z,this),ee=[ee,this.__zoom.invert(ee),Z.identifier],F.touch0?!F.touch1&&F.touch0[2]!==ee[2]&&(F.touch1=ee,F.taps=0):(F.touch0=ee,q=!0,F.taps=1+!!p);p&&(p=clearTimeout(p)),q&&(F.taps<2&&(m=ee[0],p=setTimeout(function(){p=null},w)),go(this),F.start())}}function E(_,...T){if(this.__zooming){var D=b(this,T).event(_),R=_.changedTouches,F=R.length,q,K,Z,ee;for(ka(_),q=0;q<F;++q)K=R[q],Z=en(K,this),D.touch0&&D.touch0[2]===K.identifier?D.touch0[0]=Z:D.touch1&&D.touch1[2]===K.identifier&&(D.touch1[0]=Z);if(K=D.that.__zoom,D.touch1){var J=D.touch0[0],ne=D.touch0[1],le=D.touch1[0],re=D.touch1[1],Q=(Q=le[0]-J[0])*Q+(Q=le[1]-J[1])*Q,j=(j=re[0]-ne[0])*j+(j=re[1]-ne[1])*j;K=A(K,Math.sqrt(Q/j)),Z=[(J[0]+le[0])/2,(J[1]+le[1])/2],ee=[(ne[0]+re[0])/2,(ne[1]+re[1])/2]}else if(D.touch0)Z=D.touch0[0],ee=D.touch0[1];else return;D.zoom("touch",n(V(K,Z,ee),D.extent,s))}}function C(_,...T){if(this.__zooming){var D=b(this,T).event(_),R=_.changedTouches,F=R.length,q,K;for(cr(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},w),q=0;q<F;++q)K=R[q],D.touch0&&D.touch0[2]===K.identifier?delete D.touch0:D.touch1&&D.touch1[2]===K.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(K=en(K,this),Math.hypot(m[0]-K[0],m[1]-K[1])<P)){var Z=Ut(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return L.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:so(+_),L):o},L.filter=function(_){return arguments.length?(t=typeof _=="function"?_:so(!!_),L):t},L.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:so(!!_),L):r},L.extent=function(_){return arguments.length?(e=typeof _=="function"?_:so([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),L):e},L.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],L):[i[0],i[1]]},L.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],L):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},L.constrain=function(_){return arguments.length?(n=_,L):n},L.duration=function(_){return arguments.length?(l=+_,L):l},L.interpolate=function(_){return arguments.length?(u=_,L):u},L.on=function(){var _=v.on.apply(v,arguments);return _===v?L:_},L.clickDistance=function(_){return arguments.length?(z=(_=+_)*_,L):Math.sqrt(z)},L.tapDistance=function(_){return arguments.length?(P=+_,L):P},L}const La={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:o}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Mr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ll=["Enter"," ","Escape"],Xf={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ua;(function(t){t.Strict="strict",t.Loose="loose"})(ua||(ua={}));var sa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(sa||(sa={}));var To;(function(t){t.Partial="partial",t.Full="full"})(To||(To={}));const Tr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var En;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(En||(En={}));var Io;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Io||(Io={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));const js={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top};function Gf(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Ws(t,e,n){if(!n)return;const o=[];t.forEach((r,i)=>{e?.has(i)||o.push(r)}),o.length&&n(o)}function Uf(t){return t===null?null:t?"valid":"invalid"}const cl=t=>"id"in t&&"source"in t&&"target"in t,Jf=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Qr=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),ja=(t,e=[0,0])=>{const{width:n,height:o}=Tn(t),r=t.origin??e,i=n*r[0],s=o*r[1];return{x:t.position.x-i,y:t.position.y-s}},Qf=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const i=typeof r=="string";let s=!e.nodeLookup&&!i?r:void 0;e.nodeLookup&&(s=i?e.nodeLookup.get(r):Qr(r)?r:e.nodeLookup.get(r.id));const l=s?Ao(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jo(o,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wo(n)},Wa=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return t.forEach(r=>{(e.filter===void 0||e.filter(r))&&(n=jo(n,Ao(r)),o=!0)}),o?Wo(n):{x:0,y:0,width:0,height:0}},$r=(t,e,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const l={...Ya(e,[n,o,r]),width:e.width/r,height:e.height/r},u=[];for(const v of t.values()){const{measured:p,selectable:m=!0,hidden:f=!1}=v;if(s&&!m||f)continue;const w=p.width??v.width??v.initialWidth??null,S=p.height??v.height??v.initialHeight??null,z=Va(l,fa(v)),P=(w??0)*(S??0),L=i&&z>0;(!v.internals.handleBounds||L||z>=P||v.dragging)&&u.push(v)}return u},$f=(t,e)=>{const n=new Set;return t.forEach(o=>{n.add(o.id)}),e.filter(o=>n.has(o.source)||n.has(o.target))};function ep(t,e){const n=new Map,o=e?.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&(e?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function tp({nodes:t,width:e,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(t.size===0)return Promise.resolve(!0);const l=ep(t,s),u=Wa(l),v=es(u,e,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(v,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function dl({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:u,y:v}=l?l.internals.positionAbsolute:{x:0,y:0},p=s.origin??o;let m=s.extent||r;if(s.extent==="parent"&&!s.expandParent)if(!l)i?.("005",La.error005());else{const w=l.measured.width,S=l.measured.height;w&&S&&(m=[[u,v],[u+w,v+S]])}else l&&pa(s.extent)&&(m=[[s.extent[0][0]+u,s.extent[0][1]+v],[s.extent[1][0]+u,s.extent[1][1]+v]]);const f=pa(m)?Zn(e,m,s.measured):e;return(s.measured.width===void 0||s.measured.height===void 0)&&i?.("015",La.error015()),{position:{x:f.x-u+(s.measured.width??0)*p[0],y:f.y-v+(s.measured.height??0)*p[1]},positionAbsolute:f}}async function np({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(t.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const w=i.has(f.id),S=!w&&f.parentId&&s.find(z=>z.id===f.parentId);(w||S)&&s.push(f)}const l=new Set(e.map(f=>f.id)),u=o.filter(f=>f.deletable!==!1),p=$f(s,u);for(const f of u)l.has(f.id)&&!p.find(S=>S.id===f.id)&&p.push(f);if(!r)return{edges:p,nodes:s};const m=await r({nodes:s,edges:p});return typeof m=="boolean"?m?{edges:p,nodes:s}:{edges:[],nodes:[]}:m}const va=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Zn=(t={x:0,y:0},e,n)=>({x:va(t.x,e[0][0],e[1][0]-(n?.width??0)),y:va(t.y,e[0][1],e[1][1]-(n?.height??0))});function ul(t,e,n){const{width:o,height:r}=Tn(n),{x:i,y:s}=n.internals.positionAbsolute;return Zn(t,[[i,s],[i+o,s+r]],e)}const Zs=(t,e,n)=>t<e?va(Math.abs(t-e),1,e)/e:t>n?-va(Math.abs(t-n),1,e)/e:0,vl=(t,e,n=15,o=40)=>{const r=Zs(t.x,o,e.width-o)*n,i=Zs(t.y,o,e.height-o)*n;return[r,i]},jo=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Ir=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),Wo=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),fa=(t,e=[0,0])=>{const{x:n,y:o}=Qr(t)?t.internals.positionAbsolute:ja(t,e);return{x:n,y:o,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Ao=(t,e=[0,0])=>{const{x:n,y:o}=Qr(t)?t.internals.positionAbsolute:ja(t,e);return{x:n,y:o,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:o+(t.measured?.height??t.height??t.initialHeight??0)}},fl=(t,e)=>Wo(jo(Ir(t),Ir(e))),Va=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Ys=t=>wn(t.width)&&wn(t.height)&&wn(t.x)&&wn(t.y),wn=t=>!isNaN(t)&&isFinite(t),ap=(t,e)=>{},Za=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Ya=({x:t,y:e},[n,o,r],i=!1,s=[1,1])=>{const l={x:(t-n)/r,y:(e-o)/r};return i?Za(l,s):l},Do=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o});function ta(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function op(t,e,n){if(typeof t=="string"||typeof t=="number"){const o=ta(t,n),r=ta(t,e);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof t=="object"){const o=ta(t.top??t.y??0,n),r=ta(t.bottom??t.y??0,n),i=ta(t.left??t.x??0,e),s=ta(t.right??t.x??0,e);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rp(t,e,n,o,r,i){const{x:s,y:l}=Do(t,[e,n,o]),{x:u,y:v}=Do({x:t.x+t.width,y:t.y+t.height},[e,n,o]),p=r-u,m=i-v;return{left:Math.floor(s),top:Math.floor(l),right:Math.floor(p),bottom:Math.floor(m)}}const es=(t,e,n,o,r,i)=>{const s=op(i,e,n),l=(e-s.x)/t.width,u=(n-s.y)/t.height,v=Math.min(l,u),p=va(v,o,r),m=t.x+t.width/2,f=t.y+t.height/2,w=e/2-m*p,S=n/2-f*p,z=rp(t,w,S,p,e,n),P={left:Math.min(z.left-s.left,0),top:Math.min(z.top-s.top,0),right:Math.min(z.right-s.right,0),bottom:Math.min(z.bottom-s.bottom,0)};return{x:w-P.left+P.right,y:S-P.top+P.bottom,zoom:p}},Ha=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function pa(t){return t!=null&&t!=="parent"}function Tn(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function pl(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function sp(t,e={width:0,height:0},n,o,r){const i={...t},s=o.get(n);if(s){const l=s.origin||r;i.x+=s.internals.positionAbsolute.x-(e.width??0)*l[0],i.y+=s.internals.positionAbsolute.y-(e.height??0)*l[1]}return i}function ip(t){return{...Xf,...t||{}}}function dr(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=nn(t),l=Ya({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:u,y:v}=n?Za(l,e):l;return{xSnapped:u,ySnapped:v,...l}}const hl=t=>({width:t.offsetWidth,height:t.offsetHeight}),gl=t=>t?.getRootNode?.()||window?.document,lp=["INPUT","SELECT","TEXTAREA"];function ml(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:lp.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const _l=t=>"clientX"in t,nn=(t,e)=>{const n=_l(t),o=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:o-(e?.left??0),y:r-(e?.top??0)}},Xs=(t,e,n,o,r)=>{const i=e.querySelectorAll(`.${t}`);return!i||!i.length?null:Array.from(i).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:r,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...hl(s)}})};function cp({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=t*.125+r*.375+s*.375+n*.125,v=e*.125+i*.375+l*.375+o*.125,p=Math.abs(u-t),m=Math.abs(v-e);return[u,v,p,m]}function io(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Gs({pos:t,x1:e,y1:n,x2:o,y2:r,c:i}){switch(t){case Se.Left:return[e-io(e-o,i),n];case Se.Right:return[e+io(o-e,i),n];case Se.Top:return[e,n-io(n-r,i)];case Se.Bottom:return[e,n+io(r-n,i)]}}function yl({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:o,targetY:r,targetPosition:i=Se.Top,curvature:s=.25}){const[l,u]=Gs({pos:n,x1:t,y1:e,x2:o,y2:r,c:s}),[v,p]=Gs({pos:i,x1:o,y1:r,x2:t,y2:e,c:s}),[m,f,w,S]=cp({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:v,targetControlY:p});return[`M${t},${e} C${l},${u} ${v},${p} ${o},${r}`,m,f,w,S]}function bl({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,i=n<t?n+r:n-r,s=Math.abs(o-e)/2,l=o<e?o+s:o-s;return[i,l,r,s]}function dp({sourceNode:t,targetNode:e,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1,zIndexMode:i="basic"}){if(i==="manual")return o;const s=r&&n?o+1e3:o,l=Math.max(t.parentId||r&&t.selected?t.internals.z:0,e.parentId||r&&e.selected?e.internals.z:0);return s+l}function up({sourceNode:t,targetNode:e,width:n,height:o,transform:r}){const i=jo(Ao(t),Ao(e));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Va(s,Wo(i))>0}const vp=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`xy-edge__${t}${e||""}-${n}${o||""}`,fp=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),pp=(t,e,n={})=>{if(!t.source||!t.target)return e;const o=n.getEdgeId||vp;let r;return cl(t)?r={...t}:r={...t,id:o(t)},fp(r,e)?e:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,e.concat(r))};function xl({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,i,s,l]=bl({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,i,s,l]}const Us={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},hp=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Js=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function gp({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:o=Se.Top,center:r,offset:i,stepPosition:s}){const l=Us[e],u=Us[o],v={x:t.x+l.x*i,y:t.y+l.y*i},p={x:n.x+u.x*i,y:n.y+u.y*i},m=hp({source:v,sourcePosition:e,target:p}),f=m.x!==0?"x":"y",w=m[f];let S=[],z,P;const L={x:0,y:0},A={x:0,y:0},[,,V,M]=bl({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[f]*u[f]===-1){f==="x"?(z=r.x??v.x+(p.x-v.x)*s,P=r.y??(v.y+p.y)/2):(z=r.x??(v.x+p.x)/2,P=r.y??v.y+(p.y-v.y)*s);const b=[{x:z,y:v.y},{x:z,y:p.y}],I=[{x:v.x,y:P},{x:p.x,y:P}];l[f]===w?S=f==="x"?b:I:S=f==="x"?I:b}else{const b=[{x:v.x,y:p.y}],I=[{x:p.x,y:v.y}];if(f==="x"?S=l.x===w?I:b:S=l.y===w?b:I,e===o){const E=Math.abs(t[f]-n[f]);if(E<=i){const C=Math.min(i-1,i-E);l[f]===w?L[f]=(v[f]>t[f]?-1:1)*C:A[f]=(p[f]>n[f]?-1:1)*C}}if(e!==o){const E=f==="x"?"y":"x",C=l[f]===u[E],_=v[E]>p[E],T=v[E]<p[E];(l[f]===1&&(!C&&_||C&&T)||l[f]!==1&&(!C&&T||C&&_))&&(S=f==="x"?b:I)}const H={x:v.x+L.x,y:v.y+L.y},B={x:p.x+A.x,y:p.y+A.y},X=Math.max(Math.abs(H.x-S[0].x),Math.abs(B.x-S[0].x)),N=Math.max(Math.abs(H.y-S[0].y),Math.abs(B.y-S[0].y));X>=N?(z=(H.x+B.x)/2,P=S[0].y):(z=S[0].x,P=(H.y+B.y)/2)}return[[t,{x:v.x+L.x,y:v.y+L.y},...S,{x:p.x+A.x,y:p.y+A.y},n],z,P,V,M]}function mp(t,e,n,o){const r=Math.min(Js(t,e)/2,Js(e,n)/2,o),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const v=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${i+r*v},${s}Q ${i},${s} ${i},${s+r*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${i},${s+r*u}Q ${i},${s} ${i+r*l},${s}`}function ts({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:o,targetY:r,targetPosition:i=Se.Top,borderRadius:s=5,centerX:l,centerY:u,offset:v=20,stepPosition:p=.5}){const[m,f,w,S,z]=gp({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:u},offset:v,stepPosition:p});return[m.reduce((L,A,V)=>{let M="";return V>0&&V<m.length-1?M=mp(m[V-1],A,m[V+1],s):M=`${V===0?"M":"L"}${A.x} ${A.y}`,L+=M,L},""),f,w,S,z]}function Qs(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function _p(t){const{sourceNode:e,targetNode:n}=t;if(!Qs(e)||!Qs(n))return null;const o=e.internals.handleBounds||$s(e.handles),r=n.internals.handleBounds||$s(n.handles),i=ei(o?.source??[],t.sourceHandle),s=ei(t.connectionMode===ua.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),t.targetHandle);if(!i||!s)return t.onError?.("008",La.error008(i?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=i?.position||Se.Bottom,u=s?.position||Se.Top,v=Yn(e,i,l),p=Yn(n,s,u);return{sourceX:v.x,sourceY:v.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function $s(t){if(!t)return null;const e=[],n=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,o.type==="source"?e.push(o):o.type==="target"&&n.push(o);return{source:e,target:n}}function Yn(t,e,n=Se.Left,o=!1){const r=(e?.x??0)+t.internals.positionAbsolute.x,i=(e?.y??0)+t.internals.positionAbsolute.y,{width:s,height:l}=e??Tn(t);if(o)return{x:r+s/2,y:i+l/2};switch(e?.position??n){case Se.Top:return{x:r+s/2,y:i};case Se.Right:return{x:r+s,y:i+l/2};case Se.Bottom:return{x:r+s/2,y:i+l};case Se.Left:return{x:r,y:i+l/2}}}function ei(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Ar(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`:""}function yp(t,{id:e,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return t.reduce((s,l)=>([l.markerStart||o,l.markerEnd||r].forEach(u=>{if(u&&typeof u=="object"){const v=Ar(u,e);i.has(v)||(s.push({id:v,color:u.color||n,...u}),i.add(v))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const wl=1e3,bp=10,ns={nodeOrigin:[0,0],nodeExtent:Mr,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},xp={...ns,checkEquality:!0};function as(t,e){const n={...t};for(const o in e)e[o]!==void 0&&(n[o]=e[o]);return n}function wp(t,e,n){const o=as(ns,n);for(const r of t.values())if(r.parentId)rs(r,t,e,o);else{const i=ja(r,o.nodeOrigin),s=pa(r.extent)?r.extent:o.nodeExtent,l=Zn(i,s,Tn(r));r.internals.positionAbsolute=l}}function kp(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],o=[];for(const r of t.handles){const i={id:r.id,width:r.width??1,height:r.height??1,nodeId:t.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?n.push(i):r.type==="target"&&o.push(i)}return{source:n,target:o}}function os(t){return t==="manual"}function zp(t,e,n,o={}){const r=as(xp,o),i={i:0},s=new Map(e),l=r?.elevateNodesOnSelect&&!os(r.zIndexMode)?wl:0;let u=t.length>0;e.clear(),n.clear();for(const v of t){let p=s.get(v.id);if(r.checkEquality&&v===p?.internals.userNode)e.set(v.id,p);else{const m=ja(v,r.nodeOrigin),f=pa(v.extent)?v.extent:r.nodeExtent,w=Zn(m,f,Tn(v));p={...r.defaults,...v,measured:{width:v.measured?.width,height:v.measured?.height},internals:{positionAbsolute:w,handleBounds:kp(v,p),z:kl(v,l,r.zIndexMode),userNode:v}},e.set(v.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),v.parentId&&rs(p,e,n,o,i)}return u}function Sp(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function rs(t,e,n,o,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:l,zIndexMode:u}=as(ns,o),v=t.parentId,p=e.get(v);if(!p){console.warn(`Parent node ${v} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Sp(t,n),r&&!p.parentId&&p.internals.rootParentIndex===void 0&&u==="auto"&&(p.internals.rootParentIndex=++r.i,p.internals.z=p.internals.z+r.i*bp),r&&p.internals.rootParentIndex!==void 0&&(r.i=p.internals.rootParentIndex);const m=i&&!os(u)?wl:0,{x:f,y:w,z:S}=Cp(t,p,s,l,m,u),{positionAbsolute:z}=t.internals,P=f!==z.x||w!==z.y;(P||S!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:P?{x:f,y:w}:z,z:S}})}function kl(t,e,n){const o=wn(t.zIndex)?t.zIndex:0;return os(n)?o:o+(t.selected?e:0)}function Cp(t,e,n,o,r,i){const{x:s,y:l}=e.internals.positionAbsolute,u=Tn(t),v=ja(t,n),p=pa(t.extent)?Zn(v,t.extent,u):v;let m=Zn({x:s+p.x,y:l+p.y},o,u);t.extent==="parent"&&(m=ul(m,u,e));const f=kl(t,r,i),w=e.internals.z??0;return{x:m.x,y:m.y,z:w>=f?w+1:f}}function Ep(t,e,n,o=[0,0]){const r=[],i=new Map;for(const s of t){const l=e.get(s.parentId);if(!l)continue;const u=i.get(s.parentId)?.expandedRect??fa(l),v=fl(u,s.rect);i.set(s.parentId,{expandedRect:v,parent:l})}return i.size>0&&i.forEach(({expandedRect:s,parent:l},u)=>{const v=l.internals.positionAbsolute,p=Tn(l),m=l.origin??o,f=s.x<v.x?Math.round(Math.abs(v.x-s.x)):0,w=s.y<v.y?Math.round(Math.abs(v.y-s.y)):0,S=Math.max(p.width,Math.round(s.width)),z=Math.max(p.height,Math.round(s.height)),P=(S-p.width)*m[0],L=(z-p.height)*m[1];(f>0||w>0||P||L)&&(r.push({id:u,type:"position",position:{x:l.position.x-f+P,y:l.position.y-w+L}}),n.get(u)?.forEach(A=>{t.some(V=>V.id===A.id)||r.push({id:A.id,type:"position",position:{x:A.position.x+f,y:A.position.y+w}})})),(p.width<s.width||p.height<s.height||f||w)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:S+(f?m[0]*f-P:0),height:z+(w?m[1]*w-L:0)}})}),r}function Np(t,e,n,o,r,i,s){const l=o?.querySelector(".xyflow__viewport");let u=!1;if(!l)return{changes:[],updatedInternals:u};const v=[],p=window.getComputedStyle(l),{m22:m}=new window.DOMMatrixReadOnly(p.transform),f=[];for(const w of t.values()){const S=e.get(w.id);if(!S)continue;if(S.hidden){e.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),u=!0;continue}const z=hl(w.nodeElement),P=S.measured.width!==z.width||S.measured.height!==z.height;if(!!(z.width&&z.height&&(P||!S.internals.handleBounds||w.force))){const A=w.nodeElement.getBoundingClientRect(),V=pa(S.extent)?S.extent:i;let{positionAbsolute:M}=S.internals;S.parentId&&S.extent==="parent"?M=ul(M,z,e.get(S.parentId)):V&&(M=Zn(M,V,z));const O={...S,measured:z,internals:{...S.internals,positionAbsolute:M,handleBounds:{source:Xs("source",w.nodeElement,A,m,S.id),target:Xs("target",w.nodeElement,A,m,S.id)}}};e.set(S.id,O),S.parentId&&rs(O,e,n,{nodeOrigin:r,zIndexMode:s}),u=!0,P&&(v.push({id:S.id,type:"dimensions",dimensions:z}),S.expandParent&&S.parentId&&f.push({id:S.id,parentId:S.parentId,rect:fa(O,r)}))}}if(f.length>0){const w=Ep(f,e,n,r);v.push(...w)}return{changes:v,updatedInternals:u}}async function Pp({delta:t,panZoom:e,transform:n,translateExtent:o,width:r,height:i}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,i]],o),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function ti(t,e,n,o,r,i){let s=r;const l=o.get(s)||new Map;o.set(s,l.set(n,e)),s=`${r}-${t}`;const u=o.get(s)||new Map;if(o.set(s,u.set(n,e)),i){s=`${r}-${t}-${i}`;const v=o.get(s)||new Map;o.set(s,v.set(n,e))}}function Mp(t,e,n){t.clear(),e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:l=null}=o,u={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:l},v=`${r}-${s}--${i}-${l}`,p=`${i}-${l}--${r}-${s}`;ti("source",u,p,t,r,s),ti("target",u,v,t,i,l),e.set(o.id,o)}}function zl(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:zl(n,e):!1}function ni(t,e,n){let o=t;do{if(o?.matches?.(e))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Tp(t,e,n,o){const r=new Map;for(const[i,s]of t)if((s.selected||s.id===o)&&(!s.parentId||!zl(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const l=t.get(i);l&&r.set(i,{id:i,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function ur({nodeId:t,dragItems:e,nodeLookup:n,dragging:o=!0}){const r=[];for(const[s,l]of e){const u=n.get(s)?.internals.userNode;u&&r.push({...u,position:l.position,dragging:o})}if(!t)return[r[0],r];const i=n.get(t)?.internals.userNode;return[i?{...i,position:e.get(t)?.position||i.position,dragging:o}:r[0],r]}function Ip({dragItems:t,snapGrid:e,x:n,y:o}){const r=t.values().next().value;if(!r)return null;const i={x:n-r.distance.x,y:o-r.distance.y},s=Za(i,e);return{x:s.x-i.x,y:s.y-i.y}}function Ap({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,l=new Map,u=!1,v={x:0,y:0},p=null,m=!1,f=null,w=!1,S=!1,z=null;function P({noDragClassName:A,handleSelector:V,domNode:M,isSelectable:O,nodeId:b,nodeClickDistance:I=0}){f=Ut(M);function H({x:E,y:C}){const{nodeLookup:_,nodeExtent:T,snapGrid:D,snapToGrid:R,nodeOrigin:F,onNodeDrag:q,onSelectionDrag:K,onError:Z,updateNodePositions:ee}=e();i={x:E,y:C};let J=!1;const ne=l.size>1,le=ne&&T?Ir(Wa(l)):null,re=ne&&R?Ip({dragItems:l,snapGrid:D,x:E,y:C}):null;for(const[Q,j]of l){if(!_.has(Q))continue;let $={x:E-j.distance.x,y:C-j.distance.y};R&&($=re?{x:Math.round($.x+re.x),y:Math.round($.y+re.y)}:Za($,D));let de=null;if(ne&&T&&!j.extent&&le){const{positionAbsolute:ae}=j.internals,be=ae.x-le.x+T[0][0],se=ae.x+j.measured.width-le.x2+T[1][0],ge=ae.y-le.y+T[0][1],_e=ae.y+j.measured.height-le.y2+T[1][1];de=[[be,ge],[se,_e]]}const{position:ce,positionAbsolute:te}=dl({nodeId:Q,nextPosition:$,nodeLookup:_,nodeExtent:de||T,nodeOrigin:F,onError:Z});J=J||j.position.x!==ce.x||j.position.y!==ce.y,j.position=ce,j.internals.positionAbsolute=te}if(S=S||J,!!J&&(ee(l,!0),z&&(o||q||!b&&K))){const[Q,j]=ur({nodeId:b,dragItems:l,nodeLookup:_});o?.(z,l,Q,j),q?.(z,Q,j),b||K?.(z,j)}}async function B(){if(!p)return;const{transform:E,panBy:C,autoPanSpeed:_,autoPanOnNodeDrag:T}=e();if(!T){u=!1,cancelAnimationFrame(s);return}const[D,R]=vl(v,p,_);(D!==0||R!==0)&&(i.x=(i.x??0)-D/E[2],i.y=(i.y??0)-R/E[2],await C({x:D,y:R})&&H(i)),s=requestAnimationFrame(B)}function X(E){const{nodeLookup:C,multiSelectionActive:_,nodesDraggable:T,transform:D,snapGrid:R,snapToGrid:F,selectNodesOnDrag:q,onNodeDragStart:K,onSelectionDragStart:Z,unselectNodesAndEdges:ee}=e();m=!0,(!q||!O)&&!_&&b&&(C.get(b)?.selected||ee()),O&&q&&b&&t?.(b);const J=dr(E.sourceEvent,{transform:D,snapGrid:R,snapToGrid:F,containerBounds:p});if(i=J,l=Tp(C,T,J,b),l.size>0&&(n||K||!b&&Z)){const[ne,le]=ur({nodeId:b,dragItems:l,nodeLookup:C});n?.(E.sourceEvent,l,ne,le),K?.(E.sourceEvent,ne,le),b||Z?.(E.sourceEvent,le)}}const N=ev().clickDistance(I).on("start",E=>{const{domNode:C,nodeDragThreshold:_,transform:T,snapGrid:D,snapToGrid:R}=e();p=C?.getBoundingClientRect()||null,w=!1,S=!1,z=E.sourceEvent,_===0&&X(E),i=dr(E.sourceEvent,{transform:T,snapGrid:D,snapToGrid:R,containerBounds:p}),v=nn(E.sourceEvent,p)}).on("drag",E=>{const{autoPanOnNodeDrag:C,transform:_,snapGrid:T,snapToGrid:D,nodeDragThreshold:R,nodeLookup:F}=e(),q=dr(E.sourceEvent,{transform:_,snapGrid:T,snapToGrid:D,containerBounds:p});if(z=E.sourceEvent,(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||b&&!F.has(b))&&(w=!0),!w){if(!u&&C&&m&&(u=!0,B()),!m){const K=nn(E.sourceEvent,p),Z=K.x-v.x,ee=K.y-v.y;Math.sqrt(Z*Z+ee*ee)>R&&X(E)}(i.x!==q.xSnapped||i.y!==q.ySnapped)&&l&&m&&(v=nn(E.sourceEvent,p),H(q))}}).on("end",E=>{if(!(!m||w)&&(u=!1,m=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:C,updateNodePositions:_,onNodeDragStop:T,onSelectionDragStop:D}=e();if(S&&(_(l,!1),S=!1),r||T||!b&&D){const[R,F]=ur({nodeId:b,dragItems:l,nodeLookup:C,dragging:!1});r?.(E.sourceEvent,l,R,F),T?.(E.sourceEvent,R,F),b||D?.(E.sourceEvent,F)}}}).filter(E=>{const C=E.target;return!E.button&&(!A||!ni(C,`.${A}`,M))&&(!V||ni(C,V,M))});f.call(N)}function L(){f?.on(".drag",null)}return{update:P,destroy:L}}function Dp(t,e,n){const o=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const i of e.values())Va(r,fa(i))>0&&o.push(i);return o}const Op=250;function Rp(t,e,n,o){let r=[],i=1/0;const s=Dp(t,n,e+Op);for(const l of s){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const v of u){if(o.nodeId===v.nodeId&&o.type===v.type&&o.id===v.id)continue;const{x:p,y:m}=Yn(l,v,v.position,!0),f=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(m-t.y,2));f>e||(f<i?(r=[{...v,x:p,y:m}],i=f):f===i&&r.push({...v,x:p,y:m}))}}if(!r.length)return null;if(r.length>1){const l=o.type==="source"?"target":"source";return r.find(u=>u.type===l)??r[0]}return r[0]}function Sl(t,e,n,o,r,i=!1){const s=o.get(t);if(!s)return null;const l=r==="strict"?s.internals.handleBounds?.[e]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],u=(n?l?.find(v=>v.id===n):l?.[0])??null;return u&&i?{...u,...Yn(s,u,u.position,!0)}:u}function Cl(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Lp(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const El=()=>!0;function Vp(t,{connectionMode:e,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:l,nodeLookup:u,lib:v,autoPanOnConnect:p,flowId:m,panBy:f,cancelConnection:w,onConnectStart:S,onConnect:z,onConnectEnd:P,isValidConnection:L=El,onReconnectEnd:A,updateConnection:V,getTransform:M,getFromHandle:O,autoPanSpeed:b,dragThreshold:I=1,handleDomNode:H}){const B=gl(t.target);let X=0,N;const{x:E,y:C}=nn(t),_=Cl(i,H),T=l?.getBoundingClientRect();let D=!1;if(!T||!_)return;const R=Sl(r,_,o,u,e);if(!R)return;let F=nn(t,T),q=!1,K=null,Z=!1,ee=null;function J(){if(!p||!T)return;const[ce,te]=vl(F,T,b);f({x:ce,y:te}),X=requestAnimationFrame(J)}const ne={...R,nodeId:r,type:_,position:R.position},le=u.get(r);let Q={inProgress:!0,isValid:null,from:Yn(le,ne,Se.Left,!0),fromHandle:ne,fromPosition:ne.position,fromNode:le,to:F,toHandle:null,toPosition:js[ne.position],toNode:null,pointer:F};function j(){D=!0,V(Q),S?.(t,{nodeId:r,handleId:o,handleType:_})}I===0&&j();function $(ce){if(!D){const{x:_e,y:pe}=nn(ce),ye=_e-E,me=pe-C;if(!(ye*ye+me*me>I*I))return;j()}if(!O()||!ne){de(ce);return}const te=M();F=nn(ce,T),N=Rp(Ya(F,te,!1,[1,1]),n,u,ne),q||(J(),q=!0);const ae=Nl(ce,{handle:N,connectionMode:e,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:L,doc:B,lib:v,flowId:m,nodeLookup:u});ee=ae.handleDomNode,K=ae.connection,Z=Lp(!!N,ae.isValid);const be=u.get(r),se=be?Yn(be,ne,Se.Left,!0):Q.from,ge={...Q,from:se,isValid:Z,to:ae.toHandle&&Z?Do({x:ae.toHandle.x,y:ae.toHandle.y},te):F,toHandle:ae.toHandle,toPosition:Z&&ae.toHandle?ae.toHandle.position:js[ne.position],toNode:ae.toHandle?u.get(ae.toHandle.nodeId):null,pointer:F};V(ge),Q=ge}function de(ce){if(!("touches"in ce&&ce.touches.length>0)){if(D){(N||ee)&&K&&Z&&z?.(K);const{inProgress:te,...ae}=Q,be={...ae,toPosition:Q.toHandle?Q.toPosition:null};P?.(ce,be),i&&A?.(ce,be)}w(),cancelAnimationFrame(X),q=!1,Z=!1,K=null,ee=null,B.removeEventListener("mousemove",$),B.removeEventListener("mouseup",de),B.removeEventListener("touchmove",$),B.removeEventListener("touchend",de)}}B.addEventListener("mousemove",$),B.addEventListener("mouseup",de),B.addEventListener("touchmove",$),B.addEventListener("touchend",de)}function Nl(t,{handle:e,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:l,flowId:u,isValidConnection:v=El,nodeLookup:p}){const m=i==="target",f=e?s.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:w,y:S}=nn(t),z=s.elementFromPoint(w,S),P=z?.classList.contains(`${l}-flow__handle`)?z:f,L={handleDomNode:P,isValid:!1,connection:null,toHandle:null};if(P){const A=Cl(void 0,P),V=P.getAttribute("data-nodeid"),M=P.getAttribute("data-handleid"),O=P.classList.contains("connectable"),b=P.classList.contains("connectableend");if(!V||!A)return L;const I={source:m?V:o,sourceHandle:m?M:r,target:m?o:V,targetHandle:m?r:M};L.connection=I;const B=O&&b&&(n===ua.Strict?m&&A==="source"||!m&&A==="target":V!==o||M!==r);L.isValid=B&&v(I),L.toHandle=Sl(V,A,M,p,n,!0)}return L}const ai={onPointerDown:Vp,isValid:Nl};function Hp({domNode:t,panZoom:e,getTransform:n,getViewScale:o}){const r=Ut(t);function i({translateExtent:l,width:u,height:v,zoomStep:p=1,pannable:m=!0,zoomable:f=!0,inversePan:w=!1}){const S=V=>{if(V.sourceEvent.type!=="wheel"||!e)return;const M=n(),O=V.sourceEvent.ctrlKey&&Ha()?10:1,b=-V.sourceEvent.deltaY*(V.sourceEvent.deltaMode===1?.05:V.sourceEvent.deltaMode?1:.002)*p,I=M[2]*Math.pow(2,b*O);e.scaleTo(I)};let z=[0,0];const P=V=>{(V.sourceEvent.type==="mousedown"||V.sourceEvent.type==="touchstart")&&(z=[V.sourceEvent.clientX??V.sourceEvent.touches[0].clientX,V.sourceEvent.clientY??V.sourceEvent.touches[0].clientY])},L=V=>{const M=n();if(V.sourceEvent.type!=="mousemove"&&V.sourceEvent.type!=="touchmove"||!e)return;const O=[V.sourceEvent.clientX??V.sourceEvent.touches[0].clientX,V.sourceEvent.clientY??V.sourceEvent.touches[0].clientY],b=[O[0]-z[0],O[1]-z[1]];z=O;const I=o()*Math.max(M[2],Math.log(M[2]))*(w?-1:1),H={x:M[0]-b[0]*I,y:M[1]-b[1]*I},B=[[0,0],[u,v]];e.setViewportConstrained({x:H.x,y:H.y,zoom:M[2]},B,l)},A=il().on("start",P).on("zoom",m?L:null).on("zoom.wheel",f?S:null);r.call(A,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:en}}const Zo=t=>({x:t.x,y:t.y,zoom:t.k}),vr=({x:t,y:e,zoom:n})=>Ko.translate(t,e).scale(n),aa=(t,e)=>t.target.closest(`.${e}`),Pl=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Fp=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,fr=(t,e=0,n=Fp,o=()=>{})=>{const r=typeof e=="number"&&e>0;return r||o(),r?t.transition().duration(e).ease(n).on("end",o):t},Ml=t=>{const e=t.ctrlKey&&Ha()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function qp({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:v}){return p=>{if(aa(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(p.ctrlKey&&s){const P=en(p),L=Ml(p),A=m*Math.pow(2,L);o.scaleTo(n,A,P,p);return}const f=p.deltaMode===1?20:1;let w=r===sa.Vertical?0:p.deltaX*f,S=r===sa.Horizontal?0:p.deltaY*f;!Ha()&&p.shiftKey&&r!==sa.Vertical&&(w=p.deltaY*f,S=0),o.translateBy(n,-(w/m)*i,-(S/m)*i,{internal:!0});const z=Zo(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(u?.(p,z),t.panScrollTimeout=setTimeout(()=>{v?.(p,z),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,l?.(p,z))}}function Bp({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(o,r){const i=o.type==="wheel",s=!e&&i&&!o.ctrlKey,l=aa(o,t);if(o.ctrlKey&&i&&l&&o.preventDefault(),s||l)return null;o.preventDefault(),n.call(this,o,r)}}function Kp({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=Zo(o.transform);t.mouseButton=o.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=r,o.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(o.sourceEvent,r)}}function jp({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{t.usedRightMouseButton=!!(n&&Pl(e,t.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Zo(i.transform))}}function Wp({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,i&&Pl(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),t.usedRightMouseButton=!1,o(!1),r)){const l=Zo(s.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r?.(s.sourceEvent,l)},n?150:0)}}}function Zp({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:l,noPanClassName:u,lib:v,connectionInProgress:p}){return m=>{const f=t||e,w=n&&m.ctrlKey,S=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(aa(m,`${v}-flow__node`)||aa(m,`${v}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||p&&!S||aa(m,l)&&S||aa(m,u)&&(!S||r&&S&&!t)||!n&&m.ctrlKey&&S)return!1;if(!n&&m.type==="touchstart"&&m.touches?.length>1)return m.preventDefault(),!1;if(!f&&!r&&!w&&S||!o&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(o)&&!o.includes(m.button)&&m.type==="mousedown")return!1;const z=Array.isArray(o)&&o.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||S)&&z}}function Yp({domNode:t,minZoom:e,maxZoom:n,translateExtent:o,viewport:r,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:u}){const v={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),m=il().scaleExtent([e,n]).translateExtent(o),f=Ut(t).call(m);A({x:r.x,y:r.y,zoom:va(r.zoom,e,n)},[[0,0],[p.width,p.height]],o);const w=f.on("wheel.zoom"),S=f.on("dblclick.zoom");m.wheelDelta(Ml);function z(N,E){return f?new Promise(C=>{m?.interpolate(E?.interpolate==="linear"?Ea:fo).transform(fr(f,E?.duration,E?.ease,()=>C(!0)),N)}):Promise.resolve(!1)}function P({noWheelClassName:N,noPanClassName:E,onPaneContextMenu:C,userSelectionActive:_,panOnScroll:T,panOnDrag:D,panOnScrollMode:R,panOnScrollSpeed:F,preventScrolling:q,zoomOnPinch:K,zoomOnScroll:Z,zoomOnDoubleClick:ee,zoomActivationKeyPressed:J,lib:ne,onTransformChange:le,connectionInProgress:re,paneClickDistance:Q,selectionOnDrag:j}){_&&!v.isZoomingOrPanning&&L();const $=T&&!J&&!_;m.clickDistance(j?1/0:!wn(Q)||Q<0?0:Q);const de=$?qp({zoomPanValues:v,noWheelClassName:N,d3Selection:f,d3Zoom:m,panOnScrollMode:R,panOnScrollSpeed:F,zoomOnPinch:K,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:l}):Bp({noWheelClassName:N,preventScrolling:q,d3ZoomHandler:w});if(f.on("wheel.zoom",de,{passive:!1}),!_){const te=Kp({zoomPanValues:v,onDraggingChange:u,onPanZoomStart:s});m.on("start",te);const ae=jp({zoomPanValues:v,panOnDrag:D,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:le});m.on("zoom",ae);const be=Wp({zoomPanValues:v,panOnDrag:D,panOnScroll:T,onPaneContextMenu:C,onPanZoomEnd:l,onDraggingChange:u});m.on("end",be)}const ce=Zp({zoomActivationKeyPressed:J,panOnDrag:D,zoomOnScroll:Z,panOnScroll:T,zoomOnDoubleClick:ee,zoomOnPinch:K,userSelectionActive:_,noPanClassName:E,noWheelClassName:N,lib:ne,connectionInProgress:re});m.filter(ce),ee?f.on("dblclick.zoom",S):f.on("dblclick.zoom",null)}function L(){m.on("zoom",null)}async function A(N,E,C){const _=vr(N),T=m?.constrain()(_,E,C);return T&&await z(T),new Promise(D=>D(T))}async function V(N,E){const C=vr(N);return await z(C,E),new Promise(_=>_(C))}function M(N){if(f){const E=vr(N),C=f.property("__zoom");(C.k!==N.zoom||C.x!==N.x||C.y!==N.y)&&m?.transform(f,E,null,{sync:!0})}}function O(){const N=f?sl(f.node()):{x:0,y:0,k:1};return{x:N.x,y:N.y,zoom:N.k}}function b(N,E){return f?new Promise(C=>{m?.interpolate(E?.interpolate==="linear"?Ea:fo).scaleTo(fr(f,E?.duration,E?.ease,()=>C(!0)),N)}):Promise.resolve(!1)}function I(N,E){return f?new Promise(C=>{m?.interpolate(E?.interpolate==="linear"?Ea:fo).scaleBy(fr(f,E?.duration,E?.ease,()=>C(!0)),N)}):Promise.resolve(!1)}function H(N){m?.scaleExtent(N)}function B(N){m?.translateExtent(N)}function X(N){const E=!wn(N)||N<0?0:N;m?.clickDistance(E)}return{update:P,destroy:L,setViewport:V,setViewportConstrained:A,getViewport:O,scaleTo:b,scaleBy:I,setScaleExtent:H,setTranslateExtent:B,syncViewport:M,setClickDistance:X}}var oi;(function(t){t.Line="line",t.Handle="handle"})(oi||(oi={}));function ss(){const t={};return[e=>{if(e&&!uc(t))throw new Error(e);return Or(t)},e=>pi(t,e)]}const[Xp,Gp]=ss(),[Up,Jp]=ss(),[Qp,$p]=ss();var eh=x("<div><!></div>");function bt(t,e){Ee(e,!0);let n=ue(e,"id",3,null),o=ue(e,"type",3,"source"),r=ue(e,"position",19,()=>Se.Top),i=ue(e,"isConnectableStart",3,!0),s=ue(e,"isConnectableEnd",3,!0),l=Pn(e,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=Xp("Handle must be used within a Custom Node component"),v=Up("Handle must be used within a Custom Node component");let p=k(()=>o()==="target"),m=k(()=>e.isConnectable!==void 0?e.isConnectable:v.value),f=Cn(),w=k(()=>f.ariaLabelConfig),S=null;vc(()=>{if(e.onconnect||e.ondisconnect){f.edges;let E=f.connectionLookup.get(`${u}-${o()}${n()?`-${n()}`:""}`);if(S&&!Gf(E,S)){const C=E??new Map;Ws(S,C,e.ondisconnect),Ws(C,S,e.onconnect)}S=new Map(E)}});let z=k(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:E,toHandle:C,isValid:_}=f.connection,T=E&&E.nodeId===u&&E.type===o()&&E.id===n(),D=C&&C.nodeId===u&&C.type===o()&&C.id===n(),R=f.connectionMode===ua.Strict?E?.type!==o():u!==E?.nodeId||n()!==E?.id;return[!0,T,D,R,D&&_]}),P=k(()=>zn(a(z),5)),L=k(()=>a(P)[0]),A=k(()=>a(P)[1]),V=k(()=>a(P)[2]),M=k(()=>a(P)[3]),O=k(()=>a(P)[4]);function b(E){const C=f.onbeforeconnect?f.onbeforeconnect(E):E;C&&(f.addEdge(C),f.onconnect?.(E))}function I(E){const C=_l(E);E.currentTarget&&(C&&E.button===0||!C)&&ai.onPointerDown(E,{handleId:n(),nodeId:u,isTarget:a(p),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:e.isValidConnection||((..._)=>f.isValidConnection?.(..._)??!0),updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:b,onConnectStart:f.onconnectstart,onConnectEnd:(..._)=>f.onconnectend?.(..._),getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:E.currentTarget})}function H(E){if(!u||!f.clickConnectStartHandle&&!i())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(E,{nodeId:u,handleId:n(),handleType:o()}),f.clickConnectStartHandle={nodeId:u,type:o(),id:n()};return}const C=gl(E.target),_=e.isValidConnection??f.isValidConnection,{connectionMode:T,clickConnectStartHandle:D,flowId:R,nodeLookup:F}=f,{connection:q,isValid:K}=ai.isValid(E,{handle:{nodeId:u,id:n(),type:o()},connectionMode:T,fromNodeId:D.nodeId,fromHandleId:D.id??null,fromType:D.type,isValidConnection:_,flowId:R,doc:C,lib:"svelte",nodeLookup:F});K&&q&&b(q);const Z=structuredClone(Ni(f.connection));delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,f.onclickconnectend?.(E,Z),f.clickConnectStartHandle=null}var B=eh(),X=()=>{};Mn(B,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":r(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,f.noDragClass,f.noPanClass,r(),e.class],onmousedown:I,ontouchstart:I,onclick:f.clickConnect?H:void 0,onkeypress:X,style:e.style,role:"button","aria-label":a(w)["handle.ariaLabel"],tabindex:"-1",...l,[Lr]:{valid:a(O),connectingto:a(V),connectingfrom:a(A),source:!a(p),target:a(p),connectablestart:i(),connectableend:s(),connectable:a(m),connectionindicator:a(m)&&(!a(L)||a(M))&&(a(L)||f.clickConnectStartHandle?s():i())}}));var N=d(B);Jt(N,()=>e.children??ha),c(B),g(t,B),Ne()}var th=x("<!> <!>",1);function Tl(t,e){Ee(e,!0);let n=ue(e,"targetPosition",19,()=>Se.Top),o=ue(e,"sourcePosition",19,()=>Se.Bottom);var r=th(),i=oe(r);bt(i,{type:"target",get position(){return n()}});var s=h(i),l=h(s);bt(l,{type:"source",get position(){return o()}}),U(()=>Y(s,` ${e.data?.label??""} `)),g(t,r),Ne()}var nh=x(" <!>",1);function ah(t,e){Ee(e,!0);let n=ue(e,"data",19,()=>({label:"Node"})),o=ue(e,"sourcePosition",19,()=>Se.Bottom);he();var r=nh(),i=oe(r),s=h(i);bt(s,{type:"source",get position(){return o()}}),U(()=>Y(i,`${n()?.label??""} `)),g(t,r),Ne()}var oh=x(" <!>",1);function rh(t,e){Ee(e,!0);let n=ue(e,"data",19,()=>({label:"Node"})),o=ue(e,"targetPosition",19,()=>Se.Top);he();var r=oh(),i=oe(r),s=h(i);bt(s,{type:"target",get position(){return o()}}),U(()=>Y(i,`${n()?.label??""} `)),g(t,r),Ne()}function sh(t,e){}function pr(t,e,n){if(!n||!e)return;const o=n==="root"?e:e.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(t)}function ih(t,e){const n=k(Cn),o=k(()=>a(n).domNode);let r;return a(o)?pr(t,a(o),e):r=hi(()=>{xe(()=>{pr(t,a(o),e),r?.()})}),{async update(i){pr(t,a(o),i)},destroy(){t.parentNode&&t.parentNode.removeChild(t),r?.()}}}function lh(){let t=G(typeof window>"u");if(a(t)){const e=hi(()=>{xe(()=>{y(t,!1),e?.()})})}return{get value(){return a(t)}}}const ri=t=>Jf(t),ch=t=>cl(t);function gn(t){return t===void 0?void 0:`${t}px`}const Oo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var dh=x("<div><!></div>");function uh(t,e){Ee(e,!0);let n=ue(e,"x",3,0),o=ue(e,"y",3,0),r=ue(e,"selectEdgeOnClick",3,!1),i=ue(e,"transparent",3,!1),s=Pn(e,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const l=Cn(),u=Qp("EdgeLabel must be used within a Custom Edge component");let v=k(()=>l.visible.edges.get(u)?.zIndex);var p=dh(),m=()=>{r()&&u&&l.handleEdgeSelection(u)};Mn(p,w=>({class:["svelte-flow__edge-label",{transparent:i()},e.class],tabindex:"-1",onclick:m,...s,[Ro]:w}),[()=>({display:lh().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:gn(e.width),height:gn(e.height),"z-index":a(v)})],void 0,void 0,"svelte-1wg91mu");var f=d(p);Jt(f,()=>e.children??ha),c(p),qt(p,(w,S)=>ih?.(w,S),()=>"edge-labels"),g(t,p),Ne()}var vh=Mt("<path></path>"),fh=Mt('<path fill="none"></path><!><!>',1);function Yo(t,e){let n=ue(e,"interactionWidth",3,20),o=Pn(e,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=fh(),i=oe(r),s=h(i);{var l=p=>{var m=vh();Mn(m,()=>({d:e.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),g(p,m)};W(s,p=>{n()>0&&p(l)})}var u=h(s);{var v=p=>{uh(p,{get x(){return e.labelX},get y(){return e.labelY},get style(){return e.labelStyle},selectEdgeOnClick:!0,children:(m,f)=>{he();var w=fc();U(()=>Y(w,e.label)),g(m,w)},$$slots:{default:!0}})};W(u,p=>{e.label&&p(v)})}U(()=>{ze(i,"id",e.id),ze(i,"d",e.path),Oe(i,0,Gn(["svelte-flow__edge-path",e.class])),ze(i,"marker-start",e.markerStart),ze(i,"marker-end",e.markerEnd),pt(i,e.style)}),g(t,r)}function Il(t,e){Ee(e,!0);let n=k(()=>yl({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,curvature:e.pathOptions?.curvature})),o=k(()=>zn(a(n),3)),r=k(()=>a(o)[0]),i=k(()=>a(o)[1]),s=k(()=>a(o)[2]);Yo(t,{get id(){return e.id},get path(){return a(r)},get labelX(){return a(i)},get labelY(){return a(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ne()}function ph(t,e){Ee(e,!0);let n=k(()=>ts({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition})),o=k(()=>zn(a(n),3)),r=k(()=>a(o)[0]),i=k(()=>a(o)[1]),s=k(()=>a(o)[2]);Yo(t,{get path(){return a(r)},get labelX(){return a(i)},get labelY(){return a(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ne()}function hh(t,e){Ee(e,!0);let n=k(()=>xl({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY})),o=k(()=>zn(a(n),3)),r=k(()=>a(o)[0]),i=k(()=>a(o)[1]),s=k(()=>a(o)[2]);Yo(t,{get path(){return a(r)},get labelX(){return a(i)},get labelY(){return a(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ne()}function gh(t,e){Ee(e,!0);let n=k(()=>ts({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,borderRadius:0})),o=k(()=>zn(a(n),3)),r=k(()=>a(o)[0]),i=k(()=>a(o)[1]),s=k(()=>a(o)[2]);Yo(t,{get path(){return a(r)},get labelX(){return a(i)},get labelY(){return a(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ne()}class mh{#e;#t;constructor(e,n){this.#e=e,this.#t=pc(n)}get current(){return this.#t(),this.#e()}}const _h=/\(.+\)/,yh=new Set(["all","print","screen","and","or","not","only"]);class bh extends mh{constructor(e,n){let o=_h.test(e)||e.split(/[\s,]+/).some(i=>yh.has(i.trim()))?e:`(${e})`;const r=window.matchMedia(o);super(()=>r.matches,i=>mr(r,"change",i))}}function xh(t,e,n,o){const r=new Map;return $r(t,{x:0,y:0,width:n,height:o},e,!0).forEach(i=>{r.set(i.id,i)}),r}function si(t){const{edges:e,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:i,onerror:s,onlyRenderVisible:l,elevateEdgesOnSelect:u,zIndexMode:v}=t,p=new Map;for(const m of e){const f=o.get(m.source),w=o.get(m.target);if(!f||!w)continue;if(l){const{visibleNodes:P,transform:L,width:A,height:V}=t;if(up({sourceNode:f,targetNode:w,width:A,height:V,transform:L}))P.set(f.id,f),P.set(w.id,w);else continue}const S=r.get(m.id);if(S&&m===S.edge&&f==S.sourceNode&&w==S.targetNode){p.set(m.id,S);continue}const z=_p({id:m.id,sourceNode:f,targetNode:w,sourceHandle:m.sourceHandle||null,targetHandle:m.targetHandle||null,connectionMode:i,onError:s});z&&p.set(m.id,{...n,...m,...z,zIndex:dp({selected:m.selected,zIndex:m.zIndex??n.zIndex,sourceNode:f,targetNode:w,elevateOnSelect:u,zIndexMode:v}),sourceNode:f,targetNode:w,edge:m})}return p}const Al={input:ah,output:rh,default:Tl,group:sh},Dl={straight:hh,smoothstep:ph,default:Il,step:gh};function wh(t,e,n,o,r,i){if(e&&!n&&o&&r){const s=Wa(i,{filter:l=>!!((l.width||l.initialWidth)&&(l.height||l.initialHeight))});return es(s,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function kh(t){class e{#e=k(()=>t.props.id??"1");get flowId(){return a(this.#e)}set flowId(o){y(this.#e,o)}#t=G(null);get domNode(){return a(this.#t)}set domNode(o){y(this.#t,o)}#n=G(null);get panZoom(){return a(this.#n)}set panZoom(o){y(this.#n,o)}#a=G(t.width??0);get width(){return a(this.#a)}set width(o){y(this.#a,o)}#o=G(t.height??0);get height(){return a(this.#o)}set height(o){y(this.#o,o)}#r=G(t.props.zIndexMode??"basic");get zIndexMode(){return a(this.#r)}set zIndexMode(o){y(this.#r,o)}#s=k(()=>{const o=zp(t.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:t.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return a(this.#s)}set nodesInitialized(o){y(this.#s,o)}#i=k(()=>this.panZoom!==null);get viewportInitialized(){return a(this.#i)}set viewportInitialized(o){y(this.#i,o)}#l=k(()=>(Mp(this.connectionLookup,this.edgeLookup,t.edges),t.edges));get _edges(){return a(this.#l)}set _edges(o){y(this.#l,o)}get nodes(){return this.nodesInitialized,t.nodes}set nodes(o){t.nodes=o}get edges(){return this._edges}set edges(o){t.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#c=k(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,i=this.nodes.filter(s=>(s.selected&&(r.add(s.id),this._prevSelectedNodeIds.delete(s.id)),s.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=i),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return a(this.#c)}set selectedNodes(o){y(this.#c,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#d=k(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,i=this.edges.filter(s=>(s.selected&&(r.add(s.id),this._prevSelectedEdgeIds.delete(s.id)),s.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=i),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return a(this.#d)}set selectedEdges(o){y(this.#d,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=k(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:i,nodeLookup:s,connectionMode:l,onerror:u,onlyRenderVisibleElements:v,defaultEdgeOptions:p,zIndexMode:m}=this;let f,w;const S={edges:r,defaultEdgeOptions:p,previousEdges:i,nodeLookup:s,connectionMode:l,elevateEdgesOnSelect:t.props.elevateEdgesOnSelect??!0,zIndexMode:m,onerror:u};if(v){const{viewport:z,width:P,height:L}=this,A=[z.x,z.y,z.zoom];f=xh(s,A,P,L),w=si({...S,onlyRenderVisible:!0,visibleNodes:f,transform:A,width:P,height:L})}else f=this.nodeLookup,w=si(S);return{nodes:f,edges:w}});get visible(){return a(this.#u)}set visible(o){y(this.#u,o)}#v=k(()=>t.props.nodesDraggable??!0);get nodesDraggable(){return a(this.#v)}set nodesDraggable(o){y(this.#v,o)}#f=k(()=>t.props.nodesConnectable??!0);get nodesConnectable(){return a(this.#f)}set nodesConnectable(o){y(this.#f,o)}#p=k(()=>t.props.elementsSelectable??!0);get elementsSelectable(){return a(this.#p)}set elementsSelectable(o){y(this.#p,o)}#h=k(()=>t.props.nodesFocusable??!0);get nodesFocusable(){return a(this.#h)}set nodesFocusable(o){y(this.#h,o)}#g=k(()=>t.props.edgesFocusable??!0);get edgesFocusable(){return a(this.#g)}set edgesFocusable(o){y(this.#g,o)}#m=k(()=>t.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return a(this.#m)}set disableKeyboardA11y(o){y(this.#m,o)}#_=k(()=>t.props.minZoom??.5);get minZoom(){return a(this.#_)}set minZoom(o){y(this.#_,o)}#y=k(()=>t.props.maxZoom??2);get maxZoom(){return a(this.#y)}set maxZoom(o){y(this.#y,o)}#b=k(()=>t.props.nodeOrigin??[0,0]);get nodeOrigin(){return a(this.#b)}set nodeOrigin(o){y(this.#b,o)}#x=k(()=>t.props.nodeExtent??Mr);get nodeExtent(){return a(this.#x)}set nodeExtent(o){y(this.#x,o)}#w=k(()=>t.props.translateExtent??Mr);get translateExtent(){return a(this.#w)}set translateExtent(o){y(this.#w,o)}#k=k(()=>t.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return a(this.#k)}set defaultEdgeOptions(o){y(this.#k,o)}#z=k(()=>t.props.nodeDragThreshold??1);get nodeDragThreshold(){return a(this.#z)}set nodeDragThreshold(o){y(this.#z,o)}#S=k(()=>t.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return a(this.#S)}set autoPanOnNodeDrag(o){y(this.#S,o)}#C=k(()=>t.props.autoPanOnConnect??!0);get autoPanOnConnect(){return a(this.#C)}set autoPanOnConnect(o){y(this.#C,o)}#E=k(()=>t.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return a(this.#E)}set autoPanOnNodeFocus(o){y(this.#E,o)}#N=k(()=>t.props.autoPanSpeed??15);get autoPanSpeed(){return a(this.#N)}set autoPanSpeed(o){y(this.#N,o)}#P=k(()=>t.props.connectionDragThreshold??1);get connectionDragThreshold(){return a(this.#P)}set connectionDragThreshold(o){y(this.#P,o)}fitViewQueued=t.props.fitView??!1;fitViewOptions=t.props.fitViewOptions;fitViewResolver=null;#M=k(()=>t.props.snapGrid??null);get snapGrid(){return a(this.#M)}set snapGrid(o){y(this.#M,o)}#T=G(!1);get dragging(){return a(this.#T)}set dragging(o){y(this.#T,o)}#I=G(null);get selectionRect(){return a(this.#I)}set selectionRect(o){y(this.#I,o)}#A=G(!1);get selectionKeyPressed(){return a(this.#A)}set selectionKeyPressed(o){y(this.#A,o)}#D=G(!1);get multiselectionKeyPressed(){return a(this.#D)}set multiselectionKeyPressed(o){y(this.#D,o)}#O=G(!1);get deleteKeyPressed(){return a(this.#O)}set deleteKeyPressed(o){y(this.#O,o)}#R=G(!1);get panActivationKeyPressed(){return a(this.#R)}set panActivationKeyPressed(o){y(this.#R,o)}#L=G(!1);get zoomActivationKeyPressed(){return a(this.#L)}set zoomActivationKeyPressed(o){y(this.#L,o)}#V=G(null);get selectionRectMode(){return a(this.#V)}set selectionRectMode(o){y(this.#V,o)}#H=G("");get ariaLiveMessage(){return a(this.#H)}set ariaLiveMessage(o){y(this.#H,o)}#F=k(()=>t.props.selectionMode??To.Partial);get selectionMode(){return a(this.#F)}set selectionMode(o){y(this.#F,o)}#q=k(()=>({...Al,...t.props.nodeTypes}));get nodeTypes(){return a(this.#q)}set nodeTypes(o){y(this.#q,o)}#B=k(()=>({...Dl,...t.props.edgeTypes}));get edgeTypes(){return a(this.#B)}set edgeTypes(o){y(this.#B,o)}#K=k(()=>t.props.noPanClass??"nopan");get noPanClass(){return a(this.#K)}set noPanClass(o){y(this.#K,o)}#j=k(()=>t.props.noDragClass??"nodrag");get noDragClass(){return a(this.#j)}set noDragClass(o){y(this.#j,o)}#W=k(()=>t.props.noWheelClass??"nowheel");get noWheelClass(){return a(this.#W)}set noWheelClass(o){y(this.#W,o)}#Z=k(()=>ip(t.props.ariaLabelConfig));get ariaLabelConfig(){return a(this.#Z)}set ariaLabelConfig(o){y(this.#Z,o)}#Y=G(wh(this.nodesInitialized,t.props.fitView,t.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return a(this.#Y)}set _viewport(o){y(this.#Y,o)}get viewport(){return t.viewport??this._viewport}set viewport(o){t.viewport&&(t.viewport=o),this._viewport=o}#X=G(Tr);get _connection(){return a(this.#X)}set _connection(o){y(this.#X,o)}#G=k(()=>this._connection.inProgress?{...this._connection,to:Ya(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return a(this.#G)}set connection(o){y(this.#G,o)}#U=k(()=>t.props.connectionMode??ua.Strict);get connectionMode(){return a(this.#U)}set connectionMode(o){y(this.#U,o)}#J=k(()=>t.props.connectionRadius??20);get connectionRadius(){return a(this.#J)}set connectionRadius(o){y(this.#J,o)}#Q=k(()=>t.props.isValidConnection??(()=>!0));get isValidConnection(){return a(this.#Q)}set isValidConnection(o){y(this.#Q,o)}#$=k(()=>t.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return a(this.#$)}set selectNodesOnDrag(o){y(this.#$,o)}#ee=k(()=>t.props.defaultMarkerColor===void 0?"#b1b1b7":t.props.defaultMarkerColor);get defaultMarkerColor(){return a(this.#ee)}set defaultMarkerColor(o){y(this.#ee,o)}#te=k(()=>yp(t.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return a(this.#te)}set markers(o){y(this.#te,o)}#ne=k(()=>t.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return a(this.#ne)}set onlyRenderVisibleElements(o){y(this.#ne,o)}#ae=k(()=>t.props.onflowerror??ap);get onerror(){return a(this.#ae)}set onerror(o){y(this.#ae,o)}#oe=k(()=>t.props.ondelete);get ondelete(){return a(this.#oe)}set ondelete(o){y(this.#oe,o)}#re=k(()=>t.props.onbeforedelete);get onbeforedelete(){return a(this.#re)}set onbeforedelete(o){y(this.#re,o)}#se=k(()=>t.props.onbeforeconnect);get onbeforeconnect(){return a(this.#se)}set onbeforeconnect(o){y(this.#se,o)}#ie=k(()=>t.props.onconnect);get onconnect(){return a(this.#ie)}set onconnect(o){y(this.#ie,o)}#le=k(()=>t.props.onconnectstart);get onconnectstart(){return a(this.#le)}set onconnectstart(o){y(this.#le,o)}#ce=k(()=>t.props.onconnectend);get onconnectend(){return a(this.#ce)}set onconnectend(o){y(this.#ce,o)}#de=k(()=>t.props.onbeforereconnect);get onbeforereconnect(){return a(this.#de)}set onbeforereconnect(o){y(this.#de,o)}#ue=k(()=>t.props.onreconnect);get onreconnect(){return a(this.#ue)}set onreconnect(o){y(this.#ue,o)}#ve=k(()=>t.props.onreconnectstart);get onreconnectstart(){return a(this.#ve)}set onreconnectstart(o){y(this.#ve,o)}#fe=k(()=>t.props.onreconnectend);get onreconnectend(){return a(this.#fe)}set onreconnectend(o){y(this.#fe,o)}#pe=k(()=>t.props.clickConnect??!0);get clickConnect(){return a(this.#pe)}set clickConnect(o){y(this.#pe,o)}#he=k(()=>t.props.onclickconnectstart);get onclickconnectstart(){return a(this.#he)}set onclickconnectstart(o){y(this.#he,o)}#ge=k(()=>t.props.onclickconnectend);get onclickconnectend(){return a(this.#ge)}set onclickconnectend(o){y(this.#ge,o)}#me=G(null);get clickConnectStartHandle(){return a(this.#me)}set clickConnectStartHandle(o){y(this.#me,o)}#_e=k(()=>t.props.onselectiondrag);get onselectiondrag(){return a(this.#_e)}set onselectiondrag(o){y(this.#_e,o)}#ye=k(()=>t.props.onselectiondragstart);get onselectiondragstart(){return a(this.#ye)}set onselectiondragstart(o){y(this.#ye,o)}#be=k(()=>t.props.onselectiondragstop);get onselectiondragstop(){return a(this.#be)}set onselectiondragstop(o){y(this.#be,o)}resolveFitView=async()=>{this.panZoom&&(await tp({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new bh("(prefers-color-scheme: dark)",t.props.colorModeSSR==="dark");#xe=k(()=>t.props.colorMode==="system"?this._prefersDark.current?"dark":"light":t.props.colorMode??"light");get colorMode(){return a(this.#xe)}set colorMode(o){y(this.#xe,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Tr,this.clickConnectStartHandle=null,this.viewport=t.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new e}function Cn(){const t=Or(Dr);if(!t)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}const Dr=Symbol();function zh(t){const e=kh(t);function n(N){e.nodeTypes={...Al,...N}}function o(N){e.edgeTypes={...Dl,...N}}function r(N){e.edges=pp(N,e.edges)}const i=(N,E=!1)=>{e.nodes=e.nodes.map(C=>{if(e.connection.inProgress&&e.connection.fromNode.id===C.id){const T=e.nodeLookup.get(C.id);T&&(e.connection={...e.connection,from:Yn(T,e.connection.fromHandle,Se.Left,!0)})}const _=N.get(C.id);return _?{...C,position:_.position,dragging:E}:C})};function s(N){const{changes:E,updatedInternals:C}=Np(N,e.nodeLookup,e.parentLookup,e.domNode,e.nodeOrigin,e.nodeExtent,e.zIndexMode);if(!C)return;wp(e.nodeLookup,e.parentLookup,{nodeOrigin:e.nodeOrigin,nodeExtent:e.nodeExtent,zIndexMode:e.zIndexMode}),e.fitViewQueued&&e.resolveFitView();const _=new Map;for(const T of E){const D=e.nodeLookup.get(T.id)?.internals.userNode;if(!D)continue;const R={...D};switch(T.type){case"dimensions":{const F={...R.measured,...T.dimensions};T.setAttributes&&(R.width=T.dimensions?.width??R.width,R.height=T.dimensions?.height??R.height),R.measured=F;break}case"position":R.position=T.position??R.position;break}_.set(T.id,R)}e.nodes=e.nodes.map(T=>_.get(T.id)??T)}function l(N){const E=e.fitViewResolver??Promise.withResolvers();return e.fitViewQueued=!0,e.fitViewOptions=N,e.fitViewResolver=E,e.nodes=[...e.nodes],E.promise}async function u(N,E,C){const _=typeof C?.zoom<"u"?C.zoom:e.maxZoom,T=e.panZoom;return T?(await T.setViewport({x:e.width/2-N*_,y:e.height/2-E*_,zoom:_},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function v(N,E){const C=e.panZoom;return C?C.scaleBy(N,E):Promise.resolve(!1)}function p(N){return v(1.2,N)}function m(N){return v(1/1.2,N)}function f(N){const E=e.panZoom;E&&(E.setScaleExtent([N,e.maxZoom]),e.minZoom=N)}function w(N){const E=e.panZoom;E&&(E.setScaleExtent([e.minZoom,N]),e.maxZoom=N)}function S(N){const E=e.panZoom;E&&(E.setTranslateExtent(N),e.translateExtent=N)}function z(N,E=null){let C=!1;const _=N.map(T=>(E?E.has(T.id):!0)&&T.selected?(C=!0,{...T,selected:!1}):T);return[C,_]}function P(N){const E=N?.nodes?new Set(N.nodes.map(F=>F.id)):null,[C,_]=z(e.nodes,E);C&&(e.nodes=_);const T=N?.edges?new Set(N.edges.map(F=>F.id)):null,[D,R]=z(e.edges,T);D&&(e.edges=R)}function L(N){const E=e.multiselectionKeyPressed;e.nodes=e.nodes.map(C=>{const _=N.includes(C.id),T=E&&C.selected||_;return!!C.selected!==T?{...C,selected:T}:C}),E||P({nodes:[]})}function A(N){const E=e.multiselectionKeyPressed;e.edges=e.edges.map(C=>{const _=N.includes(C.id),T=E&&C.selected||_;return!!C.selected!==T?{...C,selected:T}:C}),E||P({edges:[]})}function V(N,E,C){const _=e.nodeLookup.get(N);if(!_){console.warn("012",La.error012(N));return}e.selectionRect=null,e.selectionRectMode=null,_.selected?(E||_.selected&&e.multiselectionKeyPressed)&&(P({nodes:[_],edges:[]}),requestAnimationFrame(()=>C?.blur())):L([N])}function M(N){const E=e.edgeLookup.get(N);if(!E){console.warn("012",La.error012(N));return}(E.selectable||e.elementsSelectable&&typeof E.selectable>"u")&&(e.selectionRect=null,e.selectionRectMode=null,E.selected?E.selected&&e.multiselectionKeyPressed&&P({nodes:[],edges:[E]}):A([N]))}function O(N,E){const{nodeExtent:C,snapGrid:_,nodeOrigin:T,nodeLookup:D,nodesDraggable:R,onerror:F}=e,q=new Map,K=_?.[0]??5,Z=_?.[1]??5,ee=N.x*K*E,J=N.y*Z*E;for(const ne of D.values()){if(!(ne.selected&&(ne.draggable||R&&typeof ne.draggable>"u")))continue;let re={x:ne.internals.positionAbsolute.x+ee,y:ne.internals.positionAbsolute.y+J};_&&(re=Za(re,_));const{position:Q,positionAbsolute:j}=dl({nodeId:ne.id,nextPosition:re,nodeLookup:D,nodeExtent:C,nodeOrigin:T,onError:F});ne.position=Q,ne.internals.positionAbsolute=j,q.set(ne.id,ne)}i(q)}function b(N){return Pp({delta:N,panZoom:e.panZoom,transform:[e.viewport.x,e.viewport.y,e.viewport.zoom],translateExtent:e.translateExtent,width:e.width,height:e.height})}const I=N=>{e._connection={...N}};function H(){e._connection=Tr}function B(){e.resetStoreValues(),P()}return Object.assign(e,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:i,updateNodeInternals:s,zoomIn:p,zoomOut:m,fitView:l,setCenter:u,setMinZoom:f,setMaxZoom:w,setTranslateExtent:S,unselectNodesAndEdges:P,addSelectedNodes:L,addSelectedEdges:A,handleNodeSelection:V,handleEdgeSelection:M,moveSelectedNodes:O,panBy:b,updateConnection:I,cancelConnection:H,reset:B})}function Sh(t,e){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:l,translateExtent:u,setPanZoomInstance:v,onDraggingChange:p,onTransformChange:m}=e,f=Yp({domNode:t,minZoom:n,maxZoom:o,translateExtent:u,viewport:r,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:l,onDraggingChange:p}),w=f.getViewport();return(r.x!==w.x||r.y!==w.y||r.zoom!==w.zoom)&&m([w.x,w.y,w.zoom]),v(f),f.update(e),{update(S){f.update(S)}}}var Ch=x('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Eh(t,e){Ee(e,!0);let n=ue(e,"store",15),o=k(()=>n().panActivationKeyPressed||e.panOnDrag),r=k(()=>n().panActivationKeyPressed||e.panOnScroll);const{viewport:i}=n();let s=!1;xe(()=>{!s&&n().viewportInitialized&&(e.oninit?.(),s=!0)});var l=Ch(),u=d(l);Jt(u,()=>e.children),c(l),qt(l,(v,p)=>Sh?.(v,p),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:i,onDraggingChange:v=>{n(n().dragging=v,!0)},setPanZoomInstance:v=>{n(n().panZoom=v,!0)},onPanZoomStart:e.onmovestart,onPanZoom:e.onmove,onPanZoomEnd:e.onmoveend,zoomOnScroll:e.zoomOnScroll,zoomOnDoubleClick:e.zoomOnDoubleClick,zoomOnPinch:e.zoomOnPinch,panOnScroll:a(r),panOnDrag:a(o),panOnScrollSpeed:e.panOnScrollSpeed,panOnScrollMode:e.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof e.preventScrolling=="boolean"?e.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:e.paneClickDistance,selectionOnDrag:e.selectionOnDrag,onTransformChange:v=>{n(n().viewport={x:v[0],y:v[1],zoom:v[2]},!0)},connectionInProgress:n().connection.inProgress})),g(t,l),Ne()}function ii(t,e){return n=>{n.target===e&&t?.(n)}}function li(t){return e=>{const n=t.has(e.id);return!!e.selected!==n?{...e,selected:n}:e}}function ci(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}var Nh=x("<div><!></div>");function Ph(t,e){Ee(e,!0);let n=ue(e,"store",15),o=ue(e,"panOnDrag",3,!0),r=ue(e,"paneClickDistance",3,1),i,s=null,l=new Set,u=new Set,v=k(()=>n().panActivationKeyPressed||o()),p=k(()=>n().selectionKeyPressed||!!n().selectionRect||e.selectionOnDrag&&a(v)!==!0),m=k(()=>n().elementsSelectable&&(a(p)||n().selectionRectMode==="user")),f=!1;function w(H){if(s=i?.getBoundingClientRect(),!s)return;const B=H.target===i,X=!B&&!!H.target.closest(".nokey"),N=e.selectionOnDrag&&B||n().selectionKeyPressed;if(X||!a(p)||!N||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),f=!1;const{x:E,y:C}=nn(H,s);n(n().selectionRect={width:0,height:0,startX:E,startY:C,x:E,y:C},!0),B||(H.stopPropagation(),H.preventDefault())}function S(H){if(!a(p)||!s||!n().selectionRect)return;const B=nn(H,s),{startX:X=0,startY:N=0}=n().selectionRect;if(!f){const D=n().selectionKeyPressed?0:r();if(Math.hypot(B.x-X,B.y-N)<=D)return;n().unselectNodesAndEdges(),e.onselectionstart?.(H)}f=!0;const E={...n().selectionRect,x:B.x<X?B.x:X,y:B.y<N?B.y:N,width:Math.abs(B.x-X),height:Math.abs(B.y-N)},C=l,_=u;l=new Set($r(n().nodeLookup,E,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===To.Partial,!0).map(D=>D.id));const T=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const D of l){const R=n().connectionLookup.get(D);if(R)for(const{edgeId:F}of R.values()){const q=n().edgeLookup.get(F);q&&(q.selectable??T)&&u.add(F)}}ci(C,l)||n(n().nodes=n().nodes.map(li(l)),!0),ci(_,u)||n(n().edges=n().edges.map(li(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=E,!0)}function z(H){H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!f&&H.target===i&&A?.(H),n(n().selectionRect=null,!0),f&&n(n().selectionRectMode=l.size>0?"nodes":null,!0),f&&e.onselectionend?.(H))}const P=H=>{if(Array.isArray(a(v))&&a(v).includes(2)){H.preventDefault();return}e.onpanecontextmenu?.({event:H})},L=H=>{f&&(H.stopPropagation(),f=!1)};function A(H){if(f||n().connection.inProgress){f=!1;return}e.onpaneclick?.({event:H}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var V=Nh();let M;var O=k(()=>a(m)?void 0:ii(A,i)),b=k(()=>ii(P,i)),I=d(V);Jt(I,()=>e.children),c(V),mn(V,H=>i=H,()=>i),U(H=>M=Oe(V,1,"svelte-flow__pane svelte-flow__container",null,M,H),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:a(p)})]),fe("click",V,function(...H){a(O)?.apply(this,H)}),bo("pointerdown",V,function(...H){(a(m)?w:void 0)?.apply(this,H)},!0),fe("pointermove",V,function(...H){(a(m)?S:void 0)?.apply(this,H)}),fe("pointerup",V,function(...H){(a(m)?z:void 0)?.apply(this,H)}),fe("contextmenu",V,function(...H){a(b)?.apply(this,H)}),bo("click",V,function(...H){(a(m)?L:void 0)?.apply(this,H)},!0),g(t,V),Ne()}Tt(["click","pointermove","pointerup","contextmenu"]);var Mh=x('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Th(t,e){Ee(e,!0);var n=Mh();let o;var r=d(n);Jt(r,()=>e.children),c(n),U(()=>o=pt(n,"",o,{transform:`translate(${e.store.viewport.x??""}px, ${e.store.viewport.y??""}px) scale(${e.store.viewport.zoom??""})`})),g(t,n),Ne()}function Ol(t,e){const{store:n,onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:s}=e,l=Ap({onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:v,viewport:p}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:v||[0,0],snapToGrid:!!v,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[p.x,p.y,p.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(v,p){if(p.disabled){l.destroy();return}l.update({domNode:v,noDragClassName:p.noDragClass,handleSelector:p.handleSelector,nodeId:p.nodeId,isSelectable:p.isSelectable,nodeClickDistance:p.nodeClickDistance})}return u(t,e),{update(v){u(t,v)},destroy(){l.destroy()}}}var Ih=x('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),Ah=x('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function Dh(t,e){Ee(e,!0);var n=Ah(),o=oe(n),r=d(o,!0);c(o);var i=h(o,2),s=d(i,!0);c(i);var l=h(i,2);{var u=v=>{var p=Ih(),m=d(p,!0);c(p),U(()=>{ze(p,"id",`${Oh}-${e.store.flowId}`),Y(m,e.store.ariaLiveMessage)}),g(v,p)};W(l,v=>{e.store.disableKeyboardA11y||v(u)})}U(()=>{ze(o,"id",`${Rl}-${e.store.flowId}`),Y(r,e.store.disableKeyboardA11y?e.store.ariaLabelConfig["node.a11yDescription.default"]:e.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ze(i,"id",`${Ll}-${e.store.flowId}`),Y(s,e.store.ariaLabelConfig["edge.a11yDescription.default"])}),g(t,n),Ne()}const Rl="svelte-flow__node-desc",Ll="svelte-flow__edge-desc",Oh="svelte-flow__aria-live";var Rh=x("<div><!></div>");function Lh(t,e){Ee(e,!0);let n=ue(e,"store",15),o=k(()=>Ft(e.node.data,()=>({}),!0)),r=k(()=>Ft(e.node.selected,!1)),i=k(()=>e.node.draggable),s=k(()=>e.node.selectable),l=k(()=>Ft(e.node.deletable,!0)),u=k(()=>e.node.connectable),v=k(()=>e.node.focusable),p=k(()=>Ft(e.node.hidden,!1)),m=k(()=>Ft(e.node.dragging,!1)),f=k(()=>Ft(e.node.style,"")),w=k(()=>e.node.class),S=k(()=>Ft(e.node.type,"default")),z=k(()=>e.node.parentId),P=k(()=>e.node.sourcePosition),L=k(()=>e.node.targetPosition),A=k(()=>Ft(e.node.measured,()=>({width:0,height:0}),!0).width),V=k(()=>Ft(e.node.measured,()=>({width:0,height:0}),!0).height),M=k(()=>e.node.initialWidth),O=k(()=>e.node.initialHeight),b=k(()=>e.node.width),I=k(()=>e.node.height),H=k(()=>e.node.dragHandle),B=k(()=>Ft(e.node.internals.z,0)),X=k(()=>e.node.internals.positionAbsolute.x),N=k(()=>e.node.internals.positionAbsolute.y),E=k(()=>e.node.internals.userNode),{id:C}=e.node,_=k(()=>a(i)??n().nodesDraggable),T=k(()=>a(s)??n().elementsSelectable),D=k(()=>a(u)??n().nodesConnectable),R=k(()=>pl(e.node)),F=k(()=>!!e.node.internals.handleBounds),q=k(()=>a(R)&&a(F)),K=k(()=>a(v)??n().nodesFocusable);function Z(pe){return n().parentLookup.has(pe)}let ee=k(()=>Z(C)),J=G(null),ne=null,le=a(S),re=a(P),Q=a(L),j=k(()=>n().nodeTypes[a(S)]??Tl),$=k(()=>n().ariaLabelConfig),de={get value(){return a(D)}};Gp(C),Jp(de);let ce=k(()=>{const pe=a(A)===void 0?a(b)??a(M):a(b),ye=a(V)===void 0?a(I)??a(O):a(I);if(!(pe===void 0&&ye===void 0&&a(f)===void 0))return`${a(f)};${pe?`width:${gn(pe)};`:""}${ye?`height:${gn(ye)};`:""}`});xe(()=>{(a(S)!==le||a(P)!==re||a(L)!==Q)&&a(J)!==null&&requestAnimationFrame(()=>{a(J)!==null&&n().updateNodeInternals(new Map([[C,{id:C,nodeElement:a(J),force:!0}]]))}),le=a(S),re=a(P),Q=a(L)}),xe(()=>{e.resizeObserver&&(!a(q)||a(J)!==ne)&&(ne&&e.resizeObserver.unobserve(ne),a(J)&&e.resizeObserver.observe(a(J)),ne=a(J))}),ga(()=>{ne&&e.resizeObserver?.unobserve(ne)});function te(pe){a(T)&&(!n().selectNodesOnDrag||!a(_)||n().nodeDragThreshold>0)&&n().handleNodeSelection(C),e.onnodeclick?.({node:a(E),event:pe})}function ae(pe){if(!(ml(pe)||n().disableKeyboardA11y))if(ll.includes(pe.key)&&a(T)){const ye=pe.key==="Escape";n().handleNodeSelection(C,ye,a(J))}else a(_)&&e.node.selected&&Object.prototype.hasOwnProperty.call(Oo,pe.key)&&(pe.preventDefault(),n(n().ariaLiveMessage=a($)["node.a11yDescription.ariaLiveMessage"]({direction:pe.key.replace("Arrow","").toLowerCase(),x:~~e.node.internals.positionAbsolute.x,y:~~e.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Oo[pe.key],pe.shiftKey?4:1))}const be=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!a(J)?.matches(":focus-visible"))return;const{width:pe,height:ye,viewport:me}=n();$r(new Map([[C,e.node]]),{x:0,y:0,width:pe,height:ye},[me.x,me.y,me.zoom],!0).length>0||n().setCenter(e.node.position.x+(e.node.measured.width??0)/2,e.node.position.y+(e.node.measured.height??0)/2,{zoom:me.zoom})};var se=Te(),ge=oe(se);{var _e=pe=>{var ye=Rh();Mn(ye,()=>({"data-id":C,class:["svelte-flow__node",`svelte-flow__node-${a(S)}`,a(w)],style:a(ce),onclick:te,onpointerenter:e.onnodepointerenter?ve=>e.onnodepointerenter({node:a(E),event:ve}):void 0,onpointerleave:e.onnodepointerleave?ve=>e.onnodepointerleave({node:a(E),event:ve}):void 0,onpointermove:e.onnodepointermove?ve=>e.onnodepointermove({node:a(E),event:ve}):void 0,oncontextmenu:e.onnodecontextmenu?ve=>e.onnodecontextmenu({node:a(E),event:ve}):void 0,onkeydown:a(K)?ae:void 0,onfocus:a(K)?be:void 0,tabIndex:a(K)?0:void 0,role:e.node.ariaRole??(a(K)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${Rl}-${n().flowId}`,...e.node.domAttributes,[Lr]:{dragging:a(m),selected:a(r),draggable:a(_),connectable:a(D),selectable:a(T),nopan:a(_),parent:a(ee)},[Ro]:{"z-index":a(B),transform:`translate(${a(X)??""}px, ${a(N)??""}px)`,visibility:a(R)?"visible":"hidden"}}));var me=d(ye);hn(me,()=>a(j),(ve,ke)=>{ke(ve,{get data(){return a(o)},get id(){return C},get selected(){return a(r)},get selectable(){return a(T)},get deletable(){return a(l)},get sourcePosition(){return a(P)},get targetPosition(){return a(L)},get zIndex(){return a(B)},get dragging(){return a(m)},get draggable(){return a(_)},get dragHandle(){return a(H)},get parentId(){return a(z)},get type(){return a(S)},get isConnectable(){return a(D)},get positionAbsoluteX(){return a(X)},get positionAbsoluteY(){return a(N)},get width(){return a(b)},get height(){return a(I)}})}),c(ye),qt(ye,(ve,ke)=>Ol?.(ve,ke),()=>({nodeId:C,isSelectable:a(T),disabled:!a(_),handleSelector:a(H),noDragClass:n().noDragClass,nodeClickDistance:e.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(ve,ke,Ve,Re)=>{e.onnodedrag?.({event:ve,targetNode:Ve,nodes:Re})},onDragStart:(ve,ke,Ve,Re)=>{e.onnodedragstart?.({event:ve,targetNode:Ve,nodes:Re})},onDragStop:(ve,ke,Ve,Re)=>{e.onnodedragstop?.({event:ve,targetNode:Ve,nodes:Re})},store:n()})),mn(ye,ve=>y(J,ve),()=>a(J)),g(pe,ye)};W(ge,pe=>{a(p)||pe(_e)})}g(t,se),Ne()}var Vh=x('<div class="svelte-flow__nodes"></div>');function Hh(t,e){Ee(e,!0);let n=ue(e,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const s=new Map;i.forEach(l=>{const u=l.target.getAttribute("data-id");s.set(u,{id:u,nodeElement:l.target,force:!0})}),n().updateNodeInternals(s)});ga(()=>{o?.disconnect()});var r=Vh();Qe(r,21,()=>n().visible.nodes.values(),i=>i.id,(i,s)=>{Lh(i,{get node(){return a(s)},get resizeObserver(){return o},get nodeClickDistance(){return e.nodeClickDistance},get onnodeclick(){return e.onnodeclick},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get onnodecontextmenu(){return e.onnodecontextmenu},get store(){return n()},set store(l){n(l)}})}),c(r),g(t,r),Ne()}var Fh=Mt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function qh(t,e){Ee(e,!0);let n=k(()=>e.edge.id),o=k(()=>e.edge.source),r=k(()=>e.edge.target),i=k(()=>e.edge.sourceX),s=k(()=>e.edge.sourceY),l=k(()=>e.edge.targetX),u=k(()=>e.edge.targetY),v=k(()=>e.edge.sourcePosition),p=k(()=>e.edge.targetPosition),m=k(()=>Ft(e.edge.animated,!1)),f=k(()=>Ft(e.edge.selected,!1)),w=k(()=>e.edge.label),S=k(()=>e.edge.labelStyle),z=k(()=>Ft(e.edge.data,()=>({}),!0)),P=k(()=>e.edge.style),L=k(()=>e.edge.interactionWidth),A=k(()=>Ft(e.edge.type,"default")),V=k(()=>e.edge.sourceHandle),M=k(()=>e.edge.targetHandle),O=k(()=>e.edge.markerStart),b=k(()=>e.edge.markerEnd),I=k(()=>e.edge.selectable),H=k(()=>e.edge.focusable),B=k(()=>Ft(e.edge.deletable,!0)),X=k(()=>e.edge.hidden),N=k(()=>e.edge.zIndex),E=k(()=>e.edge.class),C=k(()=>e.edge.ariaLabel);$p(a(n));let _=null,T=k(()=>a(I)??e.store.elementsSelectable),D=k(()=>a(H)??e.store.edgesFocusable),R=k(()=>e.store.edgeTypes[a(A)]??Il),F=k(()=>a(O)?`url('#${Ar(a(O),e.store.flowId)}')`:void 0),q=k(()=>a(b)?`url('#${Ar(a(b),e.store.flowId)}')`:void 0);function K(re){const Q=e.store.edgeLookup.get(a(n));Q&&(a(T)&&e.store.handleEdgeSelection(a(n)),e.onedgeclick?.({event:re,edge:Q}))}function Z(re,Q){const j=e.store.edgeLookup.get(a(n));j&&Q({event:re,edge:j})}function ee(re){if(!e.store.disableKeyboardA11y&&ll.includes(re.key)&&a(T)){const{unselectNodesAndEdges:Q,addSelectedEdges:j}=e.store;re.key==="Escape"?(_?.blur(),Q({edges:[e.edge]})):j([a(n)])}}var J=Te(),ne=oe(J);{var le=re=>{var Q=Fh();let j;var $=d(Q);Mn($,()=>({class:["svelte-flow__edge",a(E)],"data-id":a(n),onclick:K,oncontextmenu:e.onedgecontextmenu?ce=>{Z(ce,e.onedgecontextmenu)}:void 0,onpointerenter:e.onedgepointerenter?ce=>{Z(ce,e.onedgepointerenter)}:void 0,onpointerleave:e.onedgepointerleave?ce=>{Z(ce,e.onedgepointerleave)}:void 0,"aria-label":a(C)===null?void 0:a(C)?a(C):`Edge from ${a(o)} to ${a(r)}`,"aria-describedby":a(D)?`${Ll}-${e.store.flowId}`:void 0,role:e.edge.ariaRole??(a(D)?"group":"img"),"aria-roledescription":"edge",onkeydown:a(D)?ee:void 0,tabindex:a(D)?0:void 0,...e.edge.domAttributes,[Lr]:{animated:a(m),selected:a(f),selectable:a(T)}}));var de=d($);hn(de,()=>a(R),(ce,te)=>{te(ce,{get id(){return a(n)},get source(){return a(o)},get target(){return a(r)},get sourceX(){return a(i)},get sourceY(){return a(s)},get targetX(){return a(l)},get targetY(){return a(u)},get sourcePosition(){return a(v)},get targetPosition(){return a(p)},get animated(){return a(m)},get selected(){return a(f)},get label(){return a(w)},get labelStyle(){return a(S)},get data(){return a(z)},get style(){return a(P)},get interactionWidth(){return a(L)},get selectable(){return a(T)},get deletable(){return a(B)},get type(){return a(A)},get sourceHandleId(){return a(V)},get targetHandleId(){return a(M)},get markerStart(){return a(F)},get markerEnd(){return a(q)}})}),c($),mn($,ce=>_=ce,()=>_),c(Q),U(()=>j=pt(Q,"",j,{"z-index":a(N)})),g(re,Q)};W(ne,re=>{a(X)||re(le)})}g(t,J),Ne()}var Bh=Mt("<defs></defs>");function Kh(t,e){Ee(e,!1);const n=Cn();nc();var o=Bh();Qe(o,5,()=>n.markers,r=>r.id,(r,i)=>{Yh(r,$e(()=>a(i)))}),c(o),g(t,o),Ne()}var jh=Mt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Wh=Mt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Zh=Mt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Yh(t,e){Ee(e,!0);let n=ue(e,"width",3,12.5),o=ue(e,"height",3,12.5),r=ue(e,"markerUnits",3,"strokeWidth"),i=ue(e,"orient",3,"auto-start-reverse"),s=ue(e,"color",3,"none");var l=Zh(),u=d(l);{var v=m=>{var f=jh();let w;U(()=>{ze(f,"stroke-width",e.strokeWidth),w=pt(f,"",w,{stroke:s()})}),g(m,f)},p=m=>{var f=Wh();let w;U(()=>{ze(f,"stroke-width",e.strokeWidth),w=pt(f,"",w,{stroke:s(),fill:s()})}),g(m,f)};W(u,m=>{e.type===Io.Arrow?m(v):e.type===Io.ArrowClosed&&m(p,1)})}c(l),U(()=>{ze(l,"id",e.id),ze(l,"markerWidth",`${n()}`),ze(l,"markerHeight",`${o()}`),ze(l,"markerUnits",r()),ze(l,"orient",i())}),g(t,l),Ne()}var Xh=x('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Gh(t,e){Ee(e,!0);let n=ue(e,"store",15);var o=Xh(),r=d(o),i=d(r);Kh(i,{}),c(r);var s=h(r,2);Qe(s,17,()=>n().visible.edges.values(),l=>l.id,(l,u)=>{qh(l,{get edge(){return a(u)},get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return n()},set store(v){n(v)}})}),c(o),g(t,o),Ne()}var Uh=x('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function Vl(t,e){Ee(e,!0);let n=ue(e,"x",3,0),o=ue(e,"y",3,0),r=ue(e,"width",3,0),i=ue(e,"height",3,0),s=ue(e,"isVisible",3,!0);var l=Te(),u=oe(l);{var v=p=>{var m=Uh();let f;U(w=>f=pt(m,"",f,w),[()=>({width:typeof r()=="string"?r():gn(r()),height:typeof i()=="string"?i():gn(i()),transform:`translate(${n()}px, ${o()}px)`})]),g(p,m)};W(u,p=>{s()&&p(v)})}g(t,l),Ne()}var Jh=x("<div><!></div>");function Qh(t,e){Ee(e,!0);let n=G(void 0);xe(()=>{e.store.disableKeyboardA11y||a(n)?.focus({preventScroll:!0})});let o=k(()=>{if(e.store.selectionRectMode==="nodes"){e.store.nodes;const m=Wa(e.store.nodeLookup,{filter:f=>!!f.selected});if(m.width>0&&m.height>0)return m}return null});function r(m){const f=e.store.nodes.filter(w=>w.selected);e.onselectioncontextmenu?.({nodes:f,event:m})}function i(m){const f=e.store.nodes.filter(w=>w.selected);e.onselectionclick?.({nodes:f,event:m})}function s(m){Object.prototype.hasOwnProperty.call(Oo,m.key)&&(m.preventDefault(),e.store.moveSelectedNodes(Oo[m.key],m.shiftKey?4:1))}var l=Te(),u=oe(l);{var v=m=>{var f=Jh();let w;var S=d(f);Vl(S,{width:"100%",height:"100%",x:0,y:0}),c(f),qt(f,(z,P)=>Ol?.(z,P),()=>({disabled:!1,store:e.store,onDrag:(z,P,L,A)=>{e.onnodedrag?.({event:z,targetNode:null,nodes:A})},onDragStart:(z,P,L,A)=>{e.onnodedragstart?.({event:z,targetNode:null,nodes:A})},onDragStop:(z,P,L,A)=>{e.onnodedragstop?.({event:z,targetNode:null,nodes:A})}})),mn(f,z=>y(n,z),()=>a(n)),U(z=>{Oe(f,1,Gn(["svelte-flow__selection-wrapper",e.store.noPanClass]),"svelte-sf2y5e"),ze(f,"role",e.store.disableKeyboardA11y?void 0:"button"),ze(f,"tabindex",e.store.disableKeyboardA11y?void 0:-1),w=pt(f,"",w,z)},[()=>({width:gn(a(o).width),height:gn(a(o).height),transform:`translate(${a(o).x??""}px, ${a(o).y??""}px)`})]),fe("contextmenu",f,r),fe("click",f,i),fe("keydown",f,function(...z){(e.store.disableKeyboardA11y?void 0:s)?.apply(this,z)}),g(m,f)},p=k(()=>e.store.selectionRectMode==="nodes"&&a(o)&&wn(a(o).x)&&wn(a(o).y));W(u,m=>{a(p)&&m(v)})}g(t,l),Ne()}Tt(["contextmenu","click","keydown"]);function $h(t){switch(t){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function cn(t,e){let{enabled:n=!0,trigger:o,type:r="keydown"}=e;function i(l){const u=Array.isArray(o)?o:[o],v=[l.metaKey,l.altKey,l.shiftKey,l.ctrlKey].reduce((p,m,f)=>m?p|1<<f:p,0);for(const p of u){const m={preventDefault:!1,enabled:!0,...p},{modifier:f,key:w,callback:S,preventDefault:z,enabled:P}=m;if(P){if(l.key!==w)continue;if(f===null||f===!1){if(v!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const A=Array.isArray(f)?f:[f];let V=!1;for(const M of A)if((Array.isArray(M)?M:[M]).reduce((b,I)=>b|$h(I),0)===v){V=!0;break}if(!V)continue}z&&l.preventDefault();const L={node:t,trigger:m,originalEvent:l};t.dispatchEvent(new CustomEvent("shortcut",{detail:L})),S?.(L)}}}let s;return n&&(s=mr(t,r,i)),{update:l=>{const{enabled:u=!0,type:v="keydown"}=l;n&&(!u||r!==v)?s?.():!n&&u&&(s=mr(t,v,i)),n=u,r=v,o=l.trigger},destroy:()=>{s?.()}}}function eg(){const t=k(Cn),e=i=>{const s=ri(i)?i:a(t).nodeLookup.get(i.id),l=s.parentId?sp(s.position,s.measured,s.parentId,a(t).nodeLookup,a(t).nodeOrigin):s.position,u={...s,position:l,width:s.measured?.width??s.width,height:s.measured?.height??s.height};return fa(u)};function n(i,s,l={replace:!1}){a(t).nodes=un(()=>a(t).nodes).map(u=>{if(u.id===i){const v=typeof s=="function"?s(u):s;return l?.replace&&ri(v)?v:{...u,...v}}return u})}function o(i,s,l={replace:!1}){a(t).edges=un(()=>a(t).edges).map(u=>{if(u.id===i){const v=typeof s=="function"?s(u):s;return l.replace&&ch(v)?v:{...u,...v}}return u})}const r=i=>a(t).nodeLookup.get(i);return{zoomIn:a(t).zoomIn,zoomOut:a(t).zoomOut,getInternalNode:r,getNode:i=>r(i)?.internals.userNode,getNodes:i=>i===void 0?a(t).nodes:di(a(t).nodeLookup,i),getEdge:i=>a(t).edgeLookup.get(i),getEdges:i=>i===void 0?a(t).edges:di(a(t).edgeLookup,i),setZoom:(i,s)=>{const l=a(t).panZoom;return l?l.scaleTo(i,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>a(t).viewport.zoom,setViewport:async(i,s)=>{const l=a(t).viewport;return a(t).panZoom?(await a(t).panZoom.setViewport({x:i.x??l.x,y:i.y??l.y,zoom:i.zoom??l.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ni(a(t).viewport),setCenter:async(i,s,l)=>a(t).setCenter(i,s,l),fitView:i=>a(t).fitView(i),fitBounds:async(i,s)=>{if(!a(t).panZoom)return Promise.resolve(!1);const l=es(i,a(t).width,a(t).height,a(t).minZoom,a(t).maxZoom,s?.padding??.1);return await a(t).panZoom.setViewport(l,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(i,s=!0,l)=>{const u=Ys(i),v=u?i:e(i);return v?(l||a(t).nodes).filter(p=>{const m=a(t).nodeLookup.get(p.id);if(!m||!u&&p.id===i.id)return!1;const f=fa(m),w=Va(f,v);return s&&w>0||w>=f.width*f.height||w>=v.width*v.height}):[]},isNodeIntersecting:(i,s,l=!0)=>{const v=Ys(i)?i:e(i);if(!v)return!1;const p=Va(v,s);return l&&p>0||p>=s.width*s.height||p>=v.width*v.height},deleteElements:async({nodes:i=[],edges:s=[]})=>{const{nodes:l,edges:u}=await np({nodesToRemove:i,edgesToRemove:s,nodes:a(t).nodes,edges:a(t).edges,onBeforeDelete:a(t).onbeforedelete});return l&&(a(t).nodes=un(()=>a(t).nodes).filter(v=>!l.some(({id:p})=>p===v.id))),u&&(a(t).edges=un(()=>a(t).edges).filter(v=>!u.some(({id:p})=>p===v.id))),(l.length>0||u.length>0)&&a(t).ondelete?.({nodes:l,edges:u}),{deletedNodes:l,deletedEdges:u}},screenToFlowPosition:(i,s={snapToGrid:!0})=>{if(!a(t).domNode)return i;const l=s.snapToGrid?a(t).snapGrid:!1,{x:u,y:v,zoom:p}=a(t).viewport,{x:m,y:f}=a(t).domNode.getBoundingClientRect(),w={x:i.x-m,y:i.y-f};return Ya(w,[u,v,p],l!==null,l||[1,1])},flowToScreenPosition:i=>{if(!a(t).domNode)return i;const{x:s,y:l,zoom:u}=a(t).viewport,{x:v,y:p}=a(t).domNode.getBoundingClientRect(),m=Do(i,[s,l,u]);return{x:m.x+v,y:m.y+p}},toObject:()=>structuredClone({nodes:[...a(t).nodes],edges:[...a(t).edges],viewport:{...a(t).viewport}}),updateNode:n,updateNodeData:(i,s,l)=>{const u=a(t).nodeLookup.get(i)?.internals.userNode;if(!u)return;const v=typeof s=="function"?s(u):s;n(i,p=>({...p,data:l?.replace?v:{...p.data,...v}}))},updateEdge:o,getNodesBounds:i=>Qf(i,{nodeLookup:a(t).nodeLookup,nodeOrigin:a(t).nodeOrigin}),getHandleConnections:({type:i,id:s,nodeId:l})=>Array.from(a(t).connectionLookup.get(`${l}-${i}-${s??null}`)?.values()??[])}}function di(t,e){const n=[];for(const o of e){const r=t.get(o);if(r){const i="internals"in r?r.internals?.userNode:r;n.push(i)}}return n}function tg(t,e){Ee(e,!0);let n=ue(e,"store",15),o=ue(e,"selectionKey",3,"Shift"),r=ue(e,"multiSelectionKey",19,()=>Ha()?"Meta":"Control"),i=ue(e,"deleteKey",3,"Backspace"),s=ue(e,"panActivationKey",3," "),l=ue(e,"zoomActivationKey",19,()=>Ha()?"Meta":"Control"),{deleteElements:u}=eg();function v(z){return z!==null&&typeof z=="object"}function p(z){return v(z)?z.modifier||[]:[]}function m(z){return z==null?"":v(z)?z.key:z}function f(z,P){return(Array.isArray(z)?z:[z]).map(A=>{const V=m(A);return{key:V,modifier:p(A),enabled:V!==null,callback:P}})}function w(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function S(){const z=n().nodes.filter(L=>L.selected),P=n().edges.filter(L=>L.selected);u({nodes:z,edges:P})}bo("blur",Gt,w),bo("contextmenu",Gt,w),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(i(),z=>{!(z.originalEvent.ctrlKey||z.originalEvent.metaKey||z.originalEvent.shiftKey)&&!ml(z.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),S())}),type:"keydown"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(i(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(l(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),qt(Gt,(z,P)=>cn?.(z,P),()=>({trigger:f(l(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Ne()}var ng=Mt('<path fill="none" class="svelte-flow__connection-path"></path>'),ag=Mt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function og(t,e){Ee(e,!0);let n=k(()=>{if(!e.store.connection.inProgress)return"";const s={sourceX:e.store.connection.from.x,sourceY:e.store.connection.from.y,sourcePosition:e.store.connection.fromPosition,targetX:e.store.connection.to.x,targetY:e.store.connection.to.y,targetPosition:e.store.connection.toPosition};switch(e.type){case En.Bezier:{const[l]=yl(s);return l}case En.Straight:{const[l]=xl(s);return l}case En.Step:case En.SmoothStep:{const[l]=ts({...s,borderRadius:e.type===En.Step?0:void 0});return l}}});var o=Te(),r=oe(o);{var i=s=>{var l=ag(),u=d(l),v=d(u);{var p=f=>{var w=Te(),S=oe(w);hn(S,()=>e.LineComponent,(z,P)=>{P(z,{})}),g(f,w)},m=f=>{var w=ng();U(()=>{ze(w,"d",a(n)),pt(w,e.style)}),g(f,w)};W(v,f=>{e.LineComponent?f(p):f(m,!1)})}c(u),c(l),U(f=>{ze(l,"width",e.store.width),ze(l,"height",e.store.height),pt(l,e.containerStyle),Oe(u,0,f)},[()=>Gn(["svelte-flow__connection",Uf(e.store.connection.isValid)])]),g(s,l)};W(r,s=>{e.store.connection.inProgress&&s(i)})}g(t,o),Ne()}var rg=x("<div><!></div>");function is(t,e){Ee(e,!0);let n=ue(e,"position",3,"top-right"),o=Pn(e,["$$slots","$$events","$$legacy","position","style","class","children"]),r=k(()=>`${n()}`.split("-"));var i=rg();Mn(i,l=>({class:l,style:e.style,...o}),[()=>["svelte-flow__panel",e.class,...a(r)]]);var s=d(i);Jt(s,()=>e.children??ha),c(i),g(t,i),Ne()}var sg=x('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function ig(t,e){Ee(e,!0);let n=ue(e,"position",3,"bottom-right");var o=Te(),r=oe(o);{var i=s=>{is(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,u)=>{var v=sg();g(l,v)},$$slots:{default:!0}})};W(r,s=>{e.proOptions?.hideAttribution||s(i)})}g(t,o),Ne()}var lg=x("<div><!></div>");function cg(t,e){Ee(e,!0);let n=ue(e,"domNode",15),o=ue(e,"clientWidth",15),r=ue(e,"clientHeight",15),i=k(()=>e.rest.class),s=k(()=>hc(e.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function l(p){p.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),e.rest.onscroll&&e.rest.onscroll(p)}var u=lg();Mn(u,p=>({class:["svelte-flow","svelte-flow__container",a(i),e.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:l,...a(s),[Ro]:p}),[()=>({width:gn(e.width),height:gn(e.height)})],void 0,void 0,"svelte-mkap6j");var v=d(u);Jt(v,()=>e.children??ha),c(u),mn(u,p=>n(p),()=>n()),Ss(u,"clientHeight",r),Ss(u,"clientWidth",o),g(t,u),Ne()}var dg=x('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),ug=x("<!> <!>",1),vg=x("<!> <!> <!> <!> <!>",1);function fg(t,e){Ee(e,!0);let n=ue(e,"paneClickDistance",3,1),o=ue(e,"nodeClickDistance",3,1),r=ue(e,"panOnScrollMode",19,()=>sa.Free),i=ue(e,"preventScrolling",3,!0),s=ue(e,"zoomOnScroll",3,!0),l=ue(e,"zoomOnDoubleClick",3,!0),u=ue(e,"zoomOnPinch",3,!0),v=ue(e,"panOnScroll",3,!1),p=ue(e,"panOnScrollSpeed",3,.5),m=ue(e,"panOnDrag",3,!0),f=ue(e,"selectionOnDrag",3,!1),w=ue(e,"connectionLineType",19,()=>En.Bezier),S=ue(e,"nodes",31,()=>pn([])),z=ue(e,"edges",31,()=>pn([])),P=ue(e,"viewport",15,void 0),L=Pn(e,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),A=zh({props:L,width:e.width,height:e.height,get nodes(){return S()},set nodes(M){S(M)},get edges(){return z()},set edges(M){z(M)},get viewport(){return P()},set viewport(M){P(M)}});const V=Or(Dr);V&&V.setStore&&V.setStore(A),pi(Dr,{provider:!1,getStore(){return A}}),xe(()=>{const M={nodes:A.selectedNodes,edges:A.selectedEdges};un(()=>e.onselectionchange)?.(M);for(const O of A.selectionChangeHandlers.values())O(M)}),ga(()=>{A.reset()}),cg(t,{get colorMode(){return A.colorMode},get width(){return e.width},get height(){return e.height},get rest(){return L},get domNode(){return A.domNode},set domNode(M){A.domNode=M},get clientWidth(){return A.width},set clientWidth(M){A.width=M},get clientHeight(){return A.height},set clientHeight(M){A.height=M},children:(M,O)=>{var b=vg(),I=oe(b);tg(I,{get selectionKey(){return e.selectionKey},get deleteKey(){return e.deleteKey},get panActivationKey(){return e.panActivationKey},get multiSelectionKey(){return e.multiSelectionKey},get zoomActivationKey(){return e.zoomActivationKey},get store(){return A},set store(E){A=E}});var H=h(I,2);Eh(H,{get panOnScrollMode(){return r()},get preventScrolling(){return i()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return l()},get zoomOnPinch(){return u()},get panOnScroll(){return v()},get panOnScrollSpeed(){return p()},get panOnDrag(){return m()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get onmovestart(){return e.onmovestart},get onmove(){return e.onmove},get onmoveend(){return e.onmoveend},get oninit(){return e.oninit},get store(){return A},set store(E){A=E},children:(E,C)=>{Ph(E,{get onpaneclick(){return e.onpaneclick},get onpanecontextmenu(){return e.onpanecontextmenu},get onselectionstart(){return e.onselectionstart},get onselectionend(){return e.onselectionend},get panOnDrag(){return m()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get store(){return A},set store(_){A=_},children:(_,T)=>{var D=ug(),R=oe(D);Th(R,{get store(){return A},set store(q){A=q},children:(q,K)=>{var Z=dg(),ee=h(oe(Z),2);Gh(ee,{get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return A},set store(re){A=re}});var J=h(ee,4);og(J,{get type(){return w()},get LineComponent(){return e.connectionLineComponent},get containerStyle(){return e.connectionLineContainerStyle},get style(){return e.connectionLineStyle},get store(){return A},set store(re){A=re}});var ne=h(J,2);Hh(ne,{get nodeClickDistance(){return o()},get onnodeclick(){return e.onnodeclick},get onnodecontextmenu(){return e.onnodecontextmenu},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return A},set store(re){A=re}});var le=h(ne,2);Qh(le,{get onselectionclick(){return e.onselectionclick},get onselectioncontextmenu(){return e.onselectioncontextmenu},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return A},set store(re){A=re}}),he(2),g(q,Z)},$$slots:{default:!0}});var F=h(R,2);{let q=k(()=>!!(A.selectionRect&&A.selectionRectMode==="user")),K=k(()=>A.selectionRect?.width),Z=k(()=>A.selectionRect?.height),ee=k(()=>A.selectionRect?.x),J=k(()=>A.selectionRect?.y);Vl(F,{get isVisible(){return a(q)},get width(){return a(K)},get height(){return a(Z)},get x(){return a(ee)},get y(){return a(J)}})}g(_,D)},$$slots:{default:!0}})},$$slots:{default:!0}});var B=h(H,2);ig(B,{get proOptions(){return e.proOptions},get position(){return e.attributionPosition}});var X=h(B,2);Dh(X,{get store(){return A}});var N=h(X,2);Jt(N,()=>e.children??ha),g(M,b)},$$slots:{default:!0}}),Ne()}var pg=x("<button><!></button>");function lo(t,e){let n=Pn(e,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var o=pg();Mn(o,()=>({type:"button",onclick:e.onclick,class:["svelte-flow__controls-button",e.class],...n,[Ro]:{"--xy-controls-button-background-color-props":e.bgColor,"--xy-controls-button-background-color-hover-props":e.bgColorHover,"--xy-controls-button-color-props":e.color,"--xy-controls-button-color-hover-props":e.colorHover,"--xy-controls-button-border-color-props":e.borderColor}}));var r=d(o);Jt(r,()=>e.children??ha),c(o),g(t,o)}var hg=Mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function gg(t){var e=hg();g(t,e)}var mg=Mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function _g(t){var e=mg();g(t,e)}var yg=Mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function bg(t){var e=yg();g(t,e)}var xg=Mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function wg(t){var e=xg();g(t,e)}var kg=Mt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function zg(t){var e=kg();g(t,e)}var Sg=x("<!> <!>",1),Cg=x("<!> <!> <!> <!> <!> <!>",1);function Eg(t,e){Ee(e,!0);let n=ue(e,"position",3,"bottom-left"),o=ue(e,"orientation",3,"vertical"),r=ue(e,"showZoom",3,!0),i=ue(e,"showFitView",3,!0),s=ue(e,"showLock",3,!0),l=Pn(e,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=k(Cn);const v={bgColor:e.buttonBgColor,bgColorHover:e.buttonBgColorHover,color:e.buttonColor,colorHover:e.buttonColorHover,borderColor:e.buttonBorderColor};let p=k(()=>a(u).nodesDraggable||a(u).nodesConnectable||a(u).elementsSelectable),m=k(()=>a(u).viewport.zoom<=a(u).minZoom),f=k(()=>a(u).viewport.zoom>=a(u).maxZoom),w=k(()=>a(u).ariaLabelConfig),S=k(()=>o()==="horizontal"?"horizontal":"vertical");const z=()=>{a(u).zoomIn()},P=()=>{a(u).zoomOut()},L=()=>{a(u).fitView(e.fitViewOptions)},A=()=>{let V=!a(p);a(u).nodesDraggable=V,a(u).nodesConnectable=V,a(u).elementsSelectable=V};{let V=k(()=>["svelte-flow__controls",a(S),e.class]);is(t,$e({get class(){return a(V)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return a(w)["controls.ariaLabel"]},get style(){return e.style}},()=>l,{children:(M,O)=>{var b=Cg(),I=oe(b);{var H=q=>{var K=Te(),Z=oe(K);Jt(Z,()=>e.before),g(q,K)};W(I,q=>{e.before&&q(H)})}var B=h(I,2);{var X=q=>{var K=Sg(),Z=oe(K);lo(Z,$e({onclick:z,class:"svelte-flow__controls-zoomin",get title(){return a(w)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return a(w)["controls.zoomIn.ariaLabel"]},get disabled(){return a(f)}},()=>v,{children:(J,ne)=>{gg(J)},$$slots:{default:!0}}));var ee=h(Z,2);lo(ee,$e({onclick:P,class:"svelte-flow__controls-zoomout",get title(){return a(w)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return a(w)["controls.zoomOut.ariaLabel"]},get disabled(){return a(m)}},()=>v,{children:(J,ne)=>{_g(J)},$$slots:{default:!0}})),g(q,K)};W(B,q=>{r()&&q(X)})}var N=h(B,2);{var E=q=>{lo(q,$e({class:"svelte-flow__controls-fitview",onclick:L,get title(){return a(w)["controls.fitView.ariaLabel"]},get"aria-label"(){return a(w)["controls.fitView.ariaLabel"]}},()=>v,{children:(K,Z)=>{bg(K)},$$slots:{default:!0}}))};W(N,q=>{i()&&q(E)})}var C=h(N,2);{var _=q=>{lo(q,$e({class:"svelte-flow__controls-interactive",onclick:A,get title(){return a(w)["controls.interactive.ariaLabel"]},get"aria-label"(){return a(w)["controls.interactive.ariaLabel"]}},()=>v,{children:(K,Z)=>{var ee=Te(),J=oe(ee);{var ne=re=>{zg(re)},le=re=>{wg(re)};W(J,re=>{a(p)?re(ne):re(le,!1)})}g(K,ee)},$$slots:{default:!0}}))};W(C,q=>{s()&&q(_)})}var T=h(C,2);{var D=q=>{var K=Te(),Z=oe(K);Jt(Z,()=>e.children),g(q,K)};W(T,q=>{e.children&&q(D)})}var R=h(T,2);{var F=q=>{var K=Te(),Z=oe(K);Jt(Z,()=>e.after),g(q,K)};W(R,q=>{e.after&&q(F)})}g(M,b)},$$slots:{default:!0}}))}Ne()}var kn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(kn||(kn={}));var Ng=Mt("<circle></circle>");function Pg(t,e){var n=Ng();U(()=>{ze(n,"cx",e.radius),ze(n,"cy",e.radius),ze(n,"r",e.radius),Oe(n,0,Gn(["svelte-flow__background-pattern","dots",e.class]))}),g(t,n)}var Mg=Mt("<path></path>");function Tg(t,e){Ee(e,!0);var n=Mg();U(()=>{ze(n,"stroke-width",e.lineWidth),ze(n,"d",`M${e.dimensions[0]/2} 0 V${e.dimensions[1]} M0 ${e.dimensions[1]/2} H${e.dimensions[0]}`),Oe(n,0,Gn(["svelte-flow__background-pattern",e.variant,e.class]))}),g(t,n),Ne()}const Ig={[kn.Dots]:1,[kn.Lines]:1,[kn.Cross]:6};var Ag=Mt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Dg(t,e){Ee(e,!0);let n=ue(e,"variant",19,()=>kn.Dots),o=ue(e,"gap",3,20),r=ue(e,"lineWidth",3,1),i=k(Cn),s=k(()=>n()===kn.Dots),l=k(()=>n()===kn.Cross),u=k(()=>Array.isArray(o())?o():[o(),o()]),v=k(()=>`background-pattern-${a(i).flowId}-${e.id??""}`),p=k(()=>[a(u)[0]*a(i).viewport.zoom||1,a(u)[1]*a(i).viewport.zoom||1]),m=k(()=>(e.size??Ig[n()])*a(i).viewport.zoom),f=k(()=>a(l)?[a(m),a(m)]:a(p)),w=k(()=>a(s)?[a(m)/2,a(m)/2]:[a(f)[0]/2,a(f)[1]/2]);var S=Ag();let z;var P=d(S),L=d(P);{var A=O=>{{let b=k(()=>a(m)/2);Pg(O,{get radius(){return a(b)},get class(){return e.patternClass}})}},V=O=>{Tg(O,{get dimensions(){return a(f)},get variant(){return n()},get lineWidth(){return r()},get class(){return e.patternClass}})};W(L,O=>{a(s)?O(A):O(V,!1)})}c(P);var M=h(P);c(S),U(()=>{Oe(S,0,Gn(["svelte-flow__background","svelte-flow__container",e.class])),z=pt(S,"",z,{"--xy-background-color-props":e.bgColor,"--xy-background-pattern-color-props":e.patternColor}),ze(P,"id",a(v)),ze(P,"x",a(i).viewport.x%a(p)[0]),ze(P,"y",a(i).viewport.y%a(p)[1]),ze(P,"width",a(p)[0]),ze(P,"height",a(p)[1]),ze(P,"patternTransform",`translate(-${a(w)[0]},-${a(w)[1]})`),ze(M,"fill",`url(#${a(v)})`)}),g(t,S),Ne()}function Og(t){const e=k(Cn),n=k(()=>a(e).nodeLookup),o=k(()=>a(e).nodes),r=k(()=>(a(o),a(n).get(t)));return{get current(){return a(r)}}}var Rg=Mt("<rect></rect>");function Lg(t,e){Ee(e,!0);let n=ue(e,"borderRadius",3,5),o=ue(e,"strokeWidth",3,2),r=k(()=>Og(e.id)),i=k(()=>{if(!a(r).current)return{width:0,height:0,x:0,y:0};const{width:S,height:z}=Tn(a(r).current);return{width:e.width??S,height:e.height??z,x:e.x??a(r).current.internals.positionAbsolute.x,y:e.y??a(r).current.internals.positionAbsolute.y}}),s=k(()=>a(i).width),l=k(()=>a(i).height),u=k(()=>a(i).x),v=k(()=>a(i).y);var p=Te(),m=oe(p);{var f=S=>{const z=k(()=>e.nodeComponent);var P=Te(),L=oe(P);hn(L,()=>a(z),(A,V)=>{V(A,{get id(){return e.id},get x(){return a(u)},get y(){return a(v)},get width(){return a(s)},get height(){return a(l)},get borderRadius(){return n()},get class(){return e.class},get color(){return e.color},get shapeRendering(){return e.shapeRendering},get strokeColor(){return e.strokeColor},get strokeWidth(){return o()},get selected(){return e.selected}})}),g(S,P)},w=S=>{var z=Rg();let P,L;U(()=>{P=Oe(z,0,Gn(["svelte-flow__minimap-node",e.class]),null,P,{selected:e.selected}),ze(z,"x",a(u)),ze(z,"y",a(v)),ze(z,"rx",n()),ze(z,"ry",n()),ze(z,"width",a(s)),ze(z,"height",a(l)),ze(z,"shape-rendering",e.shapeRendering),L=pt(z,"",L,{fill:e.color,stroke:e.strokeColor,"stroke-width":o()})}),g(S,z)};W(m,S=>{e.nodeComponent?S(f):S(w,!1)})}g(t,p),Ne()}function Vg(t,e){const n=Hp({domNode:t,panZoom:e.panZoom,getTransform:()=>{const{viewport:r}=e.store;return[r.x,r.y,r.zoom]},getViewScale:e.getViewScale});n.update({translateExtent:e.translateExtent,width:e.width,height:e.height,inversePan:e.inversePan,zoomStep:e.zoomStep,pannable:e.pannable,zoomable:e.zoomable});function o(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:o,destroy(){n.destroy()}}}const hr=t=>t instanceof Function?t:()=>t;var Hg=Mt("<title> </title>"),Fg=Mt('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),qg=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Bg(t,e){Ee(e,!0);let n=ue(e,"position",3,"bottom-right"),o=ue(e,"nodeStrokeColor",3,"transparent"),r=ue(e,"nodeClass",3,""),i=ue(e,"nodeBorderRadius",3,5),s=ue(e,"nodeStrokeWidth",3,2),l=ue(e,"width",3,200),u=ue(e,"height",3,150),v=ue(e,"pannable",3,!0),p=ue(e,"zoomable",3,!0),m=Pn(e,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","nodeComponent","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),f=k(Cn),w=k(()=>a(f).ariaLabelConfig);const S=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let z=k(()=>`svelte-flow__minimap-desc-${a(f).flowId}`),P=k(()=>({x:-a(f).viewport.x/a(f).viewport.zoom,y:-a(f).viewport.y/a(f).viewport.zoom,width:a(f).width/a(f).viewport.zoom,height:a(f).height/a(f).viewport.zoom})),L=k(()=>fl(Wa(a(f).nodeLookup,{filter:T=>!T.hidden}),a(P))),A=k(()=>a(L).width/l()),V=k(()=>a(L).height/u()),M=k(()=>Math.max(a(A),a(V))),O=k(()=>a(M)*l()),b=k(()=>a(M)*u()),I=k(()=>5*a(M)),H=k(()=>a(L).x-(a(O)-a(L).width)/2-a(I)),B=k(()=>a(L).y-(a(b)-a(L).height)/2-a(I)),X=k(()=>a(O)+a(I)*2),N=k(()=>a(b)+a(I)*2);const E=()=>a(M);var C=qg(),_=oe(C);{let T=k(()=>["svelte-flow__minimap",e.class]);Kc(_,()=>({"--xy-minimap-background-color-props":e.bgColor})),is(_.lastChild,$e({get position(){return n()},get class(){return a(T)},"data-testid":"svelte-flow__minimap"},()=>m,{children:(D,R)=>{var F=Te(),q=oe(F);{var K=Z=>{var ee=Fg();let J;var ne=d(ee);{var le=j=>{var $=Hg(),de=d($,!0);c($),U(()=>{ze($,"id",a(z)),Y(de,e.ariaLabel??a(w)["minimap.ariaLabel"])}),g(j,$)};W(ne,j=>{(e.ariaLabel??a(w)["minimap.ariaLabel"])&&j(le)})}var re=h(ne);Qe(re,17,()=>a(f).nodes,j=>j.id,(j,$)=>{const de=k(()=>a(f).nodeLookup.get(a($).id));var ce=Te(),te=oe(ce);{var ae=se=>{{let ge=k(()=>e.nodeColor===void 0?void 0:hr(e.nodeColor)(a($))),_e=k(()=>hr(o())(a($))),pe=k(()=>hr(r())(a($)));Lg(se,{get id(){return a(de).id},get selected(){return a(de).selected},get nodeComponent(){return e.nodeComponent},get color(){return a(ge)},get borderRadius(){return i()},get strokeColor(){return a(_e)},get strokeWidth(){return s()},get shapeRendering(){return S},get class(){return a(pe)}})}},be=k(()=>a(de)&&pl(a(de))&&!a(de).hidden);W(te,se=>{a(be)&&se(ae)})}g(j,ce)});var Q=h(re);c(ee),qt(ee,(j,$)=>Vg?.(j,$),()=>({store:a(f),panZoom:a(f).panZoom,getViewScale:E,translateExtent:a(f).translateExtent,width:a(f).width,height:a(f).height,inversePan:e.inversePan,zoomStep:e.zoomStep,pannable:v(),zoomable:p()})),U(()=>{ze(ee,"width",l()),ze(ee,"height",u()),ze(ee,"viewBox",`${a(H)??""} ${a(B)??""} ${a(X)??""} ${a(N)??""}`),ze(ee,"aria-labelledby",a(z)),J=pt(ee,"",J,{"--xy-minimap-mask-background-color-props":e.maskColor,"--xy-minimap-mask-stroke-color-props":e.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":e.maskStrokeWidth?e.maskStrokeWidth*a(M):void 0}),ze(Q,"d",`M${a(H)-a(I)},${a(B)-a(I)}h${a(X)+a(I)*2}v${a(N)+a(I)*2}h${-a(X)-a(I)*2}z
      M${a(P).x??""},${a(P).y??""}h${a(P).width??""}v${a(P).height??""}h${-a(P).width}z`)}),g(Z,ee)};W(q,Z=>{a(f).panZoom&&Z(K)})}g(D,F)},$$slots:{default:!0}})),c(_)}g(t,C),Ne()}var Kg=x('<span class="model-badge svelte-uofr5c"> </span>'),jg=x('<span class="multimodal-badge svelte-uofr5c" title="Multimodal enabled"><!></span>'),Wg=x('<span class="state-icon svelte-uofr5c"><!></span>'),Zg=x('<span class="state-icon state-error svelte-uofr5c"><!></span>'),Yg=x('<div class="description-text svelte-uofr5c"> </div>'),Xg=x('<div class="instructions-section svelte-uofr5c"><span class="section-label svelte-uofr5c">Instructions</span> <p class="instructions-text svelte-uofr5c"> </p></div>'),Gg=x('<div><div class="agent-header svelte-uofr5c"><div class="header-top-row svelte-uofr5c"><div class="header-badges svelte-uofr5c"><!> <!></div> <span class="settings-icon svelte-uofr5c"><!></span></div> <div class="header-main-row svelte-uofr5c"><span></span> <!> <span class="agent-title svelte-uofr5c"> </span> <!> <!></div></div> <div class="agent-body svelte-uofr5c"><div class="pins-row svelte-uofr5c"><div class="pin pin-in svelte-uofr5c"><span class="pin-dot svelte-uofr5c"></span><span class="pin-label svelte-uofr5c">Exec In</span></div> <div class="pin pin-out svelte-uofr5c"><span class="pin-label svelte-uofr5c">Exec Out</span><span class="pin-dot svelte-uofr5c"></span></div></div> <!> <!></div> <!> <!></div>');function Ug(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=k(()=>!!e.data.multimodal?.vision_enabled),r=G(!1);xe(()=>{if(a(n)==="complete"){y(r,!0);const R=setTimeout(()=>{y(r,!1)},3e3);return()=>clearTimeout(R)}else y(r,!1)});var i=Gg();let s;var l=d(i),u=d(l),v=d(u),p=d(v);{var m=R=>{var F=Kg(),q=d(F,!0);c(F),U(()=>Y(q,e.data.model)),g(R,F)};W(p,R=>{e.data.model&&R(m)})}var f=h(p,2);{var w=R=>{var F=jg(),q=d(F);ko(q,{size:10}),c(F),g(R,F)};W(f,R=>{a(o)&&R(w)})}c(v);var S=h(v,2),z=d(S);Hr(z,{size:11}),c(S),c(u);var P=h(u,2),L=d(P);let A;var V=h(L,2);Pa(V,{size:14});var M=h(V,2),O=d(M,!0);c(M);var b=h(M,2);{var I=R=>{var F=Wg(),q=d(F);an(q,{size:13}),c(F),on(3,F,()=>rn,()=>({duration:200,start:.6})),g(R,F)};W(b,R=>{a(r)&&R(I)})}var H=h(b,2);{var B=R=>{var F=Zg(),q=d(F);Qt(q,{size:13}),c(F),g(R,F)};W(H,R=>{a(n)==="error"&&R(B)})}c(P),c(l);var X=h(l,2),N=h(d(X),2);{var E=R=>{var F=Yg(),q=d(F);c(F),U((K,Z)=>Y(q,`${K??""}${Z??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),g(R,F)};W(N,R=>{e.data.description&&R(E)})}var C=h(N,2);{var _=R=>{var F=Xg(),q=h(d(F),2),K=d(q,!0);c(q),c(F),U(()=>Y(K,e.data.instructions)),g(R,F)};W(C,R=>{e.data.instructions&&R(_)})}c(X);var T=h(X,2);bt(T,{type:"target",get position(){return Se.Left}});var D=h(T,2);bt(D,{type:"source",get position(){return Se.Right}}),c(i),U(()=>{s=Oe(i,1,"agent-node svelte-uofr5c",null,s,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),A=Oe(L,1,"status-dot svelte-uofr5c",null,A,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(r)}),Y(O,e.data.label||"Agent")}),g(t,i),Ne()}var Jg=x('<span class="state-icon svelte-107d6w1"><!></span>'),Qg=x('<span class="state-icon state-error svelte-107d6w1"><!></span>'),$g=x('<div class="prop-row svelte-107d6w1"><span class="prop-key svelte-107d6w1">tool</span><span class="prop-val svelte-107d6w1"> </span></div>'),em=x('<div class="tool-description svelte-107d6w1"> </div>'),tm=x('<div class="prop-row svelte-107d6w1"><span class="prop-key svelte-107d6w1">timeout</span><span class="prop-val svelte-107d6w1"> </span></div>'),nm=x('<div><div class="tool-header svelte-107d6w1"><div class="header-row svelte-107d6w1"><span></span> <div class="tool-icon-wrap svelte-107d6w1"><!></div> <span class="tool-title svelte-107d6w1"> </span> <!> <!></div></div> <div class="tool-body svelte-107d6w1"><div class="pins-row svelte-107d6w1"><div class="pin pin-in svelte-107d6w1"><span class="pin-dot svelte-107d6w1"></span><span class="pin-label svelte-107d6w1">Exec In</span></div> <div class="pin pin-out svelte-107d6w1"><span class="pin-label svelte-107d6w1">Exec Out</span><span class="pin-dot svelte-107d6w1"></span></div></div> <!> <!> <!></div> <!> <!></div>');function am(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const N=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(N)}else y(o,!1)});var r=nm();let i;var s=d(r),l=d(s),u=d(l);let v;var p=h(u,2),m=d(p);Kn(m,{size:13}),c(p);var f=h(p,2),w=d(f,!0);c(f);var S=h(f,2);{var z=N=>{var E=Jg(),C=d(E);an(C,{size:12}),c(E),on(3,E,()=>rn,()=>({duration:200,start:.6})),g(N,E)};W(S,N=>{a(o)&&N(z)})}var P=h(S,2);{var L=N=>{var E=Qg(),C=d(E);Qt(C,{size:12}),c(E),g(N,E)};W(P,N=>{a(n)==="error"&&N(L)})}c(l),c(s);var A=h(s,2),V=h(d(A),2);{var M=N=>{var E=$g(),C=h(d(E)),_=d(C,!0);c(C),c(E),U(()=>Y(_,e.data.tool_name)),g(N,E)};W(V,N=>{e.data.tool_name&&N(M)})}var O=h(V,2);{var b=N=>{var E=em(),C=d(E);c(E),U((_,T)=>Y(C,`${_??""}${T??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),g(N,E)};W(O,N=>{e.data.description&&N(b)})}var I=h(O,2);{var H=N=>{var E=tm(),C=h(d(E)),_=d(C);c(C),c(E),U(()=>Y(_,`${e.data.timeout??""}s`)),g(N,E)};W(I,N=>{e.data.timeout&&N(H)})}c(A);var B=h(A,2);bt(B,{type:"target",get position(){return Se.Left}});var X=h(B,2);bt(X,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"tool-node svelte-107d6w1",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),v=Oe(u,1,"status-dot svelte-107d6w1",null,v,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(o)}),Y(w,e.data.label||"Tool")}),g(t,r),Ne()}var om=x('<span class="state-icon svelte-15a1m3"><!></span>'),rm=x('<span class="state-icon state-error svelte-15a1m3"><!></span>'),sm=x('<div class="pattern-name svelte-15a1m3"> </div>'),im=x('<div class="reason-description svelte-15a1m3"> </div>'),lm=x('<div class="steps-row svelte-15a1m3"><span class="steps-label svelte-15a1m3">Max Steps</span> <span class="steps-badge svelte-15a1m3"> </span></div>'),cm=x('<div><div class="reason-header svelte-15a1m3"><div class="header-row svelte-15a1m3"><span></span> <div class="brain-icon-wrap svelte-15a1m3"><!></div> <span class="reason-title svelte-15a1m3"> </span> <!> <!></div> <!></div> <div class="reason-body svelte-15a1m3"><div class="pins-row svelte-15a1m3"><div class="pin pin-in svelte-15a1m3"><span class="pin-dot svelte-15a1m3"></span><span class="pin-label svelte-15a1m3">Exec In</span></div> <div class="pin pin-out svelte-15a1m3"><span class="pin-label svelte-15a1m3">Exec Out</span><span class="pin-dot svelte-15a1m3"></span></div></div> <!> <!></div> <!> <!></div>');function dm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const N=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(N)}else y(o,!1)});var r=cm();let i;var s=d(r),l=d(s),u=d(l);let v;var p=h(u,2),m=d(p);xo(m,{size:14}),c(p);var f=h(p,2),w=d(f,!0);c(f);var S=h(f,2);{var z=N=>{var E=om(),C=d(E);an(C,{size:12}),c(E),on(3,E,()=>rn,()=>({duration:200,start:.6})),g(N,E)};W(S,N=>{a(o)&&N(z)})}var P=h(S,2);{var L=N=>{var E=rm(),C=d(E);Qt(C,{size:12}),c(E),g(N,E)};W(P,N=>{a(n)==="error"&&N(L)})}c(l);var A=h(l,2);{var V=N=>{var E=sm(),C=d(E,!0);c(E),U(()=>Y(C,e.data.pattern)),g(N,E)};W(A,N=>{e.data.pattern&&N(V)})}c(s);var M=h(s,2),O=h(d(M),2);{var b=N=>{var E=im(),C=d(E);c(E),U((_,T)=>Y(C,`${_??""}${T??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),g(N,E)};W(O,N=>{e.data.description&&N(b)})}var I=h(O,2);{var H=N=>{var E=lm(),C=h(d(E),2),_=d(C,!0);c(C),c(E),U(()=>Y(_,e.data.maxSteps)),g(N,E)};W(I,N=>{e.data.maxSteps&&N(H)})}c(M);var B=h(M,2);bt(B,{type:"target",get position(){return Se.Left}});var X=h(B,2);bt(X,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"reason-node svelte-15a1m3",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),v=Oe(u,1,"status-dot svelte-15a1m3",null,v,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(o)}),Y(w,e.data.label||"Reasoning")}),g(t,r),Ne()}var um=x('<span class="state-icon svelte-9dvt8o"><!></span>'),vm=x('<span class="state-icon state-error svelte-9dvt8o"><!></span>'),fm=x('<div class="condition-expr svelte-9dvt8o"><code class="expr-code svelte-9dvt8o"> </code></div>'),pm=x('<div class="cond-description svelte-9dvt8o"> </div>'),hm=x('<div><div class="cond-header svelte-9dvt8o"><div class="hex-accent svelte-9dvt8o"></div> <div class="header-content svelte-9dvt8o"><span></span> <!> <span class="cond-title svelte-9dvt8o"> </span> <!> <!></div></div> <div class="cond-body svelte-9dvt8o"><!> <!> <div class="branch-pins svelte-9dvt8o"><div class="branch-in svelte-9dvt8o"><span class="pin-dot dot-in svelte-9dvt8o"></span> <span class="pin-label svelte-9dvt8o">In</span></div> <div class="branch-outputs svelte-9dvt8o"><div class="branch-out branch-true svelte-9dvt8o"><span class="pin-label label-true svelte-9dvt8o">True</span> <span class="pin-dot dot-true svelte-9dvt8o"></span></div> <div class="branch-out branch-false svelte-9dvt8o"><span class="pin-label label-false svelte-9dvt8o">False</span> <span class="pin-dot dot-false svelte-9dvt8o"></span></div></div></div></div> <!> <!> <!></div>');function gm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const B=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(B)}else y(o,!1)});var r=hm();let i;var s=d(r),l=h(d(s),2),u=d(l);let v;var p=h(u,2);Ma(p,{size:13});var m=h(p,2),f=d(m,!0);c(m);var w=h(m,2);{var S=B=>{var X=um(),N=d(X);an(N,{size:12}),c(X),on(3,X,()=>rn,()=>({duration:200,start:.6})),g(B,X)};W(w,B=>{a(o)&&B(S)})}var z=h(w,2);{var P=B=>{var X=vm(),N=d(X);Qt(N,{size:12}),c(X),g(B,X)};W(z,B=>{a(n)==="error"&&B(P)})}c(l),c(s);var L=h(s,2),A=d(L);{var V=B=>{var X=fm(),N=d(X),E=d(N,!0);c(N),c(X),U(()=>Y(E,e.data.condition)),g(B,X)};W(A,B=>{e.data.condition&&B(V)})}var M=h(A,2);{var O=B=>{var X=pm(),N=d(X);c(X),U((E,C)=>Y(N,`${E??""}${C??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),g(B,X)};W(M,B=>{e.data.description&&B(O)})}he(2),c(L);var b=h(L,2);bt(b,{type:"target",get position(){return Se.Left}});var I=h(b,2);bt(I,{type:"source",get position(){return Se.Right},id:"true",style:"top: 35%;"});var H=h(I,2);bt(H,{type:"source",get position(){return Se.Right},id:"false",style:"top: 65%;"}),c(r),U(()=>{i=Oe(r,1,"cond-node svelte-9dvt8o",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),v=Oe(u,1,"status-dot svelte-9dvt8o",null,v,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(o)}),Y(f,e.data.label||"Condition")}),g(t,r),Ne()}var mm=x('<span class="bp-state svelte-mcwl9o"><!></span>'),_m=x('<span class="bp-state bp-state-error svelte-mcwl9o"><!></span>'),ym=x('<div class="bp-prop svelte-mcwl9o"><span class="bp-key svelte-mcwl9o">action</span><span class="bp-val svelte-mcwl9o"> </span></div>'),bm=x('<div class="bp-prop svelte-mcwl9o"><span class="bp-key svelte-mcwl9o">namespace</span><span class="bp-val svelte-mcwl9o"> </span></div>'),xm=x('<div><div class="bp-header svelte-mcwl9o"><!> <span class="bp-title svelte-mcwl9o"> </span> <!> <!></div> <div class="bp-body svelte-mcwl9o"><div class="bp-pins svelte-mcwl9o"><div class="bp-pin-in svelte-mcwl9o"><span class="bp-dot svelte-mcwl9o"></span><span class="bp-pin-label">Exec In</span></div> <div class="bp-pin-out svelte-mcwl9o"><span class="bp-pin-label">Exec Out</span><span class="bp-dot svelte-mcwl9o"></span></div></div> <!> <!></div> <!> <!></div>');function wm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const O=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(O)}else y(o,!1)});var r=xm();let i;var s=d(r),l=d(s);Vr(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=O=>{var b=mm(),I=d(b);an(I,{size:12}),c(b),on(3,b,()=>rn,()=>({duration:200,start:.6})),g(O,b)};W(p,O=>{a(o)&&O(m)})}var f=h(p,2);{var w=O=>{var b=_m(),I=d(b);Qt(I,{size:12}),c(b),g(O,b)};W(f,O=>{a(n)==="error"&&O(w)})}c(s);var S=h(s,2),z=h(d(S),2);{var P=O=>{var b=ym(),I=h(d(b)),H=d(I,!0);c(I),c(b),U(()=>Y(H,e.data.memory_action)),g(O,b)};W(z,O=>{e.data.memory_action&&O(P)})}var L=h(z,2);{var A=O=>{var b=bm(),I=h(d(b)),H=d(I,!0);c(I),c(b),U(()=>Y(H,e.data.namespace)),g(O,b)};W(L,O=>{e.data.namespace&&O(A)})}c(S);var V=h(S,2);bt(V,{type:"target",get position(){return Se.Left}});var M=h(V,2);bt(M,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"bp-node svelte-mcwl9o",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(v,e.data.label||"Memory")}),g(t,r),Ne()}var km=x('<span class="bp-state svelte-1y5xb8x"><!></span>'),zm=x('<span class="bp-state bp-state-error svelte-1y5xb8x"><!></span>'),Sm=x('<div class="bp-prop svelte-1y5xb8x"><span class="bp-key svelte-1y5xb8x">rule</span><span class="bp-val svelte-1y5xb8x"> </span></div>'),Cm=x('<div class="bp-prop svelte-1y5xb8x"><span class="bp-key svelte-1y5xb8x">on_fail</span><span class="bp-val svelte-1y5xb8x"> </span></div>'),Em=x('<div><div class="bp-header svelte-1y5xb8x"><!> <span class="bp-title svelte-1y5xb8x"> </span> <!> <!></div> <div class="bp-body svelte-1y5xb8x"><div class="bp-pins svelte-1y5xb8x"><div class="bp-pin-in svelte-1y5xb8x"><span class="bp-dot svelte-1y5xb8x"></span><span class="bp-pin-label">Exec In</span></div> <div class="bp-pin-out svelte-1y5xb8x"><span class="bp-pin-label">Exec Out</span><span class="bp-dot svelte-1y5xb8x"></span></div></div> <!> <!></div> <!> <!></div>');function Nm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const O=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(O)}else y(o,!1)});var r=Em();let i;var s=d(r),l=d(s);Fr(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=O=>{var b=km(),I=d(b);an(I,{size:12}),c(b),on(3,b,()=>rn,()=>({duration:200,start:.6})),g(O,b)};W(p,O=>{a(o)&&O(m)})}var f=h(p,2);{var w=O=>{var b=zm(),I=d(b);Qt(I,{size:12}),c(b),g(O,b)};W(f,O=>{a(n)==="error"&&O(w)})}c(s);var S=h(s,2),z=h(d(S),2);{var P=O=>{var b=Sm(),I=h(d(b)),H=d(I,!0);c(I),c(b),U(()=>Y(H,e.data.validation_rule)),g(O,b)};W(z,O=>{e.data.validation_rule&&O(P)})}var L=h(z,2);{var A=O=>{var b=Cm(),I=h(d(b)),H=d(I,!0);c(I),c(b),U(()=>Y(H,e.data.fail_action)),g(O,b)};W(L,O=>{e.data.fail_action&&O(A)})}c(S);var V=h(S,2);bt(V,{type:"target",get position(){return Se.Left}});var M=h(V,2);bt(M,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"bp-node svelte-1y5xb8x",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(v,e.data.label||"Validator")}),g(t,r),Ne()}var Pm=x('<span class="bp-state svelte-1ebq9zd"><!></span>'),Mm=x('<span class="bp-state bp-state-error svelte-1ebq9zd"><!></span>'),Tm=x('<div class="bp-prop svelte-1ebq9zd"><span class="bp-key svelte-1ebq9zd">desc</span><span class="bp-val svelte-1ebq9zd"> </span></div>'),Im=x('<div class="bp-prop svelte-1ebq9zd"><span class="bp-key svelte-1ebq9zd">code</span><span class="bp-val svelte-1ebq9zd"> </span></div>'),Am=x('<div><div class="bp-header svelte-1ebq9zd"><!> <span class="bp-title svelte-1ebq9zd"> </span> <!> <!></div> <div class="bp-body svelte-1ebq9zd"><div class="bp-pins svelte-1ebq9zd"><div class="bp-pin-in svelte-1ebq9zd"><span class="bp-dot svelte-1ebq9zd"></span><span class="bp-pin-label">In</span></div> <div class="bp-pin-out svelte-1ebq9zd"><span class="bp-pin-label">Out</span><span class="bp-dot svelte-1ebq9zd"></span></div></div> <!> <!></div> <!> <!></div>');function Dm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const O=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(O)}else y(o,!1)});var r=Am();let i;var s=d(r),l=d(s);qa(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=O=>{var b=Pm(),I=d(b);an(I,{size:12}),c(b),on(3,b,()=>rn,()=>({duration:200,start:.6})),g(O,b)};W(p,O=>{a(o)&&O(m)})}var f=h(p,2);{var w=O=>{var b=Mm(),I=d(b);Qt(I,{size:12}),c(b),g(O,b)};W(f,O=>{a(n)==="error"&&O(w)})}c(s);var S=h(s,2),z=h(d(S),2);{var P=O=>{var b=Tm(),I=h(d(b)),H=d(I,!0);c(I),c(b),U(()=>Y(H,e.data.description)),g(O,b)};W(z,O=>{e.data.description&&O(P)})}var L=h(z,2);{var A=O=>{var b=Im(),I=h(d(b)),H=d(I);c(I),c(b),U((B,X)=>Y(H,`${B??""}${X??""}`),[()=>String(e.data.code).split(`
`)[0].slice(0,30),()=>String(e.data.code).length>30?"...":""]),g(O,b)};W(L,O=>{e.data.code&&O(A)})}c(S);var V=h(S,2);bt(V,{type:"target",get position(){return Se.Left}});var M=h(V,2);bt(M,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"bp-node svelte-1ebq9zd",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(v,e.data.label||"Code")}),g(t,r),Ne()}var Om=x('<span class="bp-state svelte-5h9d64"><!></span>'),Rm=x('<span class="bp-state bp-state-error svelte-5h9d64"><!></span>'),Lm=x('<div class="bp-prop svelte-5h9d64"><span class="bp-key svelte-5h9d64">split</span><span class="bp-val svelte-5h9d64"> </span></div>'),Vm=x('<div class="bp-prop svelte-5h9d64"><span class="bp-key svelte-5h9d64">max</span><span class="bp-val svelte-5h9d64"> </span></div>'),Hm=x('<div><div class="bp-header svelte-5h9d64"><!> <span class="bp-title svelte-5h9d64"> </span> <!> <!></div> <div class="bp-body svelte-5h9d64"><div class="bp-pins-multi svelte-5h9d64"><div class="bp-pin-col-left svelte-5h9d64"><div class="bp-pin-in svelte-5h9d64"><span class="bp-dot svelte-5h9d64"></span><span class="bp-pin-label">In</span></div></div> <div class="bp-pin-col-right svelte-5h9d64"><div class="bp-pin-out svelte-5h9d64"><span class="bp-pin-label">Out 1</span><span class="bp-dot svelte-5h9d64"></span></div> <div class="bp-pin-out svelte-5h9d64"><span class="bp-pin-label">Out 2</span><span class="bp-dot svelte-5h9d64"></span></div></div></div> <!> <!></div> <!> <!> <!></div>');function Fm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const b=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(b)}else y(o,!1)});var r=Hm();let i;var s=d(r),l=d(s);qr(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=b=>{var I=Om(),H=d(I);an(H,{size:12}),c(I),on(3,I,()=>rn,()=>({duration:200,start:.6})),g(b,I)};W(p,b=>{a(o)&&b(m)})}var f=h(p,2);{var w=b=>{var I=Rm(),H=d(I);Qt(H,{size:12}),c(I),g(b,I)};W(f,b=>{a(n)==="error"&&b(w)})}c(s);var S=h(s,2),z=h(d(S),2);{var P=b=>{var I=Lm(),H=h(d(I)),B=d(H,!0);c(H),c(I),U(()=>Y(B,e.data.split_expression)),g(b,I)};W(z,b=>{e.data.split_expression&&b(P)})}var L=h(z,2);{var A=b=>{var I=Vm(),H=h(d(I)),B=d(H,!0);c(H),c(I),U(()=>Y(B,e.data.max_concurrent)),g(b,I)};W(L,b=>{e.data.max_concurrent&&b(A)})}c(S);var V=h(S,2);bt(V,{type:"target",get position(){return Se.Left}});var M=h(V,2);bt(M,{type:"source",get position(){return Se.Right},id:"out-1",style:"top: 33%;"});var O=h(M,2);bt(O,{type:"source",get position(){return Se.Right},id:"out-2",style:"top: 66%;"}),c(r),U(()=>{i=Oe(r,1,"bp-node svelte-5h9d64",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(v,e.data.label||"Fan Out")}),g(t,r),Ne()}var qm=x('<span class="bp-state svelte-k2gv2h"><!></span>'),Bm=x('<span class="bp-state bp-state-error svelte-k2gv2h"><!></span>'),Km=x('<div class="bp-prop svelte-k2gv2h"><span class="bp-key svelte-k2gv2h">merge</span><span class="bp-val svelte-k2gv2h"> </span></div>'),jm=x('<div class="bp-prop svelte-k2gv2h"><span class="bp-key svelte-k2gv2h">timeout</span><span class="bp-val svelte-k2gv2h"> </span></div>'),Wm=x('<div><div class="bp-header svelte-k2gv2h"><!> <span class="bp-title svelte-k2gv2h"> </span> <!> <!></div> <div class="bp-body svelte-k2gv2h"><div class="bp-pins-multi svelte-k2gv2h"><div class="bp-pin-col-left svelte-k2gv2h"><div class="bp-pin-in svelte-k2gv2h"><span class="bp-dot svelte-k2gv2h"></span><span class="bp-pin-label">In 1</span></div> <div class="bp-pin-in svelte-k2gv2h"><span class="bp-dot svelte-k2gv2h"></span><span class="bp-pin-label">In 2</span></div></div> <div class="bp-pin-col-right svelte-k2gv2h"><div class="bp-pin-out svelte-k2gv2h"><span class="bp-pin-label">Out</span><span class="bp-dot svelte-k2gv2h"></span></div></div></div> <!> <!></div> <!> <!> <!></div>');function Zm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=G(!1);xe(()=>{if(a(n)==="complete"){y(o,!0);const b=setTimeout(()=>{y(o,!1)},3e3);return()=>clearTimeout(b)}else y(o,!1)});var r=Wm();let i;var s=d(r),l=d(s);Br(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=b=>{var I=qm(),H=d(I);an(H,{size:12}),c(I),on(3,I,()=>rn,()=>({duration:200,start:.6})),g(b,I)};W(p,b=>{a(o)&&b(m)})}var f=h(p,2);{var w=b=>{var I=Bm(),H=d(I);Qt(H,{size:12}),c(I),g(b,I)};W(f,b=>{a(n)==="error"&&b(w)})}c(s);var S=h(s,2),z=h(d(S),2);{var P=b=>{var I=Km(),H=h(d(I)),B=d(H,!0);c(H),c(I),U(()=>Y(B,e.data.merge_expression)),g(b,I)};W(z,b=>{e.data.merge_expression&&b(P)})}var L=h(z,2);{var A=b=>{var I=jm(),H=h(d(I)),B=d(H);c(H),c(I),U(()=>Y(B,`${e.data.merge_timeout??""}s`)),g(b,I)};W(L,b=>{e.data.merge_timeout&&b(A)})}c(S);var V=h(S,2);bt(V,{type:"target",get position(){return Se.Left},id:"in-1",style:"top: 33%;"});var M=h(V,2);bt(M,{type:"target",get position(){return Se.Left},id:"in-2",style:"top: 66%;"});var O=h(M,2);bt(O,{type:"source",get position(){return Se.Right}}),c(r),U(()=>{i=Oe(r,1,"bp-node svelte-k2gv2h",null,i,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(v,e.data.label||"Fan In")}),g(t,r),Ne()}var Ym=x('<span class="state-icon svelte-170rmgf"><!></span>'),Xm=x('<span class="state-icon state-error svelte-170rmgf"><!></span>'),Gm=x('<div class="description-text svelte-170rmgf"> </div>'),Um=x('<div><div class="input-header svelte-170rmgf"><div class="header-top-row svelte-170rmgf"><div class="header-badges svelte-170rmgf"><span class="trigger-badge svelte-170rmgf"> </span></div> <span class="settings-icon svelte-170rmgf"><!></span></div> <div class="header-main-row svelte-170rmgf"><span></span> <div class="icon-wrap svelte-170rmgf"><!></div> <span class="input-title svelte-170rmgf"> </span> <!> <!></div></div> <div class="input-body svelte-170rmgf"><div class="pins-row svelte-170rmgf"><div class="pin-spacer svelte-170rmgf"></div> <div class="pin pin-out svelte-170rmgf"><span class="pin-label svelte-170rmgf">Exec Out</span><span class="pin-dot svelte-170rmgf"></span></div></div> <!> <div class="config-section svelte-170rmgf"><span class="section-label svelte-170rmgf">Trigger Config</span> <p class="config-text svelte-170rmgf"> </p></div></div> <!></div>');function Jm(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=k(()=>e.data.trigger_type??"Manual"),r=G(!1),i=k(()=>()=>{switch(a(o).toLowerCase()){case"http":return e.data.endpoint?`${e.data.method??"POST"} ${e.data.endpoint}`:"HTTP endpoint";case"queue":return e.data.queue_name?`Queue: ${e.data.queue_name}`:"Message queue";case"schedule":return e.data.cron?`Cron: ${e.data.cron}`:"Scheduled trigger";case"file":return e.data.watch_path?`Watch: ${e.data.watch_path}`:"File watcher";default:return"Manual execution"}});xe(()=>{if(a(n)==="complete"){y(r,!0);const R=setTimeout(()=>{y(r,!1)},3e3);return()=>clearTimeout(R)}else y(r,!1)});var s=Um();let l;var u=d(s),v=d(u),p=d(v),m=d(p),f=d(m,!0);c(m),c(p);var w=h(p,2),S=d(w);Hr(S,{size:11}),c(w),c(v);var z=h(v,2),P=d(z);let L;var A=h(P,2),V=d(A);bi(V,{size:14}),c(A);var M=h(A,2),O=d(M,!0);c(M);var b=h(M,2);{var I=R=>{var F=Ym(),q=d(F);an(q,{size:13}),c(F),on(3,F,()=>rn,()=>({duration:200,start:.6})),g(R,F)};W(b,R=>{a(r)&&R(I)})}var H=h(b,2);{var B=R=>{var F=Xm(),q=d(F);Qt(q,{size:13}),c(F),g(R,F)};W(H,R=>{a(n)==="error"&&R(B)})}c(z),c(u);var X=h(u,2),N=h(d(X),2);{var E=R=>{var F=Gm(),q=d(F);c(F),U((K,Z)=>Y(q,`${K??""}${Z??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),g(R,F)};W(N,R=>{e.data.description&&R(E)})}var C=h(N,2),_=h(d(C),2),T=d(_,!0);c(_),c(C),c(X);var D=h(X,2);bt(D,{type:"source",get position(){return Se.Right}}),c(s),U(R=>{l=Oe(s,1,"input-node svelte-170rmgf",null,l,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(f,a(o)),L=Oe(P,1,"status-dot svelte-170rmgf",null,L,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(r)}),Y(O,e.data.label||"Input"),Y(T,R)},[()=>a(i)()]),g(t,s),Ne()}var Qm=x('<span class="state-icon svelte-198t6xy"><!></span>'),$m=x('<span class="state-icon state-error svelte-198t6xy"><!></span>'),e1=x('<div class="description-text svelte-198t6xy"> </div>'),t1=x('<div><div class="output-header svelte-198t6xy"><div class="header-top-row svelte-198t6xy"><div class="header-badges svelte-198t6xy"><span class="dest-badge svelte-198t6xy"> </span></div> <span class="settings-icon svelte-198t6xy"><!></span></div> <div class="header-main-row svelte-198t6xy"><span></span> <div class="icon-wrap svelte-198t6xy"><!></div> <span class="output-title svelte-198t6xy"> </span> <!> <!></div></div> <div class="output-body svelte-198t6xy"><div class="pins-row svelte-198t6xy"><div class="pin pin-in svelte-198t6xy"><span class="pin-dot svelte-198t6xy"></span><span class="pin-label svelte-198t6xy">Exec In</span></div> <div class="pin-spacer svelte-198t6xy"></div></div> <!> <div class="config-section svelte-198t6xy"><span class="section-label svelte-198t6xy">Destination Config</span> <p class="config-text svelte-198t6xy"> </p></div></div> <!></div>');function n1(t,e){Ee(e,!0);let n=k(()=>e.data._executionState??"idle"),o=k(()=>e.data.destination_type??"Response"),r=G(!1),i=k(()=>()=>{switch(a(o).toLowerCase()){case"response":return e.data.format?`Format: ${e.data.format}`:"Direct response";case"queue":return e.data.queue_name?`Queue: ${e.data.queue_name}`:"Message queue";case"webhook":return e.data.webhook_url?`URL: ${e.data.webhook_url}`:"Webhook delivery";case"store":return e.data.store_path?`Path: ${e.data.store_path}`:"Persistent store";default:return"Output destination"}});xe(()=>{if(a(n)==="complete"){y(r,!0);const R=setTimeout(()=>{y(r,!1)},3e3);return()=>clearTimeout(R)}else y(r,!1)});var s=t1();let l;var u=d(s),v=d(u),p=d(v),m=d(p),f=d(m,!0);c(m),c(p);var w=h(p,2),S=d(w);Hr(S,{size:11}),c(w),c(v);var z=h(v,2),P=d(z);let L;var A=h(P,2),V=d(A);Vo(V,{size:14}),c(A);var M=h(A,2),O=d(M,!0);c(M);var b=h(M,2);{var I=R=>{var F=Qm(),q=d(F);an(q,{size:13}),c(F),on(3,F,()=>rn,()=>({duration:200,start:.6})),g(R,F)};W(b,R=>{a(r)&&R(I)})}var H=h(b,2);{var B=R=>{var F=$m(),q=d(F);Qt(q,{size:13}),c(F),g(R,F)};W(H,R=>{a(n)==="error"&&R(B)})}c(z),c(u);var X=h(u,2),N=h(d(X),2);{var E=R=>{var F=e1(),q=d(F);c(F),U((K,Z)=>Y(q,`${K??""}${Z??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),g(R,F)};W(N,R=>{e.data.description&&R(E)})}var C=h(N,2),_=h(d(C),2),T=d(_,!0);c(_),c(C),c(X);var D=h(X,2);bt(D,{type:"target",get position(){return Se.Left}}),c(s),U(R=>{l=Oe(s,1,"output-node svelte-198t6xy",null,l,{"exec-running":a(n)==="running","exec-complete":a(n)==="complete","exec-error":a(n)==="error"}),Y(f,a(o)),L=Oe(P,1,"status-dot svelte-198t6xy",null,L,{"dot-idle":a(n)==="idle","dot-running":a(n)==="running","dot-error":a(n)==="error","dot-complete":a(n)==="complete"||a(r)}),Y(O,e.data.label||"Output"),Y(T,R)},[()=>a(i)()]),g(t,s),Ne()}var a1=x("<!> <!> <!>",1),o1=x('<div class="stats-bar svelte-e4xfdd"><div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Nodes</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Agents</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Tools</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Links</span> <span class="stat-value svelte-e4xfdd"> </span></div></div>'),r1=x('<div class="empty-overlay svelte-e4xfdd"><div class="empty-container svelte-e4xfdd"><!> <h2 class="empty-headline svelte-e4xfdd">Start building your pipeline</h2> <p class="empty-hint svelte-e4xfdd">Click components in the left panel to add them, or press Cmd+K to search</p></div></div>'),s1=x('<div class="canvas-wrapper svelte-e4xfdd"><!> <!> <!></div>');function i1(t,e){Ee(e,!0);const n=()=>dt(qn,"$nodes",r),o=()=>dt(Fn,"$edges",r),[r,i]=Xt(),s={input:Jm,output:n1,agent:Ug,tool:am,reasoning:dm,condition:gm,memory:wm,validator:Nm,custom_code:Dm,fan_out:Fm,fan_in:Zm};let l=k(()=>n().length===0),u=k(()=>n().length),v=k(()=>n().filter(A=>A.type==="agent").length),p=k(()=>n().filter(A=>A.type==="tool").length),m=k(()=>o().length);var f=s1(),w=d(f);fg(w,{get nodeTypes(){return s},fitView:!0,colorMode:"dark",defaultEdgeOptions:{type:"smoothstep",animated:!0,style:"stroke: #cbd5e1; stroke-width: 2.5px;"},onnodeclick:({node:A})=>Nn.set(A.id),onpaneclick:()=>Nn.set(null),get nodes(){return ys(),n()},set nodes(A){_s(qn,A)},get edges(){return ys(),o()},set edges(A){_s(Fn,A)},children:(A,V)=>{var M=a1(),O=oe(M);Eg(O,{position:"bottom-left"});var b=h(O,2);Bg(b,{position:"bottom-right"});var I=h(b,2);Dg(I,{get variant(){return kn.Dots},gap:24,size:1,color:"#2a2a3a"}),g(A,M)},$$slots:{default:!0}});var S=h(w,2);{var z=A=>{var V=o1(),M=d(V),O=d(M);Zc(O,{size:12});var b=h(O,4),I=d(b,!0);c(b),c(M);var H=h(M,4),B=d(H);Pa(B,{size:12});var X=h(B,4),N=d(X,!0);c(X),c(H);var E=h(H,4),C=d(E);Kn(C,{size:12});var _=h(C,4),T=d(_,!0);c(_),c(E);var D=h(E,4),R=d(D);Yc(R,{size:12});var F=h(R,4),q=d(F,!0);c(F),c(D),c(V),U(()=>{Y(I,a(u)),Y(N,a(v)),Y(T,a(p)),Y(q,a(m))}),g(A,V)};W(S,A=>{a(l)||A(z)})}var P=h(S,2);{var L=A=>{var V=r1(),M=d(V),O=d(M);vd(O,{size:40}),he(4),c(M),c(V),g(A,V)};W(P,A=>{a(l)&&A(L)})}c(f),g(t,f),Ne(),i()}var l1=x('<textarea class="field-input field-textarea svelte-nvi5du" rows="3"></textarea>'),c1=x('<input class="field-input svelte-nvi5du" type="number"/>'),d1=x('<option class="svelte-nvi5du"> </option>'),u1=x('<select class="field-input field-select svelte-nvi5du"></select>'),v1=x("<option></option>"),f1=x('<input class="field-input svelte-nvi5du" type="text"/> <datalist></datalist>',1),p1=x('<input class="field-input svelte-nvi5du" type="text"/>'),h1=x('<div class="form-field svelte-nvi5du"><label class="field-label svelte-nvi5du"> </label> <!></div>');function Ae(t,e){Ee(e,!0);let n=ue(e,"type",3,"text"),o=ue(e,"value",15,""),r=ue(e,"placeholder",3,""),i=ue(e,"options",19,()=>[]);const s=Math.random().toString(36).slice(2,8);let l=k(()=>`field-${(e.label??"input").replace(/\s+/g,"-").toLowerCase()}-${s}`),u=k(()=>`dl-${(e.label??"input").replace(/\s+/g,"-").toLowerCase()}-${s}`);function v(V){const M=V.target;M.style.height="auto",M.style.height=M.scrollHeight+"px"}var p=h1(),m=d(p),f=d(m,!0);c(m);var w=h(m,2);{var S=V=>{var M=l1();Rr(M),U(()=>{ze(M,"id",a(l)),ze(M,"placeholder",r())}),fe("input",M,v),Lt(M,o),g(V,M)},z=V=>{var M=c1();Nt(M),U(()=>{ze(M,"id",a(l)),ze(M,"placeholder",r())}),Lt(M,o),g(V,M)},P=V=>{var M=u1();Qe(M,21,i,Vt,(O,b)=>{var I=d1(),H=d(I,!0);c(I);var B={};U(()=>{Y(H,a(b)),B!==(B=a(b))&&(I.value=(I.__value=a(b))??"")}),g(O,I)}),c(M),U(()=>ze(M,"id",a(l))),za(M,o),g(V,M)},L=V=>{var M=f1(),O=oe(M);Nt(O);var b=h(O,2);Qe(b,21,i,Vt,(I,H)=>{var B=v1(),X={};U(()=>{X!==(X=a(H))&&(B.value=(B.__value=a(H))??"")}),g(I,B)}),c(b),U(()=>{ze(O,"id",a(l)),ze(O,"placeholder",r()),ze(O,"list",a(u)),ze(b,"id",a(u))}),Lt(O,o),g(V,M)},A=V=>{var M=p1();Nt(M),U(()=>{ze(M,"id",a(l)),ze(M,"placeholder",r())}),Lt(M,o),g(V,M)};W(w,V=>{n()==="textarea"?V(S):n()==="number"?V(z,1):n()==="select"?V(P,2):n()==="datalist"?V(L,3):V(A,!1)})}c(p),U(()=>{ze(m,"for",a(l)),Y(f,e.label)}),g(t,p),Ne()}Tt(["input"]);const Hl=[{id:"calculator",name:"Calculator",description:"Safe mathematical expression evaluator. Supports arithmetic, functions (sqrt, sin, cos, log, etc.), and constants (pi, e).",category:"Utility",tags:["math","calculator","utility"],parameters:[{name:"expression",type:"string",description:"Math expression to evaluate",required:!0}]},{id:"datetime",name:"Date & Time",description:"Current date/time information with timezone support.",category:"Utility",tags:["datetime","utility"],parameters:[{name:"action",type:"select",description:"What to retrieve",required:!0,options:["now","date","time","timestamp","timezones"]},{name:"timezone",type:"string",description:"IANA timezone (e.g. America/New_York)",required:!1,default:"UTC"},{name:"format",type:"string",description:"strftime format string",required:!1}]},{id:"filesystem",name:"File System",description:"Read, write, and list files. Sandboxed to a base directory with path-traversal protection.",category:"I/O",tags:["filesystem","io"],parameters:[{name:"action",type:"select",description:"File operation",required:!0,options:["read","write","list"]},{name:"path",type:"string",description:"File or directory path",required:!0},{name:"content",type:"string",description:"Content to write (for write action)",required:!1}]},{id:"http",name:"HTTP Client",description:"Make HTTP requests with connection pooling. Supports GET, POST, PUT, DELETE.",category:"Web",tags:["http","web"],parameters:[{name:"url",type:"string",description:"Target URL",required:!0},{name:"method",type:"select",description:"HTTP method",required:!1,default:"GET",options:["GET","POST","PUT","DELETE","PATCH"]},{name:"body",type:"string",description:"Request body (JSON)",required:!1},{name:"headers",type:"string",description:"Request headers (JSON)",required:!1}]},{id:"json",name:"JSON",description:"Parse, validate, extract, and format JSON data. Supports dot-path extraction.",category:"Utility",tags:["json","utility"],parameters:[{name:"action",type:"select",description:"JSON operation",required:!0,options:["parse","validate","extract","format","keys"]},{name:"data",type:"string",description:"JSON data to process",required:!0},{name:"path",type:"string",description:"Dot-path for extraction (e.g. address.city)",required:!1}]},{id:"text",name:"Text Processing",description:"Count, extract, truncate, replace, and split text using regex patterns.",category:"Utility",tags:["text","utility"],parameters:[{name:"action",type:"select",description:"Text operation",required:!0,options:["count","extract","truncate","replace","split"]},{name:"text",type:"string",description:"Input text",required:!0},{name:"pattern",type:"string",description:"Regex pattern (for extract/replace/split)",required:!1},{name:"replacement",type:"string",description:"Replacement string (for replace)",required:!1}]},{id:"shell",name:"Shell",description:"Execute shell commands from an explicit allowlist. Sandboxed for safety.",category:"System",tags:["shell","system"],parameters:[{name:"command",type:"string",description:"Command to execute (must be in allowlist)",required:!0}]},{id:"search",name:"Search",description:"Web search tool (abstract -- requires implementation of _search method).",category:"Web",tags:["search","web"],parameters:[{name:"query",type:"string",description:"Search query",required:!0}]},{id:"database",name:"Database",description:"Execute SQL queries (abstract -- requires implementation). Read-only by default with SQL injection detection.",category:"I/O",tags:["database","sql"],parameters:[{name:"query",type:"string",description:"SQL query (SELECT/WITH only in read-only mode)",required:!0},{name:"params",type:"string",description:"Query parameters (JSON)",required:!1}]}];function g1(t){return Hl.find(e=>e.id===t)}const Fl=[{id:"react",name:"ReAct",description:"Reason-Act-Observe loop. The agent thinks, takes an action (tool call), observes the result, and repeats until done.",defaultMaxSteps:10,bestFor:"Tasks requiring tool interaction and iterative problem-solving",configKeys:["max_steps"]},{id:"chain_of_thought",name:"Chain of Thought",description:"Step-by-step reasoning without actions. The agent breaks down the problem into logical steps and thinks through each one.",defaultMaxSteps:10,bestFor:"Pure logic, analysis, and reasoning tasks without tool needs",configKeys:["max_steps"]},{id:"plan_and_execute",name:"Plan & Execute",description:"Generates a multi-step plan first, then executes each step sequentially. Can replan on failure.",defaultMaxSteps:15,bestFor:"Complex multi-step tasks that benefit from upfront planning",configKeys:["max_steps","allow_replan"]},{id:"reflexion",name:"Reflexion",description:"Execute-Critique-Retry loop. Generates output, critiques it for quality, and retries with feedback if unsatisfactory.",defaultMaxSteps:5,bestFor:"Quality-sensitive outputs that benefit from self-review",configKeys:["max_steps"]},{id:"tree_of_thoughts",name:"Tree of Thoughts",description:"Generates multiple solution branches, evaluates each with a score, and selects the best. Explores the solution space broadly.",defaultMaxSteps:3,bestFor:"Creative and exploratory problems with multiple valid approaches",configKeys:["branching_factor","max_depth"]},{id:"goal_decomposition",name:"Goal Decomposition",description:"Breaks a large goal into phases and tasks, then executes each task. Can delegate sub-tasks to other patterns.",defaultMaxSteps:20,bestFor:"Large ambiguous goals that need structured decomposition",configKeys:["max_steps","task_pattern"]}];function m1(t){return Fl.find(e=>e.id===t)}var _1=x('<!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Exposes an HTTP endpoint that triggers this pipeline when called.</p></div>',1),y1=x("<!> <!> <!>",1),b1=x('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Runs the pipeline on a schedule using standard cron syntax.</p></div>',1),x1=x("<!> <!>",1),w1=x('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Manual trigger. Run the pipeline via the Run button or API call.</p></div>'),k1=x("<!> <!> <!> <!>",1),z1=x("<!> <!>",1),S1=x("<!> <!>",1),C1=x('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Returns the pipeline output as an API response.</p></div>'),E1=x("<!> <!> <!> <!>",1),N1=x('<div class="mm-options svelte-16rdffs"><div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Accepted file types</span> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>Images</span></label> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>PDFs</span></label> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>Documents</span></label></div> <div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Max file size</span> <div class="mm-range-row svelte-16rdffs"><input type="range" class="mm-range svelte-16rdffs" min="1" max="50" step="1"/> <span class="mm-range-val svelte-16rdffs"> </span></div></div> <div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Image detail</span> <div class="mm-radio-row svelte-16rdffs"><label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>Auto</span></label> <label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>Low</span></label> <label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>High</span></label></div></div></div>'),P1=x('<!> <div class="form-field svelte-16rdffs"><label class="field-label svelte-16rdffs">MODEL</label> <!></div> <!> <!> <!> <!> <div class="mm-section svelte-16rdffs"><button class="mm-toggle svelte-16rdffs"><span class="mm-toggle-label svelte-16rdffs">Multimodal</span> <span><span class="mm-toggle-thumb svelte-16rdffs"></span></span></button> <!></div>',1),M1=x('<div class="info-param-row svelte-16rdffs"><span class="info-param-name svelte-16rdffs"> </span> <span class="info-param-type svelte-16rdffs"> </span></div>'),T1=x('<div class="info-params svelte-16rdffs"></div>'),I1=x('<div class="info-card svelte-16rdffs"><div class="info-card-header svelte-16rdffs"><!> <span> </span></div> <p class="info-card-text svelte-16rdffs"> </p> <!></div>'),A1=x('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Custom tool. Define the tool name as registered in the framework tool registry.</p></div>'),D1=x("<!> <!> <!> <!> <!>",1),O1=x('<div class="info-card svelte-16rdffs"><div class="info-card-header svelte-16rdffs"><!> <span> </span></div> <p class="info-card-text svelte-16rdffs"> </p> <p class="info-card-hint svelte-16rdffs"> </p></div>'),R1=x("<!> <!> <!> <!> <!>",1),L1=x('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Routes flow based on a key in the pipeline context. Connect the True and False handles to different downstream nodes. Use configure_node to set branches as a JSON dict mapping values to paths.</p></div>',1),V1=x('<p class="info-card-text svelte-16rdffs">Saves the current pipeline state/output to memory for later retrieval.</p>'),H1=x('<p class="info-card-text svelte-16rdffs">Loads previously saved state from memory and injects it into the pipeline context.</p>'),F1=x('<p class="info-card-text svelte-16rdffs">Wipes all stored memory. Use with caution.</p>'),q1=x('<p class="info-card-text svelte-16rdffs">Select an action: store saves data, retrieve loads it, clear wipes memory.</p>'),B1=x('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div> <!>',1),K1=x('<p class="info-card-text svelte-16rdffs">Ensures the output is not empty, null, or blank.</p>'),j1=x('<p class="info-card-text svelte-16rdffs">Validates that the output is a string type.</p>'),W1=x('<p class="info-card-text svelte-16rdffs">Validates that the output is a list/array.</p>'),Z1=x('<p class="info-card-text svelte-16rdffs">Validates that the output is a dictionary/object.</p>'),Y1=x('<p class="info-card-text svelte-16rdffs">Custom validation rule. Define the rule key as registered in the framework.</p>'),X1=x('<p class="info-card-text svelte-16rdffs">Select a validation rule to apply to the pipeline output before passing downstream.</p>'),G1=x('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div> <!>',1),U1=x('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Must define: <code>async def execute(context, inputs) -> Any</code></p></div>',1),J1=x('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Splits a single input into multiple items for parallel processing across downstream branches.</p></div>',1),Q1=x('<p class="info-card-text svelte-16rdffs">Concatenates all branch results into a single string.</p>'),$1=x('<p class="info-card-text svelte-16rdffs">Collects all branch results into a list.</p>'),e_=x('<p class="info-card-text svelte-16rdffs">Merges results from parallel branches back into a single output.</p>'),t_=x('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div>',1),n_=x('<button class="connection-item svelte-16rdffs"><span class="connection-node-name svelte-16rdffs"> </span> <!> <span class="connection-this svelte-16rdffs">this</span></button>'),a_=x('<div class="connection-group svelte-16rdffs"><span class="connection-label svelte-16rdffs">Inputs</span> <!></div>'),o_=x('<button class="connection-item svelte-16rdffs"><span class="connection-this svelte-16rdffs">this</span> <!> <span class="connection-node-name svelte-16rdffs"> </span></button>'),r_=x('<div class="connection-group svelte-16rdffs"><span class="connection-label svelte-16rdffs">Outputs</span> <!></div>'),s_=x('<div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs"><!> Connections</div> <div class="connections-list svelte-16rdffs"><!> <!></div></div>'),i_=x('<aside class="config-panel svelte-16rdffs"><div class="panel-header svelte-16rdffs"><div class="header-left svelte-16rdffs"><div class="header-icon svelte-16rdffs"><!></div> <div class="header-info svelte-16rdffs"><span class="header-title svelte-16rdffs"> </span> <span class="header-id svelte-16rdffs"> </span></div></div> <button class="close-btn svelte-16rdffs" title="Close panel"><!></button></div> <div class="panel-body svelte-16rdffs"><div class="node-type-row svelte-16rdffs"><span class="node-type-badge svelte-16rdffs"> </span></div> <div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs">Configuration</div> <div class="field-group svelte-16rdffs"><!></div></div> <!> <div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs">Position</div> <div class="position-row svelte-16rdffs"><span class="position-value svelte-16rdffs"> </span> <span class="position-value svelte-16rdffs"> </span></div></div> <div class="section danger-section svelte-16rdffs"><button class="delete-btn svelte-16rdffs" title="Delete this node"><!> <span>Delete Node</span></button></div></div></aside>');function l_(t,e){Ee(e,!0);const n=()=>dt(mc,"$selectedNode",s),o=()=>dt(Fn,"$edges",s),r=()=>dt(qn,"$nodes",s),i=()=>dt(Nn,"$selectedNodeId",s),[s,l]=Xt(),u=[],v={input:bi,output:Vo,agent:Pa,tool:Kn,reasoning:xo,condition:xi,memory:Vr,validator:Fr,custom_code:qa,fan_out:qr,fan_in:Br},p={input:"#10b981",output:"#3b82f6",agent:"#6366f1",tool:"#8b5cf6",reasoning:"#ec4899",condition:"#06b6d4",memory:"#06b6d4",validator:"#f59e0b",custom_code:"#3b82f6",fan_out:"#8888a0",fan_in:"#8888a0"},m={input:"Input",output:"Output",agent:"Agent",tool:"Tool",reasoning:"Reasoning",condition:"Condition",memory:"Memory",validator:"Validator",custom_code:"Custom Code",fan_out:"Fan Out",fan_in:"Fan In"},f=Fl.map(ie=>ie.id),w=["custom",...Hl.map(ie=>ie.id)];let S=k(()=>m1(a(O))),z=k(()=>g1(a(Z))),P=G(""),L=G(""),A=G(""),V=G(""),M=G(""),O=G(""),b=G(""),I=G(""),H=G(""),B=G(""),X=G(""),N=G(""),E=G(""),C=G(""),_=G(""),T=G(""),D=G(""),R=G(""),F=G(""),q=G(""),K=G(""),Z=G(""),ee=G(""),J=G(""),ne=G(""),le=G(""),re=G("manual"),Q=G("response"),j=G("kafka"),$=G(""),de=G(""),ce=G(""),te=G("UTC"),ae=G("POST"),be=G(!1),se=G("*/*"),ge=G("50"),_e=G(""),pe=G("file"),ye=G(""),me=G(""),ve=G(!1),ke=G(!0),Ve=G(!1),Re=G(!1),Ye=G(10),Le=G("auto"),at=G(null),wt=!1,st=k(()=>n()?o().filter(ie=>ie.target===n().id):[]),ot=k(()=>n()?o().filter(ie=>ie.source===n().id):[]);function ut(ie){const Me=r().find(it=>it.id===ie);return Me?.data?.label||Me?.id||ie}xe(()=>{const ie=n();ie&&ie.id!==a(at)&&(wt=!0,y(at,ie.id,!0),un(()=>{y(P,ie.data.label??"",!0),y(L,ie.data.model??"",!0),y(A,ie.data.instructions??"",!0),y(V,ie.data.description??"",!0),y(M,ie.data.timeout!=null?String(ie.data.timeout):"",!0),y(O,ie.data.pattern??"",!0),y(b,ie.data.maxSteps!=null?String(ie.data.maxSteps):"",!0),y(I,ie.data.condition??"",!0),y(H,ie.data.backend??"",!0),y(B,ie.data.connection_string??"",!0),y(X,ie.data.namespace??"",!0),y(N,ie.data.schema_type??"",!0),y(E,ie.data.validation_rules??"",!0),y(C,ie.data.fail_action??"",!0),y(_,ie.data.code??"",!0),y(T,ie.data.strategy??"",!0),y(D,ie.data.max_concurrent!=null?String(ie.data.max_concurrent):"",!0),y(R,ie.data.merge_strategy??"",!0),y(F,ie.data.merge_timeout!=null?String(ie.data.merge_timeout):"",!0),y(q,ie.data.temperature!=null?String(ie.data.temperature):"",!0),y(K,ie.data.max_tokens!=null?String(ie.data.max_tokens):"",!0),y(Z,ie.data.tool_name??"",!0),y(ee,ie.data.memory_action??"",!0),y(J,ie.data.validation_rule??"",!0),y(ne,ie.data.split_expression??"",!0),y(le,ie.data.merge_expression??"",!0),y(re,ie.data.trigger_type??"manual",!0),y(Q,ie.data.destination_type??"response",!0),y(j,ie.data.queue_broker??"kafka",!0),y($,ie.data.queue_topic??"",!0),y(de,ie.data.queue_group_id??"",!0),y(ce,ie.data.cron_expression??"",!0),y(te,ie.data.cron_timezone??"UTC",!0),y(ae,ie.data.http_method??"POST",!0),y(be,ie.data.http_auth_required??!1,!0),y(se,ie.data.file_types??"*/*",!0),y(ge,ie.data.file_max_size_mb!=null?String(ie.data.file_max_size_mb):"50",!0),y(_e,ie.data.webhook_url??"",!0),y(pe,ie.data.store_type??"file",!0),y(ye,ie.data.store_path??"",!0),y(me,ie.data.schema_json??"",!0);const Me=ie.data.multimodal;y(ve,Me?.vision_enabled??!1,!0);const it=Me?.supported_file_types??["image/png","image/jpeg"];y(ke,it.some(Xe=>Xe.startsWith("image/")),!0),y(Ve,it.includes("application/pdf"),!0),y(Re,it.some(Xe=>Xe.includes("document")||Xe.includes("msword")),!0),y(Ye,Me?.max_file_size_mb??10,!0),y(Le,Me?.image_detail??"auto",!0)}),wt=!1),ie||y(at,null)});function Pe(ie,Me){wt||un(()=>{const it=i();if(!it)return;["timeout","maxSteps","max_concurrent","merge_timeout","temperature","max_tokens"].includes(ie)?nr(it,ie,Me===""?void 0:Number(Me)):nr(it,ie,Me)})}xe(()=>{Pe("label",a(P))}),xe(()=>{Pe("model",a(L))}),xe(()=>{Pe("instructions",a(A))}),xe(()=>{Pe("description",a(V))}),xe(()=>{Pe("timeout",a(M))}),xe(()=>{Pe("pattern",a(O))}),xe(()=>{Pe("maxSteps",a(b))}),xe(()=>{Pe("condition",a(I))}),xe(()=>{Pe("backend",a(H))}),xe(()=>{Pe("connection_string",a(B))}),xe(()=>{Pe("namespace",a(X))}),xe(()=>{Pe("schema_type",a(N))}),xe(()=>{Pe("validation_rules",a(E))}),xe(()=>{Pe("fail_action",a(C))}),xe(()=>{Pe("code",a(_))}),xe(()=>{Pe("strategy",a(T))}),xe(()=>{Pe("max_concurrent",a(D))}),xe(()=>{Pe("merge_strategy",a(R))}),xe(()=>{Pe("merge_timeout",a(F))}),xe(()=>{Pe("temperature",a(q))}),xe(()=>{Pe("max_tokens",a(K))}),xe(()=>{Pe("tool_name",a(Z))}),xe(()=>{Pe("memory_action",a(ee))}),xe(()=>{Pe("validation_rule",a(J))}),xe(()=>{Pe("split_expression",a(ne))}),xe(()=>{Pe("merge_expression",a(le))}),xe(()=>{Pe("trigger_type",a(re))}),xe(()=>{Pe("destination_type",a(Q))}),xe(()=>{Pe("queue_broker",a(j))}),xe(()=>{Pe("queue_topic",a($))}),xe(()=>{Pe("queue_group_id",a(de))}),xe(()=>{Pe("cron_expression",a(ce))}),xe(()=>{Pe("cron_timezone",a(te))}),xe(()=>{Pe("http_method",a(ae))}),xe(()=>{Pe("file_types",a(se))}),xe(()=>{Pe("file_max_size_mb",a(ge))}),xe(()=>{Pe("webhook_url",a(_e))}),xe(()=>{Pe("store_type",a(pe))}),xe(()=>{Pe("store_path",a(ye))}),xe(()=>{Pe("schema_json",a(me))}),xe(()=>{const ie=a(ve),Me=a(ke),it=a(Ve),Xe=a(Re),zt=a(Ye),Fe=a(Le);wt||un(()=>{const tt=i();if(!tt)return;const ct=r().find(Be=>Be.id===tt);if(!ct||ct.type!=="agent")return;const Et=[];Me&&Et.push("image/png","image/jpeg"),it&&Et.push("application/pdf"),Xe&&Et.push("application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"),nr(tt,"multimodal",{vision_enabled:ie,supported_file_types:Et,max_file_size_mb:zt,image_detail:Fe})})});function Rt(){Nn.set(null)}function Ht(){const ie=n();if(!ie)return;const Me=ie.id;qn.update(it=>it.filter(Xe=>Xe.id!==Me)),Fn.update(it=>it.filter(Xe=>Xe.source!==Me&&Xe.target!==Me)),Nn.set(null)}function et(ie){Nn.set(ie)}var xt=Te(),He=oe(xt);{var vt=ie=>{const Me=k(n),it=k(()=>v[a(Me).type??""]??Pa),Xe=k(()=>p[a(Me).type??""]??"#ff6b35");var zt=i_(),Fe=d(zt),tt=d(Fe),ct=d(tt);let Et;var Be=d(ct);hn(Be,()=>a(it),(qe,Ke)=>{Ke(qe,{size:14})}),c(ct);var We=h(ct,2),yt=d(We),St=d(yt);c(yt);var Ct=h(yt,2),ft=d(Ct,!0);c(Ct),c(We),c(tt);var It=h(tt,2),jt=d(It);Lo(jt,{size:14}),c(It),c(Fe);var _a=h(Fe,2),In=d(_a),An=d(In);let Un;var ya=d(An,!0);c(An),c(In);var Jn=h(In,2),Xa=h(d(Jn),2),Xo=d(Xa);{var Wt=qe=>{var Ke=k1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Input node name",get value(){return a(P)},set value(we){y(P,we,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Trigger Type",type:"select",options:["manual","http","queue","schedule","file_upload"],get value(){return a(re)},set value(we){y(re,we,!0)}});var nt=h(rt,2);{var lt=we=>{var je=_1(),Ie=oe(je);Ae(Ie,{label:"HTTP Method",type:"select",options:["GET","POST","PUT","PATCH"],get value(){return a(ae)},set value(De){y(ae,De,!0)}}),he(2),g(we,je)},At=we=>{var je=y1(),Ie=oe(je);Ae(Ie,{label:"Broker",type:"select",options:["kafka","rabbitmq","redis"],get value(){return a(j)},set value(Ot){y(j,Ot,!0)}});var De=h(Ie,2);Ae(De,{label:"Topic / Queue",type:"text",placeholder:"pipeline-input",get value(){return a($)},set value(Ot){y($,Ot,!0)}});var Ge=h(De,2);Ae(Ge,{label:"Group ID",type:"text",placeholder:"studio-group",get value(){return a(de)},set value(Ot){y(de,Ot,!0)}}),g(we,je)},Dt=we=>{var je=b1(),Ie=oe(je);Ae(Ie,{label:"Cron Expression",type:"text",placeholder:"0 */6 * * *",get value(){return a(ce)},set value(Ge){y(ce,Ge,!0)}});var De=h(Ie,2);Ae(De,{label:"Timezone",type:"text",placeholder:"UTC",get value(){return a(te)},set value(Ge){y(te,Ge,!0)}}),he(2),g(we,je)},_t=we=>{var je=x1(),Ie=oe(je);Ae(Ie,{label:"Accepted Types",type:"text",placeholder:"application/pdf, text/csv",get value(){return a(se)},set value(Ge){y(se,Ge,!0)}});var De=h(Ie,2);Ae(De,{label:"Max Size (MB)",type:"number",placeholder:"50",get value(){return a(ge)},set value(Ge){y(ge,Ge,!0)}}),g(we,je)},Ze=we=>{var je=w1();g(we,je)};W(nt,we=>{a(re)==="http"?we(lt):a(re)==="queue"?we(At,1):a(re)==="schedule"?we(Dt,2):a(re)==="file_upload"?we(_t,3):we(Ze,!1)})}var Ce=h(nt,2);Ae(Ce,{label:"Input Schema (JSON)",type:"textarea",placeholder:'{"type": "object", "properties": {}}',get value(){return a(me)},set value(we){y(me,we,!0)}}),g(qe,Ke)},ba=qe=>{var Ke=E1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Output node name",get value(){return a(P)},set value(Ce){y(P,Ce,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Destination",type:"select",options:["response","queue","webhook","store"],get value(){return a(Q)},set value(Ce){y(Q,Ce,!0)}});var nt=h(rt,2);{var lt=Ce=>{var we=z1(),je=oe(we);Ae(je,{label:"Broker",type:"select",options:["kafka","rabbitmq","redis"],get value(){return a(j)},set value(De){y(j,De,!0)}});var Ie=h(je,2);Ae(Ie,{label:"Topic / Queue",type:"text",placeholder:"pipeline-output",get value(){return a($)},set value(De){y($,De,!0)}}),g(Ce,we)},At=Ce=>{Ae(Ce,{label:"Webhook URL",type:"text",placeholder:"https://example.com/callback",get value(){return a(_e)},set value(we){y(_e,we,!0)}})},Dt=Ce=>{var we=S1(),je=oe(we);Ae(je,{label:"Storage Type",type:"select",options:["file","database"],get value(){return a(pe)},set value(De){y(pe,De,!0)}});var Ie=h(je,2);Ae(Ie,{label:"Path / Table",type:"text",placeholder:"/tmp/results.json",get value(){return a(ye)},set value(De){y(ye,De,!0)}}),g(Ce,we)},_t=Ce=>{var we=C1();g(Ce,we)};W(nt,Ce=>{a(Q)==="queue"?Ce(lt):a(Q)==="webhook"?Ce(At,1):a(Q)==="store"?Ce(Dt,2):Ce(_t,!1)})}var Ze=h(nt,2);Ae(Ze,{label:"Response Schema (JSON)",type:"textarea",placeholder:'{"type": "object", "properties": {}}',get value(){return a(me)},set value(Ce){y(me,Ce,!0)}}),g(qe,Ke)},xa=qe=>{var Ke=P1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Agent name",get value(){return a(P)},set value(Ge){y(P,Ge,!0)}});var rt=h(Ue,2),nt=h(d(rt),2);Tc(nt,{placeholder:"Select model...",get value(){return a(L)},set value(Ge){y(L,Ge,!0)}}),c(rt);var lt=h(rt,2);Ae(lt,{label:"Instructions",type:"textarea",placeholder:"System instructions for this agent...",get value(){return a(A)},set value(Ge){y(A,Ge,!0)}});var At=h(lt,2);Ae(At,{label:"Description",type:"text",placeholder:"Agent description",get value(){return a(V)},set value(Ge){y(V,Ge,!0)}});var Dt=h(At,2);Ae(Dt,{label:"Temperature",type:"number",placeholder:"0.7",get value(){return a(q)},set value(Ge){y(q,Ge,!0)}});var _t=h(Dt,2);Ae(_t,{label:"Max Tokens",type:"number",placeholder:"4096",get value(){return a(K)},set value(Ge){y(K,Ge,!0)}});var Ze=h(_t,2),Ce=d(Ze),we=h(d(Ce),2);let je;c(Ce);var Ie=h(Ce,2);{var De=Ge=>{var Ot=N1(),$t=d(Ot),yn=h(d($t),2),ln=d(yn);Nt(ln),he(),c(yn);var Dn=h(yn,2),Ua=d(Dn);Nt(Ua),he(),c(Dn);var Qn=h(Dn,2),$n=d(Qn);Nt($n),he(),c(Qn),c($t);var On=h($t,2),Ja=h(d(On),2),ea=d(Ja);Nt(ea);var Qa=h(ea,2),tc=d(Qa);c(Qa),c(Ja),c(On);var hs=h(On,2),gs=h(d(hs),2),er=d(gs),$a=d(er);Nt($a),$a.value=$a.__value="auto",he(),c(er);var tr=h(er,2),eo=d(tr);Nt(eo),eo.value=eo.__value="low",he(),c(tr);var ms=h(tr,2),to=d(ms);Nt(to),to.value=to.__value="high",he(),c(ms),c(gs),c(hs),c(Ot),U(()=>Y(tc,`${a(Ye)??""} MB`)),ar(ln,()=>a(ke),Zt=>y(ke,Zt)),ar(Ua,()=>a(Ve),Zt=>y(Ve,Zt)),ar($n,()=>a(Re),Zt=>y(Re,Zt)),Lt(ea,()=>a(Ye),Zt=>y(Ye,Zt)),or(u,[],$a,()=>a(Le),Zt=>y(Le,Zt)),or(u,[],eo,()=>a(Le),Zt=>y(Le,Zt)),or(u,[],to,()=>a(Le),Zt=>y(Le,Zt)),g(Ge,Ot)};W(Ie,Ge=>{a(ve)&&Ge(De)})}c(Ze),U(()=>je=Oe(we,1,"mm-toggle-switch svelte-16rdffs",null,je,{"mm-on":a(ve)})),fe("click",Ce,()=>y(ve,!a(ve))),g(qe,Ke)},Go=qe=>{var Ke=D1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Tool label on canvas",get value(){return a(P)},set value(Ze){y(P,Ze,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Tool Type",type:"select",get options(){return w},get value(){return a(Z)},set value(Ze){y(Z,Ze,!0)}});var nt=h(rt,2);{var lt=Ze=>{var Ce=I1(),we=d(Ce),je=d(we);wi(je,{size:11});var Ie=h(je,2),De=d(Ie,!0);c(Ie),c(we);var Ge=h(we,2),Ot=d(Ge,!0);c(Ge);var $t=h(Ge,2);{var yn=ln=>{var Dn=T1();Qe(Dn,21,()=>a(z).parameters,Vt,(Ua,Qn)=>{var $n=M1(),On=d($n),Ja=d(On,!0);c(On);var ea=h(On,2),Qa=d(ea);c(ea),c($n),U(()=>{Y(Ja,a(Qn).name),Y(Qa,`${a(Qn).type??""}${a(Qn).required?"":"?"}`)}),g(Ua,$n)}),c(Dn),g(ln,Dn)};W($t,ln=>{a(z).parameters.length>0&&ln(yn)})}c(Ce),U(()=>{Y(De,a(z).name),Y(Ot,a(z).description)}),g(Ze,Ce)},At=Ze=>{var Ce=A1();g(Ze,Ce)};W(nt,Ze=>{a(z)?Ze(lt):a(Z)==="custom"&&Ze(At,1)})}var Dt=h(nt,2);Ae(Dt,{label:"Description",type:"textarea",placeholder:"What this tool does",get value(){return a(V)},set value(Ze){y(V,Ze,!0)}});var _t=h(Dt,2);Ae(_t,{label:"Timeout (seconds)",type:"number",placeholder:"30",get value(){return a(M)},set value(Ze){y(M,Ze,!0)}}),g(qe,Ke)},Ga=qe=>{var Ke=R1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Reasoning name",get value(){return a(P)},set value(_t){y(P,_t,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Pattern",type:"select",get options(){return f},get value(){return a(O)},set value(_t){y(O,_t,!0)}});var nt=h(rt,2);{var lt=_t=>{var Ze=O1(),Ce=d(Ze),we=d(Ce);xo(we,{size:11});var je=h(we,2),Ie=d(je,!0);c(je),c(Ce);var De=h(Ce,2),Ge=d(De,!0);c(De);var Ot=h(De,2),$t=d(Ot);c(Ot),c(Ze),U(()=>{Y(Ie,a(S).name),Y(Ge,a(S).description),Y($t,`Best for: ${a(S).bestFor??""}`)}),g(_t,Ze)};W(nt,_t=>{a(S)&&_t(lt)})}var At=h(nt,2);{let _t=k(()=>a(S)?String(a(S).defaultMaxSteps):"10");Ae(At,{label:"Max Steps",type:"number",get placeholder(){return a(_t)},get value(){return a(b)},set value(Ze){y(b,Ze,!0)}})}var Dt=h(At,2);Ae(Dt,{label:"Description",type:"text",placeholder:"Reasoning strategy description",get value(){return a(V)},set value(_t){y(V,_t,!0)}}),g(qe,Ke)},Uo=qe=>{var Ke=L1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Condition name",get value(){return a(P)},set value(nt){y(P,nt,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Condition Key",type:"text",placeholder:"e.g. document_type, status",get value(){return a(I)},set value(nt){y(I,nt,!0)}}),he(2),g(qe,Ke)},Wl=qe=>{var Ke=B1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Memory name",get value(){return a(P)},set value(we){y(P,we,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Action",type:"select",options:["store","retrieve","clear"],get value(){return a(ee)},set value(we){y(ee,we,!0)}});var nt=h(rt,2),lt=d(nt);{var At=we=>{var je=V1();g(we,je)},Dt=we=>{var je=H1();g(we,je)},_t=we=>{var je=F1();g(we,je)},Ze=we=>{var je=q1();g(we,je)};W(lt,we=>{a(ee)==="store"?we(At):a(ee)==="retrieve"?we(Dt,1):a(ee)==="clear"?we(_t,2):we(Ze,!1)})}c(nt);var Ce=h(nt,2);Ae(Ce,{label:"Namespace",type:"text",placeholder:"default",get value(){return a(X)},set value(we){y(X,we,!0)}}),g(qe,Ke)},Zl=qe=>{var Ke=G1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Validator name",get value(){return a(P)},set value(Ie){y(P,Ie,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Validation Rule",type:"select",options:["not_empty","is_string","is_list","is_dict","custom"],get value(){return a(J)},set value(Ie){y(J,Ie,!0)}});var nt=h(rt,2),lt=d(nt);{var At=Ie=>{var De=K1();g(Ie,De)},Dt=Ie=>{var De=j1();g(Ie,De)},_t=Ie=>{var De=W1();g(Ie,De)},Ze=Ie=>{var De=Z1();g(Ie,De)},Ce=Ie=>{var De=Y1();g(Ie,De)},we=Ie=>{var De=X1();g(Ie,De)};W(lt,Ie=>{a(J)==="not_empty"?Ie(At):a(J)==="is_string"?Ie(Dt,1):a(J)==="is_list"?Ie(_t,2):a(J)==="is_dict"?Ie(Ze,3):a(J)==="custom"?Ie(Ce,4):Ie(we,!1)})}c(nt);var je=h(nt,2);Ae(je,{label:"On Failure",type:"select",options:["reject","retry","fallback","log"],get value(){return a(C)},set value(Ie){y(C,Ie,!0)}}),g(qe,Ke)},Yl=qe=>{var Ke=U1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Code block name",get value(){return a(P)},set value(lt){y(P,lt,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Description",type:"text",placeholder:"What this code does",get value(){return a(V)},set value(lt){y(V,lt,!0)}});var nt=h(rt,2);Ae(nt,{label:"Python Code",type:"textarea",placeholder:"async def execute(context, inputs):     return inputs",get value(){return a(_)},set value(lt){y(_,lt,!0)}}),he(2),g(qe,Ke)},Xl=qe=>{var Ke=J1(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Fan Out name",get value(){return a(P)},set value(lt){y(P,lt,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Split Expression",type:"text",placeholder:"How to split input for parallel branches",get value(){return a(ne)},set value(lt){y(ne,lt,!0)}});var nt=h(rt,2);Ae(nt,{label:"Max Concurrent",type:"number",placeholder:"10",get value(){return a(D)},set value(lt){y(D,lt,!0)}}),he(2),g(qe,Ke)},Gl=qe=>{var Ke=t_(),Ue=oe(Ke);Ae(Ue,{label:"Name",type:"text",placeholder:"Fan In name",get value(){return a(P)},set value(Ce){y(P,Ce,!0)}});var rt=h(Ue,2);Ae(rt,{label:"Merge Expression",type:"select",options:["concat","collect"],get value(){return a(le)},set value(Ce){y(le,Ce,!0)}});var nt=h(rt,2);Ae(nt,{label:"Timeout (seconds)",type:"number",placeholder:"30",get value(){return a(F)},set value(Ce){y(F,Ce,!0)}});var lt=h(nt,2),At=d(lt);{var Dt=Ce=>{var we=Q1();g(Ce,we)},_t=Ce=>{var we=$1();g(Ce,we)},Ze=Ce=>{var we=e_();g(Ce,we)};W(At,Ce=>{a(le)==="concat"?Ce(Dt):a(le)==="collect"?Ce(_t,1):Ce(Ze,!1)})}c(lt),g(qe,Ke)},Ul=qe=>{Ae(qe,{label:"Name",type:"text",placeholder:"Node name",get value(){return a(P)},set value(Ke){y(P,Ke,!0)}})};W(Xo,qe=>{a(Me).type==="input"?qe(Wt):a(Me).type==="output"?qe(ba,1):a(Me).type==="agent"?qe(xa,2):a(Me).type==="tool"?qe(Go,3):a(Me).type==="reasoning"?qe(Ga,4):a(Me).type==="condition"?qe(Uo,5):a(Me).type==="memory"?qe(Wl,6):a(Me).type==="validator"?qe(Zl,7):a(Me).type==="custom_code"?qe(Yl,8):a(Me).type==="fan_out"?qe(Xl,9):a(Me).type==="fan_in"?qe(Gl,10):qe(Ul,!1)})}c(Xa),c(Jn);var us=h(Jn,2);{var Jl=qe=>{var Ke=s_(),Ue=d(Ke),rt=d(Ue);Ic(rt,{size:12}),he(),c(Ue);var nt=h(Ue,2),lt=d(nt);{var At=Ze=>{var Ce=a_(),we=h(d(Ce),2);Qe(we,17,()=>a(st),Vt,(je,Ie)=>{var De=n_(),Ge=d(De),Ot=d(Ge,!0);c(Ge);var $t=h(Ge,2);zs($t,{size:10}),he(2),c(De),U((yn,ln)=>{ze(De,"title",`Select ${yn??""}`),Y(Ot,ln)},[()=>ut(a(Ie).source),()=>ut(a(Ie).source)]),fe("click",De,()=>et(a(Ie).source)),g(je,De)}),c(Ce),g(Ze,Ce)};W(lt,Ze=>{a(st).length>0&&Ze(At)})}var Dt=h(lt,2);{var _t=Ze=>{var Ce=r_(),we=h(d(Ce),2);Qe(we,17,()=>a(ot),Vt,(je,Ie)=>{var De=o_(),Ge=h(d(De),2);zs(Ge,{size:10});var Ot=h(Ge,2),$t=d(Ot,!0);c(Ot),c(De),U((yn,ln)=>{ze(De,"title",`Select ${yn??""}`),Y($t,ln)},[()=>ut(a(Ie).target),()=>ut(a(Ie).target)]),fe("click",De,()=>et(a(Ie).target)),g(je,De)}),c(Ce),g(Ze,Ce)};W(Dt,Ze=>{a(ot).length>0&&Ze(_t)})}c(nt),c(Ke),g(qe,Ke)};W(us,qe=>{(a(st).length>0||a(ot).length>0)&&qe(Jl)})}var Jo=h(us,2),vs=h(d(Jo),2),Qo=d(vs),Ql=d(Qo);c(Qo);var fs=h(Qo,2),$l=d(fs);c(fs),c(vs),c(Jo);var ps=h(Jo,2),$o=d(ps),ec=d($o);Bn(ec,{size:13}),he(2),c($o),c(ps),c(_a),c(zt),U((qe,Ke)=>{Et=pt(ct,"",Et,{"--node-color":a(Xe)}),Y(St,`${m[a(Me).type??""]??"Node"??""} Properties`),Y(ft,a(Me).id),Un=pt(An,"",Un,{"--badge-color":a(Xe)}),Y(ya,m[a(Me).type??""]??a(Me).type),Y(Ql,`X: ${qe??""}`),Y($l,`Y: ${Ke??""}`)},[()=>Math.round(a(Me).position.x),()=>Math.round(a(Me).position.y)]),fe("click",It,Rt),fe("click",$o,Ht),g(ie,zt)};W(He,ie=>{n()&&ie(vt)})}g(t,xt),Ne(),l()}Tt(["click"]);var c_=x("<button><!> <span>Properties</span></button>"),d_=x('<button class="palette-item svelte-1ecj58j"><div class="palette-icon svelte-1ecj58j"><!></div> <span class="palette-label svelte-1ecj58j"> </span></button>'),u_=x('<button class="palette-item svelte-1ecj58j"><div class="palette-icon svelte-1ecj58j"><!></div> <span class="palette-label svelte-1ecj58j"> </span></button>'),v_=x('<div class="palette-items svelte-1ecj58j"><div class="palette-group-label svelte-1ecj58j">Pipeline I/O</div> <!> <div class="palette-group-label svelte-1ecj58j" style="margin-top: 8px;">Processing</div> <!></div>'),f_=x('<aside><div class="resize-handle svelte-1ecj58j"></div> <div class="panel-tab-header svelte-1ecj58j"><button><!> <span>Components</span></button> <!></div> <div class="panel-content svelte-1ecj58j"><!></div></aside>');function p_(t,e){Ee(e,!0);const n=()=>dt(Nn,"$selectedNodeId",o),[o,r]=Xt();let i=G(320),s=G(!1),l=G(0),u=G(0);function v(C){C.preventDefault(),y(s,!0),y(l,C.clientX,!0),y(u,a(i),!0),document.addEventListener("mousemove",p),document.addEventListener("mouseup",m)}function p(C){a(s)&&y(i,Math.max(240,Math.min(480,a(u)+(a(l)-C.clientX))),!0)}function m(){y(s,!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)}ga(()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)});const f=[{type:"input",label:"Input",icon:td,color:"#22c55e",group:"io",description:"Pipeline entry point. Triggers: manual, HTTP, queue, schedule, file upload."},{type:"output",label:"Output",icon:nd,color:"#ef4444",group:"io",description:"Pipeline exit point. Destinations: response, queue, webhook, storage."},{type:"agent",label:"Agent",icon:Pa,color:"#6366f1",description:"An AI agent powered by an LLM. Configure model, instructions, and personality."},{type:"tool",label:"Tool",icon:Kn,color:"#8b5cf6",description:"A registered tool the agent can use: search, calculator, HTTP, database, etc."},{type:"reasoning",label:"Reasoning",icon:xo,color:"#ec4899",description:"A reasoning pattern: ReAct, Chain of Thought, Plan and Execute, Reflexion, etc."},{type:"condition",label:"Condition",icon:xi,color:"#f59e0b",description:"Routes the pipeline based on a condition. Define branches for different paths."},{type:"memory",label:"Memory",icon:Vr,color:"#06b6d4",description:"Store, retrieve, or clear data in the pipeline memory system."},{type:"validator",label:"Validator",icon:Fr,color:"#f59e0b",description:"Validates pipeline output: check for empty, type, or custom rules."},{type:"custom_code",label:"Code",icon:qa,color:"#3b82f6",description:"Run custom Python code. Define an async execute function."},{type:"fan_out",label:"Fan Out",icon:qr,color:"#64748b",description:"Split input into parallel branches for concurrent processing."},{type:"fan_in",label:"Fan In",icon:Br,color:"#64748b",description:"Merge results from parallel branches back into a single flow."}];function w(C){const _=parseInt(C.slice(1,3),16),T=parseInt(C.slice(3,5),16),D=parseInt(C.slice(5,7),16);return`rgba(${_}, ${T}, ${D}, 0.15)`}let S=k(()=>n()?"properties":"components");var z=f_();let P,L;var A=d(z),V=h(A,2),M=d(V);let O;var b=d(M);_c(b,{size:12}),he(2),c(M);var I=h(M,2);{var H=C=>{var _=c_();let T;var D=d(_);Ac(D,{size:12}),he(2),c(_),U(()=>T=Oe(_,1,"panel-tab-btn svelte-1ecj58j",null,T,{active:a(S)==="properties"})),fe("click",_,()=>{}),g(C,_)};W(I,C=>{n()&&C(H)})}c(V);var B=h(V,2),X=d(B);{var N=C=>{l_(C,{})},E=C=>{var _=v_(),T=h(d(_),2);Qe(T,17,()=>f.filter(R=>R.group==="io"),Vt,(R,F)=>{ws(R,{get text(){return a(F).label},get description(){return a(F).description},position:"left",delay:300,children:(q,K)=>{var Z=d_(),ee=d(Z);let J;var ne=d(ee);hn(ne,()=>a(F).icon,(Q,j)=>{j(Q,{size:14})}),c(ee);var le=h(ee,2),re=d(le,!0);c(le),c(Z),U(Q=>{J=pt(ee,"",J,Q),Y(re,a(F).label)},[()=>({background:w(a(F).color),color:a(F).color})]),fe("click",Z,()=>bs(a(F).type,a(F).label)),g(q,Z)},$$slots:{default:!0}})});var D=h(T,4);Qe(D,17,()=>f.filter(R=>!R.group),Vt,(R,F)=>{ws(R,{get text(){return a(F).label},get description(){return a(F).description},position:"left",delay:300,children:(q,K)=>{var Z=u_(),ee=d(Z);let J;var ne=d(ee);hn(ne,()=>a(F).icon,(Q,j)=>{j(Q,{size:14})}),c(ee);var le=h(ee,2),re=d(le,!0);c(le),c(Z),U(Q=>{J=pt(ee,"",J,Q),Y(re,a(F).label)},[()=>({background:w(a(F).color),color:a(F).color})]),fe("click",Z,()=>bs(a(F).type,a(F).label)),g(q,Z)},$$slots:{default:!0}})}),c(_),g(C,_)};W(X,C=>{a(S)==="properties"&&n()?C(N):C(E,!1)})}c(B),c(z),U(()=>{P=Oe(z,1,"component-panel svelte-1ecj58j",null,P,{dragging:a(s)}),L=pt(z,"",L,{width:`${a(i)??""}px`}),O=Oe(M,1,"panel-tab-btn svelte-1ecj58j",null,O,{active:a(S)==="components"})}),fe("mousedown",A,v),fe("click",M,()=>{n()&&Nn.set(null)}),g(t,z),Ne(),r()}Tt(["mousedown","click"]);var h_=x('<div class="empty-state svelte-dlnc6c"><span class="empty-text svelte-dlnc6c">No execution events yet. Run your pipeline to see logs here.</span></div>'),g_=x('<span class="log-node svelte-dlnc6c"> </span>'),m_=x('<span class="log-pipeline svelte-dlnc6c"> </span>'),__=x('<span class="log-extra svelte-dlnc6c"> </span>'),y_=x('<div class="log-line svelte-dlnc6c"><span class="log-timestamp svelte-dlnc6c"> </span> <span> </span> <!> <!> <!></div>'),b_=x('<div class="console-tab svelte-dlnc6c"><div class="console-toolbar svelte-dlnc6c"><span class="event-count svelte-dlnc6c"> </span> <button class="toolbar-btn svelte-dlnc6c" title="Clear console"><!></button></div> <div class="console-output svelte-dlnc6c"><!></div></div>');function x_(t,e){Ee(e,!0);const n=()=>dt(_r,"$executionEvents",o),[o,r]=Xt();let i=G(void 0),s=G(0);xe(()=>{const b=n();b.length>a(s)&&a(i)&&requestAnimationFrame(()=>{a(i)&&(a(i).scrollTop=a(i).scrollHeight)}),y(s,b.length,!0)});function l(){_r.set([])}function u(b){const I=new Date(b),H=String(I.getHours()).padStart(2,"0"),B=String(I.getMinutes()).padStart(2,"0"),X=String(I.getSeconds()).padStart(2,"0"),N=String(I.getMilliseconds()).padStart(3,"0");return`${H}:${B}:${X}.${N}`}function v(b){switch(b){case"node_start":return"badge-info";case"node_complete":case"pipeline_complete":case"pipeline_result":return"badge-success";case"node_error":return"badge-error";case"node_skip":return"badge-warning";default:return""}}function p(b){switch(b){case"node_start":return"START";case"node_complete":return"DONE";case"node_error":return"ERROR";case"node_skip":return"SKIP";case"pipeline_complete":return"COMPLETE";case"pipeline_result":return"RESULT";default:return b}}function m(b){return b.type==="node_complete"&&b.latency_ms!=null?`${b.latency_ms}ms`:b.type==="node_error"&&b.error?b.error:b.type==="pipeline_complete"&&b.duration_ms!=null?`Total: ${b.duration_ms}ms`:""}var f=b_(),w=d(f),S=d(w),z=d(S);c(S);var P=h(S,2),L=d(P);Bn(L,{size:13}),c(P),c(w);var A=h(w,2),V=d(A);{var M=b=>{var I=h_();g(b,I)},O=b=>{var I=Te(),H=oe(I);Qe(H,1,n,Vt,(B,X)=>{const N=k(()=>m(a(X)));var E=y_(),C=d(E),_=d(C,!0);c(C);var T=h(C,2),D=d(T,!0);c(T);var R=h(T,2);{var F=J=>{var ne=g_(),le=d(ne,!0);c(ne),U(()=>Y(le,a(X).node_id)),g(J,ne)};W(R,J=>{a(X).node_id&&J(F)})}var q=h(R,2);{var K=J=>{var ne=m_(),le=d(ne,!0);c(ne),U(()=>Y(le,a(X).pipeline_name)),g(J,ne)};W(q,J=>{a(X).pipeline_name&&J(K)})}var Z=h(q,2);{var ee=J=>{var ne=__(),le=d(ne,!0);c(ne),U(()=>Y(le,a(N))),g(J,ne)};W(Z,J=>{a(N)&&J(ee)})}c(E),U((J,ne,le)=>{Y(_,J),Oe(T,1,`log-badge ${ne??""}`,"svelte-dlnc6c"),Y(D,le)},[()=>u(a(X).timestamp??""),()=>v(a(X).type),()=>p(a(X).type)]),g(B,E)}),g(b,I)};W(V,b=>{n().length===0?b(M):b(O,!1)})}c(A),mn(A,b=>y(i,b),()=>a(i)),c(f),U(()=>Y(z,`${n().length??""} events`)),fe("click",P,l),g(t,f),Ne(),r()}Tt(["click"]);const Ln=Fa([]),Na=Fa(""),vn=Fa(!1),gr=Fa(!1),ls=Fa(null);let Bt=null,mo=null,_o=0;const w_=5;let cs=!1;function k_(){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/smith`}function z_(){if(cs||_o>=w_)return;_o++;const t=Math.min(1e3*Math.pow(2,_o-1),1e4);mo=setTimeout(()=>{ql()},t)}function ql(){if(!(Bt&&(Bt.readyState===WebSocket.OPEN||Bt.readyState===WebSocket.CONNECTING))){cs=!1;try{Bt=new WebSocket(k_())}catch{return}Bt.onopen=()=>{_o=0,gr.set(!0),Bl(),N_()},Bt.onclose=()=>{gr.set(!1),vn.set(!1),ds(),Bt=null,z_()},Bt.onerror=()=>{gr.set(!1)},Bt.onmessage=t=>{try{const e=JSON.parse(t.data);S_(e)}catch{}}}}function S_(t){const e=t.type;if(e==="smith_token"){const n=t.content??t.token??"";Ln.update(o=>{const r=o[o.length-1];return r&&r.role==="assistant"&&!t.complete?[...o.slice(0,-1),{...r,content:r.content+n}]:[...o,{role:"assistant",content:n,timestamp:new Date().toISOString()}]})}else if(e==="smith_response_complete"){vn.set(!1),t.code&&Na.set(t.code);const n=t.full_text??t.content??"";n&&!t.code&&Ln.update(o=>{const r=o[o.length-1];return r&&r.role==="assistant"?[...o.slice(0,-1),{...r,content:n}]:[...o,{role:"assistant",content:n,timestamp:new Date().toISOString()}]})}else if(e==="code_generated")Na.set(t.code),vn.set(!1);else if(e==="approval_required")ls.set({commandId:t.command_id,command:t.command,level:t.level});else if(e==="execution_result"){const n=t.stdout||"",o=t.stderr||"",r=t.return_code??0;let i=n;o&&(i+=(i?`
`:"")+`[stderr] ${o}`),r!==0&&(i+=`
[exit code: ${r}]`),Ln.update(s=>[...s,{role:"assistant",content:i||"(no output)",timestamp:new Date().toISOString()}]),vn.set(!1)}else if(e==="tool_call"){const n={name:t.tool??t.name??"unknown",args:typeof t.args=="string"?t.args:JSON.stringify(t.args||{}),result:typeof t.result=="string"?t.result:JSON.stringify(t.result||"")};Ln.update(o=>{const r=o[o.length-1];if(r&&r.role==="assistant"){const i=[...r.toolCalls||[],n];return[...o.slice(0,-1),{...r,toolCalls:i}]}return[...o,{role:"assistant",content:"",timestamp:new Date().toISOString(),toolCalls:[n]}]})}else e==="canvas_synced"||e==="error"&&(vn.set(!1),Ln.update(n=>[...n,{role:"assistant",content:`Error: ${t.message}`,timestamp:new Date().toISOString()}]))}function Xn(t,e={}){!Bt||Bt.readyState!==WebSocket.OPEN||Bt.send(JSON.stringify({action:t,...e}))}function Bl(t){if(t){Xn("sync_canvas",t);return}const e=na(qn),n=na(Fn);Xn("sync_canvas",{nodes:e.map(o=>({id:o.id,type:o.type,data:o.data,position:o.position})),edges:n.map(o=>({id:o.id,source:o.source,target:o.target}))})}function C_(t){vn.set(!0),t?Xn("generate",{graph:t}):Xn("generate")}function E_(t){vn.set(!0),Xn("execute",{code:t})}let ia=null,yo=null;function N_(){ds(),yo=gc([qn,Fn],([e,n])=>({nodes:e,edges:n})).subscribe(({nodes:e,edges:n})=>{ia&&clearTimeout(ia),ia=setTimeout(()=>{Bl({nodes:e.map(o=>({id:o.id,type:o.type,data:o.data,position:o.position})),edges:n.map(o=>({id:o.id,source:o.source,target:o.target}))})},500)})}function ds(){yo&&(yo(),yo=null),ia&&(clearTimeout(ia),ia=null)}function P_(t){Ln.update(e=>[...e,{role:"user",content:t,timestamp:new Date().toISOString()}]),vn.set(!0),Xn("chat",{message:t})}function ui(t,e){Xn("approve_command",{command_id:t,approved:e}),ls.set(null),e&&vn.set(!0)}function M_(){cs=!0,ds(),mo&&(clearTimeout(mo),mo=null),Bt?.close(),Bt=null}var T_=x('<div class="thinking svelte-gwema1"><div class="thinking-dots svelte-gwema1"><span class="dot svelte-gwema1"></span> <span class="dot svelte-gwema1"></span> <span class="dot svelte-gwema1"></span></div> <span class="thinking-text svelte-gwema1"> </span></div>');function Kl(t,e){Ee(e,!0);let n=ue(e,"accentColor",3,"#6366f1"),o=ue(e,"messages",19,()=>["Thinking..."]),r=G(0);xe(()=>{const u=setInterval(()=>{y(r,(a(r)+1)%o().length)},3e3);return()=>clearInterval(u)});var i=T_(),s=h(d(i),2),l=d(s,!0);c(s),c(i),U(()=>{pt(i,`--accent: ${n()??""}`),Y(l,o()[a(r)])}),g(t,i),Ne()}var I_=x('<span class="agent-badge svelte-1g5mx7p" style="background: var(--accent); color: #fff"> </span>'),A_=x('<span class="user-badge svelte-1g5mx7p">You</span>'),D_=x('<span class="timestamp svelte-1g5mx7p"> </span>'),O_=x('<div><div class="message-header svelte-1g5mx7p"><!> <!></div> <div class="message-body svelte-1g5mx7p"><!></div></div>');function jl(t,e){let n=ue(e,"agentName",3,""),o=ue(e,"accentColor",3,"#6366f1"),r=ue(e,"timestamp",3,"");var i=O_(),s=d(i),l=d(s);{var u=S=>{var z=I_(),P=d(z,!0);c(z),U(()=>Y(P,n())),g(S,z)},v=S=>{var z=A_();g(S,z)};W(l,S=>{e.role==="assistant"&&n()?S(u):S(v,!1)})}var p=h(l,2);{var m=S=>{var z=D_(),P=d(z,!0);c(z),U(()=>Y(P,r())),g(S,z)};W(p,S=>{r()&&S(m)})}c(s);var f=h(s,2),w=d(f);Dc(w,()=>e.content),c(f),c(i),U(()=>{Oe(i,1,`message ${e.role??""}`,"svelte-1g5mx7p"),pt(i,`--accent: ${o()??""}`)}),g(t,i)}var R_=x('<div class="tool-section svelte-9dvq12"><span class="tool-label svelte-9dvq12">Args</span> <pre class="svelte-9dvq12"> </pre></div>'),L_=x('<div class="tool-section svelte-9dvq12"><span class="tool-label svelte-9dvq12">Result</span> <pre class="svelte-9dvq12"> </pre></div>'),V_=x('<div class="tool-body svelte-9dvq12"><!> <!></div>'),H_=x('<div class="tool-call svelte-9dvq12"><button class="tool-header svelte-9dvq12"><!> <span class="tool-name svelte-9dvq12"> </span> <!></button> <!></div>');function F_(t,e){let n=ue(e,"args",3,""),o=ue(e,"result",3,""),r=ue(e,"accentColor",3,"#6366f1"),i=G(!1);var s=H_(),l=d(s),u=d(l);Kn(u,{size:14,style:"color: var(--accent)"});var v=h(u,2),p=d(v,!0);c(v);var m=h(v,2);{var f=P=>{la(P,{size:14})},w=P=>{Ta(P,{size:14})};W(m,P=>{a(i)?P(f):P(w,!1)})}c(l);var S=h(l,2);{var z=P=>{var L=V_(),A=d(L);{var V=b=>{var I=R_(),H=h(d(I),2),B=d(H,!0);c(H),c(I),U(()=>Y(B,n())),g(b,I)};W(A,b=>{n()&&b(V)})}var M=h(A,2);{var O=b=>{var I=L_(),H=h(d(I),2),B=d(H,!0);c(H),c(I),U(()=>Y(B,o())),g(b,I)};W(M,b=>{o()&&b(O)})}c(L),g(P,L)};W(S,P=>{a(i)&&P(z)})}c(s),U(()=>{pt(s,`--accent: ${r()??""}`),Y(p,e.toolName)}),fe("click",l,()=>y(i,!a(i))),g(t,s)}Tt(["click"]);var q_=x('<div class="modal-overlay svelte-1f6rc4h" role="dialog" aria-modal="true"><div class="modal svelte-1f6rc4h"><div class="modal-header svelte-1f6rc4h"><!> <h3 class="svelte-1f6rc4h">Command Approval Required</h3></div> <p class="modal-desc svelte-1f6rc4h">Smith wants to execute a <strong> </strong> command:</p> <pre class="command-preview svelte-1f6rc4h"> </pre> <div class="modal-actions svelte-1f6rc4h"><button class="btn-deny svelte-1f6rc4h"><!> Deny</button> <button class="btn-approve svelte-1f6rc4h"><!> Approve</button></div></div></div>');function B_(t,e){var n=q_(),o=d(n),r=d(o),i=d(r);id(i,{size:20,color:"#f59e0b"}),he(2),c(r);var s=h(r,2),l=h(d(s)),u=d(l,!0);c(l),he(),c(s);var v=h(s,2),p=d(v,!0);c(v);var m=h(v,2),f=d(m),w=d(f);Lo(w,{size:16}),he(),c(f);var S=h(f,2),z=d(S);Ia(z,{size:16}),he(),c(S),c(m),c(o),c(n),U(()=>{Y(u,e.level),Y(p,e.command)}),fe("click",n,function(...P){e.onDeny?.apply(this,P)}),fe("click",o,P=>P.stopPropagation()),fe("click",f,function(...P){e.onDeny?.apply(this,P)}),fe("click",S,function(...P){e.onApprove?.apply(this,P)}),g(t,n)}Tt(["click"]);var K_=x('<span class="copied-text svelte-a1zyks">Copied!</span>'),j_=x('<div class="code-generating svelte-a1zyks"><!> <span>Smith is generating code...</span></div>'),W_=x('<pre class="code-display svelte-a1zyks"><code class="svelte-a1zyks"> </code></pre>'),Z_=x('<pre class="code-display svelte-a1zyks"><code class="svelte-a1zyks"></code></pre>'),Y_=x("<!> <!>",1),X_=x('<div class="smith-container svelte-a1zyks"><div class="smith-toolbar svelte-a1zyks"><span class="smith-label svelte-a1zyks">Smith</span> <div class="toolbar-actions svelte-a1zyks"><button class="toolbar-btn svelte-a1zyks" title="Copy code"><!> <!></button> <button class="toolbar-btn svelte-a1zyks" title="Run code"><!></button> <button class="toolbar-btn svelte-a1zyks" title="Regenerate from pipeline"><!></button></div></div> <div class="code-area svelte-a1zyks"><!></div> <div class="chat-area svelte-a1zyks"><div class="messages svelte-a1zyks"><!> <!></div> <div class="input-bar svelte-a1zyks"><input type="text" placeholder="Ask Smith..." class="svelte-a1zyks"/> <button class="send-btn svelte-a1zyks"><!></button></div></div></div> <!>',1);function G_(t,e){Ee(e,!0);const n=()=>dt(Ln,"$smithMessages",s),o=()=>dt(vn,"$smithIsThinking",s),r=()=>dt(Na,"$smithCode",s),i=()=>dt(ls,"$pendingCommand",s),[s,l]=Xt();let u=G(""),v,p=G(!1);gi(()=>{ql()}),ga(()=>{M_()});function m(){const j=na(Na);j&&(navigator.clipboard.writeText(j),y(p,!0),setTimeout(()=>y(p,!1),2e3))}function f(){const j={nodes:na(qn).map($=>({id:$.id,type:$.type,data:$.data,position:$.position})),edges:na(Fn).map($=>({id:$.id,source:$.source,target:$.target}))};C_(j)}function w(){const j=na(Na);j&&E_(j)}function S(){const j=a(u).trim();j&&(y(u,""),P_(j))}function z(j){j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),S())}xe(()=>{n(),o(),v&&requestAnimationFrame(()=>{v.scrollTop=v.scrollHeight})});var P=X_(),L=oe(P),A=d(L),V=h(d(A),2),M=d(V),O=d(M);ki(O,{size:14});var b=h(O,2);{var I=j=>{var $=K_();g(j,$)};W(b,j=>{a(p)&&j(I)})}c(M);var H=h(M,2),B=d(H);zi(B,{size:14}),c(H);var X=h(H,2),N=d(X);Pt(N,{size:14}),c(X),c(V),c(A);var E=h(A,2),C=d(E);{var _=j=>{var $=j_(),de=d($);mi(de,{size:20,class:"smith-spinner"}),he(2),c($),g(j,$)},T=j=>{var $=W_(),de=d($),ce=d(de,!0);c(de),c($),U(()=>Y(ce,r())),g(j,$)},D=j=>{var $=Z_(),de=d($);de.textContent=`// Generate code from your pipeline...
// Click Refresh or ask Smith to generate.`,c($),g(j,$)};W(C,j=>{o()&&!r()?j(_):r()?j(T,1):j(D,!1)})}c(E);var R=h(E,2),F=d(R),q=d(F);Qe(q,1,n,Vt,(j,$)=>{var de=Y_(),ce=oe(de);jl(ce,{get role(){return a($).role},get content(){return a($).content},agentName:"Smith",accentColor:"#22c55e"});var te=h(ce,2);{var ae=be=>{var se=Te(),ge=oe(se);Qe(ge,17,()=>a($).toolCalls,Vt,(_e,pe)=>{F_(_e,{get toolName(){return a(pe).name},get args(){return a(pe).args},get result(){return a(pe).result},accentColor:"#22c55e"})}),g(be,se)};W(te,be=>{a($).toolCalls&&be(ae)})}g(j,de)});var K=h(q,2);{var Z=j=>{Kl(j,{accentColor:"#22c55e",messages:["Compiling...","It is... inevitable.","Analyzing the construct...","Making it real..."]})};W(K,j=>{o()&&j(Z)})}c(F),mn(F,j=>v=j,()=>v);var ee=h(F,2),J=d(ee);Nt(J);var ne=h(J,2),le=d(ne);Ii(le,{size:14}),c(ne),c(ee),c(R),c(L);var re=h(L,2);{var Q=j=>{const $=k(()=>i().commandId);B_(j,{get command(){return i().command},get level(){return i().level},onApprove:()=>ui(a($),!0),onDeny:()=>ui(a($),!1)})};W(re,j=>{i()&&j(Q)})}U(j=>ne.disabled=j,[()=>!a(u).trim()]),fe("click",M,m),fe("click",H,w),fe("click",X,f),fe("keydown",J,z),Lt(J,()=>a(u),j=>y(u,j)),fe("click",ne,S),g(t,P),Ne(),l()}Tt(["click","keydown"]);var U_=x('<div class="empty-state svelte-164d9ci"><div class="empty-icon svelte-164d9ci"><!></div> <span class="empty-text svelte-164d9ci">Run your pipeline to see the execution timeline</span></div>'),J_=x('<button><div></div> <span class="dot-label svelte-164d9ci"> </span></button>'),Q_=x('<button class="debug-btn active svelte-164d9ci" title="Compare checkpoints"><!> <span> </span></button>'),$_=x('<span class="debug-hint svelte-164d9ci">Shift+click another checkpoint to compare</span>'),e0=x('<div class="debug-controls svelte-164d9ci"><button class="debug-btn svelte-164d9ci" title="Rewind to this checkpoint"><!> <span>Rewind</span></button> <button class="debug-btn svelte-164d9ci" title="Fork from this checkpoint"><!> <span>Fork</span></button> <!></div>'),t0=x('<span class="diff-key svelte-164d9ci"> </span>'),n0=x('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-added svelte-164d9ci">Added</span> <!></div>'),a0=x('<span class="diff-key svelte-164d9ci"> </span>'),o0=x('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-removed svelte-164d9ci">Removed</span> <!></div>'),r0=x('<span class="diff-key svelte-164d9ci"> </span>'),s0=x('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-changed svelte-164d9ci">Changed</span> <!></div>'),i0=x('<span class="diff-empty svelte-164d9ci">No differences</span>'),l0=x('<div class="diff-panel svelte-164d9ci"><div class="diff-header svelte-164d9ci"> </div> <div class="diff-body svelte-164d9ci"><!> <!> <!> <!></div></div>'),c0=x('<span class="branch-parent svelte-164d9ci"> </span>'),d0=x('<div class="detail-branch svelte-164d9ci"><!> <span> </span> <!></div>'),u0=x('<div class="json-row svelte-164d9ci"><span class="json-key svelte-164d9ci"> </span> <span class="json-value svelte-164d9ci"> </span></div>'),v0=x('<span class="json-empty svelte-164d9ci">empty</span>'),f0=x('<div class="json-tree svelte-164d9ci"><!> <!></div>'),p0=x('<div class="json-row svelte-164d9ci"><span class="json-key svelte-164d9ci"> </span> <span class="json-value svelte-164d9ci"> </span></div>'),h0=x('<span class="json-empty svelte-164d9ci">empty</span>'),g0=x('<div class="json-tree svelte-164d9ci"><!> <!></div>'),m0=x('<div class="detail-panel svelte-164d9ci"><div class="detail-header svelte-164d9ci"><span class="detail-node-badge svelte-164d9ci"> </span> <span class="detail-time svelte-164d9ci"> </span> <span class="detail-timestamp svelte-164d9ci"> </span></div> <!> <div class="json-section svelte-164d9ci"><button class="json-toggle svelte-164d9ci"><!> <span class="json-label svelte-164d9ci">State</span> <span class="json-count svelte-164d9ci"> </span></button> <!></div> <div class="json-section svelte-164d9ci"><button class="json-toggle svelte-164d9ci"><!> <span class="json-label svelte-164d9ci">Inputs</span> <span class="json-count svelte-164d9ci"> </span></button> <!></div></div>'),_0=x('<div class="timeline-toolbar svelte-164d9ci"><div class="toolbar-left svelte-164d9ci"><span class="toolbar-label svelte-164d9ci">Timeline</span> <span class="checkpoint-count svelte-164d9ci"> </span></div> <button class="toolbar-btn svelte-164d9ci" title="Clear checkpoints"><!></button></div> <div class="timeline-scroll svelte-164d9ci"><div class="timeline-track svelte-164d9ci"><div class="timeline-line svelte-164d9ci"></div> <!></div></div> <!> <!> <!>',1),y0=x('<div class="timeline-tab svelte-164d9ci"><!></div>');function b0(t,e){Ee(e,!0);const n=()=>dt(Rn,"$checkpoints",o),[o,r]=Xt();let i=G(null),s=G(null),l=G(null),u=G(void 0),v=G(0),p=G(!0),m=G(!1),f=k(()=>a(i)!==null?n().find(N=>N.index===a(i)):void 0);xe(()=>{const N=n();N.length>a(v)&&a(u)&&requestAnimationFrame(()=>{a(u)&&(a(u).scrollLeft=a(u).scrollWidth)}),y(v,N.length,!0)}),gi(async()=>{try{const N=await kt.checkpoints.list();Rn.set(N)}catch{}});function w(N,E){E.shiftKey&&a(i)!==null&&a(i)!==N.index?(y(s,N.index,!0),S()):(y(i,N.index,!0),y(s,null),y(l,null))}async function S(){if(!(a(i)===null||a(s)===null))try{y(l,await kt.checkpoints.diff(a(i),a(s)),!0)}catch{y(l,null)}}async function z(){try{await kt.checkpoints.clear(),Rn.set([]),y(i,null),y(s,null),y(l,null)}catch{Rn.set([]),y(i,null),y(s,null),y(l,null)}}async function P(){if(!(!a(f)||a(i)===null))try{await kt.checkpoints.rewind(a(i)),Rn.update(N=>N.filter(E=>E.index<=a(i))),y(s,null),y(l,null),Je(`Rewound to checkpoint #${a(i)}`,"info")}catch{Je("Failed to rewind checkpoint","error")}}async function L(){if(!(!a(f)||a(i)===null))try{const N=await kt.checkpoints.fork(a(i),a(f).state);Rn.update(E=>[...E,N]),y(i,N.index,!0)}catch{}}function A(N){if(!N)return"";const E=Date.now(),C=new Date(N).getTime(),_=E-C,T=Math.floor(_/1e3);if(T<5)return"just now";if(T<60)return`${T}s ago`;const D=Math.floor(T/60);if(D<60)return`${D}m ago`;const R=Math.floor(D/60);return R<24?`${R}h ago`:new Date(N).toLocaleDateString()}function V(N){if(!N)return"";const E=new Date(N),C=String(E.getHours()).padStart(2,"0"),_=String(E.getMinutes()).padStart(2,"0"),T=String(E.getSeconds()).padStart(2,"0");return`${C}:${_}:${T}`}function M(N){return N.includes("agent")?"var(--color-node-agent, #6366f1)":N.includes("tool")?"var(--color-node-tool, #8b5cf6)":N.includes("reason")?"var(--color-node-reasoning, #ec4899)":N.includes("pipeline")?"var(--color-node-pipeline, #06b6d4)":"var(--color-accent, #ff6b35)"}function O(N){return N.branch_id?"var(--color-info, #3b82f6)":"var(--color-accent, #ff6b35)"}function b(N){return typeof N=="string"?`"${N}"`:N===null?"null":N===void 0?"undefined":typeof N=="object"?JSON.stringify(N,null,2):String(N)}var I=y0(),H=d(I);{var B=N=>{var E=U_(),C=d(E),_=d(C);Kr(_,{size:32}),c(C),he(2),c(E),g(N,E)},X=N=>{var E=_0(),C=oe(E),_=d(C),T=h(d(_),2),D=d(T);c(T),c(_);var R=h(_,2),F=d(R);Bn(F,{size:13}),c(R),c(C);var q=h(C,2),K=d(q),Z=h(d(K),2);Qe(Z,1,n,j=>j.index,(j,$)=>{const de=k(()=>a(i)===a($).index),ce=k(()=>a(s)===a($).index);var te=J_();let ae;var be=d(te);let se;var ge=h(be,2),_e=d(ge,!0);c(ge),c(te),U((pe,ye)=>{ae=Oe(te,1,"checkpoint-dot-wrapper svelte-164d9ci",null,ae,{selected:a(de),compare:a(ce)}),ze(te,"title",`${a($).node_id??""} - ${pe??""}${a($).branch_id?` (branch: ${a($).branch_id})`:""}`),se=Oe(be,1,"checkpoint-dot svelte-164d9ci",null,se,{selected:a(de),compare:a(ce),forked:!!a($).branch_id}),pt(be,`--dot-color: ${ye??""}`),Y(_e,a($).index)},[()=>V(a($).timestamp),()=>O(a($))]),fe("click",te,pe=>w(a($),pe)),g(j,te)}),c(K),c(q),mn(q,j=>y(u,j),()=>a(u));var ee=h(q,2);{var J=j=>{var $=e0(),de=d($),ce=d(de);ld(ce,{size:13}),he(2),c(de);var te=h(de,2),ae=d(te);Ma(ae,{size:13}),he(2),c(te);var be=h(te,2);{var se=_e=>{var pe=Q_(),ye=d(pe);Jc(ye,{size:13});var me=h(ye,2),ve=d(me);c(me),c(pe),U(()=>Y(ve,`Compare #${a(i)??""} vs #${a(s)??""}`)),fe("click",pe,S),g(_e,pe)},ge=_e=>{var pe=$_();g(_e,pe)};W(be,_e=>{a(s)!==null?_e(se):_e(ge,!1)})}c($),fe("click",de,P),fe("click",te,L),g(j,$)};W(ee,j=>{a(f)&&j(J)})}var ne=h(ee,2);{var le=j=>{var $=l0(),de=d($),ce=d(de);c(de);var te=h(de,2),ae=d(te);{var be=ve=>{var ke=n0(),Ve=h(d(ke),2);Qe(Ve,17,()=>a(l).added,Vt,(Re,Ye)=>{var Le=t0(),at=d(Le,!0);c(Le),U(()=>Y(at,a(Ye))),g(Re,Le)}),c(ke),g(ve,ke)};W(ae,ve=>{a(l).added.length>0&&ve(be)})}var se=h(ae,2);{var ge=ve=>{var ke=o0(),Ve=h(d(ke),2);Qe(Ve,17,()=>a(l).removed,Vt,(Re,Ye)=>{var Le=a0(),at=d(Le,!0);c(Le),U(()=>Y(at,a(Ye))),g(Re,Le)}),c(ke),g(ve,ke)};W(se,ve=>{a(l).removed.length>0&&ve(ge)})}var _e=h(se,2);{var pe=ve=>{var ke=s0(),Ve=h(d(ke),2);Qe(Ve,17,()=>a(l).changed,Vt,(Re,Ye)=>{var Le=r0(),at=d(Le,!0);c(Le),U(()=>Y(at,a(Ye))),g(Re,Le)}),c(ke),g(ve,ke)};W(_e,ve=>{a(l).changed.length>0&&ve(pe)})}var ye=h(_e,2);{var me=ve=>{var ke=i0();g(ve,ke)};W(ye,ve=>{a(l).added.length===0&&a(l).removed.length===0&&a(l).changed.length===0&&ve(me)})}c(te),c($),U(()=>Y(ce,`Diff: #${a(i)??""} vs #${a(s)??""}`)),g(j,$)};W(ne,j=>{a(l)&&j(le)})}var re=h(ne,2);{var Q=j=>{var $=m0(),de=d($),ce=d(de),te=d(ce,!0);c(ce);var ae=h(ce,2),be=d(ae,!0);c(ae);var se=h(ae,2),ge=d(se,!0);c(se),c(de);var _e=h(de,2);{var pe=He=>{var vt=d0(),ie=d(vt);Ma(ie,{size:12});var Me=h(ie,2),it=d(Me);c(Me);var Xe=h(Me,2);{var zt=Fe=>{var tt=c0(),ct=d(tt);c(tt),U(()=>Y(ct,`from checkpoint #${a(f).parent_index??""}`)),g(Fe,tt)};W(Xe,Fe=>{a(f).parent_index!==null&&a(f).parent_index!==void 0&&Fe(zt)})}c(vt),U(()=>Y(it,`Branch: ${a(f).branch_id??""}`)),g(He,vt)};W(_e,He=>{a(f).branch_id&&He(pe)})}var ye=h(_e,2),me=d(ye),ve=d(me);{var ke=He=>{la(He,{size:12})},Ve=He=>{Ta(He,{size:12})};W(ve,He=>{a(p)?He(ke):He(Ve,!1)})}var Re=h(ve,4),Ye=d(Re);c(Re),c(me);var Le=h(me,2);{var at=He=>{var vt=f0(),ie=d(vt);Qe(ie,17,()=>Object.entries(a(f).state),Vt,(zt,Fe)=>{var tt=k(()=>zn(a(Fe),2));let ct=()=>a(tt)[0],Et=()=>a(tt)[1];var Be=u0(),We=d(Be),yt=d(We);c(We);var St=h(We,2),Ct=d(St,!0);c(St),c(Be),U(ft=>{Y(yt,`${ct()??""}:`),Y(Ct,ft)},[()=>b(Et())]),g(zt,Be)});var Me=h(ie,2);{var it=zt=>{var Fe=v0();g(zt,Fe)},Xe=k(()=>Object.keys(a(f).state).length===0);W(Me,zt=>{a(Xe)&&zt(it)})}c(vt),g(He,vt)};W(Le,He=>{a(p)&&He(at)})}c(ye);var wt=h(ye,2),st=d(wt),ot=d(st);{var ut=He=>{la(He,{size:12})},Pe=He=>{Ta(He,{size:12})};W(ot,He=>{a(m)?He(ut):He(Pe,!1)})}var Rt=h(ot,4),Ht=d(Rt);c(Rt),c(st);var et=h(st,2);{var xt=He=>{var vt=g0(),ie=d(vt);Qe(ie,17,()=>Object.entries(a(f).inputs),Vt,(zt,Fe)=>{var tt=k(()=>zn(a(Fe),2));let ct=()=>a(tt)[0],Et=()=>a(tt)[1];var Be=p0(),We=d(Be),yt=d(We);c(We);var St=h(We,2),Ct=d(St,!0);c(St),c(Be),U(ft=>{Y(yt,`${ct()??""}:`),Y(Ct,ft)},[()=>b(Et())]),g(zt,Be)});var Me=h(ie,2);{var it=zt=>{var Fe=h0();g(zt,Fe)},Xe=k(()=>Object.keys(a(f).inputs).length===0);W(Me,zt=>{a(Xe)&&zt(it)})}c(vt),g(He,vt)};W(et,He=>{a(m)&&He(xt)})}c(wt),c($),U((He,vt,ie,Me,it,Xe)=>{pt(ce,`background: ${He??""}20; color: ${vt??""}`),Y(te,a(f).node_id),Y(be,ie),Y(ge,Me),Y(Ye,`${it??""} keys`),Y(Ht,`${Xe??""} keys`)},[()=>M(a(f).node_id),()=>M(a(f).node_id),()=>A(a(f).timestamp),()=>V(a(f).timestamp),()=>Object.keys(a(f).state).length,()=>Object.keys(a(f).inputs).length]),fe("click",me,()=>y(p,!a(p))),fe("click",st,()=>y(m,!a(m))),g(j,$)};W(re,j=>{a(f)&&j(Q)})}U(()=>Y(D,`${n().length??""} checkpoint${n().length===1?"":"s"}`)),fe("click",R,z),g(N,E)};W(H,N=>{n().length===0?N(B):N(X,!1)})}c(I),g(t,I),Ne(),r()}Tt(["click"]);var x0=x('<div class="empty-state svelte-1jltp3m"><!> <span>Loading history...</span></div>'),w0=x('<div class="empty-state svelte-1jltp3m"><!> <span>No version history yet</span></div>'),k0=x('<div class="confirm-bar svelte-1jltp3m"><span class="confirm-text svelte-1jltp3m"> </span> <button class="confirm-btn confirm-yes svelte-1jltp3m">Restore</button> <button class="confirm-btn confirm-no svelte-1jltp3m">Cancel</button></div>'),z0=x('<div><div class="version-icon svelte-1jltp3m"><!></div> <div class="version-info svelte-1jltp3m"><span class="version-sha svelte-1jltp3m"> </span> <span class="version-message svelte-1jltp3m"> </span> <span class="version-time svelte-1jltp3m"> </span></div> <div class="version-actions svelte-1jltp3m"><button><!></button> <button title="Restore to this version"><!></button></div> <!></div>'),S0=x('<div class="history-panel svelte-1jltp3m"><div class="header svelte-1jltp3m"><span class="title svelte-1jltp3m">Version History</span> <button class="refresh-btn svelte-1jltp3m" title="Refresh history"><!></button></div> <div class="versions-list svelte-1jltp3m"><!></div></div>');function C0(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",o),[o,r]=Xt();let i=G(pn([])),s=G(!1),l=G(null);async function u(){const O=n();if(O){y(s,!0);try{y(i,await kt.projects.getHistory(O.name),!0)}catch{y(i,[],!0)}finally{y(s,!1)}}}async function v(O){const b=n();if(b)try{await kt.projects.bookmarkVersion(b.name,O,`bookmark-${O.slice(0,7)}`),await u(),Je("Version bookmarked","success")}catch{Je("Failed to bookmark","error")}}async function p(O){const b=n();if(b)try{await kt.projects.restoreVersion(b.name,O),y(l,null),await yc(b),await u(),Je("Restored to version "+O.slice(0,7),"success")}catch{Je("Failed to restore","error")}}function m(O){const b=Date.now(),I=new Date(O).getTime(),H=b-I,B=Math.floor(H/6e4);if(B<1)return"just now";if(B<60)return`${B}m ago`;const X=Math.floor(B/60);return X<24?`${X}h ago`:`${Math.floor(X/24)}d ago`}xe(()=>{n()&&u()});var f=S0(),w=d(f),S=h(d(w),2),z=d(S);Pt(z,{size:13}),c(S),c(w);var P=h(w,2),L=d(P);{var A=O=>{var b=x0(),I=d(b);Pt(I,{size:16,class:"spin"}),he(2),c(b),g(O,b)},V=O=>{var b=w0(),I=d(b);Cs(I,{size:16}),he(2),c(b),g(O,b)},M=O=>{var b=Te(),I=oe(b);Qe(I,17,()=>a(i),H=>H.sha,(H,B)=>{var X=z0();let N;var E=d(X),C=d(E);Cs(C,{size:14}),c(E);var _=h(E,2),T=d(_),D=d(T,!0);c(T);var R=h(T,2),F=d(R,!0);c(R);var q=h(R,2),K=d(q,!0);c(q),c(_);var Z=h(_,2),ee=d(Z);let J;var ne=d(ee);{let de=k(()=>a(B).bookmarked?"currentColor":"none");cd(ne,{size:13,get fill(){return a(de)}})}c(ee);var le=h(ee,2);let re;var Q=d(le);rd(Q,{size:13}),c(le),c(Z);var j=h(Z,2);{var $=de=>{var ce=k0(),te=d(ce),ae=d(te);c(te);var be=h(te,2),se=h(be,2);c(ce),U(ge=>Y(ae,`Restore to ${ge??""}?`),[()=>a(B).sha.slice(0,7)]),fe("click",be,()=>p(a(B).sha)),fe("click",se,()=>y(l,null)),g(de,ce)};W(j,de=>{a(l)===a(B).sha&&de($)})}c(X),U((de,ce)=>{N=Oe(X,1,"version-item svelte-1jltp3m",null,N,{confirming:a(l)===a(B).sha}),Y(D,de),Y(F,a(B).message),Y(K,ce),J=Oe(ee,1,"action-btn bookmark-btn svelte-1jltp3m",null,J,{bookmarked:a(B).bookmarked}),ze(ee,"title",a(B).bookmarked?"Bookmarked":"Bookmark this version"),re=Oe(le,1,"action-btn restore-btn svelte-1jltp3m",null,re,{visible:a(l)===a(B).sha})},[()=>a(B).sha.slice(0,7),()=>m(a(B).timestamp)]),fe("click",ee,()=>v(a(B).sha)),fe("click",le,()=>y(l,a(B).sha,!0)),g(H,X)}),g(O,b)};W(L,O=>{a(s)?O(A):a(i).length===0?O(V,1):O(M,!1)})}c(P),c(f),U(()=>S.disabled=a(s)),fe("click",S,u),g(t,f),Ne(),r()}Tt(["click"]);var E0=x('<button class="create-btn svelte-1g6pzvd"><!> Create Tool</button>'),N0=x('<div class="empty-state svelte-1g6pzvd"><!> <span>Loading...</span></div>'),P0=x('<div class="empty-state svelte-1g6pzvd"><!> <span>No connectors available</span></div>'),M0=x('<span class="installed-badge svelte-1g6pzvd"><!> Installed</span>'),T0=x("<!> Hide Guide",1),I0=x("<!> Setup Guide",1),A0=x('<button class="guide-toggle svelte-1g6pzvd"><!></button>'),D0=x("<!> Installing...",1),O0=x("<!> Install",1),R0=x('<button class="install-btn svelte-1g6pzvd"><!></button>'),L0=x('<p class="guide-step svelte-1g6pzvd"> </p>'),V0=x('<div class="setup-guide svelte-1g6pzvd"></div>'),H0=x('<div><div class="card-top svelte-1g6pzvd"><div class="connector-icon svelte-1g6pzvd"><!></div> <div class="connector-meta svelte-1g6pzvd"><div class="connector-header-row svelte-1g6pzvd"><span class="connector-name svelte-1g6pzvd"> </span> <!></div> <span class="connector-category svelte-1g6pzvd"> </span></div></div> <p class="connector-desc svelte-1g6pzvd"> </p> <div class="card-footer svelte-1g6pzvd"><!> <!></div> <!></div>'),F0=x('<div class="connector-grid svelte-1g6pzvd"></div>'),q0=x('<div class="form-field full-width svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-auth-val"> </label> <input id="tool-auth-val" class="field-input svelte-1g6pzvd" type="password" placeholder="Enter credential..."/></div>'),B0=x('<div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-url">Base URL</label> <input id="tool-url" class="field-input svelte-1g6pzvd" placeholder="https://api.example.com"/></div> <div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-path">Path</label> <input id="tool-path" class="field-input svelte-1g6pzvd" placeholder="/v1/endpoint"/></div> <div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-method">Method</label> <select id="tool-method" class="field-input svelte-1g6pzvd"><option>GET</option><option>POST</option><option>PUT</option><option>PATCH</option><option>DELETE</option></select></div> <div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-auth">Auth Type</label> <select id="tool-auth" class="field-input svelte-1g6pzvd"><option>None</option><option>Bearer Token</option><option>API Key (Header)</option></select></div> <!>',1),K0=x('<div class="form-field full-width svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-webhook">Webhook URL</label> <input id="tool-webhook" class="field-input svelte-1g6pzvd" placeholder="https://hooks.example.com/..."/></div> <div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-wh-method">Method</label> <select id="tool-wh-method" class="field-input svelte-1g6pzvd"><option>POST</option><option>PUT</option><option>GET</option></select></div>',1),j0=x('<div class="form-field full-width svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-code">Python Code</label> <textarea id="tool-code" class="field-input code-input svelte-1g6pzvd" rows="6"></textarea></div>'),W0=x("<!> Saving...",1),Z0=x("<!> Create Tool",1),Y0=x('<div class="create-form svelte-1g6pzvd"><div class="form-header svelte-1g6pzvd"><span class="form-title svelte-1g6pzvd">Create Custom Tool</span> <button class="icon-btn svelte-1g6pzvd"><!></button></div> <div class="form-grid svelte-1g6pzvd"><div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-name">Name</label> <input id="tool-name" class="field-input svelte-1g6pzvd" placeholder="my_custom_tool"/></div> <div class="form-field svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-type">Type</label> <select id="tool-type" class="field-input svelte-1g6pzvd"><option>REST API</option><option>Webhook</option><option>Python Function</option></select></div> <div class="form-field full-width svelte-1g6pzvd"><label class="field-label svelte-1g6pzvd" for="tool-desc">Description</label> <input id="tool-desc" class="field-input svelte-1g6pzvd" placeholder="What this tool does..."/></div> <!></div> <div class="form-actions svelte-1g6pzvd"><button class="cancel-btn svelte-1g6pzvd">Cancel</button> <button class="save-btn svelte-1g6pzvd"><!></button></div></div>'),X0=x('<div class="empty-state svelte-1g6pzvd"><!> <div class="empty-text svelte-1g6pzvd"><span>No custom tools defined</span> <span class="empty-sub svelte-1g6pzvd">Create a custom API, webhook, or Python tool to extend your agents</span></div> <button class="empty-create-btn svelte-1g6pzvd"><!> Create Your First Tool</button></div>'),G0=x('<div class="tool-item svelte-1g6pzvd"><div class="tool-icon-wrap svelte-1g6pzvd"><!></div> <div class="tool-info svelte-1g6pzvd"><div class="tool-header svelte-1g6pzvd"><span class="tool-name svelte-1g6pzvd"> </span> <span class="tool-type-badge svelte-1g6pzvd"> </span></div> <span class="tool-desc svelte-1g6pzvd"> </span></div> <div class="tool-actions svelte-1g6pzvd"><button class="icon-btn svelte-1g6pzvd" title="Test tool"><!></button> <button class="icon-btn danger svelte-1g6pzvd" title="Delete tool"><!></button></div></div>'),U0=x('<div class="tools-list svelte-1g6pzvd"></div>'),J0=x("<!> <!>",1),Q0=x('<div class="panel svelte-1g6pzvd"><div class="header svelte-1g6pzvd"><div class="sub-tabs svelte-1g6pzvd"><button><!> Connectors</button> <button><!> Custom Tools</button></div> <div class="header-actions svelte-1g6pzvd"><!> <button class="action-btn svelte-1g6pzvd" title="Refresh"><!></button></div></div> <div class="content svelte-1g6pzvd"><!></div></div>');function $0(t,e){Ee(e,!0);const n={"message-square":Oc,send:Ii,hash:Mi,users:Fc,"git-pull-request":Qc,mail:ad,globe:ks,webhook:yr};let o=G("connectors"),r=G(!1),i=G(pn([])),s=G(null),l=G(null),u=G(pn([])),v=G(!1),p=G(""),m=G(""),f=G("api"),w=G(""),S=G(""),z=G("POST"),P=G("none"),L=G(""),A=G(""),V=G(""),M=G(!1);async function O(){y(r,!0);try{y(i,await kt.customTools.catalog(),!0)}catch{y(i,[],!0),Je("Failed to load connector catalog","error")}finally{y(r,!1)}}async function b(){y(r,!0);try{y(u,await kt.customTools.list(),!0)}catch{y(u,[],!0),Je("Failed to load custom tools","error")}finally{y(r,!1)}}async function I(te){y(s,te,!0);try{await kt.customTools.installConnector(te),Je("Connector installed","success"),await O()}catch{Je("Failed to install connector","error")}finally{y(s,null)}}async function H(te){try{await kt.customTools.delete(te),Je("Tool deleted","success"),await b()}catch{Je("Failed to delete tool","error")}}async function B(te){try{const ae=await kt.customTools.test(te);ae.status==="success"?Je(`Tool "${te}" test passed (${ae.response_time??0}ms)`,"success"):Je(`Tool test failed: ${ae.error??"Unknown error"}`,"error")}catch{Je("Failed to test tool","error")}}function X(){y(p,""),y(m,""),y(f,"api"),y(w,""),y(S,""),y(z,"POST"),y(P,"none"),y(L,""),y(A,""),y(V,"")}async function N(){if(!a(p).trim()){Je("Tool name is required","error");return}y(M,!0);try{const te={name:a(p).trim().toLowerCase().replace(/\s+/g,"_"),description:a(m).trim()||`Custom ${a(f)} tool`,tool_type:a(f),tags:["custom"]};a(f)==="api"?(te.api_base_url=a(w),te.api_path=a(S),te.api_method=a(z),te.api_auth_type=a(P),a(L)&&(te.api_auth_value=a(L))):a(f)==="webhook"?(te.webhook_url=a(A),te.webhook_method=a(z)):a(f)==="python"&&(te.python_code=a(V)),await kt.customTools.save(te),Je(`Tool "${a(p)}" created`,"success"),y(v,!1),X(),await b()}catch{Je("Failed to create tool","error")}finally{y(M,!1)}}function E(te){switch(te.toLowerCase()){case"messaging":return"#6366f1";case"developer":return"#22c55e";case"email":return"#f59e0b";case"integration":return"#8b5cf6";default:return"#64748b"}}xe(()=>{a(o)==="connectors"?O():b()});var C=Q0(),_=d(C),T=d(_),D=d(T);let R;var F=d(D);uo(F,{size:12}),he(),c(D);var q=h(D,2);let K;var Z=d(q);Kn(Z,{size:12}),he(),c(q),c(T);var ee=h(T,2),J=d(ee);{var ne=te=>{var ae=E0(),be=d(ae);wo(be,{size:12}),he(),c(ae),fe("click",ae,()=>{y(v,!a(v))}),g(te,ae)};W(J,te=>{a(o)==="tools"&&te(ne)})}var le=h(J,2),re=d(le);Pt(re,{size:13}),c(le),c(ee),c(_);var Q=h(_,2),j=d(Q);{var $=te=>{var ae=N0(),be=d(ae);Pt(be,{size:16,class:"spin"}),he(2),c(ae),g(te,ae)},de=te=>{var ae=Te(),be=oe(ae);{var se=_e=>{var pe=P0(),ye=d(pe);uo(ye,{size:16}),he(2),c(pe),g(_e,pe)},ge=_e=>{var pe=F0();Qe(pe,21,()=>a(i),ye=>ye.id,(ye,me)=>{const ve=k(()=>n[a(me).icon]);var ke=H0();let Ve;var Re=d(ke),Ye=d(Re);let Le;var at=d(Ye);{var wt=Be=>{var We=Te(),yt=oe(We);hn(yt,()=>a(ve),(St,Ct)=>{Ct(St,{size:18})}),g(Be,We)},st=Be=>{uo(Be,{size:18})};W(at,Be=>{a(ve)?Be(wt):Be(st,!1)})}c(Ye);var ot=h(Ye,2),ut=d(ot),Pe=d(ut),Rt=d(Pe,!0);c(Pe);var Ht=h(Pe,2);{var et=Be=>{var We=M0(),yt=d(We);Ia(yt,{size:9}),he(),c(We),g(Be,We)};W(Ht,Be=>{a(me).installed&&Be(et)})}c(ut);var xt=h(ut,2);let He;var vt=d(xt,!0);c(xt),c(ot),c(Re);var ie=h(Re,2),Me=d(ie,!0);c(ie);var it=h(ie,2),Xe=d(it);{var zt=Be=>{var We=A0(),yt=d(We);{var St=ft=>{var It=T0(),jt=oe(It);Pi(jt,{size:11}),he(),g(ft,It)},Ct=ft=>{var It=I0(),jt=oe(It);la(jt,{size:11}),he(),g(ft,It)};W(yt,ft=>{a(l)===a(me).id?ft(St):ft(Ct,!1)})}c(We),fe("click",We,()=>y(l,a(l)===a(me).id?null:a(me).id,!0)),g(Be,We)};W(Xe,Be=>{a(me).setup_guide&&Be(zt)})}var Fe=h(Xe,2);{var tt=Be=>{var We=R0(),yt=d(We);{var St=ft=>{var It=D0(),jt=oe(It);Pt(jt,{size:11,class:"spin"}),he(),g(ft,It)},Ct=ft=>{var It=O0(),jt=oe(It);Vo(jt,{size:11}),he(),g(ft,It)};W(yt,ft=>{a(s)===a(me).id?ft(St):ft(Ct,!1)})}c(We),U(()=>We.disabled=a(s)===a(me).id),fe("click",We,()=>I(a(me).id)),g(Be,We)};W(Fe,Be=>{a(me).installed||Be(tt)})}c(it);var ct=h(it,2);{var Et=Be=>{var We=V0();Qe(We,21,()=>a(me).setup_guide.split(`
`),Vt,(yt,St)=>{var Ct=L0(),ft=d(Ct,!0);c(Ct),U(()=>Y(ft,a(St))),g(yt,Ct)}),c(We),g(Be,We)};W(ct,Be=>{a(l)===a(me).id&&a(me).setup_guide&&Be(Et)})}c(ke),U((Be,We,yt)=>{Ve=Oe(ke,1,"connector-card svelte-1g6pzvd",null,Ve,{installed:a(me).installed}),Le=pt(Ye,"",Le,Be),Y(Rt,a(me).name),He=pt(xt,"",He,We),Y(vt,yt),Y(Me,a(me).description)},[()=>({"--cat-color":E(a(me).category)}),()=>({color:E(a(me).category)}),()=>a(me).category.toUpperCase()]),g(ye,ke)}),c(pe),g(_e,pe)};W(be,_e=>{a(i).length===0?_e(se):_e(ge,!1)})}g(te,ae)},ce=te=>{var ae=J0(),be=oe(ae);{var se=ye=>{var me=Y0(),ve=d(me),ke=h(d(ve),2),Ve=d(ke);Lo(Ve,{size:14}),c(ke),c(ve);var Re=h(ve,2),Ye=d(Re),Le=h(d(Ye),2);Nt(Le),c(Ye);var at=h(Ye,2),wt=h(d(at),2),st=d(wt);st.value=st.__value="api";var ot=h(st);ot.value=ot.__value="webhook";var ut=h(ot);ut.value=ut.__value="python",c(wt),c(at);var Pe=h(at,2),Rt=h(d(Pe),2);Nt(Rt),c(Pe);var Ht=h(Pe,2);{var et=Fe=>{var tt=B0(),ct=oe(tt),Et=h(d(ct),2);Nt(Et),c(ct);var Be=h(ct,2),We=h(d(Be),2);Nt(We),c(Be);var yt=h(Be,2),St=h(d(yt),2),Ct=d(St);Ct.value=Ct.__value="GET";var ft=h(Ct);ft.value=ft.__value="POST";var It=h(ft);It.value=It.__value="PUT";var jt=h(It);jt.value=jt.__value="PATCH";var _a=h(jt);_a.value=_a.__value="DELETE",c(St),c(yt);var In=h(yt,2),An=h(d(In),2),Un=d(An);Un.value=Un.__value="none";var ya=h(Un);ya.value=ya.__value="bearer";var Jn=h(ya);Jn.value=Jn.__value="api_key",c(An),c(In);var Xa=h(In,2);{var Xo=Wt=>{var ba=q0(),xa=d(ba),Go=d(xa,!0);c(xa);var Ga=h(xa,2);Nt(Ga),c(ba),U(()=>Y(Go,a(P)==="bearer"?"Bearer Token":"API Key")),Lt(Ga,()=>a(L),Uo=>y(L,Uo)),g(Wt,ba)};W(Xa,Wt=>{a(P)!=="none"&&Wt(Xo)})}Lt(Et,()=>a(w),Wt=>y(w,Wt)),Lt(We,()=>a(S),Wt=>y(S,Wt)),za(St,()=>a(z),Wt=>y(z,Wt)),za(An,()=>a(P),Wt=>y(P,Wt)),g(Fe,tt)},xt=Fe=>{var tt=K0(),ct=oe(tt),Et=h(d(ct),2);Nt(Et),c(ct);var Be=h(ct,2),We=h(d(Be),2),yt=d(We);yt.value=yt.__value="POST";var St=h(yt);St.value=St.__value="PUT";var Ct=h(St);Ct.value=Ct.__value="GET",c(We),c(Be),Lt(Et,()=>a(A),ft=>y(A,ft)),za(We,()=>a(z),ft=>y(z,ft)),g(Fe,tt)},He=Fe=>{var tt=j0(),ct=h(d(tt),2);Rr(ct),ze(ct,"placeholder","def run(input_data: dict) -> dict:     # Your tool logic here     return {result': 'hello'}"),c(tt),Lt(ct,()=>a(V),Et=>y(V,Et)),g(Fe,tt)};W(Ht,Fe=>{a(f)==="api"?Fe(et):a(f)==="webhook"?Fe(xt,1):a(f)==="python"&&Fe(He,2)})}c(Re);var vt=h(Re,2),ie=d(vt),Me=h(ie,2),it=d(Me);{var Xe=Fe=>{var tt=W0(),ct=oe(tt);Pt(ct,{size:12,class:"spin"}),he(),g(Fe,tt)},zt=Fe=>{var tt=Z0(),ct=oe(tt);Ia(ct,{size:12}),he(),g(Fe,tt)};W(it,Fe=>{a(M)?Fe(Xe):Fe(zt,!1)})}c(Me),c(vt),c(me),U(Fe=>Me.disabled=Fe,[()=>a(M)||!a(p).trim()]),fe("click",ke,()=>{y(v,!1),X()}),Lt(Le,()=>a(p),Fe=>y(p,Fe)),za(wt,()=>a(f),Fe=>y(f,Fe)),Lt(Rt,()=>a(m),Fe=>y(m,Fe)),fe("click",ie,()=>{y(v,!1),X()}),fe("click",Me,N),g(ye,me)};W(be,ye=>{a(v)&&ye(se)})}var ge=h(be,2);{var _e=ye=>{var me=X0(),ve=d(me);Kn(ve,{size:20});var ke=h(ve,4),Ve=d(ke);wo(Ve,{size:14}),he(),c(ke),c(me),fe("click",ke,()=>y(v,!0)),g(ye,me)},pe=ye=>{var me=U0();Qe(me,21,()=>a(u),ve=>ve.name,(ve,ke)=>{var Ve=G0(),Re=d(Ve),Ye=d(Re);{var Le=Xe=>{ks(Xe,{size:14})},at=Xe=>{yr(Xe,{size:14})},wt=Xe=>{qa(Xe,{size:14})};W(Ye,Xe=>{a(ke).tool_type==="api"?Xe(Le):a(ke).tool_type==="webhook"?Xe(at,1):Xe(wt,!1)})}c(Re);var st=h(Re,2),ot=d(st),ut=d(ot),Pe=d(ut,!0);c(ut);var Rt=h(ut,2),Ht=d(Rt,!0);c(Rt),c(ot);var et=h(ot,2),xt=d(et,!0);c(et),c(st);var He=h(st,2),vt=d(He),ie=d(vt);dd(ie,{size:13}),c(vt);var Me=h(vt,2),it=d(Me);Bn(it,{size:13}),c(Me),c(He),c(Ve),U(()=>{Y(Pe,a(ke).name),Y(Ht,a(ke).tool_type),Y(xt,a(ke).description)}),fe("click",vt,()=>B(a(ke).name)),fe("click",Me,()=>H(a(ke).name)),g(ve,Ve)}),c(me),g(ye,me)};W(ge,ye=>{a(u).length===0&&!a(v)?ye(_e):a(u).length>0&&ye(pe,1)})}g(te,ae)};W(j,te=>{a(r)?te($):a(o)==="connectors"?te(de,1):te(ce,!1)})}c(Q),c(C),U(()=>{R=Oe(D,1,"sub-tab svelte-1g6pzvd",null,R,{active:a(o)==="connectors"}),K=Oe(q,1,"sub-tab svelte-1g6pzvd",null,K,{active:a(o)==="tools"})}),fe("click",D,()=>y(o,"connectors")),fe("click",q,()=>y(o,"tools")),fe("click",le,()=>a(o)==="connectors"?O():b()),g(t,C),Ne()}Tt(["click"]);var ey=x('<div class="mini-empty svelte-3xr44d"><!> <span>Loading...</span></div>'),ty=x('<div class="mini-empty svelte-3xr44d"><!> <span>No datasets. Upload a JSON or CSV file to get started.</span></div>'),ny=x('<button><!> <span class="ds-name svelte-3xr44d"> </span> <span class="ds-meta svelte-3xr44d"> </span></button>'),ay=x('<div class="dataset-list svelte-3xr44d"></div>'),oy=x('<span class="result-error svelte-3xr44d"> </span>'),ry=x('<div><span class="result-icon svelte-3xr44d"><!></span> <span class="result-input svelte-3xr44d"> </span> <!></div>'),sy=x('<div class="results-list svelte-3xr44d"></div>'),iy=x('<div class="section svelte-3xr44d"><div class="section-label svelte-3xr44d">Results</div> <div class="metrics-row svelte-3xr44d"><div class="metric-card svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Total</span></div> <div class="metric-card success svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Passed</span></div> <div class="metric-card error svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Failed</span></div> <div class="metric-card svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Pass Rate</span></div></div> <!></div>'),ly=x('<div class="panel svelte-3xr44d"><div class="header svelte-3xr44d"><span class="title svelte-3xr44d">Evaluate</span> <div class="header-actions svelte-3xr44d"><button class="action-btn text-btn svelte-3xr44d"><!> Upload Dataset</button> <button class="action-btn svelte-3xr44d" title="Refresh"><!></button></div> <input type="file" accept=".json,.jsonl,.csv" style="display:none"/></div> <div class="content svelte-3xr44d"><div class="section svelte-3xr44d"><div class="section-label svelte-3xr44d">Datasets</div> <!></div> <div class="run-section svelte-3xr44d"><button class="run-btn svelte-3xr44d"><!> </button></div> <!></div></div>');function cy(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",o),[o,r]=Xt();let i=G(!1),s=G(pn([])),l=G(null),u=G(!1),v=G(null),p=G(void 0);async function m(){const q=n();if(q){y(i,!0);try{y(s,await kt.evaluate.listDatasets(q.name),!0)}catch{y(s,[],!0),Je("Failed to load datasets","error")}finally{y(i,!1)}}}async function f(){if(!n()){Je("Select a project first","error");return}a(p)?.click()}async function w(q){const K=n();if(!K)return;const Z=q.target,ee=Z.files?.[0];if(ee){try{const J=await kt.evaluate.uploadDataset(K.name,ee);Je(`Dataset uploaded: ${J.test_cases} test cases`,"success"),await m()}catch{Je("Failed to upload dataset","error")}Z.value=""}}async function S(){const q=n();if(!(!q||!a(l))){y(u,!0),y(v,null);try{const K=_i();y(v,await kt.evaluate.run(q.name,a(l),K),!0),Je(`Evaluation complete: ${a(v).pass_rate.toFixed(1)}% pass rate`,"success")}catch{Je("Evaluation failed","error")}finally{y(u,!1)}}}xe(()=>{n()&&m()});var z=ly(),P=d(z),L=h(d(P),2),A=d(L),V=d(A);ud(V,{size:12}),he(),c(A);var M=h(A,2),O=d(M);Pt(O,{size:13}),c(M),c(L);var b=h(L,2);mn(b,q=>y(p,q),()=>a(p)),c(P);var I=h(P,2),H=d(I),B=h(d(H),2);{var X=q=>{var K=ey(),Z=d(K);Pt(Z,{size:13}),he(2),c(K),g(q,K)},N=q=>{var K=ty(),Z=d(K);xs(Z,{size:13}),he(2),c(K),g(q,K)},E=q=>{var K=ay();Qe(K,21,()=>a(s),Z=>Z.filename,(Z,ee)=>{var J=ny();let ne;var le=d(J);xs(le,{size:12});var re=h(le,2),Q=d(re,!0);c(re);var j=h(re,2),$=d(j);c(j),c(J),U(()=>{ne=Oe(J,1,"dataset-item svelte-3xr44d",null,ne,{selected:a(l)===a(ee).filename}),Y(Q,a(ee).filename),Y($,`${a(ee).test_cases??""} cases`)}),fe("click",J,()=>y(l,a(ee).filename,!0)),g(Z,J)}),c(K),g(q,K)};W(B,q=>{a(i)?q(X):a(s).length===0?q(N,1):q(E,!1)})}c(H);var C=h(H,2),_=d(C),T=d(_);zi(T,{size:12});var D=h(T);c(_),c(C);var R=h(C,2);{var F=q=>{var K=iy(),Z=h(d(K),2),ee=d(Z),J=d(ee),ne=d(J,!0);c(J),he(2),c(ee);var le=h(ee,2),re=d(le),Q=d(re,!0);c(re),he(2),c(le);var j=h(le,2),$=d(j),de=d($,!0);c($),he(2),c(j);var ce=h(j,2),te=d(ce),ae=d(te);c(te),he(2),c(ce),c(Z);var be=h(Z,2);{var se=ge=>{var _e=sy();Qe(_e,21,()=>a(v).results,Vt,(pe,ye)=>{var me=ry();let ve;var ke=d(me),Ve=d(ke);{var Re=ot=>{Xc(ot,{size:12})},Ye=ot=>{Gc(ot,{size:12})};W(Ve,ot=>{a(ye).passed?ot(Re):ot(Ye,!1)})}c(ke);var Le=h(ke,2),at=d(Le,!0);c(Le);var wt=h(Le,2);{var st=ot=>{var ut=oy(),Pe=d(ut,!0);c(ut),U(()=>Y(Pe,a(ye).error)),g(ot,ut)};W(wt,ot=>{a(ye).error&&ot(st)})}c(me),U(()=>{ve=Oe(me,1,"result-row svelte-3xr44d",null,ve,{passed:a(ye).passed,failed:!a(ye).passed}),Y(at,a(ye).input)}),g(pe,me)}),c(_e),g(ge,_e)};W(be,ge=>{a(v).results.length>0&&ge(se)})}c(K),U(ge=>{Y(ne,a(v).total),Y(Q,a(v).passed),Y(de,a(v).failed),Y(ae,`${ge??""}%`)},[()=>a(v).pass_rate.toFixed(1)]),g(q,K)};W(R,q=>{a(v)&&q(F)})}c(I),c(z),U(()=>{_.disabled=!a(l)||a(u)||!n(),Y(D,` ${a(u)?"Running...":"Run Evaluation"}`)}),fe("click",A,f),fe("click",M,m),fe("change",b,w),fe("click",_,S),g(t,z),Ne(),r()}Tt(["click","change"]);var dy=x('<button class="icon-btn svelte-oe5i1m" title="Remove variant"><!></button>'),uy=x('<div class="variant-row svelte-oe5i1m"><input class="form-input small svelte-oe5i1m" type="text" placeholder="Name"/> <input class="form-input small svelte-oe5i1m" type="text" placeholder="Pipeline"/> <div class="traffic-input svelte-oe5i1m"><input class="form-input tiny svelte-oe5i1m" type="number"/> <span class="traffic-pct svelte-oe5i1m">%</span></div> <!></div>'),vy=x('<div class="create-form svelte-oe5i1m"><div class="form-row svelte-oe5i1m"><label class="form-label svelte-oe5i1m">Name</label> <input class="form-input svelte-oe5i1m" type="text" placeholder="Experiment name"/></div> <div class="form-row svelte-oe5i1m"><label class="form-label svelte-oe5i1m">Variants</label> <div class="variants-config svelte-oe5i1m"><!> <button class="add-variant-btn svelte-oe5i1m"><!> Add variant</button></div></div> <div class="form-actions svelte-oe5i1m"><button class="create-btn svelte-oe5i1m">Create Experiment</button> <button class="cancel-btn svelte-oe5i1m">Cancel</button></div></div>'),fy=x('<div class="empty-state svelte-oe5i1m"><!> <span>Loading...</span></div>'),py=x('<div class="empty-state svelte-oe5i1m"><!> <span>No experiments yet. Create one to A/B test pipeline variants.</span></div>'),hy=x('<div class="variant-item svelte-oe5i1m"><span class="variant-name svelte-oe5i1m"> </span> <div class="traffic-bar-container svelte-oe5i1m"><div class="traffic-bar svelte-oe5i1m"></div></div> <span class="variant-traffic svelte-oe5i1m"> </span></div>'),gy=x('<div class="experiment-card svelte-oe5i1m"><div class="exp-header svelte-oe5i1m"><!> <span class="exp-name svelte-oe5i1m"> </span> <span> </span> <span class="exp-date svelte-oe5i1m"> </span> <button class="icon-btn svelte-oe5i1m" title="Delete experiment"><!></button></div> <div class="variants-list svelte-oe5i1m"></div></div>'),my=x('<div class="experiment-list svelte-oe5i1m"></div>'),_y=x('<div class="panel svelte-oe5i1m"><div class="header svelte-oe5i1m"><span class="title svelte-oe5i1m">Experiments</span> <div class="header-actions svelte-oe5i1m"><button class="action-btn text-btn svelte-oe5i1m"><!> New</button> <button class="action-btn svelte-oe5i1m" title="Refresh"><!></button></div></div> <div class="content svelte-oe5i1m"><!> <!></div></div>');function yy(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",o),[o,r]=Xt();let i=G(!1),s=G(pn([])),l=G(!1),u=G(""),v=G(pn([{name:"Control",pipeline:"default",traffic:50},{name:"Variant A",pipeline:"default",traffic:50}]));async function p(){const _=n();if(_){y(i,!0);try{y(s,await kt.experiments.list(_.name),!0)}catch{y(s,[],!0),Je("Failed to load experiments","error")}finally{y(i,!1)}}}async function m(){const _=n();if(!(!_||!a(u).trim()))try{await kt.experiments.create(_.name,a(u).trim(),a(v)),Je("Experiment created","success"),y(u,""),y(l,!1),y(v,[{name:"Control",pipeline:"default",traffic:50},{name:"Variant A",pipeline:"default",traffic:50}],!0),await p()}catch{Je("Failed to create experiment","error")}}async function f(_){const T=n();if(T)try{await kt.experiments.delete(T.name,_),Je("Experiment deleted","success"),await p()}catch{Je("Failed to delete experiment","error")}}function w(){const _=a(v).length+1;y(v,[...a(v),{name:`Variant ${String.fromCharCode(64+_)}`,pipeline:"default",traffic:0}],!0)}function S(_){y(v,a(v).filter((T,D)=>D!==_),!0)}function z(_){switch(_){case"running":return"badge-running";case"completed":return"badge-completed";default:return"badge-draft"}}xe(()=>{n()&&p()});var P=_y(),L=d(P),A=h(d(L),2),V=d(A),M=d(V);wo(M,{size:12}),he(),c(V);var O=h(V,2),b=d(O);Pt(b,{size:13}),c(O),c(A),c(L);var I=h(L,2),H=d(I);{var B=_=>{var T=vy(),D=d(T),R=h(d(D),2);Nt(R),c(D);var F=h(D,2),q=h(d(F),2),K=d(q);Qe(K,17,()=>a(v),Vt,(re,Q,j)=>{var $=uy(),de=d($);Nt(de);var ce=h(de,2);Nt(ce);var te=h(ce,2),ae=d(te);Nt(ae),ze(ae,"min",0),ze(ae,"max",100),he(2),c(te);var be=h(te,2);{var se=ge=>{var _e=dy(),pe=d(_e);Bn(pe,{size:11}),c(_e),fe("click",_e,()=>S(j)),g(ge,_e)};W(be,ge=>{a(v).length>2&&ge(se)})}c($),Lt(de,()=>a(Q).name,ge=>a(Q).name=ge),Lt(ce,()=>a(Q).pipeline,ge=>a(Q).pipeline=ge),Lt(ae,()=>a(Q).traffic,ge=>a(Q).traffic=ge),g(re,$)});var Z=h(K,2),ee=d(Z);wo(ee,{size:11}),he(),c(Z),c(q),c(F);var J=h(F,2),ne=d(J),le=h(ne,2);c(J),c(T),U(re=>ne.disabled=re,[()=>!a(u).trim()]),Lt(R,()=>a(u),re=>y(u,re)),fe("click",Z,w),fe("click",ne,m),fe("click",le,()=>y(l,!1)),g(_,T)};W(H,_=>{a(l)&&_(B)})}var X=h(H,2);{var N=_=>{var T=fy(),D=d(T);Pt(D,{size:16}),he(2),c(T),g(_,T)},E=_=>{var T=py(),D=d(T);Si(D,{size:16}),he(2),c(T),g(_,T)},C=_=>{var T=my();Qe(T,21,()=>a(s),D=>D.id,(D,R)=>{var F=gy(),q=d(F),K=d(q);Ma(K,{size:13});var Z=h(K,2),ee=d(Z,!0);c(Z);var J=h(Z,2),ne=d(J,!0);c(J);var le=h(J,2),re=d(le,!0);c(le);var Q=h(le,2),j=d(Q);Bn(j,{size:12}),c(Q),c(q);var $=h(q,2);Qe($,21,()=>a(R).variants,de=>de.name,(de,ce)=>{var te=hy(),ae=d(te),be=d(ae,!0);c(ae);var se=h(ae,2),ge=d(se);let _e;c(se);var pe=h(se,2),ye=d(pe);c(pe),c(te),U(()=>{Y(be,a(ce).name),_e=pt(ge,"",_e,{width:`${a(ce).traffic??""}%`}),Y(ye,`${a(ce).traffic??""}%`)}),g(de,te)}),c($),c(F),U((de,ce)=>{Y(ee,a(R).name),Oe(J,1,`status-badge ${de??""}`,"svelte-oe5i1m"),Y(ne,a(R).status),Y(re,ce)},[()=>z(a(R).status),()=>new Date(a(R).created_at).toLocaleDateString()]),fe("click",Q,()=>f(a(R).id)),g(D,F)}),c(T),g(_,T)};W(X,_=>{a(i)?_(N):a(s).length===0&&!a(l)?_(E,1):_(C,!1)})}c(I),c(P),fe("click",V,()=>y(l,!a(l))),fe("click",O,p),g(t,P),Ne(),r()}Tt(["click"]);var by=x("<!> Copied",1),xy=x("<!> Copy",1),wy=x('<button class="action-btn text-btn svelte-1boqyeh" title="Copy code"><!></button> <button class="action-btn text-btn svelte-1boqyeh" title="Download as .py"><!> Download</button>',1),ky=x("<!> Generating...",1),zy=x("<!> Export as Python",1),Sy=x('<div class="code-container svelte-1boqyeh"><pre class="code-block svelte-1boqyeh"><code class="svelte-1boqyeh"> </code></pre></div>'),Cy=x('<div class="empty-state svelte-1boqyeh"><!> <span>Generating Python code...</span></div>'),Ey=x('<div class="empty-state svelte-1boqyeh"><!> <span>Click "Export as Python" to generate deployable code from your pipeline.</span></div>'),Ny=x('<div class="panel svelte-1boqyeh"><div class="header svelte-1boqyeh"><span class="title svelte-1boqyeh">Deploy / Export</span> <div class="header-actions svelte-1boqyeh"><!> <button class="export-btn svelte-1boqyeh"><!></button></div></div> <div class="content svelte-1boqyeh"><!></div></div>');function Py(t,e){Ee(e,!0);let n=G(!1),o=G(""),r=G(!1);async function i(){y(n,!0),y(o,"");try{const b=_i(),I=await kt.codegen.smith(b);y(o,I.code,!0),Je("Code generated successfully","success")}catch{Je("Failed to generate code","error")}finally{y(n,!1)}}async function s(){if(a(o))try{await navigator.clipboard.writeText(a(o)),y(r,!0),Je("Copied to clipboard","info"),setTimeout(()=>y(r,!1),2e3)}catch{Je("Failed to copy","error")}}function l(){if(!a(o))return;const b=new Blob([a(o)],{type:"text/x-python"}),I=URL.createObjectURL(b),H=document.createElement("a");H.href=I,H.download="pipeline.py",H.click(),URL.revokeObjectURL(I),Je("Download started","info")}var u=Ny(),v=d(u),p=h(d(v),2),m=d(p);{var f=b=>{var I=wy(),H=oe(I),B=d(H);{var X=_=>{var T=by(),D=oe(T);Ia(D,{size:12}),he(),g(_,T)},N=_=>{var T=xy(),D=oe(T);ki(D,{size:12}),he(),g(_,T)};W(B,_=>{a(r)?_(X):_(N,!1)})}c(H);var E=h(H,2),C=d(E);Vo(C,{size:12}),he(),c(E),fe("click",H,s),fe("click",E,l),g(b,I)};W(m,b=>{a(o)&&b(f)})}var w=h(m,2),S=d(w);{var z=b=>{var I=ky(),H=oe(I);Pt(H,{size:12}),he(),g(b,I)},P=b=>{var I=zy(),H=oe(I);br(H,{size:12}),he(),g(b,I)};W(S,b=>{a(n)?b(z):b(P,!1)})}c(w),c(p),c(v);var L=h(v,2),A=d(L);{var V=b=>{var I=Sy(),H=d(I),B=d(H),X=d(B,!0);c(B),c(H),c(I),U(()=>Y(X,a(o))),g(b,I)},M=b=>{var I=Cy(),H=d(I);Pt(H,{size:16}),he(2),c(I),g(b,I)},O=b=>{var I=Ey(),H=d(I);br(H,{size:16}),he(2),c(I),g(b,I)};W(A,b=>{a(o)?b(V):a(n)?b(M,1):b(O,!1)})}c(L),c(u),U(()=>w.disabled=a(n)),fe("click",w,i),g(t,u),Ne()}Tt(["click"]);var My=x('<div class="empty-state svelte-1bsb2d0"><!> <span>Loading usage data...</span></div>'),Ty=x('<div class="empty-state svelte-1bsb2d0"><!> <span>No usage data available. Run a pipeline to see metrics.</span></div>'),Iy=x('<div class="table-row svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span></div>'),Ay=x('<div class="breakdown-group svelte-1bsb2d0"><div class="breakdown-title svelte-1bsb2d0">By Model</div> <div class="breakdown-table svelte-1bsb2d0"><div class="table-header svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0">Model</span> <span class="col-num svelte-1bsb2d0">Requests</span> <span class="col-num svelte-1bsb2d0">Tokens</span> <span class="col-num svelte-1bsb2d0">Cost</span></div> <!></div></div>'),Dy=x('<div class="table-row svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span></div>'),Oy=x('<div class="breakdown-group svelte-1bsb2d0"><div class="breakdown-title svelte-1bsb2d0">By Agent</div> <div class="breakdown-table svelte-1bsb2d0"><div class="table-header svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0">Agent</span> <span class="col-num svelte-1bsb2d0">Requests</span> <span class="col-num svelte-1bsb2d0">Tokens</span> <span class="col-num svelte-1bsb2d0">Cost</span></div> <!></div></div>'),Ry=x('<div class="metrics-grid svelte-1bsb2d0"><div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Requests</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Tokens</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Cost</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Avg Latency</span></div></div></div> <div class="breakdown-section svelte-1bsb2d0"><!> <!></div>',1),Ly=x('<div class="panel svelte-1bsb2d0"><div class="header svelte-1bsb2d0"><span class="title svelte-1bsb2d0">Monitor</span> <button class="action-btn svelte-1bsb2d0" title="Refresh"><!></button></div> <div class="content svelte-1bsb2d0"><!></div></div>');function Vy(t,e){Ee(e,!0);let n=G(!1),o=G(null);async function r(){y(n,!0);try{y(o,await kt.monitoring.usage(),!0)}catch{y(o,null),Je("Failed to load usage data","error")}finally{y(n,!1)}}function i(L){return L>=1e6?`${(L/1e6).toFixed(1)}M`:L>=1e3?`${(L/1e3).toFixed(1)}K`:L.toString()}function s(L){return`$${L.toFixed(4)}`}function l(L,A){return A===0?"0ms":`${Math.round(L/A)}ms`}xe(()=>{r()});var u=Ly(),v=d(u),p=h(d(v),2),m=d(p);Pt(m,{size:13}),c(p),c(v);var f=h(v,2),w=d(f);{var S=L=>{var A=My(),V=d(A);Pt(V,{size:16}),he(2),c(A),g(L,A)},z=L=>{var A=Ty(),V=d(A);Ci(V,{size:16}),he(2),c(A),g(L,A)},P=L=>{var A=Ry(),V=oe(A),M=d(V),O=d(M),b=d(O);Mi(b,{size:14}),c(O);var I=h(O,2),H=d(I),B=d(H,!0);c(H),he(2),c(I),c(M);var X=h(M,2),N=d(X),E=d(N);yr(E,{size:14}),c(N);var C=h(N,2),_=d(C),T=d(_,!0);c(_),he(2),c(C),c(X);var D=h(X,2),R=d(D),F=d(R);Uc(F,{size:14}),c(R);var q=h(R,2),K=d(q),Z=d(K,!0);c(K),he(2),c(q),c(D);var ee=h(D,2),J=d(ee),ne=d(J);Kr(ne,{size:14}),c(J);var le=h(J,2),re=d(le),Q=d(re,!0);c(re),he(2),c(le),c(ee),c(V);var j=h(V,2),$=d(j);{var de=se=>{var ge=Ay(),_e=h(d(ge),2),pe=h(d(_e),2);Qe(pe,17,()=>Object.entries(a(o).by_model),([ye,me])=>ye,(ye,me)=>{var ve=k(()=>zn(a(me),2));let ke=()=>a(ve)[0],Ve=()=>a(ve)[1];var Re=Iy(),Ye=d(Re),Le=d(Ye,!0);c(Ye);var at=h(Ye,2),wt=d(at,!0);c(at);var st=h(at,2),ot=d(st,!0);c(st);var ut=h(st,2),Pe=d(ut,!0);c(ut),c(Re),U((Rt,Ht,et)=>{Y(Le,ke()),Y(wt,Rt),Y(ot,Ht),Y(Pe,et)},[()=>i(Ve().requests),()=>i(Ve().total_tokens),()=>s(Ve().cost_usd)]),g(ye,Re)}),c(_e),c(ge),g(se,ge)},ce=k(()=>Object.keys(a(o).by_model).length>0);W($,se=>{a(ce)&&se(de)})}var te=h($,2);{var ae=se=>{var ge=Oy(),_e=h(d(ge),2),pe=h(d(_e),2);Qe(pe,17,()=>Object.entries(a(o).by_agent),([ye,me])=>ye,(ye,me)=>{var ve=k(()=>zn(a(me),2));let ke=()=>a(ve)[0],Ve=()=>a(ve)[1];var Re=Dy(),Ye=d(Re),Le=d(Ye,!0);c(Ye);var at=h(Ye,2),wt=d(at,!0);c(at);var st=h(at,2),ot=d(st,!0);c(st);var ut=h(st,2),Pe=d(ut,!0);c(ut),c(Re),U((Rt,Ht,et)=>{Y(Le,ke()),Y(wt,Rt),Y(ot,Ht),Y(Pe,et)},[()=>i(Ve().requests),()=>i(Ve().total_tokens),()=>s(Ve().cost_usd)]),g(ye,Re)}),c(_e),c(ge),g(se,ge)},be=k(()=>Object.keys(a(o).by_agent).length>0);W(te,se=>{a(be)&&se(ae)})}c(j),U((se,ge,_e,pe)=>{Y(B,se),Y(T,ge),Y(Z,_e),Y(Q,pe)},[()=>i(a(o).total_requests),()=>i(a(o).total_tokens),()=>s(a(o).total_cost_usd),()=>l(a(o).total_latency_ms,a(o).total_requests)]),g(L,A)};W(w,L=>{a(n)&&!a(o)?L(S):a(o)?L(P,!1):L(z,1)})}c(f),c(u),U(()=>p.disabled=a(n)),fe("click",p,r),g(t,u),Ne()}Tt(["click"]);var Hy=x('<button class="back-btn svelte-tctccr" title="Back to file list"><!></button> <span class="file-path svelte-tctccr"> </span>',1),Fy=x('<span class="title svelte-tctccr">Files</span>'),qy=x('<div class="empty-state svelte-tctccr"><!> <span>Loading file...</span></div>'),By=x('<div class="code-viewer svelte-tctccr"><pre class="code-block svelte-tctccr"><code class="svelte-tctccr"> </code></pre></div>'),Ky=x('<div class="empty-state svelte-tctccr"><!> <span>Loading files...</span></div>'),jy=x('<div class="empty-state svelte-tctccr"><!> <span>No files in this project.</span></div>'),Wy=x('<div class="file-item dir svelte-tctccr"><!> <span class="file-name svelte-tctccr"> </span></div>'),Zy=x("<span> </span>"),Yy=x('<button class="file-item svelte-tctccr"><!> <span class="file-name svelte-tctccr"> </span> <!> <span class="file-size svelte-tctccr"> </span> <!></button>'),Xy=x('<div class="file-list svelte-tctccr"></div>'),Gy=x('<div class="panel svelte-tctccr"><div class="header svelte-tctccr"><!> <button class="action-btn svelte-tctccr" title="Refresh"><!></button></div> <div class="content svelte-tctccr"><!></div></div>');function Uy(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",o),[o,r]=Xt();let i=G(!1),s=G(pn([])),l=G(null),u=G(""),v=G(!1);async function p(){const C=n();if(C){y(i,!0);try{y(s,await kt.files.list(C.name),!0)}catch{y(s,[],!0)}finally{y(i,!1)}}}async function m(C){const _=n();if(_){y(v,!0),y(l,C,!0);try{const T=await kt.files.read(_.name,C);y(u,T.content,!0)}catch{y(u,"// Failed to load file content")}finally{y(v,!1)}}}function f(){y(l,null),y(u,"")}function w(C){const _=C.split(".");return _.length>1?_[_.length-1]:""}function S(C){switch(w(C)){case"py":return"ext-python";case"ts":case"js":return"ext-js";case"json":return"ext-json";case"yaml":case"yml":return"ext-yaml";case"md":return"ext-md";default:return""}}function z(C){return C<1024?`${C} B`:C<1024*1024?`${(C/1024).toFixed(1)} KB`:`${(C/(1024*1024)).toFixed(1)} MB`}xe(()=>{n()&&(y(l,null),y(u,""),p())});var P=Gy(),L=d(P),A=d(L);{var V=C=>{var _=Hy(),T=oe(_),D=d(T);Wc(D,{size:13}),c(T);var R=h(T,2),F=d(R,!0);c(R),U(()=>Y(F,a(l))),fe("click",T,f),g(C,_)},M=C=>{var _=Fy();g(C,_)};W(A,C=>{a(l)?C(V):C(M,!1)})}var O=h(A,2),b=d(O);Pt(b,{size:13}),c(O),c(L);var I=h(L,2),H=d(I);{var B=C=>{var _=Te(),T=oe(_);{var D=F=>{var q=qy(),K=d(q);Pt(K,{size:16}),he(2),c(q),g(F,q)},R=F=>{var q=By(),K=d(q),Z=d(K),ee=d(Z,!0);c(Z),c(K),c(q),U(()=>Y(ee,a(u))),g(F,q)};W(T,F=>{a(v)?F(D):F(R,!1)})}g(C,_)},X=C=>{var _=Ky(),T=d(_);Pt(T,{size:16}),he(2),c(_),g(C,_)},N=C=>{var _=jy(),T=d(_);Ei(T,{size:16}),he(2),c(_),g(C,_)},E=C=>{var _=Xy();Qe(_,21,()=>a(s),T=>T.path,(T,D)=>{var R=Te(),F=oe(R);{var q=Z=>{var ee=Wy(),J=d(ee);qc(J,{size:13});var ne=h(J,2),le=d(ne,!0);c(ne),c(ee),U(()=>Y(le,a(D).name)),g(Z,ee)},K=Z=>{var ee=Yy(),J=d(ee);Rc(J,{size:13});var ne=h(J,2),le=d(ne,!0);c(ne);var re=h(ne,2);{var Q=te=>{var ae=Zy(),be=d(ae,!0);c(ae),U((se,ge)=>{Oe(ae,1,`file-ext ${se??""}`,"svelte-tctccr"),Y(be,ge)},[()=>S(a(D).name),()=>w(a(D).name)]),g(te,ae)},j=k(()=>w(a(D).name));W(re,te=>{a(j)&&te(Q)})}var $=h(re,2),de=d($,!0);c($);var ce=h($,2);Ta(ce,{size:11}),c(ee),U(te=>{Y(le,a(D).name),Y(de,te)},[()=>z(a(D).size)]),fe("click",ee,()=>m(a(D).path)),g(Z,ee)};W(F,Z=>{a(D).is_dir?Z(q):Z(K,!1)})}g(T,R)}),c(_),g(C,_)};W(H,C=>{a(l)?C(B):a(i)?C(X,1):a(s).length===0?C(N,2):C(E,!1)})}c(I),c(P),fe("click",O,p),g(t,P),Ne(),r()}Tt(["click"]);var Jy=x('<span class="tab-badge svelte-b2w21g"> </span>'),Qy=x("<!> <span>Analyzing...</span>",1),$y=x("<!> <span>Analyze</span>",1),eb=x('<button class="oracle-analyze-btn svelte-b2w21g"><!></button>'),tb=x('<button class="oracle-clear-btn svelte-b2w21g" title="Clear conversation"><!></button>'),nb=x(`<div class="oracle-empty svelte-b2w21g"><!> <p class="svelte-b2w21g">No insights yet</p> <p class="oracle-empty-hint svelte-b2w21g">Click "Analyze" to review your pipeline, or insights will appear
						automatically as you build.</p></div>`),ab=x('<div class="insight-body svelte-b2w21g"><p class="insight-desc svelte-b2w21g"> </p></div>'),ob=x('<div class="insight-actions svelte-b2w21g"><button class="insight-btn approve svelte-b2w21g" title="Approve and send to Architect"><!> <span>Approve</span></button> <button class="insight-btn skip svelte-b2w21g" title="Skip this insight"><!> <span>Skip</span></button></div>'),rb=x('<div class="insight-status-badge approved-badge svelte-b2w21g">Sent to Architect</div>'),sb=x('<div class="insight-status-badge skipped-badge svelte-b2w21g">Skipped</div>'),ib=x('<div><div class="insight-header svelte-b2w21g" role="button" tabindex="0"><span class="insight-severity svelte-b2w21g"><!></span> <span class="insight-title svelte-b2w21g"> </span> <span class="insight-time svelte-b2w21g"> </span></div> <!> <!></div>'),lb=x('<div class="oracle-content svelte-b2w21g"><!></div>'),cb=x(`<div class="chat-welcome svelte-b2w21g"><!> <p class="chat-welcome-title svelte-b2w21g">Talk to The Oracle</p> <p class="chat-welcome-hint svelte-b2w21g">Ask about your pipeline, get advice on architecture decisions, or
						discuss optimization strategies.</p></div>`),db=x('<div class="oracle-chat svelte-b2w21g"><!></div> <div class="chat-input-area svelte-b2w21g"><textarea class="chat-input svelte-b2w21g" placeholder="Ask The Oracle..." rows="1"></textarea> <button class="chat-send-btn svelte-b2w21g"><!></button></div>',1),ub=x('<div class="oracle-panel svelte-b2w21g"><div class="oracle-header svelte-b2w21g"><div class="oracle-tabs svelte-b2w21g"><button><!> <span>Insights</span> <!></button> <button><!> <span>Chat</span></button></div> <!></div> <!></div>');function vb(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",u),o=()=>dt(yi,"$oracleInsights",u),r=()=>dt(Cc,"$oracleChatStreaming",u),i=()=>dt(bc,"$oracleChatMessages",u),s=()=>dt(Sc,"$oracleConnected",u),l=()=>dt(zc,"$oracleAnalyzing",u),[u,v]=Xt();let p=G("insights");const m={info:{icon:wi,color:"#3b82f6",label:"Info"},warning:{icon:Lc,color:"#f59e0b",label:"Warning"},suggestion:{icon:ed,color:"#8b5cf6",label:"Suggestion"},critical:{icon:Qt,color:"#ef4444",label:"Critical"}};function f(Q){return m[Q]??m.info}function w(Q){if(!Q)return"";try{return new Date(Q).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}catch{return""}}let S=G(null);function z(Q){y(S,a(S)===Q?null:Q,!0)}async function P(Q){const j=n();if(!j)return;const $=await Pc(j.name,Q.id);$&&window.dispatchEvent(new CustomEvent("oracle-approved",{detail:{instruction:$}}))}async function L(Q){const j=n();j&&await Mc(j.name,Q.id)}let A=k(()=>o().filter(Q=>Q.status==="pending").length),V=G(""),M=G(void 0);function O(){const Q=a(V).trim();!Q||r()||(Ec(Q),y(V,""),I())}function b(Q){Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),O())}function I(){requestAnimationFrame(()=>{a(M)&&(a(M).scrollTop=a(M).scrollHeight)})}function H(Q){return Q.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/\bon\w+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+)/gi,"")}function B(Q){if(!Q)return"";const j=Vc(Q,{async:!1});return H(j)}xe(()=>{i().length>0&&I()});var X=ub(),N=d(X),E=d(N),C=d(E);let _;var T=d(C);ko(T,{size:12});var D=h(T,4);{var R=Q=>{var j=Jy(),$=d(j,!0);c(j),U(()=>Y($,a(A))),g(Q,j)};W(D,Q=>{a(A)>0&&Q(R)})}c(C);var F=h(C,2);let q;var K=d(F);od(K,{size:12}),he(2),c(F),c(E);var Z=h(E,2);{var ee=Q=>{var j=eb(),$=d(j);{var de=te=>{var ae=Qy(),be=oe(ae);mi(be,{size:12,class:"oracle-spinner"}),he(2),g(te,ae)},ce=te=>{var ae=$y(),be=oe(ae);sd(be,{size:12}),he(2),g(te,ae)};W($,te=>{l()?te(de):te(ce,!1)})}c(j),U(()=>j.disabled=!s()||l()),fe("click",j,function(...te){xc?.apply(this,te)}),g(Q,j)},J=Q=>{var j=tb(),$=d(j);Bn($,{size:12}),c(j),fe("click",j,function(...de){wc?.apply(this,de)}),g(Q,j)};W(Z,Q=>{a(p)==="insights"?Q(ee):Q(J,!1)})}c(N);var ne=h(N,2);{var le=Q=>{var j=lb(),$=d(j);{var de=te=>{var ae=nb(),be=d(ae);ko(be,{size:24}),he(4),c(ae),g(te,ae)},ce=te=>{var ae=Te(),be=oe(ae);Qe(be,1,o,se=>se.id,(se,ge)=>{const _e=k(()=>f(a(ge).severity)),pe=k(()=>a(_e).icon);var ye=ib();let me;var ve=d(ye),ke=d(ve);let Ve;var Re=d(ke);hn(Re,()=>a(pe),(et,xt)=>{xt(et,{size:13})}),c(ke);var Ye=h(ke,2),Le=d(Ye,!0);c(Ye);var at=h(Ye,2),wt=d(at,!0);c(at),c(ve);var st=h(ve,2);{var ot=et=>{var xt=ab(),He=d(xt),vt=d(He,!0);c(He),c(xt),U(()=>Y(vt,a(ge).description)),g(et,xt)};W(st,et=>{a(S)===a(ge).id&&et(ot)})}var ut=h(st,2);{var Pe=et=>{var xt=ob(),He=d(xt),vt=d(He);Ia(vt,{size:11}),he(2),c(He);var ie=h(He,2),Me=d(ie);Lo(Me,{size:11}),he(2),c(ie),c(xt),fe("click",He,()=>P(a(ge))),fe("click",ie,()=>L(a(ge))),g(et,xt)},Rt=et=>{var xt=rb();g(et,xt)},Ht=et=>{var xt=sb();g(et,xt)};W(ut,et=>{a(ge).status==="pending"?et(Pe):a(ge).status==="approved"?et(Rt,1):et(Ht,!1)})}c(ye),U(et=>{me=Oe(ye,1,"insight-card svelte-b2w21g",null,me,{approved:a(ge).status==="approved",skipped:a(ge).status==="skipped"}),Ve=pt(ke,"",Ve,{color:a(_e).color}),Y(Le,a(ge).title),Y(wt,et)},[()=>w(a(ge).timestamp)]),fe("click",ve,()=>z(a(ge).id)),fe("keydown",ve,et=>et.key==="Enter"&&z(a(ge).id)),g(se,ye)}),g(te,ae)};W($,te=>{o().length===0?te(de):te(ce,!1)})}c(j),g(Q,j)},re=Q=>{var j=db(),$=oe(j),de=d($);{var ce=_e=>{var pe=cb(),ye=d(pe);Nc(ye,{size:20}),he(4),c(pe),g(_e,pe)},te=_e=>{var pe=Te(),ye=oe(pe);Qe(ye,1,i,me=>me.id,(me,ve)=>{var ke=Te(),Ve=oe(ke);{var Re=Le=>{Kl(Le,{accentColor:"#8b5cf6",messages:["Observing patterns...","Reading the tea leaves...","The cookies say...","Seeing what others cannot...","Contemplating the construct..."]})},Ye=Le=>{{let at=k(()=>a(ve).role==="oracle"?"assistant":"user"),wt=k(()=>B(a(ve).content)),st=k(()=>w(a(ve).timestamp));jl(Le,{get role(){return a(at)},get content(){return a(wt)},agentName:"Oracle",accentColor:"#8b5cf6",get timestamp(){return a(st)}})}};W(Ve,Le=>{a(ve).role==="oracle"&&a(ve).streaming&&!a(ve).content?Le(Re):Le(Ye,!1)})}g(me,ke)}),g(_e,pe)};W(de,_e=>{i().length===0?_e(ce):_e(te,!1)})}c($),mn($,_e=>y(M,_e),()=>a(M));var ae=h($,2),be=d(ae);Rr(be);var se=h(be,2),ge=d(se);kc(ge,{size:14}),c(se),c(ae),U(_e=>{be.disabled=!s()||r(),se.disabled=_e},[()=>!a(V).trim()||!s()||r()]),fe("keydown",be,b),Lt(be,()=>a(V),_e=>y(V,_e)),fe("click",se,O),g(Q,j)};W(ne,Q=>{a(p)==="insights"?Q(le):Q(re,!1)})}c(X),U(()=>{_=Oe(C,1,"oracle-tab svelte-b2w21g",null,_,{active:a(p)==="insights"}),q=Oe(F,1,"oracle-tab svelte-b2w21g",null,q,{active:a(p)==="chat"})}),fe("click",C,()=>y(p,"insights")),fe("click",F,()=>y(p,"chat")),g(t,X),Ne(),v()}Tt(["click","keydown"]);var fb=x('<div class="empty-state svelte-o0ko81"><!> <span>Loading executions...</span></div>'),pb=x('<div class="empty-state svelte-o0ko81"><!> <span>No executions yet. Start the runtime and trigger a pipeline to see results.</span></div>'),hb=x('<div class="exec-detail svelte-o0ko81"><div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">ID</span> <code class="detail-value svelte-o0ko81"> </code></div> <div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">Status</span> <span class="detail-value svelte-o0ko81"> </span></div> <div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">Duration</span> <code class="detail-value svelte-o0ko81"> </code></div></div>'),gb=x('<div class="table-row-wrapper svelte-o0ko81"><button class="table-row svelte-o0ko81"><span class="col-status svelte-o0ko81"><span class="status-dot svelte-o0ko81"></span></span> <span class="col-id svelte-o0ko81"><code class="svelte-o0ko81"> </code></span> <span class="col-duration svelte-o0ko81"><code class="svelte-o0ko81"> </code></span> <span class="col-expand svelte-o0ko81"><!></span></button> <!></div>'),mb=x('<div class="exec-table svelte-o0ko81"><div class="table-header svelte-o0ko81"><span class="col-status svelte-o0ko81">Status</span> <span class="col-id svelte-o0ko81">Execution ID</span> <span class="col-duration svelte-o0ko81">Duration</span> <span class="col-expand svelte-o0ko81"></span></div> <!></div>'),_b=x('<div class="panel svelte-o0ko81"><div class="header svelte-o0ko81"><span class="title svelte-o0ko81">Executions</span> <button class="action-btn svelte-o0ko81" title="Refresh"><!></button></div> <div class="content svelte-o0ko81"><!></div></div>');function yb(t,e){Ee(e,!0);const n=()=>dt(ma,"$currentProject",r),o=()=>dt(xr,"$bottomPanelTab",r),[r,i]=Xt();let s=G(!1),l=G(pn([])),u=G(null),v=k(()=>n()?.name??""),p=k(o);async function m(){if(a(v)){y(s,!0);try{const B=await kt.runtime.executions(a(v));y(l,B.executions??[],!0)}catch{y(l,[],!0),Je("Failed to load executions","error")}finally{y(s,!1)}}}function f(B){y(u,a(u)===B?null:B,!0)}function w(B){return B==null?"--":B<1e3?`${B}ms`:`${(B/1e3).toFixed(2)}s`}function S(B){return B.length<=12?B:B.slice(0,8)+"..."}function z(B){switch(B.toLowerCase()){case"completed":case"success":return"var(--color-success)";case"running":case"in_progress":return"#f59e0b";case"failed":case"error":return"var(--color-error)";default:return"var(--color-text-secondary)"}}xe(()=>{a(p)==="executions"&&a(v)&&m()}),xe(()=>{if(a(p)!=="executions"||!a(v))return;const B=setInterval(m,1e4);return()=>clearInterval(B)});var P=_b(),L=d(P),A=h(d(L),2),V=d(A);Pt(V,{size:13}),c(A),c(L);var M=h(L,2),O=d(M);{var b=B=>{var X=fb(),N=d(X);Pt(N,{size:16}),he(2),c(X),g(B,X)},I=B=>{var X=pb(),N=d(X);Ti(N,{size:16}),he(2),c(X),g(B,X)},H=B=>{var X=mb(),N=h(d(X),2);Qe(N,17,()=>a(l),E=>E.execution_id,(E,C)=>{var _=gb(),T=d(_),D=d(T),R=d(D);let F;c(D);var q=h(D,2),K=d(q),Z=d(K,!0);c(K),c(q);var ee=h(q,2),J=d(ee),ne=d(J,!0);c(J),c(ee);var le=h(ee,2),re=d(le);{var Q=ce=>{la(ce,{size:12})},j=ce=>{Ta(ce,{size:12})};W(re,ce=>{a(u)===a(C).execution_id?ce(Q):ce(j,!1)})}c(le),c(T);var $=h(T,2);{var de=ce=>{var te=hb(),ae=d(te),be=h(d(ae),2),se=d(be,!0);c(be),c(ae);var ge=h(ae,2),_e=h(d(ge),2);let pe;var ye=d(_e,!0);c(_e),c(ge);var me=h(ge,2),ve=h(d(me),2),ke=d(ve,!0);c(ve),c(me),c(te),U((Ve,Re)=>{Y(se,a(C).execution_id),pe=pt(_e,"",pe,Ve),Y(ye,a(C).status),Y(ke,Re)},[()=>({color:z(a(C).status)}),()=>w(a(C).duration_ms)]),g(ce,te)};W($,ce=>{a(u)===a(C).execution_id&&ce(de)})}c(_),U((ce,te,ae)=>{F=pt(R,"",F,ce),ze(q,"title",a(C).execution_id),Y(Z,te),Y(ne,ae)},[()=>({background:z(a(C).status)}),()=>S(a(C).execution_id),()=>w(a(C).duration_ms)]),fe("click",T,()=>f(a(C).execution_id)),g(E,_)}),c(X),g(B,X)};W(O,B=>{a(s)&&a(l).length===0?B(b):a(l).length===0?B(I,1):B(H,!1)})}c(M),c(P),U(()=>A.disabled=a(s)),fe("click",A,m),g(t,P),Ne(),i()}Tt(["click"]);var bb=x('<div class="drag-handle svelte-1m9rotx"><div class="drag-indicator svelte-1m9rotx"></div></div>'),xb=x('<span class="tab-badge error svelte-1m9rotx"> </span>'),wb=x('<span class="tab-badge accent svelte-1m9rotx"> </span>'),kb=x('<span class="tab-badge accent svelte-1m9rotx"> </span>'),zb=x("<button><!> <span> </span> <!></button>"),Sb=x('<div class="tab-content svelte-1m9rotx"><!></div>'),Cb=x('<div><!> <div class="tab-bar svelte-1m9rotx"><div class="tab-list svelte-1m9rotx"></div> <button class="toggle-btn svelte-1m9rotx"><!></button></div> <!></div>');function Eb(t,e){Ee(e,!0);const n=()=>dt(_r,"$executionEvents",l),o=()=>dt(Rn,"$checkpoints",l),r=()=>dt(yi,"$oracleInsights",l),i=()=>dt(rr,"$bottomPanelOpen",l),s=()=>dt(xr,"$bottomPanelTab",l),[l,u]=Xt(),v=k(()=>n().filter(K=>K.type==="node_error").length),p=k(()=>o().length),m=k(()=>r().filter(K=>K.status==="pending").length),f=[{id:"console",label:"Console",icon:Hc},{id:"code",label:"Code",icon:qa},{id:"timeline",label:"Timeline",icon:Kr},{id:"integrations",label:"Integrate",icon:uo},{id:"evaluate",label:"Evaluate",icon:Si},{id:"experiments",label:"Experiments",icon:Ma},{id:"deploy",label:"Deploy",icon:br},{id:"monitor",label:"Monitor",icon:Ci},{id:"files",label:"Files",icon:Ei},{id:"history",label:"History",icon:$c},{id:"oracle",label:"Oracle",icon:ko},{id:"executions",label:"Executions",icon:Ti}];let w=G(320),S=G(!1),z=G(0),P=G(0);const L=120;function A(){rr.update(K=>!K)}function V(K){xr.set(K),i()||rr.set(!0)}function M(K){K.preventDefault(),y(S,!0),y(z,K.clientY,!0),y(P,a(w),!0),document.addEventListener("mousemove",O),document.addEventListener("mouseup",b)}function O(K){if(!a(S))return;const Z=Math.floor(window.innerHeight*.6),ee=a(z)-K.clientY,J=Math.max(L,Math.min(Z,a(P)+ee));y(w,J,!0)}function b(){y(S,!1),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",b)}ga(()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",b)});var I=Cb();let H,B;var X=d(I);{var N=K=>{var Z=bb();fe("mousedown",Z,M),g(K,Z)};W(X,K=>{i()&&K(N)})}var E=h(X,2),C=d(E);Qe(C,21,()=>f,K=>K.id,(K,Z)=>{const ee=k(()=>a(Z).icon);var J=zb();let ne;var le=d(J);hn(le,()=>a(ee),(te,ae)=>{ae(te,{size:13})});var re=h(le,2),Q=d(re,!0);c(re);var j=h(re,2);{var $=te=>{var ae=xb(),be=d(ae,!0);c(ae),U(()=>Y(be,a(v)>99?"99+":a(v))),g(te,ae)},de=te=>{var ae=wb(),be=d(ae,!0);c(ae),U(()=>Y(be,a(p)>99?"99+":a(p))),g(te,ae)},ce=te=>{var ae=kb(),be=d(ae,!0);c(ae),U(()=>Y(be,a(m)>99?"99+":a(m))),g(te,ae)};W(j,te=>{a(Z).id==="console"&&a(v)>0?te($):a(Z).id==="timeline"&&a(p)>0?te(de,1):a(Z).id==="oracle"&&a(m)>0&&te(ce,2)})}c(J),U(()=>{ne=Oe(J,1,"tab-btn svelte-1m9rotx",null,ne,{active:s()===a(Z).id}),Y(Q,a(Z).label)}),fe("click",J,()=>V(a(Z).id)),g(K,J)}),c(C);var _=h(C,2),T=d(_);{var D=K=>{la(K,{size:14})},R=K=>{Pi(K,{size:14})};W(T,K=>{i()?K(D):K(R,!1)})}c(_),c(E);var F=h(E,2);{var q=K=>{var Z=Sb(),ee=d(Z);{var J=se=>{x_(se,{})},ne=se=>{G_(se,{})},le=se=>{b0(se,{})},re=se=>{$0(se,{})},Q=se=>{cy(se,{})},j=se=>{yy(se,{})},$=se=>{Py(se,{})},de=se=>{Vy(se,{})},ce=se=>{Uy(se,{})},te=se=>{C0(se,{})},ae=se=>{vb(se,{})},be=se=>{yb(se,{})};W(ee,se=>{s()==="console"?se(J):s()==="code"?se(ne,1):s()==="timeline"?se(le,2):s()==="integrations"?se(re,3):s()==="evaluate"?se(Q,4):s()==="experiments"?se(j,5):s()==="deploy"?se($,6):s()==="monitor"?se(de,7):s()==="files"?se(ce,8):s()==="history"?se(te,9):s()==="oracle"?se(ae,10):s()==="executions"&&se(be,11)})}c(Z),g(K,Z)};W(F,K=>{i()&&K(q)})}c(I),U(()=>{H=Oe(I,1,"bottom-panel svelte-1m9rotx",null,H,{dragging:a(S)}),B=pt(I,"",B,{height:i()?`${a(w)}px`:"36px"}),ze(_,"title",i()?"Collapse panel":"Expand panel")}),fe("click",_,A),g(t,I),Ne(),u()}Tt(["mousedown","click"]);var Nb=x('<div class="construct-page svelte-1ri5xm6"><div class="top-area svelte-1ri5xm6"><!> <!></div> <!></div>');function Vb(t){var e=Nb(),n=d(e),o=d(n);i1(o,{});var r=h(o,2);p_(r,{}),c(n);var i=h(n,2);Eb(i,{}),c(e),g(t,e)}export{Vb as component};
