import"../chunks/DsnmJJEf.js";import{h as da,d as Br,bk as jr,e as Us,W as Ur,bl as Hr,bm as Fr,av as Gr,aJ as bs,i as ms,g as _s,j as Kr,au as qr,c as Ze,f as he,a as b,w as Ln,b9 as Zr,K as xn,p as on,t as In,b as cn,F as d,O as Je,G as o,I as g,y as s,C as le,J as ge,L as F,D as w,M as ve,Q as _t,N as m,P as ma,a2 as Ut,bj as Qa,a8 as On,as as Jn,ah as Ba,o as Ja,bn as Wr,b8 as Vr,bo as Yr}from"../chunks/BNectIeB.js";import{L as Hs,a as St,C as Hn,b as ys,S as es,c as Fs,P as ja,d as ts,r as ns,i as Xr,e as Qr,T as Gs,F as Jr,G as ei,R as ti,A as ni,f as ai,g as si,D as ri,B as ua,W as ii,h as li,j as oi,k as ci,l as di,m as ui,n as pi,o as gi,p as vi,s as Ks,q as Ua,M as qs,Z as Ha,t as Zs,u as hi,v as fi,I as bi,w as mi,x as _i,X as Fa,y as yi,z as ki,E as wi,H as xi,J as Ei,K as Si,N as ks,O as Ai,Q as Ga}from"../chunks/DiTIFvoL.js";import{I as yt,s as kt,c as Ht,a as it,L as as,t as kn,m as ot,b as $t,u as wn,v as Fn,p as Ca,e as gt,q as At,k as Mt,P as Ws,w as Ka,h as ws,g as Ti,B as Ni,D as Ri,x as Wt,n as Vs,o as Ys,y as $i,r as zi,z as qa,A as Mi,C as ra}from"../chunks/K2hNZgUo.js";import{B as Ci,l as wt,s as xt,p as Xs,i as Q,a as mn,b as ct}from"../chunks/BB2KRr3j.js";import{s as Oi,a as Ii,g as jn}from"../chunks/DaZstLas.js";import{s as ea,c as Gn,d as Za,a as ia,r as Pi,b as Oa,e as Wa,f as pa}from"../chunks/CKy8R5Mg.js";import{i as Qs}from"../chunks/FsCUQR17.js";import{b as ga,c as Js}from"../chunks/DfPw5QXW.js";import{S as xs,a as Es}from"../chunks/CCyXRANn.js";const Li=Symbol("NaN");function Di(t,e,n){da&&Br();var r=new Ci(t),a=!jr();Us(()=>{var c=e();c!==c&&(c=Li),a&&c!==null&&typeof c=="object"&&(c={}),r.ensure(c,n)})}function Bi(t,e){let n=null,r=da;var a;if(da){n=Kr;for(var c=qr(document.head);c!==null&&(c.nodeType!==Gr||c.data!==t);)c=bs(c);if(c===null)ms(!1);else{var i=bs(c);c.remove(),_s(i)}}da||(a=document.head.appendChild(Ur()));try{Us(()=>e(a),Hr|Fr)}finally{r&&(ms(!0),_s(n))}}const ji=!1,Ui=!1,Sd=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ui,ssr:ji},Symbol.toStringTag,{value:"Module"})),ss="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='100'%20cy='100'%20r='100'%20fill='url(%23paint0_linear_76_8)'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M100%2027C96.9983%2027.0001%2094.0805%2027.9929%2091.6991%2029.8243C89.3177%2031.6558%2087.6058%2034.2235%2086.8289%2037.1294C86.052%2040.0353%2086.2535%2043.1169%2087.4021%2045.8963C88.5507%2048.6758%2090.5823%2050.9977%2093.1818%2052.502V61.1667H72.7273C50.9091%2061.1667%2045.4545%2079.3912%2045.4545%2088.5V136.333C45.4545%20140.891%2048.1818%20150%2059.0909%20150H65.9091V122.667C65.9091%20120.854%2066.6274%20119.116%2067.9061%20117.835C69.1847%20116.553%2070.919%20115.833%2072.7273%20115.833H127.273C129.081%20115.833%20130.815%20116.553%20132.094%20117.835C133.373%20119.116%20134.091%20120.854%20134.091%20122.667V150H140.909C151.818%20150%20154.545%20140.891%20154.545%20136.333V88.5C154.545%2066.6333%20136.361%2061.1667%20127.273%2061.1667H106.818V52.502C109.418%2050.9977%20111.449%2048.6758%20112.598%2045.8963C113.747%2043.1169%20113.948%2040.0353%20113.171%2037.1294C112.394%2034.2235%20110.682%2031.6558%20108.301%2029.8243C105.92%2027.9929%20103.002%2027.0001%20100%2027ZM120.455%20150V129.5H106.818V150H120.455ZM93.1818%20150V129.5H79.5455V150H93.1818ZM161.364%20129.5V95.3333C165.911%2095.3333%20175%2098.0667%20175%20109V115.833C175%20120.391%20172.273%20129.5%20161.364%20129.5ZM38.6364%2095.3333V129.5C27.7273%20129.5%2025%20120.391%2025%20115.833V109C25%2098.0667%2034.0886%2095.3333%2038.6364%2095.3333ZM79.5455%2088.5C77.7372%2088.5%2076.0029%2089.2199%2074.7243%2090.5014C73.4456%2091.7829%2072.7273%2093.521%2072.7273%2095.3333C72.7273%2097.1456%2073.4456%2098.8837%2074.7243%20100.165C76.0029%20101.447%2077.7372%20102.167%2079.5455%20102.167H79.5523C81.3606%20102.167%2083.0948%20101.447%2084.3735%20100.165C85.6521%2098.8837%2086.3705%2097.1456%2086.3705%2095.3333C86.3705%2093.521%2085.6521%2091.7829%2084.3735%2090.5014C83.0948%2089.2199%2081.3606%2088.5%2079.5523%2088.5H79.5455ZM113.636%2095.3333C113.636%2093.521%20114.355%2091.7829%20115.633%2090.5014C116.912%2089.2199%20118.646%2088.5%20120.455%2088.5H120.461C122.27%2088.5%20124.004%2089.2199%20125.283%2090.5014C126.561%2091.7829%20127.28%2093.521%20127.28%2095.3333C127.28%2097.1456%20126.561%2098.8837%20125.283%20100.165C124.004%20101.447%20122.27%20102.167%20120.461%20102.167H120.455C118.646%20102.167%20116.912%20101.447%20115.633%20100.165C114.355%2098.8837%20113.636%2097.1456%20113.636%2095.3333Z'%20fill='white'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_76_8'%20x1='200'%20y1='100'%20x2='0'%20y2='100'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F68000'/%3e%3cstop%20offset='1'%20stop-color='%23FFF9C1'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Hi=()=>{const t=Oi;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},Fi={subscribe(t){return Hi().page.subscribe(t)}};function er(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 20v-9"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"}],["path",{d:"M14.12 3.88 16 2"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97"}],["path",{d:"M22 13h-4"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97"}],["path",{d:"M6 13H2"}],["path",{d:"m8 2 1.88 1.88"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13"}]];yt(t,xt({name:"bug"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function Gi(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}]];yt(t,xt({name:"panel-left"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function Ki(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];yt(t,xt({name:"save"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function qi(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];yt(t,xt({name:"power"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}const la=Ln(null),oa=Ln(!1),Un=Ln("stopped"),Xn=Ln("checking"),tr=Ln(""),Zi={subscribe:Xn.subscribe};tr.subscribe;Zr(Xn,t=>t==="connected");let Qn=null;async function Ss(){try{const t=await fetch("/api/health",{signal:AbortSignal.timeout(3e3)});if(t.ok){const e=await t.json();Xn.set("connected"),tr.set(e.version??"")}else Xn.set("disconnected")}catch{Xn.set("disconnected")}}function Wi(t=1e4){Qn||(Ss(),Qn=setInterval(Ss,t))}function Vi(){Qn&&(clearInterval(Qn),Qn=null)}function Yi(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];yt(t,xt({name:"globe"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}var Xi=w('<span class="spin-icon svelte-1vh905b"><!></span> <span> </span>',1),Qi=w("<!> <span> </span>",1),Ji=w('<div class="url-section svelte-1vh905b"><label class="url-label svelte-1vh905b">Project API Endpoint</label> <div class="url-row svelte-1vh905b"><code class="url-value svelte-1vh905b"> </code> <button class="copy-btn svelte-1vh905b" title="Copy endpoint"><!></button></div> <p class="url-hint svelte-1vh905b">Send a POST request with a JSON body to run your pipeline remotely.</p></div>'),el=w('<div class="url-section svelte-1vh905b"><label class="url-label svelte-1vh905b">Tunnel URL</label> <div class="url-row svelte-1vh905b"><code class="url-value svelte-1vh905b"> </code> <button class="copy-btn svelte-1vh905b" title="Copy URL"><!></button></div></div> <!>',1),tl=w('<div class="share-backdrop svelte-1vh905b"><div class="share-modal svelte-1vh905b" role="dialog" aria-modal="true" aria-label="Share"><div class="share-header svelte-1vh905b"><div class="share-title svelte-1vh905b"><!> <span>Share & Expose</span></div> <kbd class="share-close-hint svelte-1vh905b">ESC</kbd></div> <div class="share-body svelte-1vh905b"><div class="tunnel-section svelte-1vh905b"><div class="tunnel-status-row svelte-1vh905b"><div class="tunnel-status-info svelte-1vh905b"><span></span> <span class="tunnel-label svelte-1vh905b"> </span></div> <button><!></button></div> <p class="tunnel-desc svelte-1vh905b">Expose your local Firefly Studio via a Cloudflare Tunnel. Anyone with the URL can interact with your pipeline.</p></div> <!></div> <div class="share-footer svelte-1vh905b"><button class="btn-close svelte-1vh905b">Close</button></div></div></div>');function nl(t,e){on(e,!0);const n=()=>ct(la,"$tunnelUrl",c),r=()=>ct(oa,"$tunnelActive",c),a=()=>ct(kn,"$currentProject",c),[c,i]=mn();let u=Xs(e,"open",3,!1),p=ve(!1),f=ve(!1),h=_t(n),y=_t(r),_=_t(()=>a()?.name??""),z=_t(()=>s(h)?`${s(h)}/api/projects/${s(_)}/run`:null);In(()=>{u()&&A()});async function A(){try{const G=await Ht.tunnel.status();oa.set(G.active),la.set(G.url)}catch{}}async function O(){m(p,!0);try{const G=await Ht.tunnel.start();oa.set(!0),la.set(G.url),St("Tunnel started","success")}catch{St("Failed to start tunnel","error")}finally{m(p,!1)}}async function B(){m(p,!0);try{await Ht.tunnel.stop(),oa.set(!1),la.set(null),St("Tunnel stopped","success")}catch{St("Failed to stop tunnel","error")}finally{m(p,!1)}}async function te(G){try{await navigator.clipboard.writeText(G),m(f,!0),setTimeout(()=>{m(f,!1)},2e3)}catch{St("Failed to copy","error")}}function de(G){G.target===G.currentTarget&&e.onclose()}function $(G){G.key==="Escape"&&(G.preventDefault(),e.onclose())}var k=Ze(),E=he(k);{var C=G=>{var oe=tl(),ne=d(oe),Re=d(ne),et=d(Re),qe=d(et);Hs(qe,{size:18}),Je(2),o(et),Je(2),o(Re);var Ne=g(Re,2),se=d(Ne),$e=d(se),Ce=d($e),tt=d(Ce);let J;var Pe=g(tt,2),Oe=d(Pe,!0);o(Pe),o(Ce);var Le=g(Ce,2);let We;var rt=d(Le);{var at=M=>{var K=Xi(),j=he(K),q=d(j);as(q,{size:13}),o(j);var ee=g(j,2),ue=d(ee,!0);o(ee),le(()=>ge(ue,s(y)?"Stopping...":"Starting...")),b(M,K)},Xe=M=>{var K=Qi(),j=he(K);Yi(j,{size:13});var q=g(j,2),ee=d(q,!0);o(q),le(()=>ge(ee,s(y)?"Stop Tunnel":"Start Tunnel")),b(M,K)};Q(rt,M=>{s(p)?M(at):M(Xe,!1)})}o(Le),o($e),Je(2),o(se);var ut=g(se,2);{var pt=M=>{var K=el(),j=he(K),q=g(d(j),2),ee=d(q),ue=d(ee,!0);o(ee);var be=g(ee,2),Ee=d(be);{var _e=U=>{Hn(U,{size:13})},we=U=>{ys(U,{size:13})};Q(Ee,U=>{s(f)?U(_e):U(we,!1)})}o(be),o(q),o(j);var R=g(j,2);{var Z=U=>{var ye=Ji(),fe=g(d(ye),2),me=d(fe),ze=d(me,!0);o(me);var Ie=g(me,2),Te=d(Ie);ys(Te,{size:13}),o(Ie),o(fe),Je(2),o(ye),le(()=>ge(ze,s(z))),F("click",Ie,()=>te(s(z))),b(U,ye)};Q(R,U=>{s(z)&&U(Z)})}le(()=>ge(ue,s(h))),F("click",be,()=>te(s(h))),b(M,K)};Q(ut,M=>{s(y)&&s(h)&&M(pt)})}o(Ne);var ft=g(Ne,2),De=d(ft);o(ft),o(ne),o(oe),le(()=>{J=it(tt,1,"tunnel-dot svelte-1vh905b",null,J,{"tunnel-dot-active":s(y)}),ge(Oe,s(y)?"Tunnel Active":"Tunnel Inactive"),We=it(Le,1,"tunnel-toggle-btn svelte-1vh905b",null,We,{"tunnel-stop":s(y)}),Le.disabled=s(p)}),F("click",oe,de),F("keydown",oe,$),F("click",Le,function(...M){(s(y)?B:O)?.apply(this,M)}),F("click",De,function(...M){e.onclose?.apply(this,M)}),b(G,oe)};Q(E,G=>{u()&&G(C)})}b(t,k),cn(),i()}xn(["click","keydown"]);var al=w('<div class="dropdown-confirm-delete svelte-11yu8dz"><p class="confirm-delete-msg svelte-11yu8dz">Delete <strong class="svelte-11yu8dz"> </strong>?</p> <p class="confirm-delete-warn svelte-11yu8dz">This action cannot be undone.</p> <div class="confirm-delete-actions svelte-11yu8dz"><button class="confirm-cancel-btn svelte-11yu8dz">Cancel</button> <button class="confirm-delete-btn svelte-11yu8dz">Delete</button></div></div>'),sl=w('<span class="dropdown-active-label svelte-11yu8dz">active</span>'),rl=w('<button class="dropdown-item-delete svelte-11yu8dz" title="Delete project"><!></button>'),il=w('<div><span></span> <span class="dropdown-item-name svelte-11yu8dz"> </span> <!> <!></div>'),ll=w('<div class="dropdown-items svelte-11yu8dz"></div> <div class="dropdown-create svelte-11yu8dz"><input class="dropdown-input svelte-11yu8dz" type="text" placeholder="New project name..."/> <button class="dropdown-create-btn svelte-11yu8dz"><!></button></div>',1),ol=w('<div class="project-backdrop svelte-11yu8dz"></div> <div class="project-dropdown svelte-11yu8dz"><div class="dropdown-header svelte-11yu8dz"><span class="svelte-11yu8dz">Projects</span> <span class="dropdown-count svelte-11yu8dz"> </span></div> <!></div>',1),cl=w('<span></span> <span class="separator svelte-11yu8dz">/</span> <div class="project-container svelte-11yu8dz"><button class="project-selector svelte-11yu8dz"><span class="project-dot svelte-11yu8dz"></span> <span class="project-name svelte-11yu8dz"> </span> <!></button> <!></div> <button class="btn-save svelte-11yu8dz" title="Save pipeline (Cmd+S)"><!></button>',1),dl=w('<span class="spin-icon svelte-11yu8dz"><!></span> <span class="svelte-11yu8dz">Running...</span> <span class="pulse-dot svelte-11yu8dz"></span>',1),ul=w('<!> <span class="svelte-11yu8dz">Run</span>',1),pl=w('<span class="pulse-dot debug-dot svelte-11yu8dz"></span>'),gl=w('<button title="Run"><!></button> <button title="Debug"><!> <!></button> <button><span></span> <!></button> <div class="divider svelte-11yu8dz"></div>',1),vl=w('<button class="btn-icon svelte-11yu8dz" title="Share"><!></button>'),hl=w('<button title="Architect (Cmd+/)"><!></button>'),fl=w('<div class="run-dialog-backdrop svelte-11yu8dz"><div class="run-dialog svelte-11yu8dz"><h3 class="run-dialog-title svelte-11yu8dz">Run Pipeline</h3> <p class="run-dialog-hint svelte-11yu8dz">Provide input for your pipeline (or leave blank to run without input)</p> <textarea class="run-dialog-input svelte-11yu8dz" placeholder="Enter your question or input..."></textarea> <div class="run-dialog-actions svelte-11yu8dz"><button class="run-dialog-cancel svelte-11yu8dz">Cancel</button> <button class="run-dialog-go svelte-11yu8dz"><!> Run</button></div></div></div>'),bl=w('<header class="top-bar svelte-11yu8dz"><div class="top-bar-left svelte-11yu8dz"><a href="/" class="brand-link svelte-11yu8dz" title="Home"><img alt="Firefly Agentic Studio" class="brand-logo svelte-11yu8dz"/> <span class="brand svelte-11yu8dz">Firefly Agentic Studio</span></a> <!></div> <div class="top-bar-spacer svelte-11yu8dz"></div> <div class="top-bar-right svelte-11yu8dz"><!> <!> <button class="btn-icon svelte-11yu8dz" title="Settings"><!></button> <!></div></header> <!> <!>',1);function ml(t,e){on(e,!0);const n=()=>ct(Xr,"$isRunning",f),r=()=>ct(Qr,"$isDebugging",f),a=()=>ct(Zi,"$connectionState",f),c=()=>ct(Un,"$runtimeStatus",f),i=()=>ct(kn,"$currentProject",f),u=()=>ct(Ca,"$projects",f),p=()=>ct(Gn,"$architectSidebarOpen",f),[f,h]=mn();let y=Xs(e,"isHomePage",3,!1),_=_t(n),z=_t(r),A=_t(()=>s(_)||s(z)),O=_t(a),B=ve(!1),te=ve(""),de=ve(!1),$=ve(null),k=ve(!1),E=ve(!1),C=ve("");Ii(()=>{m(B,!1),m(E,!1),m(k,!1),m($,null)});function G(){m(B,!s(B)),m(te,"")}async function oe(){const R=s(te).trim();if(!(!R||s(de))){m(de,!0);try{await Ht.projects.create(R),await Ka();const U=Ut(Ca).find(ye=>ye.name===R);U&&ws(U),m(te,""),m(B,!1)}catch{St("Failed to create project","error")}finally{m(de,!1)}}}async function ne(R){R&&(ws(R),m(B,!1))}function Re(R){if(Ut(Ca).length<=1){St("Cannot delete the only project","error");return}m($,R,!0)}async function et(){if(!s($))return;const R=s($);m($,null);try{await Ht.projects.delete(R),await Ka(),St(`Project "${R}" deleted`,"success")}catch{St("Failed to delete project","error")}}function qe(){m($,null)}async function Ne(){const R=Ut(kn);if(R)try{const Z=wn();await Ht.projects.savePipeline(R.name,"main",Z),St("Pipeline saved","success")}catch{St("Failed to save pipeline","error")}}function se(){Ut(Fn).length!==0&&(m(E,!0),m(C,""))}function $e(){m(E,!1),ns(wn(),s(C)||void 0)}function Ce(){ts(wn())}function tt(){Gn.update(R=>!R)}let J=_t(c),Pe=ve(!1);async function Oe(){const R=Ut(kn);if(!(!R||s(Pe))){m(Pe,!0);try{s(J)==="running"?(Un.set("stopped"),await Ht.runtime.stop(R.name),Un.set("stopped"),St("Runtime stopped","success")):(Un.set("starting"),await Ht.runtime.start(R.name),Un.set("running"),St("Runtime started","success"))}catch{Un.set("error"),St("Runtime toggle failed","error")}finally{m(Pe,!1)}}}var Le=bl(),We=he(Le),rt=d(We),at=d(rt),Xe=d(at);Je(2),o(at);var ut=g(at,2);{var pt=R=>{var Z=cl(),U=he(Z);let ye;var fe=g(U,4),me=d(fe),ze=g(d(me),2),Ie=d(ze,!0);o(ze);var Te=g(ze,2);Fs(Te,{size:10,class:"project-chevron"}),o(me);var bt=g(me,2);{var Ct=Tt=>{var Xt=ol(),It=he(Xt),_n=g(It,2),vt=d(_n),Nt=g(d(vt),2),Ft=d(Nt,!0);o(Nt),o(vt);var T=g(vt,2);{var Y=H=>{var l=al(),v=d(l),N=g(d(v)),ce=d(N,!0);o(N),Je(),o(v);var He=g(v,4),Ve=d(He),P=g(Ve,2);o(He),o(l),le(()=>ge(ce,s($))),F("click",Ve,qe),F("click",P,et),b(H,l)},I=H=>{var l=ll(),v=he(l);gt(v,5,u,At,(P,L)=>{var ae=il();let lt;var st=d(ae);let Qt;var Jt=g(st,2),En=d(Jt,!0);o(Jt);var Sn=g(Jt,2);{var An=Gt=>{var Pt=sl();b(Gt,Pt)};Q(Sn,Gt=>{i()?.name===s(L).name&&Gt(An)})}var Tn=g(Sn,2);{var Bn=Gt=>{var Pt=rl(),en=d(Pt);Gs(en,{size:12}),o(Pt),F("click",Pt,un=>{un.stopPropagation(),Re(s(L).name)}),b(Gt,Pt)};Q(Tn,Gt=>{u().length>1&&Gt(Bn)})}o(ae),le(()=>{lt=it(ae,1,"dropdown-item svelte-11yu8dz",null,lt,{active:i()?.name===s(L).name}),Qt=it(st,1,"dropdown-item-dot svelte-11yu8dz",null,Qt,{"dot-active":i()?.name===s(L).name}),ge(En,s(L).name)}),F("click",ae,()=>ne(s(L))),b(P,ae)}),o(v);var N=g(v,2),ce=d(N);Mt(ce);var He=g(ce,2),Ve=d(He);Ws(Ve,{size:14}),o(He),o(N),le(P=>He.disabled=P,[()=>!s(te).trim()||s(de)]),F("keydown",ce,P=>P.key==="Enter"&&oe()),$t(ce,()=>s(te),P=>m(te,P)),F("click",He,oe),b(H,l)};Q(T,H=>{s($)?H(Y):H(I,!1)})}o(_n),le(()=>ge(Ft,u().length)),F("click",It,()=>{m(B,!1),m($,null)}),F("keydown",It,()=>{}),b(Tt,Xt)};Q(bt,Tt=>{s(B)&&Tt(Ct)})}o(fe);var dn=g(fe,2),Ot=d(dn);Ki(Ot,{size:14}),o(dn),le(()=>{ye=it(U,1,"conn-dot svelte-11yu8dz",null,ye,{"conn-ok":s(O)==="connected","conn-fail":s(O)==="disconnected","conn-check":s(O)==="checking"}),ot(U,"title",s(O)==="connected"?"Backend connected":s(O)==="disconnected"?"Backend disconnected":"Checking connection..."),ge(Ie,i()?.name??"No project")}),F("click",me,G),F("click",dn,Ne),b(R,Z)};Q(ut,R=>{y()||R(pt)})}o(rt);var ft=g(rt,4),De=d(ft);{var M=R=>{var Z=gl(),U=he(Z);let ye;var fe=d(U);{var me=vt=>{var Nt=dl(),Ft=he(Nt),T=d(Ft);as(T,{size:14}),o(Ft),Je(4),b(vt,Nt)},ze=vt=>{var Nt=ul(),Ft=he(Nt);ja(Ft,{size:14}),Je(2),b(vt,Nt)};Q(fe,vt=>{s(_)?vt(me):vt(ze,!1)})}o(U);var Ie=g(U,2);let Te;var bt=d(Ie);er(bt,{size:16});var Ct=g(bt,2);{var dn=vt=>{var Nt=pl();b(vt,Nt)};Q(Ct,vt=>{s(z)&&vt(dn)})}o(Ie);var Ot=g(Ie,2);let Tt;var Xt=d(Ot);let It;var _n=g(Xt,2);qi(_n,{size:13}),o(Ot),Je(2),le(()=>{ye=it(U,1,"btn-run svelte-11yu8dz",null,ye,{"btn-run-active":s(_)}),U.disabled=s(A),Te=it(Ie,1,"btn-icon svelte-11yu8dz",null,Te,{"btn-debug-active":s(z)}),Ie.disabled=s(A),Tt=it(Ot,1,"btn-runtime svelte-11yu8dz",null,Tt,{"runtime-running":s(J)==="running","runtime-error":s(J)==="error","runtime-starting":s(J)==="starting"}),Ot.disabled=s(Pe),ot(Ot,"title",s(J)==="running"?"Stop runtime":"Start runtime"),It=it(Xt,1,"runtime-dot svelte-11yu8dz",null,It,{"rt-running":s(J)==="running","rt-stopped":s(J)==="stopped","rt-error":s(J)==="error","rt-starting":s(J)==="starting"})}),F("click",U,se),F("click",Ie,Ce),F("click",Ot,Oe),b(R,Z)};Q(De,R=>{y()||R(M)})}var K=g(De,2);{var j=R=>{var Z=vl(),U=d(Z);Hs(U,{size:16}),o(Z),F("click",Z,()=>m(k,!0)),b(R,Z)};Q(K,R=>{y()||R(j)})}var q=g(K,2),ee=d(q);es(ee,{size:16}),o(q);var ue=g(q,2);{var be=R=>{var Z=hl();let U;var ye=d(Z);Gi(ye,{size:16}),o(Z),le(()=>U=it(Z,1,"btn-icon svelte-11yu8dz",null,U,{"architect-active":p()})),F("click",Z,tt),b(R,Z)};Q(ue,R=>{y()||R(be)})}o(ft),o(We);var Ee=g(We,2);nl(Ee,{get open(){return s(k)},onclose:()=>m(k,!1)});var _e=g(Ee,2);{var we=R=>{var Z=fl(),U=d(Z),ye=g(d(U),4);ma(ye),ot(ye,"rows",4);var fe=g(ye,2),me=d(fe),ze=g(me,2),Ie=d(ze);ja(Ie,{size:14}),Je(),o(ze),o(fe),o(U),o(Z),F("click",Z,()=>m(E,!1)),F("keydown",Z,Te=>Te.key==="Escape"&&m(E,!1)),F("click",U,Te=>Te.stopPropagation()),F("keydown",U,()=>{}),F("keydown",ye,Te=>{Te.key==="Enter"&&(Te.metaKey||Te.ctrlKey)&&$e()}),$t(ye,()=>s(C),Te=>m(C,Te)),F("click",me,()=>m(E,!1)),F("click",ze,$e),b(R,Z)};Q(_e,R=>{s(E)&&R(we)})}le(()=>ot(Xe,"src",ss)),F("click",q,()=>ea.set(!0)),b(t,Le),cn(),h()}xn(["click","keydown"]);function _l(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 15h18"}]];yt(t,xt({name:"panel-bottom"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function yl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M15 3v18"}]];yt(t,xt({name:"panel-right"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function kl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m18 16 4-4-4-4"}],["path",{d:"m6 8-4 4 4 4"}],["path",{d:"m14.5 4-5 16"}]];yt(t,xt({name:"code-xml"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function wl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}]];yt(t,xt({name:"message-square"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}var xl=w('<div class="command-palette-empty svelte-1g6akjj">No matching commands</div>'),El=w('<kbd class="command-palette-item-shortcut svelte-1g6akjj"> </kbd>'),Sl=w('<button role="option"><span class="command-palette-item-icon svelte-1g6akjj"><!></span> <span class="command-palette-item-label svelte-1g6akjj"> </span> <!></button>'),Al=w('<div class="command-palette-category svelte-1g6akjj"> </div> <!>',1),Tl=w('<div class="command-palette-backdrop svelte-1g6akjj"><div class="command-palette svelte-1g6akjj" role="dialog" aria-modal="true" aria-label="Command palette"><div class="command-palette-input-wrapper svelte-1g6akjj"><!> <input type="text" class="command-palette-input svelte-1g6akjj" placeholder="Type a command..." spellcheck="false" autocomplete="off" role="combobox" aria-expanded="true" aria-controls="command-palette-results"/> <kbd class="command-palette-kbd svelte-1g6akjj">ESC</kbd></div> <div id="command-palette-results" class="command-palette-results svelte-1g6akjj" role="listbox"><!></div> <div class="command-palette-footer svelte-1g6akjj"><span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">↑↓</kbd> navigate</span> <span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">↵</kbd> select</span> <span class="command-palette-hint svelte-1g6akjj"><kbd class="svelte-1g6akjj">esc</kbd> close</span></div></div></div>');function Nl(t,e){on(e,!0);const n=()=>ct(Za,"$commandPaletteOpen",r),[r,a]=mn(),c=[{id:"nav-construct",label:"Go to Construct",category:"Navigation",icon:Ti,action:()=>jn("/construct")},{id:"nav-evaluate",label:"Go to Evaluate",category:"Navigation",icon:Jr,action:()=>jn("/evaluate")},{id:"nav-experiments",label:"Go to Experiments",category:"Navigation",icon:ei,action:()=>jn("/experiments")},{id:"nav-deploy",label:"Go to Deploy",category:"Navigation",icon:ti,action:()=>jn("/deploy")},{id:"nav-monitor",label:"Go to Monitor",category:"Navigation",icon:ni,action:()=>jn("/monitor")},{id:"nav-files",label:"Go to Files",category:"Navigation",icon:ai,action:()=>jn("/files")},{id:"node-input",label:"Add Input Node",category:"Add Node",icon:si,action:()=>Wt("input","Input")},{id:"node-output",label:"Add Output Node",category:"Add Node",icon:ri,action:()=>Wt("output","Output")},{id:"node-agent",label:"Add Agent Node",category:"Add Node",icon:ua,action:()=>Wt("agent","Agent")},{id:"node-tool",label:"Add Tool Node",category:"Add Node",icon:ii,action:()=>Wt("tool","Tool")},{id:"node-reasoning",label:"Add Reasoning Node",category:"Add Node",icon:Ni,action:()=>Wt("reasoning","Reasoning")},{id:"node-condition",label:"Add Condition Node",category:"Add Node",icon:li,action:()=>Wt("condition","Condition")},{id:"node-memory",label:"Add Memory Node",category:"Add Node",icon:Ri,action:()=>Wt("memory","Memory")},{id:"node-validator",label:"Add Validator Node",category:"Add Node",icon:oi,action:()=>Wt("validator","Validator")},{id:"node-code",label:"Add Code Node",category:"Add Node",icon:ci,action:()=>Wt("custom_code","Code")},{id:"node-fanout",label:"Add Fan Out Node",category:"Add Node",icon:di,action:()=>Wt("fan_out","Fan Out")},{id:"node-fanin",label:"Add Fan In Node",category:"Add Node",icon:ui,action:()=>Wt("fan_in","Fan In")},{id:"open-settings",label:"Open Settings",category:"Settings",icon:es,action:()=>ea.set(!0),shortcut:"⌘,"},{id:"pipeline-run",label:"Run Pipeline",category:"Pipeline Actions",icon:ja,action:()=>ns(wn())},{id:"pipeline-debug",label:"Debug Pipeline",category:"Pipeline Actions",icon:er,action:()=>ts(wn())},{id:"view-bottom-panel",label:"Toggle Bottom Panel",category:"View",icon:_l,action:()=>ia.update(k=>!k)},{id:"view-right-panel",label:"Toggle Right Panel",category:"View",icon:yl,action:()=>Pi.update(k=>!k)},{id:"view-tab-console",label:"Switch to Console Tab",category:"View",icon:pi,action:()=>{ia.set(!0),Oa.set("console")}},{id:"view-tab-code",label:"Switch to Code Tab",category:"View",icon:kl,action:()=>{ia.set(!0),Oa.set("code")}},{id:"view-tab-timeline",label:"Switch to Timeline Tab",category:"View",icon:gi,action:()=>{ia.set(!0),Oa.set("timeline")}},{id:"view-tab-chat",label:"Toggle AI Assistant Sidebar",category:"View",icon:wl,action:()=>{Gn.update(k=>!k)}}];let i=ve(""),u=ve(0),p=ve(null);function f(k,E){let C=0,G=0,oe=-1;for(let ne=0;ne<k.length&&C<E.length;ne++)k[ne]===E[C]&&(oe>=0&&(G+=ne-oe-1),oe=ne,C++);return C===E.length?G:-1}let h=_t(()=>{if(!s(i).trim())return c;const k=s(i).toLowerCase(),E=c.map(C=>{const G=f(C.label.toLowerCase(),k),oe=f(C.category.toLowerCase(),k),ne=G>=0&&oe>=0?Math.min(G,oe):Math.max(G,oe);return{cmd:C,score:ne}}).filter(C=>C.score>=0);return E.sort((C,G)=>C.score-G.score),E.map(C=>C.cmd)}),y=_t(()=>{const k=[];let E=0;const C=new Map,G=[];for(const oe of s(h))C.has(oe.category)||(C.set(oe.category,[]),G.push(oe.category)),C.get(oe.category).push({...oe,globalIndex:E}),E++;for(const oe of G)k.push({category:oe,items:C.get(oe)});return k});In(()=>{s(u)>=s(h).length&&m(u,Math.max(0,s(h).length-1),!0)}),In(()=>{n()&&(m(i,""),m(u,0),queueMicrotask(()=>s(p)?.focus()))});function _(){Za.set(!1)}function z(k){_(),queueMicrotask(()=>k.action())}function A(k){if(k.key==="Escape"){k.preventDefault(),_();return}if(k.key==="ArrowDown"){k.preventDefault(),m(u,(s(u)+1)%s(h).length),O();return}if(k.key==="ArrowUp"){k.preventDefault(),m(u,(s(u)-1+s(h).length)%s(h).length),O();return}if(k.key==="Enter"){k.preventDefault();const E=s(h)[s(u)];E&&z(E);return}}function O(){queueMicrotask(()=>{const k=s(h)[s(u)];k&&document.getElementById(`cmd-item-${k.id}`)?.scrollIntoView({block:"nearest"})})}function B(k){k.target===k.currentTarget&&_()}var te=Ze(),de=he(te);{var $=k=>{var E=Tl(),C=d(E),G=d(C),oe=d(G);vi(oe,{size:16});var ne=g(oe,2);Mt(ne),ga(ne,se=>m(p,se),()=>s(p)),Je(2),o(G);var Re=g(G,2),et=d(Re);{var qe=se=>{var $e=xl();b(se,$e)},Ne=se=>{var $e=Ze(),Ce=he($e);gt(Ce,17,()=>s(y),At,(tt,J)=>{var Pe=Al(),Oe=he(Pe),Le=d(Oe,!0);o(Oe);var We=g(Oe,2);gt(We,17,()=>s(J).items,At,(rt,at)=>{var Xe=Sl();let ut;var pt=d(Xe),ft=d(pt);Js(ft,()=>s(at).icon,(q,ee)=>{ee(q,{size:16})}),o(pt);var De=g(pt,2),M=d(De,!0);o(De);var K=g(De,2);{var j=q=>{var ee=El(),ue=d(ee,!0);o(ee),le(()=>ge(ue,s(at).shortcut)),b(q,ee)};Q(K,q=>{s(at).shortcut&&q(j)})}o(Xe),le(()=>{ot(Xe,"id",`cmd-item-${s(at).id??""}`),ut=it(Xe,1,"command-palette-item svelte-1g6akjj",null,ut,{selected:s(at).globalIndex===s(u)}),ot(Xe,"aria-selected",s(at).globalIndex===s(u)),ge(M,s(at).label)}),F("click",Xe,()=>z(s(at))),Qa("mouseenter",Xe,()=>{m(u,s(at).globalIndex,!0)}),b(rt,Xe)}),le(()=>ge(Le,s(J).category)),b(tt,Pe)}),b(se,$e)};Q(et,se=>{s(h).length===0?se(qe):se(Ne,!1)})}o(Re),Je(2),o(C),o(E),le(()=>ot(ne,"aria-activedescendant",s(h).length>0?`cmd-item-${s(h)[s(u)]?.id}`:void 0)),F("click",E,B),F("keydown",ne,A),$t(ne,()=>s(i),se=>m(i,se)),b(k,E)};Q(de,k=>{n()&&k($)})}b(t,te),cn(),a()}xn(["click","keydown"]);function Rl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M10 8h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M14 8h.01"}],["path",{d:"M16 12h.01"}],["path",{d:"M18 8h.01"}],["path",{d:"M6 8h.01"}],["path",{d:"M7 16h10"}],["path",{d:"M8 12h.01"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}]];yt(t,xt({name:"keyboard"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}var $l=w('<span class="shortcuts-separator svelte-9545z7">+</span>'),zl=w('<!> <kbd class="shortcuts-kbd svelte-9545z7"> </kbd>',1),Ml=w('<div class="shortcuts-row svelte-9545z7"><span class="shortcuts-description svelte-9545z7"> </span> <span class="shortcuts-keys svelte-9545z7"></span></div>'),Cl=w('<div class="shortcuts-group svelte-9545z7"><div class="shortcuts-category svelte-9545z7"> </div> <!></div>'),Ol=w('<div class="shortcuts-backdrop svelte-9545z7"><div class="shortcuts-modal svelte-9545z7" role="dialog" aria-modal="true" aria-label="Keyboard Shortcuts"><div class="shortcuts-header svelte-9545z7"><div class="shortcuts-title svelte-9545z7"><!> <span>Keyboard Shortcuts</span></div> <kbd class="shortcuts-close-hint svelte-9545z7">ESC</kbd></div> <div class="shortcuts-body svelte-9545z7"></div></div></div>');function Il(t,e){on(e,!1);const n=()=>ct(Wa,"$shortcutsModalOpen",r),[r,a]=mn(),i=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"⌘":"Ctrl",u=[{category:"General",shortcuts:[{keys:`${i} + K`,description:"Open command palette"},{keys:`${i} + ,`,description:"Open settings"},{keys:`${i} + /`,description:"Toggle AI assistant"},{keys:"?",description:"Show keyboard shortcuts"},{keys:"Esc",description:"Close modal / palette"}]},{category:"Pipeline",shortcuts:[{keys:`${i} + Enter`,description:"Run pipeline"},{keys:`${i} + Shift + D`,description:"Toggle debug mode"}]},{category:"Canvas",shortcuts:[{keys:"Delete / Backspace",description:"Remove selected node"},{keys:`${i} + D`,description:"Duplicate selected node"},{keys:"Space (hold)",description:"Pan canvas"},{keys:`${i} + +`,description:"Zoom in"},{keys:`${i} + -`,description:"Zoom out"}]}];function p(){Wa.set(!1)}function f(A){A.target===A.currentTarget&&p()}function h(A){A.key==="Escape"&&(A.preventDefault(),p())}Qs();var y=Ze(),_=he(y);{var z=A=>{var O=Ol(),B=d(O),te=d(B),de=d(te),$=d(de);Rl($,{size:18}),Je(2),o(de),Je(2),o(te);var k=g(te,2);gt(k,5,()=>u,At,(E,C)=>{var G=Cl(),oe=d(G),ne=d(oe,!0);o(oe);var Re=g(oe,2);gt(Re,1,()=>s(C).shortcuts,At,(et,qe)=>{var Ne=Ml(),se=d(Ne),$e=d(se,!0);o(se);var Ce=g(se,2);gt(Ce,5,()=>s(qe).keys.split(" + "),At,(tt,J,Pe)=>{var Oe=zl(),Le=he(Oe);{var We=Xe=>{var ut=$l();b(Xe,ut)};Q(Le,Xe=>{Pe>0&&Xe(We)})}var rt=g(Le,2),at=d(rt,!0);o(rt),le(Xe=>ge(at,Xe),[()=>s(J).trim()]),b(tt,Oe)}),o(Ce),o(Ne),le(()=>ge($e,s(qe).description)),b(et,Ne)}),o(G),le(()=>ge(ne,s(C).category)),b(E,G)}),o(k),o(B),o(O),F("click",O,f),F("keydown",O,h),b(A,O)};Q(_,A=>{n()&&A(z)})}b(t,y),cn(),a()}xn(["click","keydown"]);var Pl=w('<span class="provider-badge svelte-1hvu725"><!> Configured</span>'),Ll=w('<div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725"> </label> <input type="password" class="field-input svelte-1hvu725"/></div>'),Dl=w('<div><div class="provider-header svelte-1hvu725"><span class="provider-name svelte-1hvu725"> </span> <!></div> <!></div>'),Bl=w('<div class="providers-list svelte-1hvu725"></div>'),jl=w('<div class="model-defaults svelte-1hvu725"><div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725">Default Model</label> <!></div> <div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-temperature"> </label> <input id="settings-temperature" type="range" class="field-range svelte-1hvu725" min="0" max="2" step="0.01"/></div> <div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-retries">Retries</label> <input id="settings-retries" type="number" class="field-input svelte-1hvu725" min="0" max="10"/></div></div>'),Ul=w('<div class="model-defaults svelte-1hvu725"><div class="profile-section svelte-1hvu725"><h4 class="section-title svelte-1hvu725">Your Information</h4> <p class="section-desc svelte-1hvu725">The assistant will use this to personalise interactions.</p> <div class="profile-row svelte-1hvu725"><div class="provider-field profile-half svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-name">Name</label> <input id="settings-name" type="text" class="field-input field-text svelte-1hvu725" placeholder="Your name"/></div> <div class="provider-field profile-half svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-role">Role</label> <input id="settings-role" type="text" class="field-input field-text svelte-1hvu725" placeholder="e.g. ML Engineer"/></div></div> <div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-context">Context <span class="field-optional svelte-1hvu725">(optional)</span></label> <textarea id="settings-context" class="field-textarea svelte-1hvu725" placeholder="Any additional context for the assistant..." rows="3"></textarea></div></div> <div class="profile-section svelte-1hvu725"><h4 class="section-title svelte-1hvu725">Assistant Personality</h4> <p class="section-desc svelte-1hvu725"><!></p> <div class="provider-field svelte-1hvu725"><label class="field-label svelte-1hvu725" for="settings-assistant-name">Assistant Name</label> <input id="settings-assistant-name" type="text" class="field-input field-text svelte-1hvu725" placeholder="The Architect"/></div></div></div>'),Hl=w('<div class="settings-backdrop svelte-1hvu725"><div class="settings-modal svelte-1hvu725" role="dialog" aria-modal="true" aria-label="Settings"><div class="settings-header svelte-1hvu725"><div class="settings-title svelte-1hvu725"><!> <span>Settings</span></div> <kbd class="settings-close-hint svelte-1hvu725">ESC</kbd></div> <div class="settings-tabs svelte-1hvu725"><button>Providers</button> <button>Model Defaults</button> <button>Profile</button></div> <div class="settings-body svelte-1hvu725"><!></div> <div class="settings-footer svelte-1hvu725"><button class="btn-cancel svelte-1hvu725">Cancel</button> <button class="btn-save svelte-1hvu725"> </button></div></div></div>');function Fl(t,e){on(e,!0);const n=()=>ct(ea,"$settingsModalOpen",a),r=()=>ct(Ks,"$settingsData",a),[a,c]=mn(),i=[{id:"openai",label:"OpenAI",fields:[{key:"openai_api_key",label:"API Key",placeholder:"sk-..."}]},{id:"anthropic",label:"Anthropic",fields:[{key:"anthropic_api_key",label:"API Key",placeholder:"sk-ant-..."}]},{id:"google",label:"Google Gemini",fields:[{key:"google_api_key",label:"API Key",placeholder:"AIza..."}]},{id:"groq",label:"Groq",fields:[{key:"groq_api_key",label:"API Key",placeholder:"gsk_..."}]},{id:"mistral",label:"Mistral",fields:[{key:"mistral_api_key",label:"API Key",placeholder:"API key"}]},{id:"deepseek",label:"DeepSeek",fields:[{key:"deepseek_api_key",label:"API Key",placeholder:"API key"}]},{id:"cohere",label:"Cohere",fields:[{key:"cohere_api_key",label:"API Key",placeholder:"API key"}]},{id:"azure",label:"Azure OpenAI",fields:[{key:"azure_openai_api_key",label:"API Key",placeholder:"API key"},{key:"azure_openai_endpoint",label:"Endpoint URL",placeholder:"https://your-resource.openai.azure.com/"}]},{id:"bedrock",label:"Amazon Bedrock",fields:[{key:"aws_access_key_id",label:"Access Key ID",placeholder:"AKIA..."},{key:"aws_secret_access_key",label:"Secret Access Key",placeholder:"Secret key"},{key:"aws_default_region",label:"Region",placeholder:"us-east-1"}]},{id:"ollama",label:"Ollama",fields:[{key:"ollama_base_url",label:"Base URL",placeholder:"http://localhost:11434"}]}];let u=ve("credentials"),p=ve(!1),f=ve(On({})),h=ve("openai:gpt-4o"),y=ve(.7),_=ve(3),z=ve(""),A=ve(""),O=ve(""),B=ve("The Architect");In(()=>{n()&&r()&&(m(f,{},!0),m(h,r().model_defaults.default_model,!0),m(y,r().model_defaults.temperature,!0),m(_,r().model_defaults.retries,!0),r().user_profile&&(m(z,r().user_profile.name||"",!0),m(A,r().user_profile.role||"",!0),m(O,r().user_profile.context||"",!0),m(B,r().user_profile.assistant_name||"The Architect",!0)),m(u,"credentials"))});function te(ne){if(!r())return!1;const Re=r().credentials[ne];return Re!=null}function de(){ea.set(!1)}async function $(){m(p,!0);try{const ne={};for(const[et,qe]of Object.entries(s(f)))qe.trim()&&(ne[et]=qe.trim());const Re={name:s(z).trim(),role:s(A).trim(),context:s(O).trim(),assistant_name:s(B).trim()||"The Architect"};await Ua(Object.keys(ne).length>0?ne:null,{default_model:s(h),temperature:s(y),retries:s(_)},!0,Re),de()}catch{}finally{m(p,!1)}}function k(ne){ne.target===ne.currentTarget&&de()}function E(ne){ne.key==="Escape"&&(ne.preventDefault(),de())}var C=Ze(),G=he(C);{var oe=ne=>{var Re=Hl(),et=d(Re),qe=d(et),Ne=d(qe),se=d(Ne);es(se,{size:18}),Je(2),o(Ne),Je(2),o(qe);var $e=g(qe,2),Ce=d($e);let tt;var J=g(Ce,2);let Pe;var Oe=g(J,2);let Le;o($e);var We=g($e,2),rt=d(We);{var at=K=>{var j=Bl();gt(j,21,()=>i,At,(q,ee)=>{var ue=Dl();let be;var Ee=d(ue),_e=d(Ee),we=d(_e,!0);o(_e);var R=g(_e,2);{var Z=fe=>{var me=Pl(),ze=d(me);Hn(ze,{size:10}),Je(),o(me),b(fe,me)},U=_t(()=>s(ee).fields.every(fe=>te(fe.key)));Q(R,fe=>{s(U)&&fe(Z)})}o(Ee);var ye=g(Ee,2);gt(ye,17,()=>s(ee).fields,At,(fe,me)=>{var ze=Ll(),Ie=d(ze),Te=d(Ie,!0);o(Ie);var bt=g(Ie,2);Mt(bt),o(ze),le(Ct=>{ot(Ie,"for",`settings-${s(me).key??""}`),ge(Te,s(me).label),ot(bt,"id",`settings-${s(me).key??""}`),ot(bt,"placeholder",Ct),Vs(bt,s(f)[s(me).key]??"")},[()=>te(s(me).key)?"••••••••":s(me).placeholder]),F("input",bt,Ct=>{s(f)[s(me).key]=Ct.target.value}),b(fe,ze)}),o(ue),le(fe=>{be=it(ue,1,"provider-section svelte-1hvu725",null,be,fe),ge(we,s(ee).label)},[()=>({configured:s(ee).fields.every(fe=>te(fe.key))})]),b(q,ue)}),o(j),b(K,j)},Xe=K=>{var j=jl(),q=d(j),ee=g(d(q),2);qs(ee,{placeholder:"Select or type a model...",get value(){return s(h)},set value(Z){m(h,Z,!0)}}),o(q);var ue=g(q,2),be=d(ue),Ee=d(be);o(be);var _e=g(be,2);Mt(_e),o(ue);var we=g(ue,2),R=g(d(we),2);Mt(R),o(we),o(j),le(Z=>ge(Ee,`Temperature: ${Z??""}`),[()=>s(y).toFixed(2)]),$t(_e,()=>s(y),Z=>m(y,Z)),$t(R,()=>s(_),Z=>m(_,Z)),b(K,j)},ut=K=>{var j=Ul(),q=d(j),ee=g(d(q),4),ue=d(ee),be=g(d(ue),2);Mt(be),o(ue);var Ee=g(ue,2),_e=g(d(Ee),2);Mt(_e),o(Ee),o(ee);var we=g(ee,2),R=g(d(we),2);ma(R),o(we),o(q);var Z=g(q,2),U=g(d(Z),2),ye=d(U);{var fe=Te=>{var bt=Jn("The Architect speaks with measured authority and philosophical precision.");b(Te,bt)},me=Te=>{var bt=Jn("Uses a friendly, helpful personality.");b(Te,bt)};Q(ye,Te=>{s(B)==="The Architect"?Te(fe):Te(me,!1)})}o(U);var ze=g(U,2),Ie=g(d(ze),2);Mt(Ie),o(ze),o(Z),o(j),$t(be,()=>s(z),Te=>m(z,Te)),$t(_e,()=>s(A),Te=>m(A,Te)),$t(R,()=>s(O),Te=>m(O,Te)),$t(Ie,()=>s(B),Te=>m(B,Te)),b(K,j)};Q(rt,K=>{s(u)==="credentials"?K(at):s(u)==="model"?K(Xe,1):K(ut,!1)})}o(We);var pt=g(We,2),ft=d(pt),De=g(ft,2),M=d(De,!0);o(De),o(pt),o(et),o(Re),le(()=>{tt=it(Ce,1,"settings-tab svelte-1hvu725",null,tt,{active:s(u)==="credentials"}),Pe=it(J,1,"settings-tab svelte-1hvu725",null,Pe,{active:s(u)==="model"}),Le=it(Oe,1,"settings-tab svelte-1hvu725",null,Le,{active:s(u)==="profile"}),De.disabled=s(p),ge(M,s(p)?"Saving...":"Save Settings")}),F("click",Re,k),F("keydown",Re,E),F("click",Ce,()=>m(u,"credentials")),F("click",J,()=>m(u,"model")),F("click",Oe,()=>m(u,"profile")),F("click",ft,de),F("click",De,$),b(ne,Re)};Q(G,ne=>{n()&&ne(oe)})}b(t,C),cn(),c()}xn(["click","keydown","input"]);function Gl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]];yt(t,xt({name:"key"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function Kl(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];yt(t,xt({name:"user"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}var ql=w('<span class="wizard-step-num svelte-tj3wu"></span>'),Zl=w("<div></div>"),Wl=w('<div><div class="wizard-step-dot svelte-tj3wu"><!></div> <!></div>'),Vl=w(`<div class="wizard-welcome svelte-tj3wu"><img alt="Firefly Agentic Studio" class="wizard-logo svelte-tj3wu"/> <h2 class="wizard-heading svelte-tj3wu">Welcome to Firefly Agentic Studio</h2> <p class="wizard-text svelte-tj3wu">Build, test, and deploy AI agent pipelines visually.
							We'll help you configure your AI providers in just a few steps.</p> <div class="wizard-features svelte-tj3wu"><div class="wizard-feature svelte-tj3wu"><!> <span>Visual pipeline builder</span></div> <div class="wizard-feature svelte-tj3wu"><!> <span>Multi-provider AI support</span></div> <div class="wizard-feature svelte-tj3wu"><!> <span>Local credential storage</span></div></div></div>`),Yl=w('<span class="wizard-provider-check svelte-tj3wu"><!></span>'),Xl=w('<button><!> <span class="wizard-provider-label svelte-tj3wu"> </span> <span class="wizard-provider-desc svelte-tj3wu"> </span></button>'),Ql=w('<p class="wizard-hint svelte-tj3wu">Select at least one provider to continue</p>'),Jl=w('<h3 class="wizard-step-title svelte-tj3wu">Choose your AI providers</h3> <p class="wizard-text svelte-tj3wu">Select the providers you have API keys for. You can add more later in Settings.</p> <div class="wizard-providers-grid svelte-tj3wu"></div> <!>',1),eo=w('<div class="wizard-key-field svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu"> </label> <input type="password" class="wizard-key-input svelte-tj3wu"/></div>'),to=w('<div class="wizard-key-section svelte-tj3wu"><span class="wizard-key-provider svelte-tj3wu"> </span> <!></div>'),no=w('<h3 class="wizard-step-title svelte-tj3wu">Enter your API keys</h3> <p class="wizard-text svelte-tj3wu">Credentials are stored locally at <code class="svelte-tj3wu">~/.firefly-studio/settings.json</code> and never sent to our servers.</p> <div class="wizard-keys-list svelte-tj3wu"></div>',1),ao=w('<span class="wizard-model-hint svelte-tj3wu">This will be used for all new agent nodes</span>'),so=w('<h3 class="wizard-step-title svelte-tj3wu">Configure defaults</h3> <p class="wizard-text svelte-tj3wu">Choose the default model for new agent nodes. You can override per-node later.</p> <div class="wizard-defaults svelte-tj3wu"><div class="wizard-default-card svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu">Default Model</label> <!> <!></div> <div class="wizard-defaults-row svelte-tj3wu"><div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-temp">Temperature</label> <div class="wizard-range-wrapper svelte-tj3wu"><input id="wizard-temp" type="range" class="wizard-range svelte-tj3wu" min="0" max="2" step="0.01"/> <span class="wizard-range-value svelte-tj3wu"> </span></div></div> <div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-retries">Retries</label> <input id="wizard-retries" type="number" class="wizard-key-input svelte-tj3wu" min="0" max="10"/></div></div></div>',1),ro=w('<h3 class="wizard-step-title svelte-tj3wu">Personalise your experience</h3> <p class="wizard-text svelte-tj3wu">Tell us about yourself so the AI assistant can address you properly and provide contextual help.</p> <div class="wizard-defaults svelte-tj3wu"><div class="wizard-defaults-row svelte-tj3wu"><div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-name">Your Name</label> <input id="wizard-name" type="text" class="wizard-key-input wizard-text-input svelte-tj3wu" placeholder="e.g. Alex Chen"/></div> <div class="wizard-default-card wizard-default-half svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-role">Your Role</label> <input id="wizard-role" type="text" class="wizard-key-input wizard-text-input svelte-tj3wu" placeholder="e.g. ML Engineer, Product Manager"/></div></div> <div class="wizard-default-card svelte-tj3wu"><label class="wizard-key-label svelte-tj3wu" for="wizard-context">Additional Context <span class="wizard-optional svelte-tj3wu">(optional)</span></label> <textarea id="wizard-context" class="wizard-textarea svelte-tj3wu" placeholder="e.g. Working on a customer support chatbot, focusing on healthcare domain..." rows="3"></textarea></div></div>',1),io=w(`<div class="wizard-welcome svelte-tj3wu"><div class="wizard-done-icon svelte-tj3wu"><!></div> <h2 class="wizard-heading svelte-tj3wu"><!></h2> <p class="wizard-text svelte-tj3wu"> <strong class="svelte-tj3wu"> </strong> as default. <strong class="svelte-tj3wu">The Architect</strong> and <strong class="svelte-tj3wu">The Oracle</strong> are ready.
							The Architect will build your pipelines, and The Oracle will guide your decisions.</p> <p class="wizard-text wizard-text-subtle svelte-tj3wu">You can change these anytime from the Settings menu.</p></div>`),lo=w('<button class="wizard-btn-skip svelte-tj3wu">Skip setup</button> <button class="wizard-btn-next svelte-tj3wu">Get started</button>',1),oo=w('<div></div> <button class="wizard-btn-next wizard-btn-launch svelte-tj3wu"><!> Open Studio</button>',1),co=w('<button class="wizard-btn-next svelte-tj3wu"> </button>'),uo=w('<button class="wizard-btn-next svelte-tj3wu">Next</button>'),po=w('<div class="wizard-footer-left svelte-tj3wu"><button class="wizard-btn-skip svelte-tj3wu">Skip</button> <button class="wizard-btn-back svelte-tj3wu">Back</button></div> <!>',1),go=w('<div class="wizard-backdrop svelte-tj3wu"><div class="wizard-modal svelte-tj3wu" role="dialog" aria-modal="true" aria-label="Setup Wizard"><div class="wizard-progress svelte-tj3wu"></div> <div class="wizard-body svelte-tj3wu"><!></div> <div class="wizard-footer svelte-tj3wu"><!></div></div></div>');function vo(t,e){on(e,!0);const n=()=>ct(pa,"$firstStartWizardOpen",r),[r,a]=mn(),c=[{id:"openai",label:"OpenAI",description:"GPT-4.1, o3, o4-mini",fields:[{key:"openai_api_key",label:"API Key",placeholder:"sk-..."}]},{id:"anthropic",label:"Anthropic",description:"Claude Sonnet, Opus, Haiku",fields:[{key:"anthropic_api_key",label:"API Key",placeholder:"sk-ant-..."}]},{id:"google",label:"Google Gemini",description:"Gemini 2.5 Pro & Flash",fields:[{key:"google_api_key",label:"API Key",placeholder:"AIza..."}]},{id:"groq",label:"Groq",description:"Fast Llama & Mixtral",fields:[{key:"groq_api_key",label:"API Key",placeholder:"gsk_..."}]},{id:"mistral",label:"Mistral",description:"Mistral Large & Codestral",fields:[{key:"mistral_api_key",label:"API Key",placeholder:"API key"}]},{id:"deepseek",label:"DeepSeek",description:"DeepSeek Chat & Reasoner",fields:[{key:"deepseek_api_key",label:"API Key",placeholder:"API key"}]},{id:"cohere",label:"Cohere",description:"Command R & R+",fields:[{key:"cohere_api_key",label:"API Key",placeholder:"API key"}]},{id:"azure",label:"Azure OpenAI",description:"Azure-hosted OpenAI models",fields:[{key:"azure_openai_api_key",label:"API Key",placeholder:"API key"},{key:"azure_openai_endpoint",label:"Endpoint URL",placeholder:"https://your-resource.openai.azure.com/"}]},{id:"bedrock",label:"Amazon Bedrock",description:"AWS-hosted foundation models",fields:[{key:"aws_access_key_id",label:"Access Key ID",placeholder:"AKIA..."},{key:"aws_secret_access_key",label:"Secret Access Key",placeholder:"Secret key"},{key:"aws_default_region",label:"Region",placeholder:"us-east-1"}]},{id:"ollama",label:"Ollama",description:"Local open-source models",fields:[{key:"ollama_base_url",label:"Base URL",placeholder:"http://localhost:11434"}]}],i=[{label:"Welcome"},{label:"Providers"},{label:"API Keys"},{label:"Defaults"},{label:"Profile"},{label:"Ready"}];let u=ve(0),p=ve(On(new Set)),f=On({}),h=ve(""),y=ve(.7),_=ve(3),z=ve(!1),A=ve(""),O=ve(""),B=ve("");const te=i.length;function de(){if(s(h))return;const Ne=["anthropic","openai","google","groq","mistral","deepseek","cohere","azure","bedrock","ollama"];for(const se of Ne)if(s(p).has(se)){const $e=hi(se);if($e){m(h,$e.id,!0);return}}}function $(Ne){const se=new Set(s(p));se.has(Ne)?se.delete(Ne):se.add(Ne),m(p,se,!0)}function k(){return c.filter(Ne=>s(p).has(Ne.id))}function E(){s(u)===1&&s(p).size===0||s(u)<te-1&&(Ba(u),s(u)===3&&de())}function C(){s(u)>0&&Ba(u,-1)}async function G(){m(z,!0);try{const Ne={};for(const[$e,Ce]of Object.entries(f))Ce.trim()&&(Ne[$e]=Ce.trim());const se={};s(A).trim()&&(se.name=s(A).trim()),s(O).trim()&&(se.role=s(O).trim()),s(B).trim()&&(se.context=s(B).trim()),se.assistant_name="The Architect",await Ua(Object.keys(Ne).length>0?Ne:null,{default_model:s(h),temperature:s(y),retries:s(_)},!0,Object.keys(se).length>0?se:null),m(u,te-1)}catch{}finally{m(z,!1)}}async function oe(){try{await Ua(null,null,!0)}catch{}pa.set(!1)}async function ne(){await Zs(),pa.set(!1)}var Re=Ze(),et=he(Re);{var qe=Ne=>{var se=go(),$e=d(se),Ce=d($e);gt(Ce,21,()=>i,At,(M,K,j)=>{var q=Wl();let ee;var ue=d(q),be=d(ue);{var Ee=Z=>{Hn(Z,{size:10})},_e=Z=>{var U=ql();U.textContent=j+1,b(Z,U)};Q(be,Z=>{j<s(u)?Z(Ee):Z(_e,!1)})}o(ue);var we=g(ue,2);{var R=Z=>{var U=Zl();let ye;le(()=>ye=it(U,1,"wizard-step-line svelte-tj3wu",null,ye,{filled:j<s(u)})),b(Z,U)};Q(we,Z=>{j<i.length-1&&Z(R)})}o(q),le(()=>ee=it(q,1,"wizard-step-indicator svelte-tj3wu",null,ee,{active:j===s(u),completed:j<s(u)})),b(M,q)}),o(Ce);var tt=g(Ce,2),J=d(tt);{var Pe=M=>{var K=Vl(),j=d(K),q=g(j,6),ee=d(q),ue=d(ee);Ha(ue,{size:16}),Je(2),o(ee);var be=g(ee,2),Ee=d(be);xs(Ee,{size:16}),Je(2),o(be);var _e=g(be,2),we=d(_e);Gl(we,{size:16}),Je(2),o(_e),o(q),o(K),le(()=>ot(j,"src",ss)),b(M,K)},Oe=M=>{var K=Jl(),j=g(he(K),4);gt(j,21,()=>c,At,(ue,be)=>{var Ee=Xl();let _e;var we=d(Ee);{var R=ze=>{var Ie=Yl(),Te=d(Ie);Hn(Te,{size:10}),o(Ie),b(ze,Ie)},Z=_t(()=>s(p).has(s(be).id));Q(we,ze=>{s(Z)&&ze(R)})}var U=g(we,2),ye=d(U,!0);o(U);var fe=g(U,2),me=d(fe,!0);o(fe),o(Ee),le(ze=>{_e=it(Ee,1,"wizard-provider-card svelte-tj3wu",null,_e,ze),ge(ye,s(be).label),ge(me,s(be).description)},[()=>({selected:s(p).has(s(be).id)})]),F("click",Ee,()=>$(s(be).id)),b(ue,Ee)}),o(j);var q=g(j,2);{var ee=ue=>{var be=Ql();b(ue,be)};Q(q,ue=>{s(p).size===0&&ue(ee)})}b(M,K)},Le=M=>{var K=no(),j=g(he(K),4);gt(j,21,k,At,(q,ee)=>{var ue=to(),be=d(ue),Ee=d(be,!0);o(be);var _e=g(be,2);gt(_e,17,()=>s(ee).fields,At,(we,R)=>{var Z=eo(),U=d(Z),ye=d(U,!0);o(U);var fe=g(U,2);Mt(fe),o(Z),le(()=>{ot(U,"for",`wizard-${s(R).key??""}`),ge(ye,s(R).label),ot(fe,"id",`wizard-${s(R).key??""}`),ot(fe,"placeholder",s(R).placeholder),Vs(fe,f[s(R).key]??"")}),F("input",fe,me=>{f[s(R).key]=me.target.value}),b(we,Z)}),o(ue),le(()=>ge(Ee,s(ee).label)),b(q,ue)}),o(j),b(M,K)},We=M=>{var K=so(),j=g(he(K),4),q=d(j),ee=g(d(q),2);qs(ee,{placeholder:"Select or type a model...",get value(){return s(h)},set value(me){m(h,me,!0)}});var ue=g(ee,2);{var be=me=>{var ze=ao();b(me,ze)};Q(ue,me=>{s(h)&&me(be)})}o(q);var Ee=g(q,2),_e=d(Ee),we=g(d(_e),2),R=d(we);Mt(R);var Z=g(R,2),U=d(Z,!0);o(Z),o(we),o(_e);var ye=g(_e,2),fe=g(d(ye),2);Mt(fe),o(ye),o(Ee),o(j),le(me=>ge(U,me),[()=>s(y).toFixed(2)]),$t(R,()=>s(y),me=>m(y,me)),$t(fe,()=>s(_),me=>m(_,me)),b(M,K)},rt=M=>{var K=ro(),j=g(he(K),4),q=d(j),ee=d(q),ue=g(d(ee),2);Mt(ue),o(ee);var be=g(ee,2),Ee=g(d(be),2);Mt(Ee),o(be),o(q);var _e=g(q,2),we=g(d(_e),2);ma(we),o(_e),o(j),$t(ue,()=>s(A),R=>m(A,R)),$t(Ee,()=>s(O),R=>m(O,R)),$t(we,()=>s(B),R=>m(B,R)),b(M,K)},at=M=>{var K=io(),j=d(K),q=d(j);Hn(q,{size:32}),o(j);var ee=g(j,2),ue=d(ee);{var be=U=>{var ye=Jn();le(()=>ge(ye,`Welcome, ${s(A)??""}!`)),b(U,ye)},Ee=U=>{var ye=Jn("You're all set!");b(U,ye)};Q(ue,U=>{s(A)?U(be):U(Ee,!1)})}o(ee);var _e=g(ee,2),we=d(_e),R=g(we),Z=d(R,!0);o(R),Je(5),o(_e),Je(2),o(K),le(U=>{ge(we,`Your ${s(p).size??""} provider${s(p).size!==1?"s are":" is"} configured
							with `),ge(Z,U)},[()=>s(h)?s(h).split(":")[1]:"default model"]),b(M,K)};Q(J,M=>{s(u)===0?M(Pe):s(u)===1?M(Oe,1):s(u)===2?M(Le,2):s(u)===3?M(We,3):s(u)===4?M(rt,4):M(at,!1)})}o(tt);var Xe=g(tt,2),ut=d(Xe);{var pt=M=>{var K=lo(),j=he(K),q=g(j,2);F("click",j,oe),F("click",q,E),b(M,K)},ft=M=>{var K=oo(),j=g(he(K),2),q=d(j);xs(q,{size:14}),Je(),o(j),F("click",j,ne),b(M,K)},De=M=>{var K=po(),j=he(K),q=d(j),ee=g(q,2);o(j);var ue=g(j,2);{var be=_e=>{var we=co(),R=d(we,!0);o(we),le(()=>{we.disabled=s(z)||!s(h),ge(R,s(z)?"Saving...":"Finish Setup")}),F("click",we,G),b(_e,we)},Ee=_e=>{var we=uo();le(()=>we.disabled=s(u)===1&&s(p).size===0),F("click",we,E),b(_e,we)};Q(ue,_e=>{s(u)===4?_e(be):_e(Ee,!1)})}F("click",q,oe),F("click",ee,C),b(M,K)};Q(ut,M=>{s(u)===0?M(pt):s(u)===te-1?M(ft,1):M(De,!1)})}o(Xe),o($e),o(se),b(Ne,se)};Q(et,Ne=>{n()&&Ne(qe)})}b(t,Re),cn(),a()}xn(["click","input"]);var ho=w('<div class="toast svelte-lxvwit" role="alert"><span class="toast-icon svelte-lxvwit"><!></span> <span class="toast-message svelte-lxvwit"> </span> <button class="toast-close svelte-lxvwit"><!></button></div>'),fo=w('<div class="toast-container svelte-lxvwit"></div>');function bo(t,e){on(e,!1);const n=()=>ct(fi,"$toasts",r),[r,a]=mn(),c={success:Hn,error:_i,warning:mi,info:bi},i={success:"var(--color-success)",error:"var(--color-error)",warning:"var(--color-warning)",info:"var(--color-info)"};Qs();var u=Ze(),p=he(u);{var f=h=>{var y=fo();gt(y,5,n,_=>_.id,(_,z)=>{var A=ho();let O;var B=d(A),te=d(B);Js(te,()=>c[s(z).type],(C,G)=>{G(C,{size:16})}),o(B);var de=g(B,2),$=d(de,!0);o(de);var k=g(de,2),E=d(k);Fa(E,{size:14}),o(k),o(A),le(()=>{O=Ys(A,"",O,{"--toast-color":i[s(z).type]}),ge($,s(z).message)}),F("click",k,()=>yi(s(z).id)),ki(3,A,()=>wi,()=>({y:16,duration:200})),b(_,A)}),o(y),b(h,y)};Q(p,h=>{n().length>0&&h(f)})}b(t,u),cn(),a()}xn(["click"]);function mo(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];yt(t,xt({name:"camera"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function _o(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M8 13h2"}],["path",{d:"M14 13h2"}],["path",{d:"M8 17h2"}],["path",{d:"M14 17h2"}]];yt(t,xt({name:"file-spreadsheet"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function yo(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];yt(t,xt({name:"image"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function ko(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m16 15-3-3 3-3"}]];yt(t,xt({name:"panel-left-close"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function wo(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]];yt(t,xt({name:"paperclip"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function xo(t,e){const n=wt(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M2 3h20"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3"}],["path",{d:"m7 21 5-5 5 5"}]];yt(t,xt({name:"presentation"},()=>n,{get iconNode(){return r},children:(a,c)=>{var i=Ze(),u=he(i);kt(u,e,"default",{}),b(a,i)},$$slots:{default:!0}}))}function rs(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Dn=rs();function nr(t){Dn=t}var Cn={exec:()=>null};function Ue(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(a,c)=>{let i=typeof c=="string"?c:c.source;return i=i.replace(zt.caret,"$1"),n=n.replace(a,i),r},getRegex:()=>new RegExp(n,e)};return r}var Eo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),zt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}>`)},So=/^(?:[ \t]*(?:\n|$))+/,Ao=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,To=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ta=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,No=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,is=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,ar=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,sr=Ue(ar).replace(/bull/g,is).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ro=Ue(ar).replace(/bull/g,is).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ls=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$o=/^[^\n]+/,os=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,zo=Ue(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",os).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Mo=Ue(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,is).getRegex(),_a="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",cs=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Co=Ue("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",cs).replace("tag",_a).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),rr=Ue(ls).replace("hr",ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_a).getRegex(),Oo=Ue(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",rr).getRegex(),ds={blockquote:Oo,code:Ao,def:zo,fences:To,heading:No,hr:ta,html:Co,lheading:sr,list:Mo,newline:So,paragraph:rr,table:Cn,text:$o},As=Ue("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_a).getRegex(),Io={...ds,lheading:Ro,table:As,paragraph:Ue(ls).replace("hr",ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",As).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_a).getRegex()},Po={...ds,html:Ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",cs).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ue(ls).replace("hr",ta).replace("heading",` *#{1,6} *[^
]`).replace("lheading",sr).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Lo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Do=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ir=/^( {2,}|\\)\n(?!\s*$)/,Bo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ya=/[\p{P}\p{S}]/u,us=/[\s\p{P}\p{S}]/u,lr=/[^\s\p{P}\p{S}]/u,jo=Ue(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,us).getRegex(),or=/(?!~)[\p{P}\p{S}]/u,Uo=/(?!~)[\s\p{P}\p{S}]/u,Ho=/(?:[^\s\p{P}\p{S}]|~)/u,cr=/(?![*_])[\p{P}\p{S}]/u,Fo=/(?![*_])[\s\p{P}\p{S}]/u,Go=/(?:[^\s\p{P}\p{S}]|[*_])/u,Ko=Ue(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Eo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),dr=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,qo=Ue(dr,"u").replace(/punct/g,ya).getRegex(),Zo=Ue(dr,"u").replace(/punct/g,or).getRegex(),ur="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Wo=Ue(ur,"gu").replace(/notPunctSpace/g,lr).replace(/punctSpace/g,us).replace(/punct/g,ya).getRegex(),Vo=Ue(ur,"gu").replace(/notPunctSpace/g,Ho).replace(/punctSpace/g,Uo).replace(/punct/g,or).getRegex(),Yo=Ue("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,lr).replace(/punctSpace/g,us).replace(/punct/g,ya).getRegex(),Xo=Ue(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,cr).getRegex(),Qo="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",Jo=Ue(Qo,"gu").replace(/notPunctSpace/g,Go).replace(/punctSpace/g,Fo).replace(/punct/g,cr).getRegex(),ec=Ue(/\\(punct)/,"gu").replace(/punct/g,ya).getRegex(),tc=Ue(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nc=Ue(cs).replace("(?:-->|$)","-->").getRegex(),ac=Ue("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),va=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,sc=Ue(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",va).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pr=Ue(/^!?\[(label)\]\[(ref)\]/).replace("label",va).replace("ref",os).getRegex(),gr=Ue(/^!?\[(ref)\](?:\[\])?/).replace("ref",os).getRegex(),rc=Ue("reflink|nolink(?!\\()","g").replace("reflink",pr).replace("nolink",gr).getRegex(),Ts=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ps={_backpedal:Cn,anyPunctuation:ec,autolink:tc,blockSkip:Ko,br:ir,code:Do,del:Cn,delLDelim:Cn,delRDelim:Cn,emStrongLDelim:qo,emStrongRDelimAst:Wo,emStrongRDelimUnd:Yo,escape:Lo,link:sc,nolink:gr,punctuation:jo,reflink:pr,reflinkSearch:rc,tag:ac,text:Bo,url:Cn},ic={...ps,link:Ue(/^!?\[(label)\]\((.*?)\)/).replace("label",va).getRegex(),reflink:Ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",va).getRegex()},Va={...ps,emStrongRDelimAst:Vo,emStrongLDelim:Zo,delLDelim:Xo,delRDelim:Jo,url:Ue(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ts).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ue(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ts).getRegex()},lc={...Va,br:Ue(ir).replace("{2,}","*").getRegex(),text:Ue(Va.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ca={normal:ds,gfm:Io,pedantic:Po},Zn={normal:ps,gfm:Va,breaks:lc,pedantic:ic},oc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ns=t=>oc[t];function ln(t,e){if(e){if(zt.escapeTest.test(t))return t.replace(zt.escapeReplace,Ns)}else if(zt.escapeTestNoEncode.test(t))return t.replace(zt.escapeReplaceNoEncode,Ns);return t}function Rs(t){try{t=encodeURI(t).replace(zt.percentDecode,"%")}catch{return null}return t}function $s(t,e){let n=t.replace(zt.findPipe,(c,i,u)=>{let p=!1,f=i;for(;--f>=0&&u[f]==="\\";)p=!p;return p?"|":" |"}),r=n.split(zt.splitPipe),a=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;a<r.length;a++)r[a]=r[a].trim().replace(zt.slashPipe,"|");return r}function Wn(t,e,n){let r=t.length;if(r===0)return"";let a=0;for(;a<r&&t.charAt(r-a-1)===e;)a++;return t.slice(0,r-a)}function cc(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function dc(t,e=0){let n=e,r="";for(let a of t)if(a==="	"){let c=4-n%4;r+=" ".repeat(c),n+=c}else r+=a,n++;return r}function zs(t,e,n,r,a){let c=e.href,i=e.title||null,u=t[1].replace(a.other.outputLinkReplace,"$1");r.state.inLink=!0;let p={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:c,title:i,text:u,tokens:r.inlineTokens(u)};return r.state.inLink=!1,p}function uc(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let a=r[1];return e.split(`
`).map(c=>{let i=c.match(n.other.beginningSpace);if(i===null)return c;let[u]=i;return u.length>=a.length?c.slice(a.length):c}).join(`
`)}var ha=class{options;rules;lexer;constructor(t){this.options=t||Dn}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Wn(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=uc(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=Wn(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Wn(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=Wn(e[0],`
`).split(`
`),r="",a="",c=[];for(;n.length>0;){let i=!1,u=[],p;for(p=0;p<n.length;p++)if(this.rules.other.blockquoteStart.test(n[p]))u.push(n[p]),i=!0;else if(!i)u.push(n[p]);else break;n=n.slice(p);let f=u.join(`
`),h=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${f}`:f,a=a?`${a}
${h}`:h;let y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,c,!0),this.lexer.state.top=y,n.length===0)break;let _=c.at(-1);if(_?.type==="code")break;if(_?.type==="blockquote"){let z=_,A=z.raw+`
`+n.join(`
`),O=this.blockquote(A);c[c.length-1]=O,r=r.substring(0,r.length-z.raw.length)+O.raw,a=a.substring(0,a.length-z.text.length)+O.text;break}else if(_?.type==="list"){let z=_,A=z.raw+`
`+n.join(`
`),O=this.list(A);c[c.length-1]=O,r=r.substring(0,r.length-_.raw.length)+O.raw,a=a.substring(0,a.length-z.raw.length)+O.raw,n=A.substring(c.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:c,text:a}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,a={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let c=this.rules.other.listItemRegex(n),i=!1;for(;t;){let p=!1,f="",h="";if(!(e=c.exec(t))||this.rules.block.hr.test(t))break;f=e[0],t=t.substring(f.length);let y=dc(e[2].split(`
`,1)[0],e[1].length),_=t.split(`
`,1)[0],z=!y.trim(),A=0;if(this.options.pedantic?(A=2,h=y.trimStart()):z?A=e[1].length+1:(A=y.search(this.rules.other.nonSpaceChar),A=A>4?1:A,h=y.slice(A),A+=e[1].length),z&&this.rules.other.blankLine.test(_)&&(f+=_+`
`,t=t.substring(_.length+1),p=!0),!p){let O=this.rules.other.nextBulletRegex(A),B=this.rules.other.hrRegex(A),te=this.rules.other.fencesBeginRegex(A),de=this.rules.other.headingBeginRegex(A),$=this.rules.other.htmlBeginRegex(A),k=this.rules.other.blockquoteBeginRegex(A);for(;t;){let E=t.split(`
`,1)[0],C;if(_=E,this.options.pedantic?(_=_.replace(this.rules.other.listReplaceNesting,"  "),C=_):C=_.replace(this.rules.other.tabCharGlobal,"    "),te.test(_)||de.test(_)||$.test(_)||k.test(_)||O.test(_)||B.test(_))break;if(C.search(this.rules.other.nonSpaceChar)>=A||!_.trim())h+=`
`+C.slice(A);else{if(z||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||te.test(y)||de.test(y)||B.test(y))break;h+=`
`+_}z=!_.trim(),f+=E+`
`,t=t.substring(E.length+1),y=C.slice(A)}}a.loose||(i?a.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(i=!0)),a.items.push({type:"list_item",raw:f,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),a.raw+=f}let u=a.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let p of a.items){if(this.lexer.state.top=!1,p.tokens=this.lexer.blockTokens(p.text,[]),p.task){if(p.text=p.text.replace(this.rules.other.listReplaceTask,""),p.tokens[0]?.type==="text"||p.tokens[0]?.type==="paragraph"){p.tokens[0].raw=p.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),p.tokens[0].text=p.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let f=this.rules.other.listTaskCheckbox.exec(p.raw);if(f){let h={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};p.checked=h.checked,a.loose?p.tokens[0]&&["paragraph","text"].includes(p.tokens[0].type)&&"tokens"in p.tokens[0]&&p.tokens[0].tokens?(p.tokens[0].raw=h.raw+p.tokens[0].raw,p.tokens[0].text=h.raw+p.tokens[0].text,p.tokens[0].tokens.unshift(h)):p.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):p.tokens.unshift(h)}}if(!a.loose){let f=p.tokens.filter(y=>y.type==="space"),h=f.length>0&&f.some(y=>this.rules.other.anyLine.test(y.raw));a.loose=h}}if(a.loose)for(let p of a.items){p.loose=!0;for(let f of p.tokens)f.type==="text"&&(f.type="paragraph")}return a}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:a}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=$s(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],c={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let i of r)this.rules.other.tableAlignRight.test(i)?c.align.push("right"):this.rules.other.tableAlignCenter.test(i)?c.align.push("center"):this.rules.other.tableAlignLeft.test(i)?c.align.push("left"):c.align.push(null);for(let i=0;i<n.length;i++)c.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:c.align[i]});for(let i of a)c.rows.push($s(i,c.header.length).map((u,p)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:c.align[p]})));return c}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let c=Wn(n.slice(0,-1),"\\");if((n.length-c.length)%2===0)return}else{let c=cc(e[2],"()");if(c===-2)return;if(c>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+c;e[2]=e[2].substring(0,c),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){let c=this.rules.other.pedanticHrefTitle.exec(r);c&&(r=c[1],a=c[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),zs(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[r.toLowerCase()];if(!a){let c=n[0].charAt(0);return{type:"text",raw:c,text:c}}return zs(n,a,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let a=[...r[0]].length-1,c,i,u=a,p=0,f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+a);(r=f.exec(e))!=null;){if(c=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!c)continue;if(i=[...c].length,r[3]||r[4]){u+=i;continue}else if((r[5]||r[6])&&a%3&&!((a+i)%3)){p+=i;continue}if(u-=i,u>0)continue;i=Math.min(i,i+u+p);let h=[...r[0]][0].length,y=t.slice(0,a+r.index+h+i);if(Math.min(a,i)%2){let z=y.slice(1,-1);return{type:"em",raw:y,text:z,tokens:this.lexer.inlineTokens(z)}}let _=y.slice(2,-2);return{type:"strong",raw:y,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),a=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&a&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t,e,n=""){let r=this.rules.inline.delLDelim.exec(t);if(r&&(!r[1]||!n||this.rules.inline.punctuation.exec(n))){let a=[...r[0]].length-1,c,i,u=a,p=this.rules.inline.delRDelim;for(p.lastIndex=0,e=e.slice(-1*t.length+a);(r=p.exec(e))!=null;){if(c=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!c||(i=[...c].length,i!==a))continue;if(r[3]||r[4]){u+=i;continue}if(u-=i,u>0)continue;i=Math.min(i,i+u);let f=[...r[0]][0].length,h=t.slice(0,a+r.index+f+i),y=h.slice(a,-a);return{type:"del",raw:h,text:y,tokens:this.lexer.inlineTokens(y)}}}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let a;do a=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(a!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Vt=class Ya{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Dn,this.options.tokenizer=this.options.tokenizer||new ha,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:zt,block:ca.normal,inline:Zn.normal};this.options.pedantic?(n.block=ca.pedantic,n.inline=Zn.pedantic):this.options.gfm&&(n.block=ca.gfm,this.options.breaks?n.inline=Zn.breaks:n.inline=Zn.gfm),this.tokenizer.rules=n}static get rules(){return{block:ca,inline:Zn}}static lex(e,n){return new Ya(n).lex(e)}static lexInline(e,n){return new Ya(n).inlineTokens(e)}lex(e){e=e.replace(zt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(zt.tabCharGlobal,"    ").replace(zt.spaceLine,""));e;){let a;if(this.options.extensions?.block?.some(i=>(a=i.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let i=n.at(-1);a.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+a.raw,i.text+=`
`+a.text,this.inlineQueue.at(-1).src=i.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+a.raw,i.text+=`
`+a.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let c=e;if(this.options.extensions?.startBlock){let i=1/0,u=e.slice(1),p;this.options.extensions.startBlock.forEach(f=>{p=f.call({lexer:this},u),typeof p=="number"&&p>=0&&(i=Math.min(i,p))}),i<1/0&&i>=0&&(c=e.substring(0,i+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){let i=n.at(-1);r&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+a.raw,i.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(a),r=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+a.raw,i.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(a);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,a=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)p.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let c;for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)c=a[2]?a[2].length:0,r=r.slice(0,a.index+c)+"["+"a".repeat(a[0].length-c-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let i=!1,u="";for(;e;){i||(u=""),i=!1;let p;if(this.options.extensions?.inline?.some(h=>(p=h.call({lexer:this},e,n))?(e=e.substring(p.raw.length),n.push(p),!0):!1))continue;if(p=this.tokenizer.escape(e)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.tag(e)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.link(e)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(p.raw.length);let h=n.at(-1);p.type==="text"&&h?.type==="text"?(h.raw+=p.raw,h.text+=p.text):n.push(p);continue}if(p=this.tokenizer.emStrong(e,r,u)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.codespan(e)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.br(e)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.del(e,r,u)){e=e.substring(p.raw.length),n.push(p);continue}if(p=this.tokenizer.autolink(e)){e=e.substring(p.raw.length),n.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(e))){e=e.substring(p.raw.length),n.push(p);continue}let f=e;if(this.options.extensions?.startInline){let h=1/0,y=e.slice(1),_;this.options.extensions.startInline.forEach(z=>{_=z.call({lexer:this},y),typeof _=="number"&&_>=0&&(h=Math.min(h,_))}),h<1/0&&h>=0&&(f=e.substring(0,h+1))}if(p=this.tokenizer.inlineText(f)){e=e.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(u=p.raw.slice(-1)),i=!0;let h=n.at(-1);h?.type==="text"?(h.raw+=p.raw,h.text+=p.text):n.push(p);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},fa=class{options;parser;constructor(t){this.options=t||Dn}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(zt.notSpaceStart)?.[0],a=t.replace(zt.endingNewline,"")+`
`;return r?'<pre><code class="language-'+ln(r)+'">'+(n?a:ln(a,!0))+`</code></pre>
`:"<pre><code>"+(n?a:ln(a,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let i=0;i<t.items.length;i++){let u=t.items[i];r+=this.listitem(u)}let a=e?"ol":"ul",c=e&&n!==1?' start="'+n+'"':"";return"<"+a+c+`>
`+r+"</"+a+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let a=0;a<t.header.length;a++)n+=this.tablecell(t.header[a]);e+=this.tablerow({text:n});let r="";for(let a=0;a<t.rows.length;a++){let c=t.rows[a];n="";for(let i=0;i<c.length;i++)n+=this.tablecell(c[i]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ln(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),a=Rs(t);if(a===null)return r;t=a;let c='<a href="'+t+'"';return e&&(c+=' title="'+ln(e)+'"'),c+=">"+r+"</a>",c}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let a=Rs(t);if(a===null)return ln(n);t=a;let c=`<img src="${t}" alt="${ln(n)}"`;return e&&(c+=` title="${ln(e)}"`),c+=">",c}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ln(t.text)}},gs=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},Yt=class Xa{options;renderer;textRenderer;constructor(e){this.options=e||Dn,this.options.renderer=this.options.renderer||new fa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new gs}static parse(e,n){return new Xa(n).parse(e)}static parseInline(e,n){return new Xa(n).parseInline(e)}parse(e){let n="";for(let r=0;r<e.length;r++){let a=e[r];if(this.options.extensions?.renderers?.[a.type]){let i=a,u=this.options.extensions.renderers[i.type].call({parser:this},i);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){n+=u||"";continue}}let c=a;switch(c.type){case"space":{n+=this.renderer.space(c);break}case"hr":{n+=this.renderer.hr(c);break}case"heading":{n+=this.renderer.heading(c);break}case"code":{n+=this.renderer.code(c);break}case"table":{n+=this.renderer.table(c);break}case"blockquote":{n+=this.renderer.blockquote(c);break}case"list":{n+=this.renderer.list(c);break}case"checkbox":{n+=this.renderer.checkbox(c);break}case"html":{n+=this.renderer.html(c);break}case"def":{n+=this.renderer.def(c);break}case"paragraph":{n+=this.renderer.paragraph(c);break}case"text":{n+=this.renderer.text(c);break}default:{let i='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(e,n=this.renderer){let r="";for(let a=0;a<e.length;a++){let c=e[a];if(this.options.extensions?.renderers?.[c.type]){let u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type)){r+=u||"";continue}}let i=c;switch(i.type){case"escape":{r+=n.text(i);break}case"html":{r+=n.html(i);break}case"link":{r+=n.link(i);break}case"image":{r+=n.image(i);break}case"checkbox":{r+=n.checkbox(i);break}case"strong":{r+=n.strong(i);break}case"em":{r+=n.em(i);break}case"codespan":{r+=n.codespan(i);break}case"br":{r+=n.br(i);break}case"del":{r+=n.del(i);break}case"text":{r+=n.text(i);break}default:{let u='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}},Yn=class{options;block;constructor(t){this.options=t||Dn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Vt.lex:Vt.lexInline}provideParser(){return this.block?Yt.parse:Yt.parseInline}},pc=class{defaults=rs();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Yt;Renderer=fa;TextRenderer=gs;Lexer=Vt;Tokenizer=ha;Hooks=Yn;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let a=r;for(let c of a.header)n=n.concat(this.walkTokens(c.tokens,e));for(let c of a.rows)for(let i of c)n=n.concat(this.walkTokens(i.tokens,e));break}case"list":{let a=r;n=n.concat(this.walkTokens(a.items,e));break}default:{let a=r;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{let i=a[c].flat(1/0);n=n.concat(this.walkTokens(i,e))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){let c=e.renderers[a.name];c?e.renderers[a.name]=function(...i){let u=a.renderer.apply(this,i);return u===!1&&(u=c.apply(this,i)),u}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let c=e[a.level];c?c.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),r.extensions=e),n.renderer){let a=this.defaults.renderer||new fa(this.defaults);for(let c in n.renderer){if(!(c in a))throw new Error(`renderer '${c}' does not exist`);if(["options","parser"].includes(c))continue;let i=c,u=n.renderer[i],p=a[i];a[i]=(...f)=>{let h=u.apply(a,f);return h===!1&&(h=p.apply(a,f)),h||""}}r.renderer=a}if(n.tokenizer){let a=this.defaults.tokenizer||new ha(this.defaults);for(let c in n.tokenizer){if(!(c in a))throw new Error(`tokenizer '${c}' does not exist`);if(["options","rules","lexer"].includes(c))continue;let i=c,u=n.tokenizer[i],p=a[i];a[i]=(...f)=>{let h=u.apply(a,f);return h===!1&&(h=p.apply(a,f)),h}}r.tokenizer=a}if(n.hooks){let a=this.defaults.hooks||new Yn;for(let c in n.hooks){if(!(c in a))throw new Error(`hook '${c}' does not exist`);if(["options","block"].includes(c))continue;let i=c,u=n.hooks[i],p=a[i];Yn.passThroughHooks.has(c)?a[i]=f=>{if(this.defaults.async&&Yn.passThroughHooksRespectAsync.has(c))return(async()=>{let y=await u.call(a,f);return p.call(a,y)})();let h=u.call(a,f);return p.call(a,h)}:a[i]=(...f)=>{if(this.defaults.async)return(async()=>{let y=await u.apply(a,f);return y===!1&&(y=await p.apply(a,f)),y})();let h=u.apply(a,f);return h===!1&&(h=p.apply(a,f)),h}}r.hooks=a}if(n.walkTokens){let a=this.defaults.walkTokens,c=n.walkTokens;r.walkTokens=function(i){let u=[];return u.push(c.call(this,i)),a&&(u=u.concat(a.call(this,i))),u}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Vt.lex(t,e??this.defaults)}parser(t,e){return Yt.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},a={...this.defaults,...r},c=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(a.hooks&&(a.hooks.options=a,a.hooks.block=t),a.async)return(async()=>{let i=a.hooks?await a.hooks.preprocess(e):e,u=await(a.hooks?await a.hooks.provideLexer():t?Vt.lex:Vt.lexInline)(i,a),p=a.hooks?await a.hooks.processAllTokens(u):u;a.walkTokens&&await Promise.all(this.walkTokens(p,a.walkTokens));let f=await(a.hooks?await a.hooks.provideParser():t?Yt.parse:Yt.parseInline)(p,a);return a.hooks?await a.hooks.postprocess(f):f})().catch(c);try{a.hooks&&(e=a.hooks.preprocess(e));let i=(a.hooks?a.hooks.provideLexer():t?Vt.lex:Vt.lexInline)(e,a);a.hooks&&(i=a.hooks.processAllTokens(i)),a.walkTokens&&this.walkTokens(i,a.walkTokens);let u=(a.hooks?a.hooks.provideParser():t?Yt.parse:Yt.parseInline)(i,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(i){return c(i)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+ln(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Pn=new pc;function Ke(t,e){return Pn.parse(t,e)}Ke.options=Ke.setOptions=function(t){return Pn.setOptions(t),Ke.defaults=Pn.defaults,nr(Ke.defaults),Ke};Ke.getDefaults=rs;Ke.defaults=Dn;Ke.use=function(...t){return Pn.use(...t),Ke.defaults=Pn.defaults,nr(Ke.defaults),Ke};Ke.walkTokens=function(t,e){return Pn.walkTokens(t,e)};Ke.parseInline=Pn.parseInline;Ke.Parser=Yt;Ke.parser=Yt.parse;Ke.Renderer=fa;Ke.TextRenderer=gs;Ke.Lexer=Vt;Ke.lexer=Vt.lex;Ke.Tokenizer=ha;Ke.Hooks=Yn;Ke.parse=Ke;Ke.options;Ke.setOptions;Ke.use;Ke.walkTokens;Ke.parseInline;Yt.parse;Vt.lex;function gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ia,Ms;function vc(){if(Ms)return Ia;Ms=1;function t(l){return l instanceof Map?l.clear=l.delete=l.set=function(){throw new Error("map is read-only")}:l instanceof Set&&(l.add=l.clear=l.delete=function(){throw new Error("set is read-only")}),Object.freeze(l),Object.getOwnPropertyNames(l).forEach(v=>{const N=l[v],ce=typeof N;(ce==="object"||ce==="function")&&!Object.isFrozen(N)&&t(N)}),l}class e{constructor(v){v.data===void 0&&(v.data={}),this.data=v.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(l,...v){const N=Object.create(null);for(const ce in l)N[ce]=l[ce];return v.forEach(function(ce){for(const He in ce)N[He]=ce[He]}),N}const a="</span>",c=l=>!!l.scope,i=(l,{prefix:v})=>{if(l.startsWith("language:"))return l.replace("language:","language-");if(l.includes(".")){const N=l.split(".");return[`${v}${N.shift()}`,...N.map((ce,He)=>`${ce}${"_".repeat(He+1)}`)].join(" ")}return`${v}${l}`};class u{constructor(v,N){this.buffer="",this.classPrefix=N.classPrefix,v.walk(this)}addText(v){this.buffer+=n(v)}openNode(v){if(!c(v))return;const N=i(v.scope,{prefix:this.classPrefix});this.span(N)}closeNode(v){c(v)&&(this.buffer+=a)}value(){return this.buffer}span(v){this.buffer+=`<span class="${v}">`}}const p=(l={})=>{const v={children:[]};return Object.assign(v,l),v};class f{constructor(){this.rootNode=p(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(v){this.top.children.push(v)}openNode(v){const N=p({scope:v});this.add(N),this.stack.push(N)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(v){return this.constructor._walk(v,this.rootNode)}static _walk(v,N){return typeof N=="string"?v.addText(N):N.children&&(v.openNode(N),N.children.forEach(ce=>this._walk(v,ce)),v.closeNode(N)),v}static _collapse(v){typeof v!="string"&&v.children&&(v.children.every(N=>typeof N=="string")?v.children=[v.children.join("")]:v.children.forEach(N=>{f._collapse(N)}))}}class h extends f{constructor(v){super(),this.options=v}addText(v){v!==""&&this.add(v)}startScope(v){this.openNode(v)}endScope(){this.closeNode()}__addSublanguage(v,N){const ce=v.root;N&&(ce.scope=`language:${N}`),this.add(ce)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function y(l){return l?typeof l=="string"?l:l.source:null}function _(l){return O("(?=",l,")")}function z(l){return O("(?:",l,")*")}function A(l){return O("(?:",l,")?")}function O(...l){return l.map(N=>y(N)).join("")}function B(l){const v=l[l.length-1];return typeof v=="object"&&v.constructor===Object?(l.splice(l.length-1,1),v):{}}function te(...l){return"("+(B(l).capture?"":"?:")+l.map(ce=>y(ce)).join("|")+")"}function de(l){return new RegExp(l.toString()+"|").exec("").length-1}function $(l,v){const N=l&&l.exec(v);return N&&N.index===0}const k=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function E(l,{joinWith:v}){let N=0;return l.map(ce=>{N+=1;const He=N;let Ve=y(ce),P="";for(;Ve.length>0;){const L=k.exec(Ve);if(!L){P+=Ve;break}P+=Ve.substring(0,L.index),Ve=Ve.substring(L.index+L[0].length),L[0][0]==="\\"&&L[1]?P+="\\"+String(Number(L[1])+He):(P+=L[0],L[0]==="("&&N++)}return P}).map(ce=>`(${ce})`).join(v)}const C=/\b\B/,G="[a-zA-Z]\\w*",oe="[a-zA-Z_]\\w*",ne="\\b\\d+(\\.\\d+)?",Re="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",et="\\b(0b[01]+)",qe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Ne=(l={})=>{const v=/^#![ ]*\//;return l.binary&&(l.begin=O(v,/.*\b/,l.binary,/\b.*/)),r({scope:"meta",begin:v,end:/$/,relevance:0,"on:begin":(N,ce)=>{N.index!==0&&ce.ignoreMatch()}},l)},se={begin:"\\\\[\\s\\S]",relevance:0},$e={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[se]},Ce={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[se]},tt={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},J=function(l,v,N={}){const ce=r({scope:"comment",begin:l,end:v,contains:[]},N);ce.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const He=te("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return ce.contains.push({begin:O(/[ ]+/,"(",He,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),ce},Pe=J("//","$"),Oe=J("/\\*","\\*/"),Le=J("#","$"),We={scope:"number",begin:ne,relevance:0},rt={scope:"number",begin:Re,relevance:0},at={scope:"number",begin:et,relevance:0},Xe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[se,{begin:/\[/,end:/\]/,relevance:0,contains:[se]}]},ut={scope:"title",begin:G,relevance:0},pt={scope:"title",begin:oe,relevance:0},ft={begin:"\\.\\s*"+oe,relevance:0};var M=Object.freeze({__proto__:null,APOS_STRING_MODE:$e,BACKSLASH_ESCAPE:se,BINARY_NUMBER_MODE:at,BINARY_NUMBER_RE:et,COMMENT:J,C_BLOCK_COMMENT_MODE:Oe,C_LINE_COMMENT_MODE:Pe,C_NUMBER_MODE:rt,C_NUMBER_RE:Re,END_SAME_AS_BEGIN:function(l){return Object.assign(l,{"on:begin":(v,N)=>{N.data._beginMatch=v[1]},"on:end":(v,N)=>{N.data._beginMatch!==v[1]&&N.ignoreMatch()}})},HASH_COMMENT_MODE:Le,IDENT_RE:G,MATCH_NOTHING_RE:C,METHOD_GUARD:ft,NUMBER_MODE:We,NUMBER_RE:ne,PHRASAL_WORDS_MODE:tt,QUOTE_STRING_MODE:Ce,REGEXP_MODE:Xe,RE_STARTERS_RE:qe,SHEBANG:Ne,TITLE_MODE:ut,UNDERSCORE_IDENT_RE:oe,UNDERSCORE_TITLE_MODE:pt});function K(l,v){l.input[l.index-1]==="."&&v.ignoreMatch()}function j(l,v){l.className!==void 0&&(l.scope=l.className,delete l.className)}function q(l,v){v&&l.beginKeywords&&(l.begin="\\b("+l.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",l.__beforeBegin=K,l.keywords=l.keywords||l.beginKeywords,delete l.beginKeywords,l.relevance===void 0&&(l.relevance=0))}function ee(l,v){Array.isArray(l.illegal)&&(l.illegal=te(...l.illegal))}function ue(l,v){if(l.match){if(l.begin||l.end)throw new Error("begin & end are not supported with match");l.begin=l.match,delete l.match}}function be(l,v){l.relevance===void 0&&(l.relevance=1)}const Ee=(l,v)=>{if(!l.beforeMatch)return;if(l.starts)throw new Error("beforeMatch cannot be used with starts");const N=Object.assign({},l);Object.keys(l).forEach(ce=>{delete l[ce]}),l.keywords=N.keywords,l.begin=O(N.beforeMatch,_(N.begin)),l.starts={relevance:0,contains:[Object.assign(N,{endsParent:!0})]},l.relevance=0,delete N.beforeMatch},_e=["of","and","for","in","not","or","if","then","parent","list","value"],we="keyword";function R(l,v,N=we){const ce=Object.create(null);return typeof l=="string"?He(N,l.split(" ")):Array.isArray(l)?He(N,l):Object.keys(l).forEach(function(Ve){Object.assign(ce,R(l[Ve],v,Ve))}),ce;function He(Ve,P){v&&(P=P.map(L=>L.toLowerCase())),P.forEach(function(L){const ae=L.split("|");ce[ae[0]]=[Ve,Z(ae[0],ae[1])]})}}function Z(l,v){return v?Number(v):U(l)?0:1}function U(l){return _e.includes(l.toLowerCase())}const ye={},fe=l=>{console.error(l)},me=(l,...v)=>{console.log(`WARN: ${l}`,...v)},ze=(l,v)=>{ye[`${l}/${v}`]||(console.log(`Deprecated as of ${l}. ${v}`),ye[`${l}/${v}`]=!0)},Ie=new Error;function Te(l,v,{key:N}){let ce=0;const He=l[N],Ve={},P={};for(let L=1;L<=v.length;L++)P[L+ce]=He[L],Ve[L+ce]=!0,ce+=de(v[L-1]);l[N]=P,l[N]._emit=Ve,l[N]._multi=!0}function bt(l){if(Array.isArray(l.begin)){if(l.skip||l.excludeBegin||l.returnBegin)throw fe("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ie;if(typeof l.beginScope!="object"||l.beginScope===null)throw fe("beginScope must be object"),Ie;Te(l,l.begin,{key:"beginScope"}),l.begin=E(l.begin,{joinWith:""})}}function Ct(l){if(Array.isArray(l.end)){if(l.skip||l.excludeEnd||l.returnEnd)throw fe("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ie;if(typeof l.endScope!="object"||l.endScope===null)throw fe("endScope must be object"),Ie;Te(l,l.end,{key:"endScope"}),l.end=E(l.end,{joinWith:""})}}function dn(l){l.scope&&typeof l.scope=="object"&&l.scope!==null&&(l.beginScope=l.scope,delete l.scope)}function Ot(l){dn(l),typeof l.beginScope=="string"&&(l.beginScope={_wrap:l.beginScope}),typeof l.endScope=="string"&&(l.endScope={_wrap:l.endScope}),bt(l),Ct(l)}function Tt(l){function v(P,L){return new RegExp(y(P),"m"+(l.case_insensitive?"i":"")+(l.unicodeRegex?"u":"")+(L?"g":""))}class N{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(L,ae){ae.position=this.position++,this.matchIndexes[this.matchAt]=ae,this.regexes.push([ae,L]),this.matchAt+=de(L)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const L=this.regexes.map(ae=>ae[1]);this.matcherRe=v(E(L,{joinWith:"|"}),!0),this.lastIndex=0}exec(L){this.matcherRe.lastIndex=this.lastIndex;const ae=this.matcherRe.exec(L);if(!ae)return null;const lt=ae.findIndex((Qt,Jt)=>Jt>0&&Qt!==void 0),st=this.matchIndexes[lt];return ae.splice(0,lt),Object.assign(ae,st)}}class ce{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(L){if(this.multiRegexes[L])return this.multiRegexes[L];const ae=new N;return this.rules.slice(L).forEach(([lt,st])=>ae.addRule(lt,st)),ae.compile(),this.multiRegexes[L]=ae,ae}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(L,ae){this.rules.push([L,ae]),ae.type==="begin"&&this.count++}exec(L){const ae=this.getMatcher(this.regexIndex);ae.lastIndex=this.lastIndex;let lt=ae.exec(L);if(this.resumingScanAtSamePosition()&&!(lt&&lt.index===this.lastIndex)){const st=this.getMatcher(0);st.lastIndex=this.lastIndex+1,lt=st.exec(L)}return lt&&(this.regexIndex+=lt.position+1,this.regexIndex===this.count&&this.considerAll()),lt}}function He(P){const L=new ce;return P.contains.forEach(ae=>L.addRule(ae.begin,{rule:ae,type:"begin"})),P.terminatorEnd&&L.addRule(P.terminatorEnd,{type:"end"}),P.illegal&&L.addRule(P.illegal,{type:"illegal"}),L}function Ve(P,L){const ae=P;if(P.isCompiled)return ae;[j,ue,Ot,Ee].forEach(st=>st(P,L)),l.compilerExtensions.forEach(st=>st(P,L)),P.__beforeBegin=null,[q,ee,be].forEach(st=>st(P,L)),P.isCompiled=!0;let lt=null;return typeof P.keywords=="object"&&P.keywords.$pattern&&(P.keywords=Object.assign({},P.keywords),lt=P.keywords.$pattern,delete P.keywords.$pattern),lt=lt||/\w+/,P.keywords&&(P.keywords=R(P.keywords,l.case_insensitive)),ae.keywordPatternRe=v(lt,!0),L&&(P.begin||(P.begin=/\B|\b/),ae.beginRe=v(ae.begin),!P.end&&!P.endsWithParent&&(P.end=/\B|\b/),P.end&&(ae.endRe=v(ae.end)),ae.terminatorEnd=y(ae.end)||"",P.endsWithParent&&L.terminatorEnd&&(ae.terminatorEnd+=(P.end?"|":"")+L.terminatorEnd)),P.illegal&&(ae.illegalRe=v(P.illegal)),P.contains||(P.contains=[]),P.contains=[].concat(...P.contains.map(function(st){return It(st==="self"?P:st)})),P.contains.forEach(function(st){Ve(st,ae)}),P.starts&&Ve(P.starts,L),ae.matcher=He(ae),ae}if(l.compilerExtensions||(l.compilerExtensions=[]),l.contains&&l.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return l.classNameAliases=r(l.classNameAliases||{}),Ve(l)}function Xt(l){return l?l.endsWithParent||Xt(l.starts):!1}function It(l){return l.variants&&!l.cachedVariants&&(l.cachedVariants=l.variants.map(function(v){return r(l,{variants:null},v)})),l.cachedVariants?l.cachedVariants:Xt(l)?r(l,{starts:l.starts?r(l.starts):null}):Object.isFrozen(l)?r(l):l}var _n="11.11.1";class vt extends Error{constructor(v,N){super(v),this.name="HTMLInjectionError",this.html=N}}const Nt=n,Ft=r,T=Symbol("nomatch"),Y=7,I=function(l){const v=Object.create(null),N=Object.create(null),ce=[];let He=!0;const Ve="Could not find the language '{}', did you forget to load/include a language module?",P={disableAutodetect:!0,name:"Plain text",contains:[]};let L={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:h};function ae(S){return L.noHighlightRe.test(S)}function lt(S){let re=S.className+" ";re+=S.parentNode?S.parentNode.className:"";const Me=L.languageDetectRe.exec(re);if(Me){const W=tn(Me[1]);return W||(me(Ve.replace("{}",Me[1])),me("Falling back to no-highlight mode for this block.",S)),W?Me[1]:"no-highlight"}return re.split(/\s+/).find(W=>ae(W)||tn(W))}function st(S,re,Me){let W="",Se="";typeof re=="object"?(W=S,Me=re.ignoreIllegals,Se=re.language):(ze("10.7.0","highlight(lang, code, ...args) has been deprecated."),ze("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Se=S,W=re),Me===void 0&&(Me=!0);const Be={code:W,language:Se};pn("before:highlight",Be);const ke=Be.result?Be.result:Qt(Be.language,Be.code,Me);return ke.code=Be.code,pn("after:highlight",ke),ke}function Qt(S,re,Me,W){const Se=Object.create(null);function Be(x,D){return x.keywords[D]}function ke(){if(!pe.keywords){je.addText(V);return}let x=0;pe.keywordPatternRe.lastIndex=0;let D=pe.keywordPatternRe.exec(V),ie="";for(;D;){ie+=V.substring(x,D.index);const X=Et.case_insensitive?D[0].toLowerCase():D[0],Ye=Be(pe,X);if(Ye){const[mt,$n]=Ye;if(je.addText(ie),ie="",Se[X]=(Se[X]||0)+1,Se[X]<=Y&&(Fe+=$n),mt.startsWith("_"))ie+=D[0];else{const rn=Et.classNameAliases[mt]||mt;Qe(D[0],rn)}}else ie+=D[0];x=pe.keywordPatternRe.lastIndex,D=pe.keywordPatternRe.exec(V)}ie+=V.substring(x),je.addText(ie)}function xe(){if(V==="")return;let x=null;if(typeof pe.subLanguage=="string"){if(!v[pe.subLanguage]){je.addText(V);return}x=Qt(pe.subLanguage,V,!0,sn[pe.subLanguage]),sn[pe.subLanguage]=x._top}else x=En(V,pe.subLanguage.length?pe.subLanguage:null);pe.relevance>0&&(Fe+=x.relevance),je.__addSublanguage(x._emitter,x.language)}function Ge(){pe.subLanguage!=null?xe():ke(),V=""}function Qe(x,D){x!==""&&(je.startScope(D),je.addText(x),je.endScope())}function Rt(x,D){let ie=1;const X=D.length-1;for(;ie<=X;){if(!x._emit[ie]){ie++;continue}const Ye=Et.classNameAliases[x[ie]]||x[ie],mt=D[ie];Ye?Qe(mt,Ye):(V=mt,ke(),V=""),ie++}}function nn(x,D){return x.scope&&typeof x.scope=="string"&&je.openNode(Et.classNameAliases[x.scope]||x.scope),x.beginScope&&(x.beginScope._wrap?(Qe(V,Et.classNameAliases[x.beginScope._wrap]||x.beginScope._wrap),V=""):x.beginScope._multi&&(Rt(x.beginScope,D),V="")),pe=Object.create(x,{parent:{value:pe}}),pe}function gn(x,D,ie){let X=$(x.endRe,ie);if(X){if(x["on:end"]){const Ye=new e(x);x["on:end"](D,Ye),Ye.isMatchIgnored&&(X=!1)}if(X){for(;x.endsParent&&x.parent;)x=x.parent;return x}}if(x.endsWithParent)return gn(x.parent,D,ie)}function vn(x){return pe.matcher.regexIndex===0?(V+=x[0],1):(ht=!0,0)}function Dt(x){const D=x[0],ie=x.rule,X=new e(ie),Ye=[ie.__beforeBegin,ie["on:begin"]];for(const mt of Ye)if(mt&&(mt(x,X),X.isMatchIgnored))return vn(D);return ie.skip?V+=D:(ie.excludeBegin&&(V+=D),Ge(),!ie.returnBegin&&!ie.excludeBegin&&(V=D)),nn(ie,x),ie.returnBegin?0:D.length}function hn(x){const D=x[0],ie=re.substring(x.index),X=gn(pe,x,ie);if(!X)return T;const Ye=pe;pe.endScope&&pe.endScope._wrap?(Ge(),Qe(D,pe.endScope._wrap)):pe.endScope&&pe.endScope._multi?(Ge(),Rt(pe.endScope,x)):Ye.skip?V+=D:(Ye.returnEnd||Ye.excludeEnd||(V+=D),Ge(),Ye.excludeEnd&&(V=D));do pe.scope&&je.closeNode(),!pe.skip&&!pe.subLanguage&&(Fe+=pe.relevance),pe=pe.parent;while(pe!==X.parent);return X.starts&&nn(X.starts,x),Ye.returnEnd?0:D.length}function Kt(){const x=[];for(let D=pe;D!==Et;D=D.parent)D.scope&&x.unshift(D.scope);x.forEach(D=>je.openNode(D))}let Bt={};function an(x,D){const ie=D&&D[0];if(V+=x,ie==null)return Ge(),0;if(Bt.type==="begin"&&D.type==="end"&&Bt.index===D.index&&ie===""){if(V+=re.slice(D.index,D.index+1),!He){const X=new Error(`0 width match regex (${S})`);throw X.languageName=S,X.badRule=Bt.rule,X}return 1}if(Bt=D,D.type==="begin")return Dt(D);if(D.type==="illegal"&&!Me){const X=new Error('Illegal lexeme "'+ie+'" for mode "'+(pe.scope||"<unnamed>")+'"');throw X.mode=pe,X}else if(D.type==="end"){const X=hn(D);if(X!==T)return X}if(D.type==="illegal"&&ie==="")return V+=`
`,1;if(nt>1e5&&nt>D.index*3)throw new Error("potential infinite loop, way more iterations than matches");return V+=ie,ie.length}const Et=tn(S);if(!Et)throw fe(Ve.replace("{}",S)),new Error('Unknown language: "'+S+'"');const jt=Tt(Et);let qt="",pe=W||jt;const sn={},je=new L.__emitter(L);Kt();let V="",Fe=0,Ae=0,nt=0,ht=!1;try{if(Et.__emitTokens)Et.__emitTokens(re,je);else{for(pe.matcher.considerAll();;){nt++,ht?ht=!1:pe.matcher.considerAll(),pe.matcher.lastIndex=Ae;const x=pe.matcher.exec(re);if(!x)break;const D=re.substring(Ae,x.index),ie=an(D,x);Ae=x.index+ie}an(re.substring(Ae))}return je.finalize(),qt=je.toHTML(),{language:S,value:qt,relevance:Fe,illegal:!1,_emitter:je,_top:pe}}catch(x){if(x.message&&x.message.includes("Illegal"))return{language:S,value:Nt(re),illegal:!0,relevance:0,_illegalBy:{message:x.message,index:Ae,context:re.slice(Ae-100,Ae+100),mode:x.mode,resultSoFar:qt},_emitter:je};if(He)return{language:S,value:Nt(re),illegal:!1,relevance:0,errorRaised:x,_emitter:je,_top:pe};throw x}}function Jt(S){const re={value:Nt(S),illegal:!1,relevance:0,_top:P,_emitter:new L.__emitter(L)};return re._emitter.addText(S),re}function En(S,re){re=re||L.languages||Object.keys(v);const Me=Jt(S),W=re.filter(tn).filter(Lt).map(Ge=>Qt(Ge,S,!1));W.unshift(Me);const Se=W.sort((Ge,Qe)=>{if(Ge.relevance!==Qe.relevance)return Qe.relevance-Ge.relevance;if(Ge.language&&Qe.language){if(tn(Ge.language).supersetOf===Qe.language)return 1;if(tn(Qe.language).supersetOf===Ge.language)return-1}return 0}),[Be,ke]=Se,xe=Be;return xe.secondBest=ke,xe}function Sn(S,re,Me){const W=re&&N[re]||Me;S.classList.add("hljs"),S.classList.add(`language-${W}`)}function An(S){let re=null;const Me=lt(S);if(ae(Me))return;if(pn("before:highlightElement",{el:S,language:Me}),S.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",S);return}if(S.children.length>0&&(L.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(S)),L.throwUnescapedHTML))throw new vt("One of your code blocks includes unescaped HTML.",S.innerHTML);re=S;const W=re.textContent,Se=Me?st(W,{language:Me,ignoreIllegals:!0}):En(W);S.innerHTML=Se.value,S.dataset.highlighted="yes",Sn(S,Me,Se.language),S.result={language:Se.language,re:Se.relevance,relevance:Se.relevance},Se.secondBest&&(S.secondBest={language:Se.secondBest.language,relevance:Se.secondBest.relevance}),pn("after:highlightElement",{el:S,result:Se,text:W})}function Tn(S){L=Ft(L,S)}const Bn=()=>{en(),ze("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Gt(){en(),ze("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Pt=!1;function en(){function S(){en()}if(document.readyState==="loading"){Pt||window.addEventListener("DOMContentLoaded",S,!1),Pt=!0;return}document.querySelectorAll(L.cssSelector).forEach(An)}function un(S,re){let Me=null;try{Me=re(l)}catch(W){if(fe("Language definition for '{}' could not be registered.".replace("{}",S)),He)fe(W);else throw W;Me=P}Me.name||(Me.name=S),v[S]=Me,Me.rawDefinition=re.bind(null,l),Me.aliases&&Nn(Me.aliases,{languageName:S})}function ka(S){delete v[S];for(const re of Object.keys(N))N[re]===S&&delete N[re]}function wa(){return Object.keys(v)}function tn(S){return S=(S||"").toLowerCase(),v[S]||v[N[S]]}function Nn(S,{languageName:re}){typeof S=="string"&&(S=[S]),S.forEach(Me=>{N[Me.toLowerCase()]=re})}function Lt(S){const re=tn(S);return re&&!re.disableAutodetect}function na(S){S["before:highlightBlock"]&&!S["before:highlightElement"]&&(S["before:highlightElement"]=re=>{S["before:highlightBlock"](Object.assign({block:re.el},re))}),S["after:highlightBlock"]&&!S["after:highlightElement"]&&(S["after:highlightElement"]=re=>{S["after:highlightBlock"](Object.assign({block:re.el},re))})}function Rn(S){na(S),ce.push(S)}function xa(S){const re=ce.indexOf(S);re!==-1&&ce.splice(re,1)}function pn(S,re){const Me=S;ce.forEach(function(W){W[Me]&&W[Me](re)})}function Ea(S){return ze("10.7.0","highlightBlock will be removed entirely in v12.0"),ze("10.7.0","Please use highlightElement now."),An(S)}Object.assign(l,{highlight:st,highlightAuto:En,highlightAll:en,highlightElement:An,highlightBlock:Ea,configure:Tn,initHighlighting:Bn,initHighlightingOnLoad:Gt,registerLanguage:un,unregisterLanguage:ka,listLanguages:wa,getLanguage:tn,registerAliases:Nn,autoDetection:Lt,inherit:Ft,addPlugin:Rn,removePlugin:xa}),l.debugMode=function(){He=!1},l.safeMode=function(){He=!0},l.versionString=_n,l.regex={concat:O,lookahead:_,either:te,optional:A,anyNumberOfTimes:z};for(const S in M)typeof M[S]=="object"&&t(M[S]);return Object.assign(l,M),l},H=I({});return H.newInstance=()=>I({}),Ia=H,H.HighlightJS=H,H.default=H,Ia}var hc=vc();const dt=gc(hc),Cs="[A-Za-z$_][0-9A-Za-z$_]*",fc=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],bc=["true","false","null","undefined","NaN","Infinity"],vr=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],hr=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],fr=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],mc=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],_c=[].concat(fr,vr,hr);function Os(t){const e=t.regex,n=(J,{after:Pe})=>{const Oe="</"+J[0].slice(1);return J.input.indexOf(Oe,Pe)!==-1},r=Cs,a={begin:"<>",end:"</>"},c=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(J,Pe)=>{const Oe=J[0].length+J.index,Le=J.input[Oe];if(Le==="<"||Le===","){Pe.ignoreMatch();return}Le===">"&&(n(J,{after:Oe})||Pe.ignoreMatch());let We;const rt=J.input.substring(Oe);if(We=rt.match(/^\s*=/)){Pe.ignoreMatch();return}if((We=rt.match(/^\s+extends\s+/))&&We.index===0){Pe.ignoreMatch();return}}},u={$pattern:Cs,keyword:fc,literal:bc,built_in:_c,"variable.language":mc},p="[0-9](_?[0-9])*",f=`\\.(${p})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",y={className:"number",variants:[{begin:`(\\b(${h})((${f})|\\.)?|(${f}))[eE][+-]?(${p})\\b`},{begin:`\\b(${h})\\b((${f})\\b|\\.)?|(${f})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},_={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},z={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"xml"}},A={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"css"}},O={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"graphql"}},B={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,_]},de={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},$=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,z,A,O,B,{match:/\$\d+/},y];_.contains=$.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat($)});const k=[].concat(de,_.contains),E=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:E},G={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},oe={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...vr,...hr]}},ne={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Re={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},et={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function qe(J){return e.concat("(?!",J.join("|"),")")}const Ne={match:e.concat(/\b/,qe([...fr,"super","import"].map(J=>`${J}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},se={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$e={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},Ce="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",tt={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Ce)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:oe},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),ne,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,z,A,O,B,de,{match:/\$\d+/},y,oe,{scope:"attr",match:r+e.lookahead(":"),relevance:0},tt,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[de,t.REGEXP_MODE,{className:"function",begin:Ce,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:c},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},Re,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},se,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},Ne,et,G,$e,{match:/\$[(.]/}]}}const ba="[A-Za-z$_][0-9A-Za-z$_]*",br=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],mr=["true","false","null","undefined","NaN","Infinity"],_r=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],yr=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],kr=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],wr=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],xr=[].concat(kr,_r,yr);function yc(t){const e=t.regex,n=(J,{after:Pe})=>{const Oe="</"+J[0].slice(1);return J.input.indexOf(Oe,Pe)!==-1},r=ba,a={begin:"<>",end:"</>"},c=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(J,Pe)=>{const Oe=J[0].length+J.index,Le=J.input[Oe];if(Le==="<"||Le===","){Pe.ignoreMatch();return}Le===">"&&(n(J,{after:Oe})||Pe.ignoreMatch());let We;const rt=J.input.substring(Oe);if(We=rt.match(/^\s*=/)){Pe.ignoreMatch();return}if((We=rt.match(/^\s+extends\s+/))&&We.index===0){Pe.ignoreMatch();return}}},u={$pattern:ba,keyword:br,literal:mr,built_in:xr,"variable.language":wr},p="[0-9](_?[0-9])*",f=`\\.(${p})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",y={className:"number",variants:[{begin:`(\\b(${h})((${f})|\\.)?|(${f}))[eE][+-]?(${p})\\b`},{begin:`\\b(${h})\\b((${f})\\b|\\.)?|(${f})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},_={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},z={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"xml"}},A={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"css"}},O={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,_],subLanguage:"graphql"}},B={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,_]},de={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},$=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,z,A,O,B,{match:/\$\d+/},y];_.contains=$.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat($)});const k=[].concat(de,_.contains),E=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:E},G={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},oe={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[..._r,...yr]}},ne={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Re={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},et={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function qe(J){return e.concat("(?!",J.join("|"),")")}const Ne={match:e.concat(/\b/,qe([...kr,"super","import"].map(J=>`${J}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},se={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$e={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},Ce="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",tt={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Ce)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:oe},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),ne,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,z,A,O,B,de,{match:/\$\d+/},y,oe,{scope:"attr",match:r+e.lookahead(":"),relevance:0},tt,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[de,t.REGEXP_MODE,{className:"function",begin:Ce,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:c},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},Re,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},se,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},Ne,et,G,$e,{match:/\$[(.]/}]}}function Is(t){const e=t.regex,n=yc(t),r=ba,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],c={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},i={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[n.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},p=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],f={$pattern:ba,keyword:br.concat(p),literal:mr,built_in:xr.concat(a),"variable.language":wr},h={className:"meta",begin:"@"+r},y=(O,B,te)=>{const de=O.contains.findIndex($=>$.label===B);if(de===-1)throw new Error("can not find mode to replace");O.contains.splice(de,1,te)};Object.assign(n.keywords,f),n.exports.PARAMS_CONTAINS.push(h);const _=n.contains.find(O=>O.scope==="attr"),z=Object.assign({},_,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,_,z]),n.contains=n.contains.concat([h,c,i,z]),y(n,"shebang",t.SHEBANG()),y(n,"use_strict",u);const A=n.contains.find(O=>O.label==="func.def");return A.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function Ps(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},p={className:"meta",begin:/^(>>>|\.\.\.) /},f={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},h={begin:/\{\{/,relevance:0},y={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,p],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,p],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,p,h,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,p,h,f]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,h,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,h,f]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},_="[0-9](_?[0-9])*",z=`(\\b(${_}))?\\.(${_})|\\b(${_})\\.`,A=`\\b|${r.join("|")}`,O={className:"number",relevance:0,variants:[{begin:`(\\b(${_})|(${z}))[eE][+-]?(${_})[jJ]?(?=${A})`},{begin:`(${z})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${A})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${A})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${A})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${A})`},{begin:`\\b(${_})[jJ](?=${A})`}]},B={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},te={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",p,O,y,t.HASH_COMMENT_MODE]}]};return f.contains=[y,O,p],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[p,O,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},y,B,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[te]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[O,te,y]}]}}function kc(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],a={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,a,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function Pa(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},c=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},u={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,a]};a.contains.push(u);const p={match:/\\"/},f={className:"string",begin:/'/,end:/'/},h={match:/\\'/},y={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},_=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],z=t.SHEBANG({binary:`(${_.join("|")})`,relevance:10}),A={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},O=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],B=["true","false"],te={match:/(\/[a-z._-]+)+/},de=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],$=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],k=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],E=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:O,literal:B,built_in:[...de,...$,"set","shopt",...k,...E]},contains:[z,t.SHEBANG(),A,y,c,i,te,u,p,f,h,n]}}function Ls(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},c={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},i={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,a]},u=t.inherit(i,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),_={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},z={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},A={begin:/\{/,end:/\}/,contains:[z],illegal:"\\n",relevance:0},O={begin:"\\[",end:"\\]",contains:[z],illegal:"\\n",relevance:0},B=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},_,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},A,O,c,i],te=[...B];return te.pop(),te.push(u),z.contains=te,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:B}}function Ds(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},c={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=t.inherit(c,{begin:/\(/,end:/\)/}),u=t.inherit(t.APOS_STRING_MODE,{className:"string"}),p=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),f={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[c,p,u,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[c,i,p,u]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[p]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[f],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[f],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:f}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const wc=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),xc=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Ec=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Sc=[...xc,...Ec],Ac=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Tc=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Nc=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Rc=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function $c(t){const e=t.regex,n=wc(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",c=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",u=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Tc.join("|")+")"},{begin:":(:)?("+Nc.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Rc.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:c},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:Ac.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Sc.join("|")+")\\b"}]}}function zc(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},a={begin:/"/,end:/"/,contains:[{match:/""/}]},c=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],u=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],p=["add","asc","collation","desc","final","first","last","view"],f=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],h=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],y=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],_=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],z=h,A=[...f,...p].filter(E=>!h.includes(E)),O={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},B={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},te={match:e.concat(/\b/,e.either(...z),/\s*\(/),relevance:0,keywords:{built_in:z}};function de(E){return e.concat(/\b/,e.either(...E.map(C=>C.replace(/\s+/,"\\s+"))),/\b/)}const $={scope:"keyword",match:de(_),relevance:0};function k(E,{exceptions:C,when:G}={}){const oe=G;return C=C||[],E.map(ne=>ne.match(/\|\d+$/)||C.includes(ne)?ne:oe(ne)?`${ne}|0`:ne)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:k(A,{when:E=>E.length<3}),literal:c,type:u,built_in:y},contains:[{scope:"type",match:de(i)},$,te,O,r,a,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,B]}}function Bs(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},c={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},u=/[A-Za-z][A-Za-z0-9+.-]*/,p={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,u,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},f={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},h={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},y=t.inherit(f,{contains:[]}),_=t.inherit(h,{contains:[]});f.contains.push(_),h.contains.push(y);let z=[n,p];return[f,h,y,_].forEach(te=>{te.contains=te.contains.concat(z)}),z=z.concat(f,h),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:z},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:z}]}]},n,c,f,h,{className:"quote",begin:"^>\\s+",contains:z,end:"$"},a,r,p,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}const bn=Ln([]),yn=Ln(!1);let Er=0;function La(t){const e=`msg_${++Er}`;return bn.update(n=>[...n,{id:e,role:"user",content:t,timestamp:new Date().toISOString()}]),e}function Vn(){const t=`msg_${++Er}`;return bn.update(e=>[...e,{id:t,role:"assistant",content:"",timestamp:new Date().toISOString(),streaming:!0,toolCalls:[]}]),yn.set(!0),t}function Mc(t,e){bn.update(n=>n.map(r=>r.id===t?{...r,content:r.content+e}:r))}function Da(t,e){bn.update(n=>n.map(r=>r.id===t?{...r,content:e,streaming:!1}:r)),yn.set(!1)}function Cc(t,e){bn.update(n=>n.map(r=>r.id===t?{...r,toolCalls:[...r.toolCalls||[],e]}:r))}function js(){bn.set([]),yn.set(!1)}var Oc=w('<div class="empty-state svelte-mwxll1"><div class="empty-icon-circle svelte-mwxll1"><!></div> <span class="empty-title svelte-mwxll1"> </span> <span class="empty-hint svelte-mwxll1"> </span></div>'),Ic=w('<span class="thinking-message svelte-mwxll1"> </span>'),Pc=w('<div class="thinking-indicator svelte-mwxll1"><span class="thinking-spinner svelte-mwxll1"> </span> <!></div>'),Lc=w('<span class="streaming-cursor svelte-mwxll1"></span>'),Dc=w("<!> <!>",1),Bc=w('<div class="tool-arg-line svelte-mwxll1"><span class="tool-arg-key svelte-mwxll1"> </span> <span class="tool-arg-val svelte-mwxll1"> </span></div>'),jc=w('<div class="tool-call-args svelte-mwxll1"></div>'),Uc=w('<div class="tool-call-result svelte-mwxll1"><span class="tool-result-label svelte-mwxll1">result</span> <span class="tool-result-val svelte-mwxll1"> </span></div>'),Hc=w('<div class="tool-call-item svelte-mwxll1"><div class="tool-call-row svelte-mwxll1"><span class="tool-call-index svelte-mwxll1"></span> <span class="tool-call-name svelte-mwxll1"> </span> <!></div> <!> <!></div>'),Fc=w('<div class="tool-calls-body svelte-mwxll1"></div>'),Gc=w('<div class="tool-calls-container svelte-mwxll1"><div class="tool-calls-header svelte-mwxll1"><div class="tool-calls-header-left svelte-mwxll1"><div><!></div> <!> <span class="tool-calls-count svelte-mwxll1"> </span></div> <span class="tool-calls-summary svelte-mwxll1"> </span></div> <!></div>'),Kc=w('<div><div class="message-avatar svelte-mwxll1"><!></div> <div class="message-body svelte-mwxll1"><div class="message-header svelte-mwxll1"><span class="message-role svelte-mwxll1"> </span> <span class="message-time svelte-mwxll1"> </span></div> <div><!></div> <!></div></div>'),qc=w('<p class="plan-summary svelte-mwxll1"> </p>'),Zc=w('<div class="plan-step svelte-mwxll1"><span class="step-number svelte-mwxll1"></span> <span class="step-text svelte-mwxll1"> </span></div>'),Wc=w('<div class="plan-steps svelte-mwxll1"></div>'),Vc=w('<p class="plan-question svelte-mwxll1"> </p>'),Yc=w('<button class="plan-option-btn svelte-mwxll1"><span class="plan-option-key svelte-mwxll1"> </span> <span class="plan-option-text svelte-mwxll1"> </span></button>'),Xc=w('<div class="plan-options svelte-mwxll1"></div>'),Qc=w('<div class="plan-card svelte-mwxll1"><div class="plan-header svelte-mwxll1"><div class="plan-header-left svelte-mwxll1"><div class="plan-icon svelte-mwxll1"><!></div> <span class="plan-title svelte-mwxll1">Plan</span></div> <button class="plan-dismiss svelte-mwxll1" title="Dismiss"><!></button></div> <div class="plan-body svelte-mwxll1"><!> <!> <!></div> <div class="plan-footer svelte-mwxll1"><!> <div class="plan-custom-input svelte-mwxll1"><textarea class="plan-answer-input svelte-mwxll1"></textarea> <button class="plan-send-btn svelte-mwxll1" title="Send"><!></button></div></div></div>'),Jc=w('<button class="retry-btn svelte-mwxll1">Retry</button>'),ed=w('<div class="error-bar svelte-mwxll1"><span class="svelte-mwxll1"> </span> <!></div>'),td=w('<img class="attachment-thumb svelte-mwxll1"/>'),nd=w('<div class="attachment-icon svelte-mwxll1"><!></div>'),ad=w("<button> </button>"),sd=w('<div class="type-dropdown svelte-mwxll1"></div>'),rd=w('<div class="attachment-badge-wrapper svelte-mwxll1"><div><!> <div class="attachment-info svelte-mwxll1"><span class="attachment-name svelte-mwxll1"> </span> <button class="attachment-type-btn svelte-mwxll1"><span class="svelte-mwxll1"> </span> <!></button></div> <button class="attachment-remove svelte-mwxll1" title="Remove file"><!></button></div> <!></div>'),id=w('<div class="attachment-badges svelte-mwxll1"></div>'),ld=w('<div class="attach-dropdown svelte-mwxll1"><button class="attach-option svelte-mwxll1"><!> <span class="svelte-mwxll1">File</span></button> <button class="attach-option svelte-mwxll1"><!> <span class="svelte-mwxll1">Screenshot</span></button></div>'),od=w('<aside><div class="sidebar-header svelte-mwxll1"><div class="header-left svelte-mwxll1"><div class="header-icon-circle svelte-mwxll1"><!></div> <span class="header-name svelte-mwxll1"> </span></div> <button class="collapse-btn svelte-mwxll1" title="Collapse sidebar"><!></button></div> <div class="messages svelte-mwxll1"><!></div> <!> <!> <div class="input-area svelte-mwxll1"><!> <div class="input-row svelte-mwxll1"><div class="attach-container svelte-mwxll1"><button class="action-btn attach-btn svelte-mwxll1" title="Attach"><!></button> <!></div> <input type="file" multiple="" class="file-input-hidden svelte-mwxll1"/> <textarea class="chat-input svelte-mwxll1"></textarea> <div class="input-actions svelte-mwxll1"><button class="action-btn clear-btn svelte-mwxll1" title="Clear chat"><!></button> <button class="action-btn send-btn svelte-mwxll1" title="Send message"><!></button></div></div></div>  <div class="resize-handle svelte-mwxll1"></div></aside>');function cd(t,e){on(e,!0);const n=()=>ct(bn,"$chatMessages",u),r=()=>ct(Ks,"$settingsData",u),a=()=>ct(yn,"$chatStreaming",u),c=()=>ct(kn,"$currentProjectStore",u),i=()=>ct(Gn,"$architectSidebarOpen",u),[u,p]=mn();let f=ve(null);dt.registerLanguage("javascript",Os),dt.registerLanguage("js",Os),dt.registerLanguage("typescript",Is),dt.registerLanguage("ts",Is),dt.registerLanguage("python",Ps),dt.registerLanguage("py",Ps),dt.registerLanguage("json",kc),dt.registerLanguage("bash",Pa),dt.registerLanguage("sh",Pa),dt.registerLanguage("shell",Pa),dt.registerLanguage("yaml",Ls),dt.registerLanguage("yml",Ls),dt.registerLanguage("xml",Ds),dt.registerLanguage("html",Ds),dt.registerLanguage("css",$c),dt.registerLanguage("sql",zc),dt.registerLanguage("markdown",Bs),dt.registerLanguage("md",Bs);const h=new Ke.Renderer;h.code=({text:T,lang:Y})=>{const I=Y&&dt.getLanguage(Y)?Y:"";let H;try{H=I?dt.highlight(T,{language:I}).value:dt.highlightAuto(T).value}catch{H=T.replace(/</g,"&lt;").replace(/>/g,"&gt;")}return`<div class="code-block-wrapper"><div class="code-block-header"><span class="code-lang">${Y||"code"}</span><button class="code-copy-btn" onclick="(function(btn){var code=btn.closest('.code-block-wrapper').querySelector('code').textContent;navigator.clipboard.writeText(code);btn.dataset.copied='true';setTimeout(function(){btn.dataset.copied='';},1500);})(this)" title="Copy code">Copy</button></div><pre><code class="hljs${I?" language-"+I:""}">${H}</code></pre></div>`},Ke.setOptions({renderer:h});const y=[{value:"auto",label:"Auto-detect"},{value:"requirements",label:"Requirements Doc"},{value:"api_spec",label:"API Spec / OpenAPI"},{value:"data_sample",label:"Data Sample"},{value:"diagram",label:"Architecture Diagram"},{value:"config",label:"Config / Settings"},{value:"code",label:"Source Code"},{value:"documentation",label:"Documentation"},{value:"test_cases",label:"Test Cases"},{value:"schema",label:"Schema / Model"}],_={"image/png":"image","image/jpeg":"image","image/gif":"image","image/webp":"image","image/svg+xml":"image","image/bmp":"image","application/pdf":"pdf","application/msword":"document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"document","application/vnd.oasis.opendocument.text":"document","application/rtf":"document","application/vnd.ms-excel":"spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"spreadsheet","application/vnd.oasis.opendocument.spreadsheet":"spreadsheet","text/csv":"spreadsheet","application/vnd.ms-powerpoint":"presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation":"presentation","application/vnd.oasis.opendocument.presentation":"presentation","text/plain":"text","text/markdown":"text","application/json":"text","text/html":"text","text/css":"text","application/javascript":"text","application/x-yaml":"text","text/yaml":"text","application/xml":"text","text/xml":"text"},z={".py":"text",".js":"text",".ts":"text",".jsx":"text",".tsx":"text",".json":"text",".md":"text",".txt":"text",".csv":"spreadsheet",".yaml":"text",".yml":"text",".xml":"text",".html":"text",".css":"text",".sql":"text",".sh":"text",".bash":"text",".r":"text",".rb":"text",".go":"text",".rs":"text",".java":"text",".kt":"text",".swift":"text",".pdf":"pdf",".doc":"document",".docx":"document",".odt":"document",".rtf":"document",".xls":"spreadsheet",".xlsx":"spreadsheet",".ods":"spreadsheet",".ppt":"presentation",".pptx":"presentation",".odp":"presentation",".png":"image",".jpg":"image",".jpeg":"image",".gif":"image",".webp":"image",".svg":"image",".bmp":"image"},A=Object.keys(_).join(",")+",.py,.js,.ts,.jsx,.tsx,.sql,.sh,.r,.rb,.go,.rs,.java,.kt,.swift";function O(T){if(T.type&&_[T.type])return _[T.type];const Y="."+T.name.split(".").pop()?.toLowerCase();return Y&&z[Y]?z[Y]:"other"}let B=ve(On([])),te=ve(void 0),de=ve(!1);async function $(T){const Y=Array.from(T);for(const I of Y){if(I.size>20*1024*1024)continue;const H=O(I),l=await k(I),v={id:`file-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:I.name,type:I.type||"application/octet-stream",size:I.size,category:H,data:l,docType:"auto"};H==="image"&&(v.preview=`data:${I.type};base64,${l}`),m(B,[...s(B),v],!0)}}function k(T){return new Promise((Y,I)=>{const H=new FileReader;H.onload=()=>{const l=H.result,v=l.includes(",")?l.split(",")[1]:l;Y(v)},H.onerror=I,H.readAsDataURL(T)})}function E(T){m(B,s(B).filter(Y=>Y.id!==T),!0)}let C=ve(null);function G(T,Y){m(B,s(B).map(I=>I.id===T?{...I,docType:Y}:I),!0),m(C,null)}function oe(T){return!T||T==="auto"?"Auto-detect":y.find(Y=>Y.value===T)?.label??T}function ne(T){const Y=T.target;Y.files&&Y.files.length>0&&($(Y.files),Y.value="")}function Re(T){const Y=T.clipboardData?.items;if(!Y)return;const I=[];for(const H of Array.from(Y))if(H.kind==="file"){const l=H.getAsFile();l&&I.push(l)}I.length>0&&(T.preventDefault(),$(I))}const et=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"],qe=["Drafting the blueprint...","Consulting the Oracle...","Aligning the nodes...","Designing the inevitable...","Architecting a masterpiece...","Tracing the path of causality...","Reshaping the construct...","Balancing the equation...","Loading the next iteration...","Surveying the pipeline...","Engineering the solution...","Selecting the right components...","Orchestrating the agents...","Running the simulation...","Weaving the connections...","Compiling the grand design...","Evaluating all possible paths...","Constructing the framework...","Visualizing the architecture...","Reticulating splines..."];let Ne=ve(On(et[0])),se=ve(On(qe[0])),$e=null,Ce=null,tt=0,J=0;const Pe=_t(()=>n().some(T=>T.streaming&&!T.content));In(()=>{s(Pe)?(tt=0,J=Math.floor(Math.random()*qe.length),m(se,qe[J],!0),$e=setInterval(()=>{tt=(tt+1)%et.length,m(Ne,et[tt],!0)},80),Ce=setInterval(()=>{J=(J+1)%qe.length,m(se,qe[J],!0)},2500)):($e&&(clearInterval($e),$e=null),Ce&&(clearInterval(Ce),Ce=null))});const Oe=_t(()=>r()?.user_profile?.assistant_name||"The Architect");let Le=On({});function We(T){Le[T]=!Le[T]}function rt(T){const Y={};for(const I of T)Y[I.tool]=(Y[I.tool]||0)+1;return Object.entries(Y).map(([I,H])=>H>1?`${I} x${H}`:I).join(", ")}function at(T){return T.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/\bon\w+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+)/gi,"")}function Xe(T){if(!T)return"";const Y=Ke(T,{async:!1});return at(Y)}let ut=ve(""),pt=ve(void 0),ft=ve(void 0),De=ve(null),M=ve(""),K=ve(""),j=null,q=ve(0),ee=!1;const ue=5;let be=ve(380),Ee=ve(!1),_e=ve(0),we=ve(0);const R=280,Z=.5;function U(T){T.preventDefault(),m(Ee,!0),m(_e,T.clientX,!0),m(we,s(be),!0),document.addEventListener("mousemove",ye),document.addEventListener("mouseup",fe)}function ye(T){if(!s(Ee))return;const Y=Math.floor(window.innerWidth*Z),I=T.clientX-s(_e);m(be,Math.max(R,Math.min(Y,s(we)+I)),!0)}function fe(){m(Ee,!1),document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",fe)}function me(T){Fn.update(Y=>{const I=new Map;for(const l of Y)I.set(l.id,l);for(const l of T.nodes){const v=I.get(l.id);v&&(v.data={...v.data,label:l.label||v.data.label,...l.config},l.position&&(v.position=l.position))}const H=T.nodes.filter(l=>!I.has(l.id)).map(l=>({id:l.id,type:l.type,position:l.position??{x:250,y:200},data:{label:l.label||l.id,...l.config}}));return[...Y,...H]}),qa.update(Y=>{const I=new Set;for(const l of Y)I.add(l.id);const H=T.edges.filter(l=>!I.has(l.id)).map(l=>({id:l.id,source:l.source,target:l.target,sourceHandle:l.source_handle??void 0,targetHandle:l.target_handle??void 0}));return[...Y,...H]}),T.nodes.length===0&&(Fn.set([]),qa.set([])),Mi()}function ze(){const T=window.location.protocol==="https:"?"wss:":"ws:",Y=Ut(kn),I=Y?`?project=${encodeURIComponent(Y.name)}`:"";return`${T}//${window.location.host}/ws/assistant${I}`}function Ie(){if(s(De)&&s(De).readyState===WebSocket.OPEN)return;m(K,""),ee=!1;let T;try{T=new WebSocket(ze())}catch{m(K,"AI Assistant requires a configured LLM provider. Check Settings.");return}T.onopen=()=>{m(K,""),m(q,0)},T.onmessage=Y=>{let I;try{I=JSON.parse(Y.data)}catch{return}if(I.type==="token")s(M)||m(M,Vn(),!0),Mc(s(M),I.content),Tt();else if(I.type==="response_complete"){s(M)&&Da(s(M),I.full_text),m(M,""),Tt();const H=Ut(kn);if(H){const l=Ut(bn);Ht.assistant.saveHistory(H.name,l.map(v=>({role:v.role,content:v.content,timestamp:v.timestamp??new Date().toISOString(),toolCalls:v.toolCalls??[]}))).catch(()=>{})}}else if(I.type==="plan"){s(M)||m(M,Vn(),!0);let H=[],l=[];try{H=JSON.parse(I.steps)}catch{H=[]}try{l=JSON.parse(I.options)}catch{l=[]}m(f,{summary:I.summary||"",steps:H,options:l,question:I.question||"",msgId:s(M)},!0),Tt()}else if(I.type==="tool_call"){if(s(M)||m(M,Vn(),!0),I.tool==="present_plan"){Tt();return}let H=I.args;if(typeof H=="string")try{H=JSON.parse(H)}catch{H={raw:H}}(!H||typeof H!="object"||Array.isArray(H))&&(H={}),Cc(s(M),{tool:I.tool,args:H,result:I.result}),Tt()}else if(I.type==="canvas_sync"){const H=I.canvas;H&&(me(H),$i(H.nodes,H.edges),zi())}else I.type==="error"&&(m(K,I.message,!0),ee=!0,s(M)?Da(s(M),""):yn.set(!1),m(M,""))},T.onclose=()=>{if(s(M)?(Da(s(M),"[Connection lost]"),m(M,"")):yn.set(!1),m(De,null),ee){ee=!1,m(q,ue);return}Ba(q),s(q)<ue?(m(K,`Connecting to assistant... (attempt ${s(q)}/${ue})`),j=setTimeout(Ie,3e3)):m(K,"Could not connect to AI Assistant. Ensure an LLM API key is configured in Settings.")},T.onerror=()=>{},m(De,T,!0)}function Te(){m(q,0),Ie()}function bt(){j&&(clearTimeout(j),j=null),s(De)?.close(),m(De,null)}function Ct(){const T=s(ut).trim();if(!T&&s(B).length===0||a()||!s(De))return;const Y=T||`[${s(B).length} file${s(B).length>1?"s":""} attached]`;La(Y),m(M,Vn(),!0);const I={action:"chat",message:T||"Please analyze the attached files."};s(B).length>0&&(I.attachments=s(B).map(H=>({name:H.name,type:H.type,category:H.category,size:H.size,data:H.data,docType:H.docType}))),m(ut,""),m(B,[],!0);try{s(De).send(JSON.stringify(I))}catch{m(K,"Failed to send message. Connection may be lost."),yn.set(!1),m(M,"");return}Tt()}function dn(T){T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),Ct())}function Ot(){if(js(),s(De)&&s(De).readyState===WebSocket.OPEN)try{s(De).send(JSON.stringify({action:"clear_history"}))}catch{}m(K,"")}function Tt(){requestAnimationFrame(()=>{s(pt)&&(s(pt).scrollTop=s(pt).scrollHeight)})}function Xt(T){return new Date(T).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function It(T){if(!(!s(f)||!s(De))){La(T),m(M,Vn(),!0);try{s(De).send(JSON.stringify({action:"chat",message:T}))}catch{m(K,"Failed to send plan selection."),yn.set(!1),m(M,"")}m(f,null),Tt()}}function _n(){Gn.set(!1)}In(()=>{c()&&s(De)&&(s(De).close(),m(De,null),Ie())}),In(()=>{const T=c();T&&Ht.assistant.getHistory(T.name).then(Y=>{if(Y&&Y.length>0){js();for(const I of Y)I.role==="user"?La(I.content):I.role==="assistant"&&bn.update(H=>[...H,{id:`msg_hist_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,role:"assistant",content:I.content,timestamp:I.timestamp||new Date().toISOString(),streaming:!1,toolCalls:I.toolCalls??[]}])}}).catch(()=>{})}),Ja(()=>{Ie(),s(ft)?.focus()}),Wr(()=>{bt(),$e&&clearInterval($e),Ce&&clearInterval(Ce),document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",fe)});var vt=Ze(),Nt=he(vt);{var Ft=T=>{var Y=od();let I,H;var l=d(Y),v=d(l),N=d(v),ce=d(N);ua(ce,{size:16}),o(N);var He=g(N,2),Ve=d(He,!0);o(He),o(v);var P=g(v,2),L=d(P);ko(L,{size:14}),o(P),o(l);var ae=g(l,2),lt=d(ae);{var st=W=>{var Se=Oc(),Be=d(Se),ke=d(Be);ua(ke,{size:48}),o(Be);var xe=g(Be,2),Ge=d(xe,!0);o(xe);var Qe=g(xe,2),Rt=d(Qe,!0);o(Qe),o(Se),le(()=>{ge(Ge,s(Oe)),ge(Rt,s(Oe)==="The Architect"?"I am The Architect. I designed the canvas upon which your agent pipelines take form. Describe what you wish to construct, and I shall design it.":`Ask ${s(Oe)} to help build your agent pipeline.`)}),b(W,Se)},Qt=W=>{var Se=Ze(),Be=he(Se);gt(Be,1,n,ke=>ke.id,(ke,xe)=>{var Ge=Kc();let Qe;var Rt=d(Ge),nn=d(Rt);{var gn=Ae=>{Kl(Ae,{size:18})},vn=Ae=>{ua(Ae,{size:18})};Q(nn,Ae=>{s(xe).role==="user"?Ae(gn):Ae(vn,!1)})}o(Rt);var Dt=g(Rt,2),hn=d(Dt),Kt=d(hn),Bt=d(Kt,!0);o(Kt);var an=g(Kt,2),Et=d(an,!0);o(an),o(hn);var jt=g(hn,2);let qt;var pe=d(jt);{var sn=Ae=>{var nt=Ze(),ht=he(nt);{var x=ie=>{var X=Pc(),Ye=d(X),mt=d(Ye,!0);o(Ye);var $n=g(Ye,2);Di($n,()=>s(se),rn=>{var zn=Ic(),Sa=d(zn,!0);o(zn),le(()=>ge(Sa,s(se))),b(rn,zn)}),o(X),le(()=>ge(mt,s(Ne))),b(ie,X)},D=ie=>{var X=Dc(),Ye=he(X);Ei(Ye,()=>Xe(s(xe).content));var mt=g(Ye,2);{var $n=rn=>{var zn=Lc();b(rn,zn)};Q(mt,rn=>{s(xe).streaming&&rn($n)})}b(ie,X)};Q(ht,ie=>{s(xe).streaming&&!s(xe).content?ie(x):ie(D,!1)})}b(Ae,nt)},je=Ae=>{var nt=Jn();le(()=>ge(nt,s(xe).content)),b(Ae,nt)};Q(pe,Ae=>{s(xe).role==="assistant"?Ae(sn):Ae(je,!1)})}o(jt);var V=g(jt,2);{var Fe=Ae=>{var nt=Gc(),ht=d(nt),x=d(ht),D=d(x);let ie;var X=d(D);xi(X,{size:12}),o(D);var Ye=g(D,2);Ha(Ye,{size:12});var mt=g(Ye,2),$n=d(mt);o(mt),o(x);var rn=g(x,2),zn=d(rn,!0);o(rn),o(ht);var Sa=g(ht,2);{var Sr=Kn=>{var Aa=Fc();gt(Aa,21,()=>s(xe).toolCalls,At,(Ar,fn,Tr)=>{var Ta=Hc(),Na=d(Ta),vs=d(Na);vs.textContent=Tr+1;var Ra=g(vs,2),Nr=d(Ra,!0);o(Ra);var Rr=g(Ra,2);{var $r=Zt=>{Si(Zt,{size:11,class:"tool-call-ok"})};Q(Rr,Zt=>{s(fn).result&&Zt($r)})}o(Na);var hs=g(Na,2);{var zr=Zt=>{var Mn=jc();gt(Mn,21,()=>Object.entries(s(fn).args),At,(aa,$a)=>{var sa=_t(()=>Vr(s($a),2));let Ir=()=>s(sa)[0],qn=()=>s(sa)[1];var za=Bc(),Ma=d(za),Pr=d(Ma);o(Ma);var fs=g(Ma,2),Lr=d(fs,!0);o(fs),o(za),le(Dr=>{ge(Pr,`${Ir()??""}:`),ge(Lr,Dr)},[()=>typeof qn()=="string"?qn().length>120?qn().slice(0,117)+"...":qn():JSON.stringify(qn())]),b(aa,za)}),o(Mn),b(Zt,Mn)},Mr=_t(()=>s(fn).args&&Object.keys(s(fn).args).length>0);Q(hs,Zt=>{s(Mr)&&Zt(zr)})}var Cr=g(hs,2);{var Or=Zt=>{var Mn=Uc(),aa=g(d(Mn),2),$a=d(aa,!0);o(aa),o(Mn),le(sa=>ge($a,sa),[()=>s(fn).result.length>200?s(fn).result.slice(0,197)+"...":s(fn).result]),b(Zt,Mn)};Q(Cr,Zt=>{s(fn).result&&Zt(Or)})}o(Ta),le(()=>ge(Nr,s(fn).tool)),b(Ar,Ta)}),o(Aa),b(Kn,Aa)};Q(Sa,Kn=>{Le[s(xe).id]&&Kn(Sr)})}o(nt),le(Kn=>{ie=it(D,1,"tool-chevron svelte-mwxll1",null,ie,{expanded:Le[s(xe).id]}),ge($n,`${s(xe).toolCalls.length??""} tool
												call${s(xe).toolCalls.length!==1?"s":""}`),ge(zn,Kn)},[()=>rt(s(xe).toolCalls)]),F("click",ht,()=>We(s(xe).id)),b(Ae,nt)};Q(V,Ae=>{s(xe).toolCalls&&s(xe).toolCalls.length>0&&Ae(Fe)})}o(Dt),o(Ge),le(Ae=>{Qe=it(Ge,1,"message svelte-mwxll1",null,Qe,{user:s(xe).role==="user",assistant:s(xe).role==="assistant"}),ge(Bt,s(xe).role==="user"?"You":s(Oe)),ge(Et,Ae),qt=it(jt,1,"message-content svelte-mwxll1",null,qt,{markdown:s(xe).role==="assistant"})},[()=>Xt(s(xe).timestamp)]),b(ke,Ge)}),b(W,Se)};Q(lt,W=>{n().length===0?W(st):W(Qt,!1)})}o(ae),ga(ae,W=>m(pt,W),()=>s(pt));var Jt=g(ae,2);{var En=W=>{var Se=Qc(),Be=d(Se),ke=d(Be),xe=d(ke),Ge=d(xe);Ha(Ge,{size:11}),o(xe),Je(2),o(ke);var Qe=g(ke,2),Rt=d(Qe);Fa(Rt,{size:12}),o(Qe),o(Be);var nn=g(Be,2),gn=d(nn);{var vn=V=>{var Fe=qc(),Ae=d(Fe,!0);o(Fe),le(()=>ge(Ae,s(f).summary)),b(V,Fe)};Q(gn,V=>{s(f).summary&&V(vn)})}var Dt=g(gn,2);{var hn=V=>{var Fe=Wc();gt(Fe,21,()=>s(f).steps,At,(Ae,nt,ht)=>{var x=Zc(),D=d(x);D.textContent=ht+1;var ie=g(D,2),X=d(ie,!0);o(ie),o(x),le(()=>ge(X,s(nt))),b(Ae,x)}),o(Fe),b(V,Fe)};Q(Dt,V=>{s(f).steps.length>0&&V(hn)})}var Kt=g(Dt,2);{var Bt=V=>{var Fe=Vc(),Ae=d(Fe,!0);o(Fe),le(()=>ge(Ae,s(f).question)),b(V,Fe)};Q(Kt,V=>{s(f).question&&V(Bt)})}o(nn);var an=g(nn,2),Et=d(an);{var jt=V=>{var Fe=Xc();gt(Fe,21,()=>s(f).options,At,(Ae,nt,ht)=>{var x=Yc(),D=d(x),ie=d(D,!0);o(D);var X=g(D,2),Ye=d(X,!0);o(X),o(x),le(mt=>{ge(ie,mt),ge(Ye,s(nt))},[()=>String.fromCharCode(65+ht)]),F("click",x,()=>It(s(nt))),b(Ae,x)}),o(Fe),b(V,Fe)};Q(Et,V=>{s(f).options.length>0&&V(jt)})}var qt=g(Et,2),pe=d(qt);ot(pe,"rows",2);var sn=g(pe,2),je=d(sn);Es(je,{size:12}),o(sn),o(qt),o(an),o(Se),le(()=>ot(pe,"placeholder",s(f).options.length>0?"Or type your own response...":"Type your response...")),F("click",Qe,()=>m(f,null)),F("keydown",pe,V=>{if(V.key==="Enter"&&!V.shiftKey){V.preventDefault();const Fe=V.currentTarget;Fe.value.trim()&&It(Fe.value.trim())}}),F("click",sn,V=>{const Fe=V.currentTarget.previousElementSibling;Fe?.value.trim()&&It(Fe.value.trim())}),b(W,Se)};Q(Jt,W=>{s(f)&&W(En)})}var Sn=g(Jt,2);{var An=W=>{var Se=ed(),Be=d(Se),ke=d(Be,!0);o(Be);var xe=g(Be,2);{var Ge=Qe=>{var Rt=Jc();F("click",Rt,Te),b(Qe,Rt)};Q(xe,Qe=>{s(q)>=ue&&Qe(Ge)})}o(Se),le(()=>ge(ke,s(K))),b(W,Se)};Q(Sn,W=>{s(K)&&W(An)})}var Tn=g(Sn,2),Bn=d(Tn);{var Gt=W=>{var Se=id();gt(Se,21,()=>s(B),Be=>Be.id,(Be,ke)=>{var xe=rd(),Ge=d(xe);let Qe;var Rt=d(Ge);{var nn=je=>{var V=td();le(()=>{ot(V,"src",s(ke).preview),ot(V,"alt",s(ke).name)}),b(je,V)},gn=je=>{var V=nd(),Fe=d(V);{var Ae=X=>{ks(X,{size:14})},nt=X=>{_o(X,{size:14})},ht=X=>{xo(X,{size:14})},x=X=>{ks(X,{size:14})},D=X=>{yo(X,{size:14})},ie=X=>{Ai(X,{size:14})};Q(Fe,X=>{s(ke).category==="pdf"?X(Ae):s(ke).category==="spreadsheet"?X(nt,1):s(ke).category==="presentation"?X(ht,2):s(ke).category==="document"?X(x,3):s(ke).category==="image"?X(D,4):X(ie,!1)})}o(V),b(je,V)};Q(Rt,je=>{s(ke).category==="image"&&s(ke).preview?je(nn):je(gn,!1)})}var vn=g(Rt,2),Dt=d(vn),hn=d(Dt,!0);o(Dt);var Kt=g(Dt,2),Bt=d(Kt),an=d(Bt,!0);o(Bt);var Et=g(Bt,2);Fs(Et,{size:9}),o(Kt),o(vn);var jt=g(vn,2),qt=d(jt);Fa(qt,{size:12}),o(jt),o(Ge);var pe=g(Ge,2);{var sn=je=>{var V=sd();gt(V,21,()=>y,At,(Fe,Ae)=>{var nt=ad();let ht;var x=d(nt,!0);o(nt),le(()=>{ht=it(nt,1,"type-option svelte-mwxll1",null,ht,{selected:s(ke).docType===s(Ae).value}),ge(x,s(Ae).label)}),F("click",nt,()=>G(s(ke).id,s(Ae).value)),b(Fe,nt)}),o(V),b(je,V)};Q(pe,je=>{s(C)===s(ke).id&&je(sn)})}o(xe),le((je,V)=>{Qe=it(Ge,1,"attachment-badge svelte-mwxll1",null,Qe,{"has-preview":s(ke).category==="image"&&s(ke).preview}),ot(Dt,"title",s(ke).name),ge(hn,je),ge(an,V)},[()=>s(ke).name.length>20?s(ke).name.slice(0,17)+"...":s(ke).name,()=>oe(s(ke).docType)]),F("click",Kt,()=>m(C,s(C)===s(ke).id?null:s(ke).id,!0)),F("click",jt,()=>E(s(ke).id)),b(Be,xe)}),o(Se),b(W,Se)};Q(Bn,W=>{s(B).length>0&&W(Gt)})}var Pt=g(Bn,2),en=d(Pt),un=d(en),ka=d(un);Ws(ka,{size:16}),o(un);var wa=g(un,2);{var tn=W=>{var Se=ld(),Be=d(Se),ke=d(Be);wo(ke,{size:14}),Je(2),o(Be);var xe=g(Be,2),Ge=d(xe);mo(Ge,{size:14}),Je(2),o(xe),o(Se),F("click",Be,()=>{s(te)?.click(),m(de,!1)}),F("click",xe,()=>{console.log("Screenshot not yet implemented"),m(de,!1)}),b(W,Se)};Q(wa,W=>{s(de)&&W(tn)})}o(en);var Nn=g(en,2);ga(Nn,W=>m(te,W),()=>s(te));var Lt=g(Nn,2);ma(Lt),ot(Lt,"rows",1),ga(Lt,W=>m(ft,W),()=>s(ft));var na=g(Lt,2),Rn=d(na),xa=d(Rn);Gs(xa,{size:14}),o(Rn);var pn=g(Rn,2),Ea=d(pn);{var S=W=>{as(W,{size:14,class:"spin-icon"})},re=W=>{Es(W,{size:14})};Q(Ea,W=>{a()?W(S):W(re,!1)})}o(pn),o(na),o(Pt),o(Tn);var Me=g(Tn,2);o(Y),le(W=>{I=it(Y,1,"architect-sidebar svelte-mwxll1",null,I,{dragging:s(Ee)}),H=Ys(Y,"",H,{width:`${s(be)??""}px`}),ge(Ve,s(Oe)),un.disabled=a(),ot(Nn,"accept",A),ot(Lt,"placeholder",`Ask ${s(Oe)??""}...`),Lt.disabled=a(),Rn.disabled=n().length===0,pn.disabled=W},[()=>!s(ut).trim()&&s(B).length===0||a()||!s(De)]),F("click",P,_n),F("click",un,()=>m(de,!s(de))),F("change",Nn,ne),F("keydown",Lt,dn),Qa("paste",Lt,Re),$t(Lt,()=>s(ut),W=>m(ut,W)),F("click",Rn,Ot),F("click",pn,Ct),F("mousedown",Me,U),b(T,Y)};Q(Nt,T=>{i()&&T(Ft)})}b(t,vt),cn(),p()}xn(["click","keydown","change","mousedown"]);var dd=w('<main class="app-content home-content svelte-vr1z90"><!></main>'),ud=w('<div class="app-body svelte-vr1z90"><!> <main class="app-content svelte-vr1z90"><!></main></div>'),pd=w('<div class="app-shell svelte-vr1z90"><!> <!> <footer class="app-footer svelte-vr1z90"><span class="svelte-vr1z90">Made with</span> <span class="heart svelte-vr1z90">&#10084;</span> <span class="svelte-vr1z90">by Firefly Software Solutions</span></footer></div> <!> <!> <!> <!> <!>',1);function gd(t,e){on(e,!0);const n=()=>ct(Fi,"$page",r),[r,a]=mn(),c=_t(()=>n().url.pathname==="/"||n().url.pathname==="/index.html");Ja(()=>{Wi();function $(k){k.preventDefault();const E=k.reason instanceof Error?k.reason.message:String(k.reason);St(`Unhandled error: ${E}`,"error"),console.error("[AppShell] Unhandled rejection:",k.reason)}return window.addEventListener("unhandledrejection",$),()=>{Vi(),window.removeEventListener("unhandledrejection",$)}});function i(){const $=document.activeElement;if(!$)return!1;const k=$.tagName.toLowerCase();return!!(k==="input"||k==="textarea"||$.isContentEditable)}function u($){if(s(c))return;const k=$.metaKey||$.ctrlKey;if($.key==="s"&&k){$.preventDefault();const E=Ut(kn);E&&Ht.projects.savePipeline(E.name,"main",wn()).then(()=>St("Pipeline saved","success")).catch(()=>St("Failed to save pipeline","error"));return}if($.key===","&&k){$.preventDefault(),ea.set(!0);return}if($.key==="k"&&k){$.preventDefault(),Za.update(E=>!E);return}if($.key==="Enter"&&k){$.preventDefault(),ns(wn());return}if($.key==="D"&&k&&$.shiftKey){$.preventDefault(),ts(wn());return}if($.key==="/"&&k){$.preventDefault(),Gn.update(E=>!E);return}if($.key==="d"&&k&&!$.shiftKey){if(i())return;$.preventDefault();const E=Ut(ra);if(!E)return;const G=Ut(Fn).find(Re=>Re.id===E);if(!G)return;const oe=`${G.type}-dup-${Date.now()}`,ne=40;Fn.update(Re=>[...Re,{...G,id:oe,position:{x:G.position.x+ne,y:G.position.y+ne},data:{...G.data}}]),ra.set(oe);return}if(($.key==="Delete"||$.key==="Backspace")&&!k&&!$.shiftKey&&!$.altKey){if(i())return;const E=Ut(ra);if(!E)return;$.preventDefault(),Fn.update(C=>C.filter(G=>G.id!==E)),qa.update(C=>C.filter(G=>G.source!==E&&G.target!==E)),ra.set(null);return}if($.key==="?"&&!k&&!$.altKey){if(i())return;$.preventDefault(),Wa.update(E=>!E);return}}var p=pd();Qa("keydown",Yr,u);var f=he(p),h=d(f);ml(h,{get isHomePage(){return s(c)}});var y=g(h,2);{var _=$=>{var k=dd(),E=d(k);Ga(E,()=>e.children),o(k),b($,k)},z=$=>{var k=ud(),E=d(k);cd(E,{});var C=g(E,2),G=d(C);Ga(G,()=>e.children),o(C),o(k),b($,k)};Q(y,$=>{s(c)?$(_):$(z,!1)})}Je(2),o(f);var A=g(f,2);Nl(A,{});var O=g(A,2);Il(O,{});var B=g(O,2);Fl(B,{});var te=g(B,2);vo(te,{});var de=g(te,2);bo(de,{}),b(t,p),cn(),a()}var vd=w('<link rel="icon"/>');function Ad(t,e){on(e,!0),Ja(async()=>{await Ka();try{const n=await Ht.settings.status();(n.first_start||!n.setup_complete)&&pa.set(!0),await Zs()}catch{}}),Bi("12qhfyh",n=>{var r=vd();le(()=>ot(r,"href",ss)),b(n,r)}),gd(t,{children:(n,r)=>{var a=Ze(),c=he(a);Ga(c,()=>e.children),b(n,a)},$$slots:{default:!0}}),cn()}export{Ad as component,Sd as universal};
