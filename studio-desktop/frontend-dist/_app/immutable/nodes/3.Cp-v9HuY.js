import"../chunks/DsnmJJEf.js";import{i as Ls}from"../chunks/D7CioVkw.js";import{aA as Ml,b3 as Pl,bp as Tl,h as Il,c as Al,au as Dl,_ as Hs,Z as Vs,m as Qt,v as Ol,bq as Rl,g as Te,i as de,j as y,br as Ll,bs as so,bt as Fs,p as ze,u as Hl,f as Ce,B as d,C as c,A as P,t as r,a1 as tr,O as k,b8 as dn,z as $,D as h,F as W,M as ye,bu as Bs,l as _e,I as Q,L as _,b7 as ut,P as qs,bv as Vl,bw as qa,K as be,bj as jr,G as _t,bn as On,bx as St,bo as It,by as Fl,J as $t,N as Bl,o as io,a4 as Bn}from"../chunks/hL-aZVJ4.js";import{l as tt,s as We,p as pe,r as _n,i as Y,b as yn,a as Ot,d as Zo,m as Yo,c as at}from"../chunks/B_6VzoXV.js";import{I as nt,s as rt,K as bn,M as lo,N as ia,i as xe,a as De,O as Rn,q as st,e as je,B as Zr,D as co,J as mn,G as Mn,x as an,b as on,n as Ct,u as wt,Q as ql,R as Na,T as Kl,X as Ks,U as Ma,V as Pa,h as jl,z as Wo,c as ot,v as nr,w as js,F as Xo,P as Go,r as Zl,W as Zs,Y as Yl,Z as Wl,L as Xl,_ as Gl,$ as Ul}from"../chunks/BWWgRDE1.js";import{J as Dt,S as uo,B as cr,E as Kt,w as jt,u as Rt,K as Zt,W as Wn,G as dr,j as vo,k as la,l as fo,m as po,g as Ys,D as ca,T as Xn,h as Ws,M as Ql,L as Jl,I as Xs,N as Ka,C as ho,b as Gs,z as $l,O as En,o as go,a as Ue,c as Yr,y as Wr,P as ec,F as Us,R as ja,A as Qs,Z as tc,f as Js,H as nc,s as rc,n as ac,Q as oc,U as sc}from"../chunks/DWKiSLzw.js";import{c as un}from"../chunks/CFyDcTgg.js";import{A as Uo,F as ic}from"../chunks/DaNA2RYx.js";import{b as Za,a as Ta}from"../chunks/yhLnWQwL.js";const lc=[];function $s(t,e=!1,n=!1){return Hr(t,new Map,"",lc,null,n)}function Hr(t,e,n,a,o=null,i=!1){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Ml(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var u=0;u<t.length;u+=1){var v=t[u];u in t&&(l[u]=Hr(v,e,n,a,null,i))}return l}if(Pl(t)===Tl){l={},e.set(t,l),o!==null&&e.set(o,l);for(var p of Object.keys(t))l[p]=Hr(t[p],e,n,a,null,i);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!i)return Hr(t.toJSON(),e,n,a,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function cc(t,e){Il&&Al(Dl(t)),Hs(()=>{var n=e();for(var a in n){var o=n[a];o?t.style.setProperty(a,o):t.style.removeProperty(a)}})}function zt(t,e,n){Vs(()=>{var a=Qt(()=>e(t,n?.())||{});if(n&&a?.update){var o=!1,i={};Hs(()=>{var s=n();Ol(s),o&&Rl(i,s)&&(i=s,a.update(s))}),o=!0}if(a?.destroy)return()=>a.destroy()})}class mo{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var a=this.#e.get(e)||new Set;return a.add(n),this.#e.set(e,a),this.#r().observe(e,this.#n),()=>{var o=this.#e.get(e);o.delete(n),o.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){mo.entries.set(n.target,n);for(var a of this.#e.get(n.target)||[])a(n)}}))}}var dc=new mo({box:"border-box"});function Qo(t,e,n){var a=dc.observe(t,()=>n(t[e]));Vs(()=>(Qt(()=>n(t[e])),a))}function uc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];nt(t,We({name:"arrow-left"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function vc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"}],["path",{d:"m7 16.5-4.74-2.85"}],["path",{d:"m7 16.5 5-3"}],["path",{d:"M7 16.5v5.17"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"}],["path",{d:"m17 16.5-5-3"}],["path",{d:"m17 16.5 4.74-2.85"}],["path",{d:"M17 16.5v5.17"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"}],["path",{d:"M12 8 7.26 5.15"}],["path",{d:"m12 8 4.74-2.85"}],["path",{d:"M12 13.5V8"}]];nt(t,We({name:"boxes"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function fc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z"}],["path",{d:"M17 21v-2"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10"}],["path",{d:"M21 21v-2"}],["path",{d:"M3 5V3"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z"}],["path",{d:"M7 5V3"}]];nt(t,We({name:"cable"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function pc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m18 15-6-6-6 6"}]];nt(t,We({name:"chevron-up"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function hc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];nt(t,We({name:"circle-check-big"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function gc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];nt(t,We({name:"circle-x"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function mc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];nt(t,We({name:"dollar-sign"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Xr(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];nt(t,We({name:"eye"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Jo(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"3"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12"}]];nt(t,We({name:"git-commit-horizontal"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function _c(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"18",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9"}]];nt(t,We({name:"git-compare"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function yc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]];nt(t,We({name:"hash"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function bc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];nt(t,We({name:"history"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function xc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];nt(t,We({name:"lightbulb"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function ei(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M13 5h8"}],["path",{d:"M13 12h8"}],["path",{d:"M13 19h8"}],["path",{d:"m3 17 2 2 4-4"}],["path",{d:"m3 7 2 2 4-4"}]];nt(t,We({name:"list-checks"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function wc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m10 17 5-5-5-5"}],["path",{d:"M15 12H3"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}]];nt(t,We({name:"log-in"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function kc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];nt(t,We({name:"log-out"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Ya(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 22v-5"}],["path",{d:"M15 8V2"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z"}],["path",{d:"M9 8V2"}]];nt(t,We({name:"plug"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function mt(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];nt(t,We({name:"refresh-cw"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Sc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];nt(t,We({name:"rotate-ccw"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function zc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}]];nt(t,We({name:"scan"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Cc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z"}],["path",{d:"M3 20V4"}]];nt(t,We({name:"skip-back"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Ec(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M10 5H3"}],["path",{d:"M12 19H3"}],["path",{d:"M14 3v4"}],["path",{d:"M16 17v4"}],["path",{d:"M21 12h-9"}],["path",{d:"M21 19h-5"}],["path",{d:"M21 5h-7"}],["path",{d:"M8 10v4"}],["path",{d:"M8 12H3"}]];nt(t,We({name:"sliders-horizontal"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Nc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]];nt(t,We({name:"star"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Mc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]];nt(t,We({name:"upload"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}function Pc(t,e){const n=tt(e,["children","$$slots","$$events","$$legacy"]);const a=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2"}]];nt(t,We({name:"workflow"},()=>n,{get iconNode(){return a},children:(o,i)=>{var s=Te(),l=de(s);rt(l,e,"default",{}),y(o,s)},$$slots:{default:!0}}))}var Tc={value:()=>{}};function da(){for(var t=0,e=arguments.length,n={},a;t<e;++t){if(!(a=arguments[t]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new Vr(n)}function Vr(t){this._=t}function Ic(t,e){return t.trim().split(/^|\s+/).map(function(n){var a="",o=n.indexOf(".");if(o>=0&&(a=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}Vr.prototype=da.prototype={constructor:Vr,on:function(t,e){var n=this._,a=Ic(t+"",n),o,i=-1,s=a.length;if(arguments.length<2){for(;++i<s;)if((o=(t=a[i]).type)&&(o=Ac(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=a[i]).type)n[o]=$o(n[o],t.name,e);else if(e==null)for(o in n)n[o]=$o(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vr(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),a=0,o,i;a<o;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],a=0,o=i.length;a<o;++a)i[a].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],o=0,i=a.length;o<i;++o)a[o].value.apply(e,n)}};function Ac(t,e){for(var n=0,a=t.length,o;n<a;++n)if((o=t[n]).name===e)return o.value}function $o(t,e,n){for(var a=0,o=t.length;a<o;++a)if(t[a].name===e){t[a]=Tc,t=t.slice(0,a).concat(t.slice(a+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wa="http://www.w3.org/1999/xhtml";const es={svg:"http://www.w3.org/2000/svg",xhtml:Wa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ua(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),es.hasOwnProperty(e)?{space:es[e],local:t}:t}function Dc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wa&&e.documentElement.namespaceURI===Wa?e.createElement(t):e.createElementNS(n,t)}}function Oc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ti(t){var e=ua(t);return(e.local?Oc:Dc)(e)}function Rc(){}function _o(t){return t==null?Rc:function(){return this.querySelector(t)}}function Lc(t){typeof t!="function"&&(t=_o(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=a[o]=new Array(s),u,v,p=0;p<s;++p)(u=i[p])&&(v=t.call(u,u.__data__,p,i))&&("__data__"in u&&(v.__data__=u.__data__),l[p]=v);return new Tt(a,this._parents)}function Hc(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Vc(){return[]}function ni(t){return t==null?Vc:function(){return this.querySelectorAll(t)}}function Fc(t){return function(){return Hc(t.apply(this,arguments))}}function Bc(t){typeof t=="function"?t=Fc(t):t=ni(t);for(var e=this._groups,n=e.length,a=[],o=[],i=0;i<n;++i)for(var s=e[i],l=s.length,u,v=0;v<l;++v)(u=s[v])&&(a.push(t.call(u,u.__data__,v,s)),o.push(u));return new Tt(a,o)}function ri(t){return function(){return this.matches(t)}}function ai(t){return function(e){return e.matches(t)}}var qc=Array.prototype.find;function Kc(t){return function(){return qc.call(this.children,t)}}function jc(){return this.firstElementChild}function Zc(t){return this.select(t==null?jc:Kc(typeof t=="function"?t:ai(t)))}var Yc=Array.prototype.filter;function Wc(){return Array.from(this.children)}function Xc(t){return function(){return Yc.call(this.children,t)}}function Gc(t){return this.selectAll(t==null?Wc:Xc(typeof t=="function"?t:ai(t)))}function Uc(t){typeof t!="function"&&(t=ri(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=a[o]=[],u,v=0;v<s;++v)(u=i[v])&&t.call(u,u.__data__,v,i)&&l.push(u);return new Tt(a,this._parents)}function oi(t){return new Array(t.length)}function Qc(){return new Tt(this._enter||this._groups.map(oi),this._parents)}function Gr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Gr.prototype={constructor:Gr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Jc(t){return function(){return t}}function $c(t,e,n,a,o,i){for(var s=0,l,u=e.length,v=i.length;s<v;++s)(l=e[s])?(l.__data__=i[s],a[s]=l):n[s]=new Gr(t,i[s]);for(;s<u;++s)(l=e[s])&&(o[s]=l)}function ed(t,e,n,a,o,i,s){var l,u,v=new Map,p=e.length,m=i.length,f=new Array(p),w;for(l=0;l<p;++l)(u=e[l])&&(f[l]=w=s.call(u,u.__data__,l,e)+"",v.has(w)?o[l]=u:v.set(w,u));for(l=0;l<m;++l)w=s.call(t,i[l],l,i)+"",(u=v.get(w))?(a[l]=u,u.__data__=i[l],v.delete(w)):n[l]=new Gr(t,i[l]);for(l=0;l<p;++l)(u=e[l])&&v.get(f[l])===u&&(o[l]=u)}function td(t){return t.__data__}function nd(t,e){if(!arguments.length)return Array.from(this,td);var n=e?ed:$c,a=this._parents,o=this._groups;typeof t!="function"&&(t=Jc(t));for(var i=o.length,s=new Array(i),l=new Array(i),u=new Array(i),v=0;v<i;++v){var p=a[v],m=o[v],f=m.length,w=rd(t.call(p,p&&p.__data__,v,a)),N=w.length,E=l[v]=new Array(N),I=s[v]=new Array(N),H=u[v]=new Array(f);n(p,m,E,I,H,w,e);for(var O=0,F=0,M,R;O<N;++O)if(M=E[O]){for(O>=F&&(F=O+1);!(R=I[F])&&++F<N;);M._next=R||null}}return s=new Tt(s,a),s._enter=l,s._exit=u,s}function rd(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ad(){return new Tt(this._exit||this._groups.map(oi),this._parents)}function od(t,e,n){var a=this.enter(),o=this,i=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?i.remove():n(i),a&&o?a.merge(o).order():o}function sd(t){for(var e=t.selection?t.selection():t,n=this._groups,a=e._groups,o=n.length,i=a.length,s=Math.min(o,i),l=new Array(o),u=0;u<s;++u)for(var v=n[u],p=a[u],m=v.length,f=l[u]=new Array(m),w,N=0;N<m;++N)(w=v[N]||p[N])&&(f[N]=w);for(;u<o;++u)l[u]=n[u];return new Tt(l,this._parents)}function id(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var a=t[e],o=a.length-1,i=a[o],s;--o>=0;)(s=a[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ld(t){t||(t=cd);function e(m,f){return m&&f?t(m.__data__,f.__data__):!m-!f}for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i){for(var s=n[i],l=s.length,u=o[i]=new Array(l),v,p=0;p<l;++p)(v=s[p])&&(u[p]=v);u.sort(e)}return new Tt(o,this._parents).order()}function cd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dd(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ud(){return Array.from(this)}function vd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],o=0,i=a.length;o<i;++o){var s=a[o];if(s)return s}return null}function fd(){let t=0;for(const e of this)++t;return t}function pd(){return!this.node()}function hd(t){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var o=e[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&t.call(l,l.__data__,i,o);return this}function gd(t){return function(){this.removeAttribute(t)}}function md(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _d(t,e){return function(){this.setAttribute(t,e)}}function yd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bd(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function xd(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function wd(t,e){var n=ua(t);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((e==null?n.local?md:gd:typeof e=="function"?n.local?xd:bd:n.local?yd:_d)(n,e))}function si(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kd(t){return function(){this.style.removeProperty(t)}}function Sd(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zd(t,e,n){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function Cd(t,e,n){return arguments.length>1?this.each((e==null?kd:typeof e=="function"?zd:Sd)(t,e,n??"")):Gn(this.node(),t)}function Gn(t,e){return t.style.getPropertyValue(e)||si(t).getComputedStyle(t,null).getPropertyValue(e)}function Ed(t){return function(){delete this[t]}}function Nd(t,e){return function(){this[t]=e}}function Md(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Pd(t,e){return arguments.length>1?this.each((e==null?Ed:typeof e=="function"?Md:Nd)(t,e)):this.node()[t]}function ii(t){return t.trim().split(/^|\s+/)}function yo(t){return t.classList||new li(t)}function li(t){this._node=t,this._names=ii(t.getAttribute("class")||"")}li.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ci(t,e){for(var n=yo(t),a=-1,o=e.length;++a<o;)n.add(e[a])}function di(t,e){for(var n=yo(t),a=-1,o=e.length;++a<o;)n.remove(e[a])}function Td(t){return function(){ci(this,t)}}function Id(t){return function(){di(this,t)}}function Ad(t,e){return function(){(e.apply(this,arguments)?ci:di)(this,t)}}function Dd(t,e){var n=ii(t+"");if(arguments.length<2){for(var a=yo(this.node()),o=-1,i=n.length;++o<i;)if(!a.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?Ad:e?Td:Id)(n,e))}function Od(){this.textContent=""}function Rd(t){return function(){this.textContent=t}}function Ld(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Hd(t){return arguments.length?this.each(t==null?Od:(typeof t=="function"?Ld:Rd)(t)):this.node().textContent}function Vd(){this.innerHTML=""}function Fd(t){return function(){this.innerHTML=t}}function Bd(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function qd(t){return arguments.length?this.each(t==null?Vd:(typeof t=="function"?Bd:Fd)(t)):this.node().innerHTML}function Kd(){this.nextSibling&&this.parentNode.appendChild(this)}function jd(){return this.each(Kd)}function Zd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yd(){return this.each(Zd)}function Wd(t){var e=typeof t=="function"?t:ti(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Xd(){return null}function Gd(t,e){var n=typeof t=="function"?t:ti(t),a=e==null?Xd:typeof e=="function"?e:_o(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function Ud(){var t=this.parentNode;t&&t.removeChild(this)}function Qd(){return this.each(Ud)}function Jd(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $d(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eu(t){return this.select(t?$d:Jd)}function tu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nu(t){return function(e){t.call(this,e,this.__data__)}}function ru(t){return t.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");return a>=0&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function au(t){return function(){var e=this.__on;if(e){for(var n=0,a=-1,o=e.length,i;n<o;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++a]=i;++a?e.length=a:delete this.__on}}}function ou(t,e,n){return function(){var a=this.__on,o,i=nu(e);if(a){for(var s=0,l=a.length;s<l;++s)if((o=a[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=e;return}}this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},a?a.push(o):this.__on=[o]}}function su(t,e,n){var a=ru(t+""),o,i=a.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,v=l.length,p;u<v;++u)for(o=0,p=l[u];o<i;++o)if((s=a[o]).type===p.type&&s.name===p.name)return p.value}return}for(l=e?ou:au,o=0;o<i;++o)this.each(l(a[o],e,n));return this}function ui(t,e,n){var a=si(t),o=a.CustomEvent;typeof o=="function"?o=new o(e,n):(o=a.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function iu(t,e){return function(){return ui(this,t,e)}}function lu(t,e){return function(){return ui(this,t,e.apply(this,arguments))}}function cu(t,e){return this.each((typeof e=="function"?lu:iu)(t,e))}function*du(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],o=0,i=a.length,s;o<i;++o)(s=a[o])&&(yield s)}var vi=[null];function Tt(t,e){this._groups=t,this._parents=e}function _r(){return new Tt([[document.documentElement]],vi)}function uu(){return this}Tt.prototype=_r.prototype={constructor:Tt,select:Lc,selectAll:Bc,selectChild:Zc,selectChildren:Gc,filter:Uc,data:nd,enter:Qc,exit:ad,join:od,merge:sd,selection:uu,order:id,sort:ld,call:dd,nodes:ud,node:vd,size:fd,empty:pd,each:hd,attr:wd,style:Cd,property:Pd,classed:Dd,text:Hd,html:qd,raise:jd,lower:Yd,append:Wd,insert:Gd,remove:Qd,clone:eu,datum:tu,on:su,dispatch:cu,[Symbol.iterator]:du};function At(t){return typeof t=="string"?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],vi)}function vu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ft(t,e){if(t=vu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const fu={passive:!1},ur={capture:!0,passive:!1};function Ia(t){t.stopImmediatePropagation()}function jn(t){t.preventDefault(),t.stopImmediatePropagation()}function fi(t){var e=t.document.documentElement,n=At(t).on("dragstart.drag",jn,ur);"onselectstart"in e?n.on("selectstart.drag",jn,ur):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function pi(t,e){var n=t.document.documentElement,a=At(t).on("dragstart.drag",null);e&&(a.on("click.drag",jn,ur),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Tr=t=>()=>t;function Xa(t,{sourceEvent:e,subject:n,target:a,identifier:o,active:i,x:s,y:l,dx:u,dy:v,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:p}})}Xa.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function pu(t){return!t.ctrlKey&&!t.button}function hu(){return this.parentNode}function gu(t,e){return e??{x:t.x,y:t.y}}function mu(){return navigator.maxTouchPoints||"ontouchstart"in this}function _u(){var t=pu,e=hu,n=gu,a=mu,o={},i=da("start","drag","end"),s=0,l,u,v,p,m=0;function f(M){M.on("mousedown.drag",w).filter(a).on("touchstart.drag",I).on("touchmove.drag",H,fu).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(M,R){if(!(p||!t.call(this,M,R))){var b=F(this,e.call(this,M,R),M,R,"mouse");b&&(At(M.view).on("mousemove.drag",N,ur).on("mouseup.drag",E,ur),fi(M.view),Ia(M),v=!1,l=M.clientX,u=M.clientY,b("start",M))}}function N(M){if(jn(M),!v){var R=M.clientX-l,b=M.clientY-u;v=R*R+b*b>m}o.mouse("drag",M)}function E(M){At(M.view).on("mousemove.drag mouseup.drag",null),pi(M.view,v),jn(M),o.mouse("end",M)}function I(M,R){if(t.call(this,M,R)){var b=M.changedTouches,A=e.call(this,M,R),B=b.length,K,Z;for(K=0;K<B;++K)(Z=F(this,A,M,R,b[K].identifier,b[K]))&&(Ia(M),Z("start",M,b[K]))}}function H(M){var R=M.changedTouches,b=R.length,A,B;for(A=0;A<b;++A)(B=o[R[A].identifier])&&(jn(M),B("drag",M,R[A]))}function O(M){var R=M.changedTouches,b=R.length,A,B;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),A=0;A<b;++A)(B=o[R[A].identifier])&&(Ia(M),B("end",M,R[A]))}function F(M,R,b,A,B,K){var Z=i.copy(),x=Ft(K||b,R),S,z,g;if((g=n.call(M,new Xa("beforestart",{sourceEvent:b,target:f,identifier:B,active:s,x:x[0],y:x[1],dx:0,dy:0,dispatch:Z}),A))!=null)return S=g.x-x[0]||0,z=g.y-x[1]||0,function C(T,D,V){var L=x,q;switch(T){case"start":o[B]=C,q=s++;break;case"end":delete o[B],--s;case"drag":x=Ft(V||D,R),q=s;break}Z.call(T,M,new Xa(T,{sourceEvent:D,subject:g,target:f,identifier:B,active:q,x:x[0]+S,y:x[1]+z,dx:x[0]-L[0],dy:x[1]-L[1],dispatch:Z}),A)}}return f.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Tr(!!M),f):t},f.container=function(M){return arguments.length?(e=typeof M=="function"?M:Tr(M),f):e},f.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Tr(M),f):n},f.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Tr(!!M),f):a},f.on=function(){var M=i.on.apply(i,arguments);return M===i?f:M},f.clickDistance=function(M){return arguments.length?(m=(M=+M)*M,f):Math.sqrt(m)},f}function bo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function hi(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function yr(){}var vr=.7,Ur=1/vr,Zn="\\s*([+-]?\\d+)\\s*",fr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,bu=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),xu=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),wu=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${fr}\\)$`),ku=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${fr}\\)$`),Su=new RegExp(`^hsl\\(${fr},${Jt},${Jt}\\)$`),zu=new RegExp(`^hsla\\(${fr},${Jt},${Jt},${fr}\\)$`),ts={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bo(yr,Tn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ns,formatHex:ns,formatHex8:Cu,formatHsl:Eu,formatRgb:rs,toString:rs});function ns(){return this.rgb().formatHex()}function Cu(){return this.rgb().formatHex8()}function Eu(){return gi(this).formatHsl()}function rs(){return this.rgb().formatRgb()}function Tn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?as(e):n===3?new Et(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ir(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ir(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bu.exec(t))?new Et(e[1],e[2],e[3],1):(e=xu.exec(t))?new Et(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wu.exec(t))?Ir(e[1],e[2],e[3],e[4]):(e=ku.exec(t))?Ir(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Su.exec(t))?is(e[1],e[2]/100,e[3]/100,1):(e=zu.exec(t))?is(e[1],e[2]/100,e[3]/100,e[4]):ts.hasOwnProperty(t)?as(ts[t]):t==="transparent"?new Et(NaN,NaN,NaN,0):null}function as(t){return new Et(t>>16&255,t>>8&255,t&255,1)}function Ir(t,e,n,a){return a<=0&&(t=e=n=NaN),new Et(t,e,n,a)}function Nu(t){return t instanceof yr||(t=Tn(t)),t?(t=t.rgb(),new Et(t.r,t.g,t.b,t.opacity)):new Et}function Ga(t,e,n,a){return arguments.length===1?Nu(t):new Et(t,e,n,a??1)}function Et(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}bo(Et,Ga,hi(yr,{brighter(t){return t=t==null?Ur:Math.pow(Ur,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Et(Pn(this.r),Pn(this.g),Pn(this.b),Qr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:os,formatHex:os,formatHex8:Mu,formatRgb:ss,toString:ss}));function os(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}`}function Mu(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}${Nn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ss(){const t=Qr(this.opacity);return`${t===1?"rgb(":"rgba("}${Pn(this.r)}, ${Pn(this.g)}, ${Pn(this.b)}${t===1?")":`, ${t})`}`}function Qr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nn(t){return t=Pn(t),(t<16?"0":"")+t.toString(16)}function is(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Bt(t,e,n,a)}function gi(t){if(t instanceof Bt)return new Bt(t.h,t.s,t.l,t.opacity);if(t instanceof yr||(t=Tn(t)),!t)return new Bt;if(t instanceof Bt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,o=Math.min(e,n,a),i=Math.max(e,n,a),s=NaN,l=i-o,u=(i+o)/2;return l?(e===i?s=(n-a)/l+(n<a)*6:n===i?s=(a-e)/l+2:s=(e-n)/l+4,l/=u<.5?i+o:2-i-o,s*=60):l=u>0&&u<1?0:s,new Bt(s,l,u,t.opacity)}function Pu(t,e,n,a){return arguments.length===1?gi(t):new Bt(t,e,n,a??1)}function Bt(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}bo(Bt,Pu,hi(yr,{brighter(t){return t=t==null?Ur:Math.pow(Ur,t),new Bt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new Bt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,o=2*n-a;return new Et(Aa(t>=240?t-240:t+120,o,a),Aa(t,o,a),Aa(t<120?t+240:t-120,o,a),this.opacity)},clamp(){return new Bt(ls(this.h),Ar(this.s),Ar(this.l),Qr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qr(this.opacity);return`${t===1?"hsl(":"hsla("}${ls(this.h)}, ${Ar(this.s)*100}%, ${Ar(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ls(t){return t=(t||0)%360,t<0?t+360:t}function Ar(t){return Math.max(0,Math.min(1,t||0))}function Aa(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xo=t=>()=>t;function Tu(t,e){return function(n){return t+n*e}}function Iu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function Au(t){return(t=+t)==1?mi:function(e,n){return n-e?Iu(e,n,t):xo(isNaN(e)?n:e)}}function mi(t,e){var n=e-t;return n?Tu(t,n):xo(isNaN(t)?e:t)}const Jr=(function t(e){var n=Au(e);function a(o,i){var s=n((o=Ga(o)).r,(i=Ga(i)).r),l=n(o.g,i.g),u=n(o.b,i.b),v=mi(o.opacity,i.opacity);return function(p){return o.r=s(p),o.g=l(p),o.b=u(p),o.opacity=v(p),o+""}}return a.gamma=t,a})(1);function Du(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),o;return function(i){for(o=0;o<n;++o)a[o]=t[o]*(1-i)+e[o]*i;return a}}function Ou(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ru(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,o=new Array(a),i=new Array(n),s;for(s=0;s<a;++s)o[s]=lr(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(l){for(s=0;s<a;++s)i[s]=o[s](l);return i}}function Lu(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Hu(t,e){var n={},a={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=lr(t[o],e[o]):a[o]=e[o];return function(i){for(o in n)a[o]=n[o](i);return a}}var Ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Da=new RegExp(Ua.source,"g");function Vu(t){return function(){return t}}function Fu(t){return function(e){return t(e)+""}}function _i(t,e){var n=Ua.lastIndex=Da.lastIndex=0,a,o,i,s=-1,l=[],u=[];for(t=t+"",e=e+"";(a=Ua.exec(t))&&(o=Da.exec(e));)(i=o.index)>n&&(i=e.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(a=a[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Ut(a,o)})),n=Da.lastIndex;return n<e.length&&(i=e.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?Fu(u[0].x):Vu(e):(e=u.length,function(v){for(var p=0,m;p<e;++p)l[(m=u[p]).i]=m.x(v);return l.join("")})}function lr(t,e){var n=typeof e,a;return e==null||n==="boolean"?xo(e):(n==="number"?Ut:n==="string"?(a=Tn(e))?(e=a,Jr):_i:e instanceof Tn?Jr:e instanceof Date?Lu:Ou(e)?Du:Array.isArray(e)?Ru:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hu:Ut)(t,e)}var cs=180/Math.PI,Qa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yi(t,e,n,a,o,i){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*a)&&(n-=t*u,a-=e*u),(l=Math.sqrt(n*n+a*a))&&(n/=l,a/=l,u/=l),t*a<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*cs,skewX:Math.atan(u)*cs,scaleX:s,scaleY:l}}var Dr;function Bu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Qa:yi(e.a,e.b,e.c,e.d,e.e,e.f)}function qu(t){return t==null||(Dr||(Dr=document.createElementNS("http://www.w3.org/2000/svg","g")),Dr.setAttribute("transform",t),!(t=Dr.transform.baseVal.consolidate()))?Qa:(t=t.matrix,yi(t.a,t.b,t.c,t.d,t.e,t.f))}function bi(t,e,n,a){function o(v){return v.length?v.pop()+" ":""}function i(v,p,m,f,w,N){if(v!==m||p!==f){var E=w.push("translate(",null,e,null,n);N.push({i:E-4,x:Ut(v,m)},{i:E-2,x:Ut(p,f)})}else(m||f)&&w.push("translate("+m+e+f+n)}function s(v,p,m,f){v!==p?(v-p>180?p+=360:p-v>180&&(v+=360),f.push({i:m.push(o(m)+"rotate(",null,a)-2,x:Ut(v,p)})):p&&m.push(o(m)+"rotate("+p+a)}function l(v,p,m,f){v!==p?f.push({i:m.push(o(m)+"skewX(",null,a)-2,x:Ut(v,p)}):p&&m.push(o(m)+"skewX("+p+a)}function u(v,p,m,f,w,N){if(v!==m||p!==f){var E=w.push(o(w)+"scale(",null,",",null,")");N.push({i:E-4,x:Ut(v,m)},{i:E-2,x:Ut(p,f)})}else(m!==1||f!==1)&&w.push(o(w)+"scale("+m+","+f+")")}return function(v,p){var m=[],f=[];return v=t(v),p=t(p),i(v.translateX,v.translateY,p.translateX,p.translateY,m,f),s(v.rotate,p.rotate,m,f),l(v.skewX,p.skewX,m,f),u(v.scaleX,v.scaleY,p.scaleX,p.scaleY,m,f),v=p=null,function(w){for(var N=-1,E=f.length,I;++N<E;)m[(I=f[N]).i]=I.x(w);return m.join("")}}}var Ku=bi(Bu,"px, ","px)","deg)"),ju=bi(qu,", ",")",")"),Zu=1e-12;function ds(t){return((t=Math.exp(t))+1/t)/2}function Yu(t){return((t=Math.exp(t))-1/t)/2}function Wu(t){return((t=Math.exp(2*t))-1)/(t+1)}const Fr=(function t(e,n,a){function o(i,s){var l=i[0],u=i[1],v=i[2],p=s[0],m=s[1],f=s[2],w=p-l,N=m-u,E=w*w+N*N,I,H;if(E<Zu)H=Math.log(f/v)/e,I=function(A){return[l+A*w,u+A*N,v*Math.exp(e*A*H)]};else{var O=Math.sqrt(E),F=(f*f-v*v+a*E)/(2*v*n*O),M=(f*f-v*v-a*E)/(2*f*n*O),R=Math.log(Math.sqrt(F*F+1)-F),b=Math.log(Math.sqrt(M*M+1)-M);H=(b-R)/e,I=function(A){var B=A*H,K=ds(R),Z=v/(n*O)*(K*Wu(e*B+R)-Yu(R));return[l+Z*w,u+Z*N,v*K/ds(e*B+R)]}}return I.duration=H*1e3*e/Math.SQRT2,I}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return t(s,l,u)},o})(Math.SQRT2,2,4);var Un=0,sr=0,ar=0,xi=1e3,$r,ir,ea=0,In=0,va=0,pr=typeof performance=="object"&&performance.now?performance:Date,wi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wo(){return In||(wi(Xu),In=pr.now()+va)}function Xu(){In=0}function ta(){this._call=this._time=this._next=null}ta.prototype=ki.prototype={constructor:ta,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?wo():+n)+(e==null?0:+e),!this._next&&ir!==this&&(ir?ir._next=this:$r=this,ir=this),this._call=t,this._time=n,Ja()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ja())}};function ki(t,e,n){var a=new ta;return a.restart(t,e,n),a}function Gu(){wo(),++Un;for(var t=$r,e;t;)(e=In-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Un}function us(){In=(ea=pr.now())+va,Un=sr=0;try{Gu()}finally{Un=0,Qu(),In=0}}function Uu(){var t=pr.now(),e=t-ea;e>xi&&(va-=e,ea=t)}function Qu(){for(var t,e=$r,n,a=1/0;e;)e._call?(a>e._time&&(a=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$r=n);ir=t,Ja(a)}function Ja(t){if(!Un){sr&&(sr=clearTimeout(sr));var e=t-In;e>24?(t<1/0&&(sr=setTimeout(us,t-pr.now()-va)),ar&&(ar=clearInterval(ar))):(ar||(ea=pr.now(),ar=setInterval(Uu,xi)),Un=1,wi(us))}}function vs(t,e,n){var a=new ta;return e=e==null?0:+e,a.restart(o=>{a.stop(),t(o+e)},e,n),a}var Ju=da("start","end","cancel","interrupt"),$u=[],Si=0,fs=1,$a=2,Br=3,ps=4,eo=5,qr=6;function fa(t,e,n,a,o,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;ev(t,n,{name:e,index:a,group:o,on:Ju,tween:$u,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Si})}function ko(t,e){var n=Yt(t,e);if(n.state>Si)throw new Error("too late; already scheduled");return n}function tn(t,e){var n=Yt(t,e);if(n.state>Br)throw new Error("too late; already running");return n}function Yt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ev(t,e,n){var a=t.__transition,o;a[e]=n,n.timer=ki(i,0,n.time);function i(v){n.state=fs,n.timer.restart(s,n.delay,n.time),n.delay<=v&&s(v-n.delay)}function s(v){var p,m,f,w;if(n.state!==fs)return u();for(p in a)if(w=a[p],w.name===n.name){if(w.state===Br)return vs(s);w.state===ps?(w.state=qr,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete a[p]):+p<e&&(w.state=qr,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete a[p])}if(vs(function(){n.state===Br&&(n.state=ps,n.timer.restart(l,n.delay,n.time),l(v))}),n.state=$a,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$a){for(n.state=Br,o=new Array(f=n.tween.length),p=0,m=-1;p<f;++p)(w=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(o[++m]=w);o.length=m+1}}function l(v){for(var p=v<n.duration?n.ease.call(null,v/n.duration):(n.timer.restart(u),n.state=eo,1),m=-1,f=o.length;++m<f;)o[m].call(t,p);n.state===eo&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=qr,n.timer.stop(),delete a[e];for(var v in a)return;delete t.__transition}}function Kr(t,e){var n=t.__transition,a,o,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((a=n[s]).name!==e){i=!1;continue}o=a.state>$a&&a.state<eo,a.state=qr,a.timer.stop(),a.on.call(o?"interrupt":"cancel",t,t.__data__,a.index,a.group),delete n[s]}i&&delete t.__transition}}function tv(t){return this.each(function(){Kr(this,t)})}function nv(t,e){var n,a;return function(){var o=tn(this,t),i=o.tween;if(i!==n){a=n=i;for(var s=0,l=a.length;s<l;++s)if(a[s].name===e){a=a.slice(),a.splice(s,1);break}}o.tween=a}}function rv(t,e,n){var a,o;if(typeof n!="function")throw new Error;return function(){var i=tn(this,t),s=i.tween;if(s!==a){o=(a=s).slice();for(var l={name:e,value:n},u=0,v=o.length;u<v;++u)if(o[u].name===e){o[u]=l;break}u===v&&o.push(l)}i.tween=o}}function av(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a=Yt(this.node(),n).tween,o=0,i=a.length,s;o<i;++o)if((s=a[o]).name===t)return s.value;return null}return this.each((e==null?nv:rv)(n,t,e))}function So(t,e,n){var a=t._id;return t.each(function(){var o=tn(this,a);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return Yt(o,a).value[e]}}function zi(t,e){var n;return(typeof e=="number"?Ut:e instanceof Tn?Jr:(n=Tn(e))?(e=n,Jr):_i)(t,e)}function ov(t){return function(){this.removeAttribute(t)}}function sv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iv(t,e,n){var a,o=n+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===a?i:i=e(a=s,n)}}function lv(t,e,n){var a,o=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===a?i:i=e(a=s,n)}}function cv(t,e,n){var a,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===a&&u===o?i:(o=u,i=e(a=s,l)))}}function dv(t,e,n){var a,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===a&&u===o?i:(o=u,i=e(a=s,l)))}}function uv(t,e){var n=ua(t),a=n==="transform"?ju:zi;return this.attrTween(t,typeof e=="function"?(n.local?dv:cv)(n,a,So(this,"attr."+t,e)):e==null?(n.local?sv:ov)(n):(n.local?lv:iv)(n,a,e))}function vv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function pv(t,e){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&fv(t,i)),n}return o._value=e,o}function hv(t,e){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&vv(t,i)),n}return o._value=e,o}function gv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var a=ua(t);return this.tween(n,(a.local?pv:hv)(a,e))}function mv(t,e){return function(){ko(this,t).delay=+e.apply(this,arguments)}}function _v(t,e){return e=+e,function(){ko(this,t).delay=e}}function yv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mv:_v)(e,t)):Yt(this.node(),e).delay}function bv(t,e){return function(){tn(this,t).duration=+e.apply(this,arguments)}}function xv(t,e){return e=+e,function(){tn(this,t).duration=e}}function wv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bv:xv)(e,t)):Yt(this.node(),e).duration}function kv(t,e){if(typeof e!="function")throw new Error;return function(){tn(this,t).ease=e}}function Sv(t){var e=this._id;return arguments.length?this.each(kv(e,t)):Yt(this.node(),e).ease}function zv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;tn(this,t).ease=n}}function Cv(t){if(typeof t!="function")throw new Error;return this.each(zv(this._id,t))}function Ev(t){typeof t!="function"&&(t=ri(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=a[o]=[],u,v=0;v<s;++v)(u=i[v])&&t.call(u,u.__data__,v,i)&&l.push(u);return new vn(a,this._parents,this._name,this._id)}function Nv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,a=e.length,o=n.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=e[l],v=n[l],p=u.length,m=s[l]=new Array(p),f,w=0;w<p;++w)(f=u[w]||v[w])&&(m[w]=f);for(;l<a;++l)s[l]=e[l];return new vn(s,this._parents,this._name,this._id)}function Mv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Pv(t,e,n){var a,o,i=Mv(e)?ko:tn;return function(){var s=i(this,t),l=s.on;l!==a&&(o=(a=l).copy()).on(e,n),s.on=o}}function Tv(t,e){var n=this._id;return arguments.length<2?Yt(this.node(),n).on.on(t):this.each(Pv(n,t,e))}function Iv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Av(){return this.on("end.remove",Iv(this._id))}function Dv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_o(t));for(var a=this._groups,o=a.length,i=new Array(o),s=0;s<o;++s)for(var l=a[s],u=l.length,v=i[s]=new Array(u),p,m,f=0;f<u;++f)(p=l[f])&&(m=t.call(p,p.__data__,f,l))&&("__data__"in p&&(m.__data__=p.__data__),v[f]=m,fa(v[f],e,n,f,v,Yt(p,n)));return new vn(i,this._parents,e,n)}function Ov(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ni(t));for(var a=this._groups,o=a.length,i=[],s=[],l=0;l<o;++l)for(var u=a[l],v=u.length,p,m=0;m<v;++m)if(p=u[m]){for(var f=t.call(p,p.__data__,m,u),w,N=Yt(p,n),E=0,I=f.length;E<I;++E)(w=f[E])&&fa(w,e,n,E,f,N);i.push(f),s.push(p)}return new vn(i,s,e,n)}var Rv=_r.prototype.constructor;function Lv(){return new Rv(this._groups,this._parents)}function Hv(t,e){var n,a,o;return function(){var i=Gn(this,t),s=(this.style.removeProperty(t),Gn(this,t));return i===s?null:i===n&&s===a?o:o=e(n=i,a=s)}}function Ci(t){return function(){this.style.removeProperty(t)}}function Vv(t,e,n){var a,o=n+"",i;return function(){var s=Gn(this,t);return s===o?null:s===a?i:i=e(a=s,n)}}function Fv(t,e,n){var a,o,i;return function(){var s=Gn(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Gn(this,t))),s===u?null:s===a&&u===o?i:(o=u,i=e(a=s,l))}}function Bv(t,e){var n,a,o,i="style."+e,s="end."+i,l;return function(){var u=tn(this,t),v=u.on,p=u.value[i]==null?l||(l=Ci(e)):void 0;(v!==n||o!==p)&&(a=(n=v).copy()).on(s,o=p),u.on=a}}function qv(t,e,n){var a=(t+="")=="transform"?Ku:zi;return e==null?this.styleTween(t,Hv(t,a)).on("end.style."+t,Ci(t)):typeof e=="function"?this.styleTween(t,Fv(t,a,So(this,"style."+t,e))).each(Bv(this._id,t)):this.styleTween(t,Vv(t,a,e),n).on("end.style."+t,null)}function Kv(t,e,n){return function(a){this.style.setProperty(t,e.call(this,a),n)}}function jv(t,e,n){var a,o;function i(){var s=e.apply(this,arguments);return s!==o&&(a=(o=s)&&Kv(t,s,n)),a}return i._value=e,i}function Zv(t,e,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,jv(t,e,n??""))}function Yv(t){return function(){this.textContent=t}}function Wv(t){return function(){var e=t(this);this.textContent=e??""}}function Xv(t){return this.tween("text",typeof t=="function"?Wv(So(this,"text",t)):Yv(t==null?"":t+""))}function Gv(t){return function(e){this.textContent=t.call(this,e)}}function Uv(t){var e,n;function a(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Gv(o)),e}return a._value=t,a}function Qv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Uv(t))}function Jv(){for(var t=this._name,e=this._id,n=Ei(),a=this._groups,o=a.length,i=0;i<o;++i)for(var s=a[i],l=s.length,u,v=0;v<l;++v)if(u=s[v]){var p=Yt(u,e);fa(u,t,n,v,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new vn(a,this._parents,t,n)}function $v(){var t,e,n=this,a=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var v=tn(this,a),p=v.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),v.on=e}),o===0&&i()})}var ef=0;function vn(t,e,n,a){this._groups=t,this._parents=e,this._name=n,this._id=a}function Ei(){return++ef}var rn=_r.prototype;vn.prototype={constructor:vn,select:Dv,selectAll:Ov,selectChild:rn.selectChild,selectChildren:rn.selectChildren,filter:Ev,merge:Nv,selection:Lv,transition:Jv,call:rn.call,nodes:rn.nodes,node:rn.node,size:rn.size,empty:rn.empty,each:rn.each,on:Tv,attr:uv,attrTween:gv,style:qv,styleTween:Zv,text:Xv,textTween:Qv,remove:Av,tween:av,delay:yv,duration:wv,ease:Sv,easeVarying:Cv,end:$v,[Symbol.iterator]:rn[Symbol.iterator]};function tf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var nf={time:null,delay:0,duration:250,ease:tf};function rf(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function af(t){var e,n;t instanceof vn?(e=t._id,t=t._name):(e=Ei(),(n=nf).time=wo(),t=t==null?null:t+"");for(var a=this._groups,o=a.length,i=0;i<o;++i)for(var s=a[i],l=s.length,u,v=0;v<l;++v)(u=s[v])&&fa(u,t,e,v,s,n||rf(u,e));return new vn(a,this._parents,t,e)}_r.prototype.interrupt=tv;_r.prototype.transition=af;const Or=t=>()=>t;function of(t,{sourceEvent:e,target:n,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function sn(t,e,n){this.k=t,this.x=e,this.y=n}sn.prototype={constructor:sn,scale:function(t){return t===1?this:new sn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new sn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pa=new sn(1,0,0);Ni.prototype=sn.prototype;function Ni(t){for(;!t.__zoom;)if(!(t=t.parentNode))return pa;return t.__zoom}function Oa(t){t.stopImmediatePropagation()}function or(t){t.preventDefault(),t.stopImmediatePropagation()}function sf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function lf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function hs(){return this.__zoom||pa}function cf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function df(){return navigator.maxTouchPoints||"ontouchstart"in this}function uf(t,e,n){var a=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Mi(){var t=sf,e=lf,n=uf,a=cf,o=df,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Fr,v=da("start","zoom","end"),p,m,f,w=500,N=150,E=0,I=10;function H(g){g.property("__zoom",hs).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",Z).filter(o).on("touchstart.zoom",x).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}H.transform=function(g,C,T,D){var V=g.selection?g.selection():g;V.property("__zoom",hs),g!==V?R(g,C,T,D):V.interrupt().each(function(){b(this,arguments).event(D).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},H.scaleBy=function(g,C,T,D){H.scaleTo(g,function(){var V=this.__zoom.k,L=typeof C=="function"?C.apply(this,arguments):C;return V*L},T,D)},H.scaleTo=function(g,C,T,D){H.transform(g,function(){var V=e.apply(this,arguments),L=this.__zoom,q=T==null?M(V):typeof T=="function"?T.apply(this,arguments):T,j=L.invert(q),U=typeof C=="function"?C.apply(this,arguments):C;return n(F(O(L,U),q,j),V,s)},T,D)},H.translateBy=function(g,C,T,D){H.transform(g,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),s)},null,D)},H.translateTo=function(g,C,T,D,V){H.transform(g,function(){var L=e.apply(this,arguments),q=this.__zoom,j=D==null?M(L):typeof D=="function"?D.apply(this,arguments):D;return n(pa.translate(j[0],j[1]).scale(q.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof T=="function"?-T.apply(this,arguments):-T),L,s)},D,V)};function O(g,C){return C=Math.max(i[0],Math.min(i[1],C)),C===g.k?g:new sn(C,g.x,g.y)}function F(g,C,T){var D=C[0]-T[0]*g.k,V=C[1]-T[1]*g.k;return D===g.x&&V===g.y?g:new sn(g.k,D,V)}function M(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function R(g,C,T,D){g.on("start.zoom",function(){b(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(D).end()}).tween("zoom",function(){var V=this,L=arguments,q=b(V,L).event(D),j=e.apply(V,L),U=T==null?M(j):typeof T=="function"?T.apply(V,L):T,X=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),J=V.__zoom,ae=typeof C=="function"?C.apply(V,L):C,re=u(J.invert(U).concat(X/J.k),ae.invert(U).concat(X/ae.k));return function(ie){if(ie===1)ie=ae;else{var ne=re(ie),G=X/ne[2];ie=new sn(G,U[0]-ne[0]*G,U[1]-ne[1]*G)}q.zoom(null,ie)}})}function b(g,C,T){return!T&&g.__zooming||new A(g,C)}function A(g,C){this.that=g,this.args=C,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,C),this.taps=0}A.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,C){return this.mouse&&g!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var C=At(this.that).datum();v.call(g,this.that,new of(g,{sourceEvent:this.sourceEvent,target:H,transform:this.that.__zoom,dispatch:v}),C)}};function B(g,...C){if(!t.apply(this,arguments))return;var T=b(this,C).event(g),D=this.__zoom,V=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,a.apply(this,arguments)))),L=Ft(g);if(T.wheel)(T.mouse[0][0]!==L[0]||T.mouse[0][1]!==L[1])&&(T.mouse[1]=D.invert(T.mouse[0]=L)),clearTimeout(T.wheel);else{if(D.k===V)return;T.mouse=[L,D.invert(L)],Kr(this),T.start()}or(g),T.wheel=setTimeout(q,N),T.zoom("mouse",n(F(O(D,V),T.mouse[0],T.mouse[1]),T.extent,s));function q(){T.wheel=null,T.end()}}function K(g,...C){if(f||!t.apply(this,arguments))return;var T=g.currentTarget,D=b(this,C,!0).event(g),V=At(g.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",X,!0),L=Ft(g,T),q=g.clientX,j=g.clientY;fi(g.view),Oa(g),D.mouse=[L,this.__zoom.invert(L)],Kr(this),D.start();function U(J){if(or(J),!D.moved){var ae=J.clientX-q,re=J.clientY-j;D.moved=ae*ae+re*re>E}D.event(J).zoom("mouse",n(F(D.that.__zoom,D.mouse[0]=Ft(J,T),D.mouse[1]),D.extent,s))}function X(J){V.on("mousemove.zoom mouseup.zoom",null),pi(J.view,D.moved),or(J),D.event(J).end()}}function Z(g,...C){if(t.apply(this,arguments)){var T=this.__zoom,D=Ft(g.changedTouches?g.changedTouches[0]:g,this),V=T.invert(D),L=T.k*(g.shiftKey?.5:2),q=n(F(O(T,L),D,V),e.apply(this,C),s);or(g),l>0?At(this).transition().duration(l).call(R,q,D,g):At(this).call(H.transform,q,D,g)}}function x(g,...C){if(t.apply(this,arguments)){var T=g.touches,D=T.length,V=b(this,C,g.changedTouches.length===D).event(g),L,q,j,U;for(Oa(g),q=0;q<D;++q)j=T[q],U=Ft(j,this),U=[U,this.__zoom.invert(U),j.identifier],V.touch0?!V.touch1&&V.touch0[2]!==U[2]&&(V.touch1=U,V.taps=0):(V.touch0=U,L=!0,V.taps=1+!!p);p&&(p=clearTimeout(p)),L&&(V.taps<2&&(m=U[0],p=setTimeout(function(){p=null},w)),Kr(this),V.start())}}function S(g,...C){if(this.__zooming){var T=b(this,C).event(g),D=g.changedTouches,V=D.length,L,q,j,U;for(or(g),L=0;L<V;++L)q=D[L],j=Ft(q,this),T.touch0&&T.touch0[2]===q.identifier?T.touch0[0]=j:T.touch1&&T.touch1[2]===q.identifier&&(T.touch1[0]=j);if(q=T.that.__zoom,T.touch1){var X=T.touch0[0],J=T.touch0[1],ae=T.touch1[0],re=T.touch1[1],ie=(ie=ae[0]-X[0])*ie+(ie=ae[1]-X[1])*ie,ne=(ne=re[0]-J[0])*ne+(ne=re[1]-J[1])*ne;q=O(q,Math.sqrt(ie/ne)),j=[(X[0]+ae[0])/2,(X[1]+ae[1])/2],U=[(J[0]+re[0])/2,(J[1]+re[1])/2]}else if(T.touch0)j=T.touch0[0],U=T.touch0[1];else return;T.zoom("touch",n(F(q,j,U),T.extent,s))}}function z(g,...C){if(this.__zooming){var T=b(this,C).event(g),D=g.changedTouches,V=D.length,L,q;for(Oa(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},w),L=0;L<V;++L)q=D[L],T.touch0&&T.touch0[2]===q.identifier?delete T.touch0:T.touch1&&T.touch1[2]===q.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(q=Ft(q,this),Math.hypot(m[0]-q[0],m[1]-q[1])<I)){var j=At(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return H.wheelDelta=function(g){return arguments.length?(a=typeof g=="function"?g:Or(+g),H):a},H.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Or(!!g),H):t},H.touchable=function(g){return arguments.length?(o=typeof g=="function"?g:Or(!!g),H):o},H.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Or([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),H):e},H.scaleExtent=function(g){return arguments.length?(i[0]=+g[0],i[1]=+g[1],H):[i[0],i[1]]},H.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],H):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},H.constrain=function(g){return arguments.length?(n=g,H):n},H.duration=function(g){return arguments.length?(l=+g,H):l},H.interpolate=function(g){return arguments.length?(u=g,H):u},H.on=function(){var g=v.on.apply(v,arguments);return g===v?H:g},H.clickDistance=function(g){return arguments.length?(E=(g=+g)*g,H):Math.sqrt(E)},H.tapDistance=function(g){return arguments.length?(I=+g,H):I},H}const hr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:a})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:a}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Pi=["Enter"," ","Escape"],vf={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Qn;(function(t){t.Strict="strict",t.Loose="loose"})(Qn||(Qn={}));var Yn;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Yn||(Yn={}));var na;(function(t){t.Partial="partial",t.Full="full"})(na||(na={}));const no={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var gn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(gn||(gn={}));var ra;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ra||(ra={}));var we;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(we||(we={}));const gs={[we.Left]:we.Right,[we.Right]:we.Left,[we.Top]:we.Bottom,[we.Bottom]:we.Top};function ff(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ms(t,e,n){if(!n)return;const a=[];t.forEach((o,i)=>{e?.has(i)||a.push(o)}),a.length&&n(a)}function pf(t){return t===null?null:t?"valid":"invalid"}const Ti=t=>"id"in t&&"source"in t&&"target"in t,hf=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),zo=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),br=(t,e=[0,0])=>{const{width:n,height:a}=xn(t),o=t.origin??e,i=n*o[0],s=a*o[1];return{x:t.position.x-i,y:t.position.y-s}},gf=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((a,o)=>{const i=typeof o=="string";let s=!e.nodeLookup&&!i?o:void 0;e.nodeLookup&&(s=i?e.nodeLookup.get(o):zo(o)?o:e.nodeLookup.get(o.id));const l=s?aa(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ha(a,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ga(n)},xr=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return t.forEach(o=>{(e.filter===void 0||e.filter(o))&&(n=ha(n,aa(o)),a=!0)}),a?ga(n):{x:0,y:0,width:0,height:0}},Co=(t,e,[n,a,o]=[0,0,1],i=!1,s=!1)=>{const l={...kr(e,[n,a,o]),width:e.width/o,height:e.height/o},u=[];for(const v of t.values()){const{measured:p,selectable:m=!0,hidden:f=!1}=v;if(s&&!m||f)continue;const w=p.width??v.width??v.initialWidth??null,N=p.height??v.height??v.initialHeight??null,E=gr(l,$n(v)),I=(w??0)*(N??0),H=i&&E>0;(!v.internals.handleBounds||H||E>=I||v.dragging)&&u.push(v)}return u},mf=(t,e)=>{const n=new Set;return t.forEach(a=>{n.add(a.id)}),e.filter(a=>n.has(a.source)||n.has(a.target))};function _f(t,e){const n=new Map,a=e?.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&(e?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&n.set(o.id,o)}),n}async function yf({nodes:t,width:e,height:n,panZoom:a,minZoom:o,maxZoom:i},s){if(t.size===0)return Promise.resolve(!0);const l=_f(t,s),u=xr(l),v=Eo(u,e,n,s?.minZoom??o,s?.maxZoom??i,s?.padding??.1);return await a.setViewport(v,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function Ii({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:a=[0,0],nodeExtent:o,onError:i}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:u,y:v}=l?l.internals.positionAbsolute:{x:0,y:0},p=s.origin??a;let m=s.extent||o;if(s.extent==="parent"&&!s.expandParent)if(!l)i?.("005",hr.error005());else{const w=l.measured.width,N=l.measured.height;w&&N&&(m=[[u,v],[u+w,v+N]])}else l&&er(s.extent)&&(m=[[s.extent[0][0]+u,s.extent[0][1]+v],[s.extent[1][0]+u,s.extent[1][1]+v]]);const f=er(m)?An(e,m,s.measured):e;return(s.measured.width===void 0||s.measured.height===void 0)&&i?.("015",hr.error015()),{position:{x:f.x-u+(s.measured.width??0)*p[0],y:f.y-v+(s.measured.height??0)*p[1]},positionAbsolute:f}}async function bf({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:a,onBeforeDelete:o}){const i=new Set(t.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const w=i.has(f.id),N=!w&&f.parentId&&s.find(E=>E.id===f.parentId);(w||N)&&s.push(f)}const l=new Set(e.map(f=>f.id)),u=a.filter(f=>f.deletable!==!1),p=mf(s,u);for(const f of u)l.has(f.id)&&!p.find(N=>N.id===f.id)&&p.push(f);if(!o)return{edges:p,nodes:s};const m=await o({nodes:s,edges:p});return typeof m=="boolean"?m?{edges:p,nodes:s}:{edges:[],nodes:[]}:m}const Jn=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),An=(t={x:0,y:0},e,n)=>({x:Jn(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Jn(t.y,e[0][1],e[1][1]-(n?.height??0))});function Ai(t,e,n){const{width:a,height:o}=xn(n),{x:i,y:s}=n.internals.positionAbsolute;return An(t,[[i,s],[i+a,s+o]],e)}const _s=(t,e,n)=>t<e?Jn(Math.abs(t-e),1,e)/e:t>n?-Jn(Math.abs(t-n),1,e)/e:0,Di=(t,e,n=15,a=40)=>{const o=_s(t.x,a,e.width-a)*n,i=_s(t.y,a,e.height-a)*n;return[o,i]},ha=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ro=({x:t,y:e,width:n,height:a})=>({x:t,y:e,x2:t+n,y2:e+a}),ga=({x:t,y:e,x2:n,y2:a})=>({x:t,y:e,width:n-t,height:a-e}),$n=(t,e=[0,0])=>{const{x:n,y:a}=zo(t)?t.internals.positionAbsolute:br(t,e);return{x:n,y:a,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},aa=(t,e=[0,0])=>{const{x:n,y:a}=zo(t)?t.internals.positionAbsolute:br(t,e);return{x:n,y:a,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:a+(t.measured?.height??t.height??t.initialHeight??0)}},Oi=(t,e)=>ga(ha(ro(t),ro(e))),gr=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),a=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*a)},ys=t=>ln(t.width)&&ln(t.height)&&ln(t.x)&&ln(t.y),ln=t=>!isNaN(t)&&isFinite(t),xf=(t,e)=>{},wr=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),kr=({x:t,y:e},[n,a,o],i=!1,s=[1,1])=>{const l={x:(t-n)/o,y:(e-a)/o};return i?wr(l,s):l},oa=({x:t,y:e},[n,a,o])=>({x:t*o+n,y:e*o+a});function qn(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function wf(t,e,n){if(typeof t=="string"||typeof t=="number"){const a=qn(t,n),o=qn(t,e);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof t=="object"){const a=qn(t.top??t.y??0,n),o=qn(t.bottom??t.y??0,n),i=qn(t.left??t.x??0,e),s=qn(t.right??t.x??0,e);return{top:a,right:s,bottom:o,left:i,x:i+s,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function kf(t,e,n,a,o,i){const{x:s,y:l}=oa(t,[e,n,a]),{x:u,y:v}=oa({x:t.x+t.width,y:t.y+t.height},[e,n,a]),p=o-u,m=i-v;return{left:Math.floor(s),top:Math.floor(l),right:Math.floor(p),bottom:Math.floor(m)}}const Eo=(t,e,n,a,o,i)=>{const s=wf(i,e,n),l=(e-s.x)/t.width,u=(n-s.y)/t.height,v=Math.min(l,u),p=Jn(v,a,o),m=t.x+t.width/2,f=t.y+t.height/2,w=e/2-m*p,N=n/2-f*p,E=kf(t,w,N,p,e,n),I={left:Math.min(E.left-s.left,0),top:Math.min(E.top-s.top,0),right:Math.min(E.right-s.right,0),bottom:Math.min(E.bottom-s.bottom,0)};return{x:w-I.left+I.right,y:N-I.top+I.bottom,zoom:p}},mr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function er(t){return t!=null&&t!=="parent"}function xn(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function Ri(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function Sf(t,e={width:0,height:0},n,a,o){const i={...t},s=a.get(n);if(s){const l=s.origin||o;i.x+=s.internals.positionAbsolute.x-(e.width??0)*l[0],i.y+=s.internals.positionAbsolute.y-(e.height??0)*l[1]}return i}function zf(t){return{...vf,...t||{}}}function Ra(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:a,containerBounds:o}){const{x:i,y:s}=qt(t),l=kr({x:i-(o?.left??0),y:s-(o?.top??0)},a),{x:u,y:v}=n?wr(l,e):l;return{xSnapped:u,ySnapped:v,...l}}const Li=t=>({width:t.offsetWidth,height:t.offsetHeight}),Hi=t=>t?.getRootNode?.()||window?.document,Cf=["INPUT","SELECT","TEXTAREA"];function Vi(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Cf.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const Fi=t=>"clientX"in t,qt=(t,e)=>{const n=Fi(t),a=n?t.clientX:t.touches?.[0].clientX,o=n?t.clientY:t.touches?.[0].clientY;return{x:a-(e?.left??0),y:o-(e?.top??0)}},bs=(t,e,n,a,o)=>{const i=e.querySelectorAll(`.${t}`);return!i||!i.length?null:Array.from(i).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:o,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/a,y:(l.top-n.top)/a,...Li(s)}})};function Ef({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=t*.125+o*.375+s*.375+n*.125,v=e*.125+i*.375+l*.375+a*.125,p=Math.abs(u-t),m=Math.abs(v-e);return[u,v,p,m]}function Rr(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function xs({pos:t,x1:e,y1:n,x2:a,y2:o,c:i}){switch(t){case we.Left:return[e-Rr(e-a,i),n];case we.Right:return[e+Rr(a-e,i),n];case we.Top:return[e,n-Rr(n-o,i)];case we.Bottom:return[e,n+Rr(o-n,i)]}}function Bi({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:a,targetY:o,targetPosition:i=we.Top,curvature:s=.25}){const[l,u]=xs({pos:n,x1:t,y1:e,x2:a,y2:o,c:s}),[v,p]=xs({pos:i,x1:a,y1:o,x2:t,y2:e,c:s}),[m,f,w,N]=Ef({sourceX:t,sourceY:e,targetX:a,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:v,targetControlY:p});return[`M${t},${e} C${l},${u} ${v},${p} ${a},${o}`,m,f,w,N]}function qi({sourceX:t,sourceY:e,targetX:n,targetY:a}){const o=Math.abs(n-t)/2,i=n<t?n+o:n-o,s=Math.abs(a-e)/2,l=a<e?a+s:a-s;return[i,l,o,s]}function Nf({sourceNode:t,targetNode:e,selected:n=!1,zIndex:a=0,elevateOnSelect:o=!1,zIndexMode:i="basic"}){if(i==="manual")return a;const s=o&&n?a+1e3:a,l=Math.max(t.parentId||o&&t.selected?t.internals.z:0,e.parentId||o&&e.selected?e.internals.z:0);return s+l}function Mf({sourceNode:t,targetNode:e,width:n,height:a,transform:o}){const i=ha(aa(t),aa(e));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:a/o[2]};return gr(s,ga(i))>0}const Pf=({source:t,sourceHandle:e,target:n,targetHandle:a})=>`xy-edge__${t}${e||""}-${n}${a||""}`,Tf=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),If=(t,e,n={})=>{if(!t.source||!t.target)return e;const a=n.getEdgeId||Pf;let o;return Ti(t)?o={...t}:o={...t,id:a(t)},Tf(o,e)?e:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,e.concat(o))};function Ki({sourceX:t,sourceY:e,targetX:n,targetY:a}){const[o,i,s,l]=qi({sourceX:t,sourceY:e,targetX:n,targetY:a});return[`M ${t},${e}L ${n},${a}`,o,i,s,l]}const ws={[we.Left]:{x:-1,y:0},[we.Right]:{x:1,y:0},[we.Top]:{x:0,y:-1},[we.Bottom]:{x:0,y:1}},Af=({source:t,sourcePosition:e=we.Bottom,target:n})=>e===we.Left||e===we.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ks=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Df({source:t,sourcePosition:e=we.Bottom,target:n,targetPosition:a=we.Top,center:o,offset:i,stepPosition:s}){const l=ws[e],u=ws[a],v={x:t.x+l.x*i,y:t.y+l.y*i},p={x:n.x+u.x*i,y:n.y+u.y*i},m=Af({source:v,sourcePosition:e,target:p}),f=m.x!==0?"x":"y",w=m[f];let N=[],E,I;const H={x:0,y:0},O={x:0,y:0},[,,F,M]=qi({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[f]*u[f]===-1){f==="x"?(E=o.x??v.x+(p.x-v.x)*s,I=o.y??(v.y+p.y)/2):(E=o.x??(v.x+p.x)/2,I=o.y??v.y+(p.y-v.y)*s);const b=[{x:E,y:v.y},{x:E,y:p.y}],A=[{x:v.x,y:I},{x:p.x,y:I}];l[f]===w?N=f==="x"?b:A:N=f==="x"?A:b}else{const b=[{x:v.x,y:p.y}],A=[{x:p.x,y:v.y}];if(f==="x"?N=l.x===w?A:b:N=l.y===w?b:A,e===a){const S=Math.abs(t[f]-n[f]);if(S<=i){const z=Math.min(i-1,i-S);l[f]===w?H[f]=(v[f]>t[f]?-1:1)*z:O[f]=(p[f]>n[f]?-1:1)*z}}if(e!==a){const S=f==="x"?"y":"x",z=l[f]===u[S],g=v[S]>p[S],C=v[S]<p[S];(l[f]===1&&(!z&&g||z&&C)||l[f]!==1&&(!z&&C||z&&g))&&(N=f==="x"?b:A)}const B={x:v.x+H.x,y:v.y+H.y},K={x:p.x+O.x,y:p.y+O.y},Z=Math.max(Math.abs(B.x-N[0].x),Math.abs(K.x-N[0].x)),x=Math.max(Math.abs(B.y-N[0].y),Math.abs(K.y-N[0].y));Z>=x?(E=(B.x+K.x)/2,I=N[0].y):(E=N[0].x,I=(B.y+K.y)/2)}return[[t,{x:v.x+H.x,y:v.y+H.y},...N,{x:p.x+O.x,y:p.y+O.y},n],E,I,F,M]}function Of(t,e,n,a){const o=Math.min(ks(t,e)/2,ks(e,n)/2,a),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const v=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${i+o*v},${s}Q ${i},${s} ${i},${s+o*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*l},${s}`}function No({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:a,targetY:o,targetPosition:i=we.Top,borderRadius:s=5,centerX:l,centerY:u,offset:v=20,stepPosition:p=.5}){const[m,f,w,N,E]=Df({source:{x:t,y:e},sourcePosition:n,target:{x:a,y:o},targetPosition:i,center:{x:l,y:u},offset:v,stepPosition:p});return[m.reduce((H,O,F)=>{let M="";return F>0&&F<m.length-1?M=Of(m[F-1],O,m[F+1],s):M=`${F===0?"M":"L"}${O.x} ${O.y}`,H+=M,H},""),f,w,N,E]}function Ss(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Rf(t){const{sourceNode:e,targetNode:n}=t;if(!Ss(e)||!Ss(n))return null;const a=e.internals.handleBounds||zs(e.handles),o=n.internals.handleBounds||zs(n.handles),i=Cs(a?.source??[],t.sourceHandle),s=Cs(t.connectionMode===Qn.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),t.targetHandle);if(!i||!s)return t.onError?.("008",hr.error008(i?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=i?.position||we.Bottom,u=s?.position||we.Top,v=Dn(e,i,l),p=Dn(n,s,u);return{sourceX:v.x,sourceY:v.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function zs(t){if(!t)return null;const e=[],n=[];for(const a of t)a.width=a.width??1,a.height=a.height??1,a.type==="source"?e.push(a):a.type==="target"&&n.push(a);return{source:e,target:n}}function Dn(t,e,n=we.Left,a=!1){const o=(e?.x??0)+t.internals.positionAbsolute.x,i=(e?.y??0)+t.internals.positionAbsolute.y,{width:s,height:l}=e??xn(t);if(a)return{x:o+s/2,y:i+l/2};switch(e?.position??n){case we.Top:return{x:o+s/2,y:i};case we.Right:return{x:o+s,y:i+l/2};case we.Bottom:return{x:o+s/2,y:i+l};case we.Left:return{x:o,y:i+l/2}}}function Cs(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function ao(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(a=>`${a}=${t[a]}`).join("&")}`:""}function Lf(t,{id:e,defaultColor:n,defaultMarkerStart:a,defaultMarkerEnd:o}){const i=new Set;return t.reduce((s,l)=>([l.markerStart||a,l.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const v=ao(u,e);i.has(v)||(s.push({id:v,color:u.color||n,...u}),i.add(v))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const ji=1e3,Hf=10,Mo={nodeOrigin:[0,0],nodeExtent:to,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Vf={...Mo,checkEquality:!0};function Po(t,e){const n={...t};for(const a in e)e[a]!==void 0&&(n[a]=e[a]);return n}function Ff(t,e,n){const a=Po(Mo,n);for(const o of t.values())if(o.parentId)Io(o,t,e,a);else{const i=br(o,a.nodeOrigin),s=er(o.extent)?o.extent:a.nodeExtent,l=An(i,s,xn(o));o.internals.positionAbsolute=l}}function Bf(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],a=[];for(const o of t.handles){const i={id:o.id,width:o.width??1,height:o.height??1,nodeId:t.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(i):o.type==="target"&&a.push(i)}return{source:n,target:a}}function To(t){return t==="manual"}function qf(t,e,n,a={}){const o=Po(Vf,a),i={i:0},s=new Map(e),l=o?.elevateNodesOnSelect&&!To(o.zIndexMode)?ji:0;let u=t.length>0;e.clear(),n.clear();for(const v of t){let p=s.get(v.id);if(o.checkEquality&&v===p?.internals.userNode)e.set(v.id,p);else{const m=br(v,o.nodeOrigin),f=er(v.extent)?v.extent:o.nodeExtent,w=An(m,f,xn(v));p={...o.defaults,...v,measured:{width:v.measured?.width,height:v.measured?.height},internals:{positionAbsolute:w,handleBounds:Bf(v,p),z:Zi(v,l,o.zIndexMode),userNode:v}},e.set(v.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),v.parentId&&Io(p,e,n,a,i)}return u}function Kf(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Io(t,e,n,a,o){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:l,zIndexMode:u}=Po(Mo,a),v=t.parentId,p=e.get(v);if(!p){console.warn(`Parent node ${v} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Kf(t,n),o&&!p.parentId&&p.internals.rootParentIndex===void 0&&u==="auto"&&(p.internals.rootParentIndex=++o.i,p.internals.z=p.internals.z+o.i*Hf),o&&p.internals.rootParentIndex!==void 0&&(o.i=p.internals.rootParentIndex);const m=i&&!To(u)?ji:0,{x:f,y:w,z:N}=jf(t,p,s,l,m,u),{positionAbsolute:E}=t.internals,I=f!==E.x||w!==E.y;(I||N!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:I?{x:f,y:w}:E,z:N}})}function Zi(t,e,n){const a=ln(t.zIndex)?t.zIndex:0;return To(n)?a:a+(t.selected?e:0)}function jf(t,e,n,a,o,i){const{x:s,y:l}=e.internals.positionAbsolute,u=xn(t),v=br(t,n),p=er(t.extent)?An(v,t.extent,u):v;let m=An({x:s+p.x,y:l+p.y},a,u);t.extent==="parent"&&(m=Ai(m,u,e));const f=Zi(t,o,i),w=e.internals.z??0;return{x:m.x,y:m.y,z:w>=f?w+1:f}}function Zf(t,e,n,a=[0,0]){const o=[],i=new Map;for(const s of t){const l=e.get(s.parentId);if(!l)continue;const u=i.get(s.parentId)?.expandedRect??$n(l),v=Oi(u,s.rect);i.set(s.parentId,{expandedRect:v,parent:l})}return i.size>0&&i.forEach(({expandedRect:s,parent:l},u)=>{const v=l.internals.positionAbsolute,p=xn(l),m=l.origin??a,f=s.x<v.x?Math.round(Math.abs(v.x-s.x)):0,w=s.y<v.y?Math.round(Math.abs(v.y-s.y)):0,N=Math.max(p.width,Math.round(s.width)),E=Math.max(p.height,Math.round(s.height)),I=(N-p.width)*m[0],H=(E-p.height)*m[1];(f>0||w>0||I||H)&&(o.push({id:u,type:"position",position:{x:l.position.x-f+I,y:l.position.y-w+H}}),n.get(u)?.forEach(O=>{t.some(F=>F.id===O.id)||o.push({id:O.id,type:"position",position:{x:O.position.x+f,y:O.position.y+w}})})),(p.width<s.width||p.height<s.height||f||w)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:N+(f?m[0]*f-I:0),height:E+(w?m[1]*w-H:0)}})}),o}function Yf(t,e,n,a,o,i,s){const l=a?.querySelector(".xyflow__viewport");let u=!1;if(!l)return{changes:[],updatedInternals:u};const v=[],p=window.getComputedStyle(l),{m22:m}=new window.DOMMatrixReadOnly(p.transform),f=[];for(const w of t.values()){const N=e.get(w.id);if(!N)continue;if(N.hidden){e.set(N.id,{...N,internals:{...N.internals,handleBounds:void 0}}),u=!0;continue}const E=Li(w.nodeElement),I=N.measured.width!==E.width||N.measured.height!==E.height;if(!!(E.width&&E.height&&(I||!N.internals.handleBounds||w.force))){const O=w.nodeElement.getBoundingClientRect(),F=er(N.extent)?N.extent:i;let{positionAbsolute:M}=N.internals;N.parentId&&N.extent==="parent"?M=Ai(M,E,e.get(N.parentId)):F&&(M=An(M,F,E));const R={...N,measured:E,internals:{...N.internals,positionAbsolute:M,handleBounds:{source:bs("source",w.nodeElement,O,m,N.id),target:bs("target",w.nodeElement,O,m,N.id)}}};e.set(N.id,R),N.parentId&&Io(R,e,n,{nodeOrigin:o,zIndexMode:s}),u=!0,I&&(v.push({id:N.id,type:"dimensions",dimensions:E}),N.expandParent&&N.parentId&&f.push({id:N.id,parentId:N.parentId,rect:$n(R,o)}))}}if(f.length>0){const w=Zf(f,e,n,o);v.push(...w)}return{changes:v,updatedInternals:u}}async function Wf({delta:t,panZoom:e,transform:n,translateExtent:a,width:o,height:i}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,i]],a),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function Es(t,e,n,a,o,i){let s=o;const l=a.get(s)||new Map;a.set(s,l.set(n,e)),s=`${o}-${t}`;const u=a.get(s)||new Map;if(a.set(s,u.set(n,e)),i){s=`${o}-${t}-${i}`;const v=a.get(s)||new Map;a.set(s,v.set(n,e))}}function Xf(t,e,n){t.clear(),e.clear();for(const a of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:l=null}=a,u={edgeId:a.id,source:o,target:i,sourceHandle:s,targetHandle:l},v=`${o}-${s}--${i}-${l}`,p=`${i}-${l}--${o}-${s}`;Es("source",u,p,t,o,s),Es("target",u,v,t,i,l),e.set(a.id,a)}}function Yi(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Yi(n,e):!1}function Ns(t,e,n){let a=t;do{if(a?.matches?.(e))return!0;if(a===n)return!1;a=a?.parentElement}while(a);return!1}function Gf(t,e,n,a){const o=new Map;for(const[i,s]of t)if((s.selected||s.id===a)&&(!s.parentId||!Yi(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const l=t.get(i);l&&o.set(i,{id:i,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function La({nodeId:t,dragItems:e,nodeLookup:n,dragging:a=!0}){const o=[];for(const[s,l]of e){const u=n.get(s)?.internals.userNode;u&&o.push({...u,position:l.position,dragging:a})}if(!t)return[o[0],o];const i=n.get(t)?.internals.userNode;return[i?{...i,position:e.get(t)?.position||i.position,dragging:a}:o[0],o]}function Uf({dragItems:t,snapGrid:e,x:n,y:a}){const o=t.values().next().value;if(!o)return null;const i={x:n-o.distance.x,y:a-o.distance.y},s=wr(i,e);return{x:s.x-i.x,y:s.y-i.y}}function Qf({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:a,onDragStop:o}){let i={x:null,y:null},s=0,l=new Map,u=!1,v={x:0,y:0},p=null,m=!1,f=null,w=!1,N=!1,E=null;function I({noDragClassName:O,handleSelector:F,domNode:M,isSelectable:R,nodeId:b,nodeClickDistance:A=0}){f=At(M);function B({x:S,y:z}){const{nodeLookup:g,nodeExtent:C,snapGrid:T,snapToGrid:D,nodeOrigin:V,onNodeDrag:L,onSelectionDrag:q,onError:j,updateNodePositions:U}=e();i={x:S,y:z};let X=!1;const J=l.size>1,ae=J&&C?ro(xr(l)):null,re=J&&D?Uf({dragItems:l,snapGrid:T,x:S,y:z}):null;for(const[ie,ne]of l){if(!g.has(ie))continue;let G={x:S-ne.distance.x,y:z-ne.distance.y};D&&(G=re?{x:Math.round(G.x+re.x),y:Math.round(G.y+re.y)}:wr(G,T));let oe=null;if(J&&C&&!ne.extent&&ae){const{positionAbsolute:te}=ne.internals,ue=te.x-ae.x+C[0][0],le=te.x+ne.measured.width-ae.x2+C[1][0],he=te.y-ae.y+C[0][1],ve=te.y+ne.measured.height-ae.y2+C[1][1];oe=[[ue,he],[le,ve]]}const{position:ee,positionAbsolute:se}=Ii({nodeId:ie,nextPosition:G,nodeLookup:g,nodeExtent:oe||C,nodeOrigin:V,onError:j});X=X||ne.position.x!==ee.x||ne.position.y!==ee.y,ne.position=ee,ne.internals.positionAbsolute=se}if(N=N||X,!!X&&(U(l,!0),E&&(a||L||!b&&q))){const[ie,ne]=La({nodeId:b,dragItems:l,nodeLookup:g});a?.(E,l,ie,ne),L?.(E,ie,ne),b||q?.(E,ne)}}async function K(){if(!p)return;const{transform:S,panBy:z,autoPanSpeed:g,autoPanOnNodeDrag:C}=e();if(!C){u=!1,cancelAnimationFrame(s);return}const[T,D]=Di(v,p,g);(T!==0||D!==0)&&(i.x=(i.x??0)-T/S[2],i.y=(i.y??0)-D/S[2],await z({x:T,y:D})&&B(i)),s=requestAnimationFrame(K)}function Z(S){const{nodeLookup:z,multiSelectionActive:g,nodesDraggable:C,transform:T,snapGrid:D,snapToGrid:V,selectNodesOnDrag:L,onNodeDragStart:q,onSelectionDragStart:j,unselectNodesAndEdges:U}=e();m=!0,(!L||!R)&&!g&&b&&(z.get(b)?.selected||U()),R&&L&&b&&t?.(b);const X=Ra(S.sourceEvent,{transform:T,snapGrid:D,snapToGrid:V,containerBounds:p});if(i=X,l=Gf(z,C,X,b),l.size>0&&(n||q||!b&&j)){const[J,ae]=La({nodeId:b,dragItems:l,nodeLookup:z});n?.(S.sourceEvent,l,J,ae),q?.(S.sourceEvent,J,ae),b||j?.(S.sourceEvent,ae)}}const x=_u().clickDistance(A).on("start",S=>{const{domNode:z,nodeDragThreshold:g,transform:C,snapGrid:T,snapToGrid:D}=e();p=z?.getBoundingClientRect()||null,w=!1,N=!1,E=S.sourceEvent,g===0&&Z(S),i=Ra(S.sourceEvent,{transform:C,snapGrid:T,snapToGrid:D,containerBounds:p}),v=qt(S.sourceEvent,p)}).on("drag",S=>{const{autoPanOnNodeDrag:z,transform:g,snapGrid:C,snapToGrid:T,nodeDragThreshold:D,nodeLookup:V}=e(),L=Ra(S.sourceEvent,{transform:g,snapGrid:C,snapToGrid:T,containerBounds:p});if(E=S.sourceEvent,(S.sourceEvent.type==="touchmove"&&S.sourceEvent.touches.length>1||b&&!V.has(b))&&(w=!0),!w){if(!u&&z&&m&&(u=!0,K()),!m){const q=qt(S.sourceEvent,p),j=q.x-v.x,U=q.y-v.y;Math.sqrt(j*j+U*U)>D&&Z(S)}(i.x!==L.xSnapped||i.y!==L.ySnapped)&&l&&m&&(v=qt(S.sourceEvent,p),B(L))}}).on("end",S=>{if(!(!m||w)&&(u=!1,m=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:z,updateNodePositions:g,onNodeDragStop:C,onSelectionDragStop:T}=e();if(N&&(g(l,!1),N=!1),o||C||!b&&T){const[D,V]=La({nodeId:b,dragItems:l,nodeLookup:z,dragging:!1});o?.(S.sourceEvent,l,D,V),C?.(S.sourceEvent,D,V),b||T?.(S.sourceEvent,V)}}}).filter(S=>{const z=S.target;return!S.button&&(!O||!Ns(z,`.${O}`,M))&&(!F||Ns(z,F,M))});f.call(x)}function H(){f?.on(".drag",null)}return{update:I,destroy:H}}function Jf(t,e,n){const a=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const i of e.values())gr(o,$n(i))>0&&a.push(i);return a}const $f=250;function ep(t,e,n,a){let o=[],i=1/0;const s=Jf(t,n,e+$f);for(const l of s){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const v of u){if(a.nodeId===v.nodeId&&a.type===v.type&&a.id===v.id)continue;const{x:p,y:m}=Dn(l,v,v.position,!0),f=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(m-t.y,2));f>e||(f<i?(o=[{...v,x:p,y:m}],i=f):f===i&&o.push({...v,x:p,y:m}))}}if(!o.length)return null;if(o.length>1){const l=a.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function Wi(t,e,n,a,o,i=!1){const s=a.get(t);if(!s)return null;const l=o==="strict"?s.internals.handleBounds?.[e]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],u=(n?l?.find(v=>v.id===n):l?.[0])??null;return u&&i?{...u,...Dn(s,u,u.position,!0)}:u}function Xi(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function tp(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Gi=()=>!0;function np(t,{connectionMode:e,connectionRadius:n,handleId:a,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:l,nodeLookup:u,lib:v,autoPanOnConnect:p,flowId:m,panBy:f,cancelConnection:w,onConnectStart:N,onConnect:E,onConnectEnd:I,isValidConnection:H=Gi,onReconnectEnd:O,updateConnection:F,getTransform:M,getFromHandle:R,autoPanSpeed:b,dragThreshold:A=1,handleDomNode:B}){const K=Hi(t.target);let Z=0,x;const{x:S,y:z}=qt(t),g=Xi(i,B),C=l?.getBoundingClientRect();let T=!1;if(!C||!g)return;const D=Wi(o,g,a,u,e);if(!D)return;let V=qt(t,C),L=!1,q=null,j=!1,U=null;function X(){if(!p||!C)return;const[ee,se]=Di(V,C,b);f({x:ee,y:se}),Z=requestAnimationFrame(X)}const J={...D,nodeId:o,type:g,position:D.position},ae=u.get(o);let ie={inProgress:!0,isValid:null,from:Dn(ae,J,we.Left,!0),fromHandle:J,fromPosition:J.position,fromNode:ae,to:V,toHandle:null,toPosition:gs[J.position],toNode:null,pointer:V};function ne(){T=!0,F(ie),N?.(t,{nodeId:o,handleId:a,handleType:g})}A===0&&ne();function G(ee){if(!T){const{x:ve,y:fe}=qt(ee),ke=ve-S,Ae=fe-z;if(!(ke*ke+Ae*Ae>A*A))return;ne()}if(!R()||!J){oe(ee);return}const se=M();V=qt(ee,C),x=ep(kr(V,se,!1,[1,1]),n,u,J),L||(X(),L=!0);const te=Ui(ee,{handle:x,connectionMode:e,fromNodeId:o,fromHandleId:a,fromType:s?"target":"source",isValidConnection:H,doc:K,lib:v,flowId:m,nodeLookup:u});U=te.handleDomNode,q=te.connection,j=tp(!!x,te.isValid);const ue=u.get(o),le=ue?Dn(ue,J,we.Left,!0):ie.from,he={...ie,from:le,isValid:j,to:te.toHandle&&j?oa({x:te.toHandle.x,y:te.toHandle.y},se):V,toHandle:te.toHandle,toPosition:j&&te.toHandle?te.toHandle.position:gs[J.position],toNode:te.toHandle?u.get(te.toHandle.nodeId):null,pointer:V};F(he),ie=he}function oe(ee){if(!("touches"in ee&&ee.touches.length>0)){if(T){(x||U)&&q&&j&&E?.(q);const{inProgress:se,...te}=ie,ue={...te,toPosition:ie.toHandle?ie.toPosition:null};I?.(ee,ue),i&&O?.(ee,ue)}w(),cancelAnimationFrame(Z),L=!1,j=!1,q=null,U=null,K.removeEventListener("mousemove",G),K.removeEventListener("mouseup",oe),K.removeEventListener("touchmove",G),K.removeEventListener("touchend",oe)}}K.addEventListener("mousemove",G),K.addEventListener("mouseup",oe),K.addEventListener("touchmove",G),K.addEventListener("touchend",oe)}function Ui(t,{handle:e,connectionMode:n,fromNodeId:a,fromHandleId:o,fromType:i,doc:s,lib:l,flowId:u,isValidConnection:v=Gi,nodeLookup:p}){const m=i==="target",f=e?s.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:w,y:N}=qt(t),E=s.elementFromPoint(w,N),I=E?.classList.contains(`${l}-flow__handle`)?E:f,H={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const O=Xi(void 0,I),F=I.getAttribute("data-nodeid"),M=I.getAttribute("data-handleid"),R=I.classList.contains("connectable"),b=I.classList.contains("connectableend");if(!F||!O)return H;const A={source:m?F:a,sourceHandle:m?M:o,target:m?a:F,targetHandle:m?o:M};H.connection=A;const K=R&&b&&(n===Qn.Strict?m&&O==="source"||!m&&O==="target":F!==a||M!==o);H.isValid=K&&v(A),H.toHandle=Wi(F,O,M,p,n,!0)}return H}const Ms={onPointerDown:np,isValid:Ui};function rp({domNode:t,panZoom:e,getTransform:n,getViewScale:a}){const o=At(t);function i({translateExtent:l,width:u,height:v,zoomStep:p=1,pannable:m=!0,zoomable:f=!0,inversePan:w=!1}){const N=F=>{if(F.sourceEvent.type!=="wheel"||!e)return;const M=n(),R=F.sourceEvent.ctrlKey&&mr()?10:1,b=-F.sourceEvent.deltaY*(F.sourceEvent.deltaMode===1?.05:F.sourceEvent.deltaMode?1:.002)*p,A=M[2]*Math.pow(2,b*R);e.scaleTo(A)};let E=[0,0];const I=F=>{(F.sourceEvent.type==="mousedown"||F.sourceEvent.type==="touchstart")&&(E=[F.sourceEvent.clientX??F.sourceEvent.touches[0].clientX,F.sourceEvent.clientY??F.sourceEvent.touches[0].clientY])},H=F=>{const M=n();if(F.sourceEvent.type!=="mousemove"&&F.sourceEvent.type!=="touchmove"||!e)return;const R=[F.sourceEvent.clientX??F.sourceEvent.touches[0].clientX,F.sourceEvent.clientY??F.sourceEvent.touches[0].clientY],b=[R[0]-E[0],R[1]-E[1]];E=R;const A=a()*Math.max(M[2],Math.log(M[2]))*(w?-1:1),B={x:M[0]-b[0]*A,y:M[1]-b[1]*A},K=[[0,0],[u,v]];e.setViewportConstrained({x:B.x,y:B.y,zoom:M[2]},K,l)},O=Mi().on("start",I).on("zoom",m?H:null).on("zoom.wheel",f?N:null);o.call(O,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:Ft}}const ma=t=>({x:t.x,y:t.y,zoom:t.k}),Ha=({x:t,y:e,zoom:n})=>pa.translate(t,e).scale(n),Kn=(t,e)=>t.target.closest(`.${e}`),Qi=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),ap=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Va=(t,e=0,n=ap,a=()=>{})=>{const o=typeof e=="number"&&e>0;return o||a(),o?t.transition().duration(e).ease(n).on("end",a):t},Ji=t=>{const e=t.ctrlKey&&mr()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function op({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:v}){return p=>{if(Kn(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(p.ctrlKey&&s){const I=Ft(p),H=Ji(p),O=m*Math.pow(2,H);a.scaleTo(n,O,I,p);return}const f=p.deltaMode===1?20:1;let w=o===Yn.Vertical?0:p.deltaX*f,N=o===Yn.Horizontal?0:p.deltaY*f;!mr()&&p.shiftKey&&o!==Yn.Vertical&&(w=p.deltaY*f,N=0),a.translateBy(n,-(w/m)*i,-(N/m)*i,{internal:!0});const E=ma(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(u?.(p,E),t.panScrollTimeout=setTimeout(()=>{v?.(p,E),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,l?.(p,E))}}function sp({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(a,o){const i=a.type==="wheel",s=!e&&i&&!a.ctrlKey,l=Kn(a,t);if(a.ctrlKey&&i&&l&&a.preventDefault(),s||l)return null;a.preventDefault(),n.call(this,a,o)}}function ip({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return a=>{if(a.sourceEvent?.internal)return;const o=ma(a.transform);t.mouseButton=a.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=o,a.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(a.sourceEvent,o)}}function lp({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:a,onPanZoom:o}){return i=>{t.usedRightMouseButton=!!(n&&Qi(e,t.mouseButton??0)),i.sourceEvent?.sync||a([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,ma(i.transform))}}function cp({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,i&&Qi(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),t.usedRightMouseButton=!1,a(!1),o)){const l=ma(s.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o?.(s.sourceEvent,l)},n?150:0)}}}function dp({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:l,noPanClassName:u,lib:v,connectionInProgress:p}){return m=>{const f=t||e,w=n&&m.ctrlKey,N=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(Kn(m,`${v}-flow__node`)||Kn(m,`${v}-flow__edge`)))return!0;if(!a&&!f&&!o&&!i&&!n||s||p&&!N||Kn(m,l)&&N||Kn(m,u)&&(!N||o&&N&&!t)||!n&&m.ctrlKey&&N)return!1;if(!n&&m.type==="touchstart"&&m.touches?.length>1)return m.preventDefault(),!1;if(!f&&!o&&!w&&N||!a&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(a)&&!a.includes(m.button)&&m.type==="mousedown")return!1;const E=Array.isArray(a)&&a.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||N)&&E}}function up({domNode:t,minZoom:e,maxZoom:n,translateExtent:a,viewport:o,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:u}){const v={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),m=Mi().scaleExtent([e,n]).translateExtent(a),f=At(t).call(m);O({x:o.x,y:o.y,zoom:Jn(o.zoom,e,n)},[[0,0],[p.width,p.height]],a);const w=f.on("wheel.zoom"),N=f.on("dblclick.zoom");m.wheelDelta(Ji);function E(x,S){return f?new Promise(z=>{m?.interpolate(S?.interpolate==="linear"?lr:Fr).transform(Va(f,S?.duration,S?.ease,()=>z(!0)),x)}):Promise.resolve(!1)}function I({noWheelClassName:x,noPanClassName:S,onPaneContextMenu:z,userSelectionActive:g,panOnScroll:C,panOnDrag:T,panOnScrollMode:D,panOnScrollSpeed:V,preventScrolling:L,zoomOnPinch:q,zoomOnScroll:j,zoomOnDoubleClick:U,zoomActivationKeyPressed:X,lib:J,onTransformChange:ae,connectionInProgress:re,paneClickDistance:ie,selectionOnDrag:ne}){g&&!v.isZoomingOrPanning&&H();const G=C&&!X&&!g;m.clickDistance(ne?1/0:!ln(ie)||ie<0?0:ie);const oe=G?op({zoomPanValues:v,noWheelClassName:x,d3Selection:f,d3Zoom:m,panOnScrollMode:D,panOnScrollSpeed:V,zoomOnPinch:q,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:l}):sp({noWheelClassName:x,preventScrolling:L,d3ZoomHandler:w});if(f.on("wheel.zoom",oe,{passive:!1}),!g){const se=ip({zoomPanValues:v,onDraggingChange:u,onPanZoomStart:s});m.on("start",se);const te=lp({zoomPanValues:v,panOnDrag:T,onPaneContextMenu:!!z,onPanZoom:i,onTransformChange:ae});m.on("zoom",te);const ue=cp({zoomPanValues:v,panOnDrag:T,panOnScroll:C,onPaneContextMenu:z,onPanZoomEnd:l,onDraggingChange:u});m.on("end",ue)}const ee=dp({zoomActivationKeyPressed:X,panOnDrag:T,zoomOnScroll:j,panOnScroll:C,zoomOnDoubleClick:U,zoomOnPinch:q,userSelectionActive:g,noPanClassName:S,noWheelClassName:x,lib:J,connectionInProgress:re});m.filter(ee),U?f.on("dblclick.zoom",N):f.on("dblclick.zoom",null)}function H(){m.on("zoom",null)}async function O(x,S,z){const g=Ha(x),C=m?.constrain()(g,S,z);return C&&await E(C),new Promise(T=>T(C))}async function F(x,S){const z=Ha(x);return await E(z,S),new Promise(g=>g(z))}function M(x){if(f){const S=Ha(x),z=f.property("__zoom");(z.k!==x.zoom||z.x!==x.x||z.y!==x.y)&&m?.transform(f,S,null,{sync:!0})}}function R(){const x=f?Ni(f.node()):{x:0,y:0,k:1};return{x:x.x,y:x.y,zoom:x.k}}function b(x,S){return f?new Promise(z=>{m?.interpolate(S?.interpolate==="linear"?lr:Fr).scaleTo(Va(f,S?.duration,S?.ease,()=>z(!0)),x)}):Promise.resolve(!1)}function A(x,S){return f?new Promise(z=>{m?.interpolate(S?.interpolate==="linear"?lr:Fr).scaleBy(Va(f,S?.duration,S?.ease,()=>z(!0)),x)}):Promise.resolve(!1)}function B(x){m?.scaleExtent(x)}function K(x){m?.translateExtent(x)}function Z(x){const S=!ln(x)||x<0?0:x;m?.clickDistance(S)}return{update:I,destroy:H,setViewport:F,setViewportConstrained:O,getViewport:R,scaleTo:b,scaleBy:A,setScaleExtent:B,setTranslateExtent:K,syncViewport:M,setClickDistance:Z}}var Ps;(function(t){t.Line="line",t.Handle="handle"})(Ps||(Ps={}));function Ao(){const t={};return[e=>{if(e&&!Ll(t))throw new Error(e);return so(t)},e=>Fs(t,e)]}const[vp,fp]=Ao(),[pp,hp]=Ao(),[gp,mp]=Ao();var _p=P("<div><!></div>");function $e(t,e){ze(e,!0);let n=pe(e,"id",3,null),a=pe(e,"type",3,"source"),o=pe(e,"position",19,()=>we.Top),i=pe(e,"isConnectableStart",3,!0),s=pe(e,"isConnectableEnd",3,!0),l=_n(e,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=vp("Handle must be used within a Custom Node component"),v=pp("Handle must be used within a Custom Node component");let p=k(()=>a()==="target"),m=k(()=>e.isConnectable!==void 0?e.isConnectable:v.value),f=fn(),w=k(()=>f.ariaLabelConfig),N=null;Hl(()=>{if(e.onconnect||e.ondisconnect){f.edges;let S=f.connectionLookup.get(`${u}-${a()}${n()?`-${n()}`:""}`);if(N&&!ff(S,N)){const z=S??new Map;ms(N,z,e.ondisconnect),ms(z,N,e.onconnect)}N=new Map(S)}});let E=k(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:S,toHandle:z,isValid:g}=f.connection,C=S&&S.nodeId===u&&S.type===a()&&S.id===n(),T=z&&z.nodeId===u&&z.type===a()&&z.id===n(),D=f.connectionMode===Qn.Strict?S?.type!==a():u!==S?.nodeId||n()!==S?.id;return[!0,C,T,D,T&&g]}),I=k(()=>dn(r(E),5)),H=k(()=>r(I)[0]),O=k(()=>r(I)[1]),F=k(()=>r(I)[2]),M=k(()=>r(I)[3]),R=k(()=>r(I)[4]);function b(S){const z=f.onbeforeconnect?f.onbeforeconnect(S):S;z&&(f.addEdge(z),f.onconnect?.(S))}function A(S){const z=Fi(S);S.currentTarget&&(z&&S.button===0||!z)&&Ms.onPointerDown(S,{handleId:n(),nodeId:u,isTarget:r(p),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:e.isValidConnection||((...g)=>f.isValidConnection?.(...g)??!0),updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:b,onConnectStart:f.onconnectstart,onConnectEnd:(...g)=>f.onconnectend?.(...g),getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:S.currentTarget})}function B(S){if(!u||!f.clickConnectStartHandle&&!i())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(S,{nodeId:u,handleId:n(),handleType:a()}),f.clickConnectStartHandle={nodeId:u,type:a(),id:n()};return}const z=Hi(S.target),g=e.isValidConnection??f.isValidConnection,{connectionMode:C,clickConnectStartHandle:T,flowId:D,nodeLookup:V}=f,{connection:L,isValid:q}=Ms.isValid(S,{handle:{nodeId:u,id:n(),type:a()},connectionMode:C,fromNodeId:T.nodeId,fromHandleId:T.id??null,fromType:T.type,isValidConnection:g,flowId:D,doc:z,lib:"svelte",nodeLookup:V});q&&L&&b(L);const j=structuredClone($s(f.connection));delete j.inProgress,j.toPosition=j.toHandle?j.toHandle.position:null,f.onclickconnectend?.(S,j),f.clickConnectStartHandle=null}var K=_p(),Z=()=>{};bn(K,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":o(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${a()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${o()}`,f.noDragClass,f.noPanClass,o(),e.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?B:void 0,onkeypress:Z,style:e.style,role:"button","aria-label":r(w)["handle.ariaLabel"],tabindex:"-1",...l,[lo]:{valid:r(R),connectingto:r(F),connectingfrom:r(O),source:!r(p),target:r(p),connectablestart:i(),connectableend:s(),connectable:r(m),connectionindicator:r(m)&&(!r(H)||r(M))&&(r(H)||f.clickConnectStartHandle?s():i())}}));var x=d(K);Dt(x,()=>e.children??tr),c(K),y(t,K),Ce()}var yp=P("<!> <!>",1);function $i(t,e){ze(e,!0);let n=pe(e,"targetPosition",19,()=>we.Top),a=pe(e,"sourcePosition",19,()=>we.Bottom);var o=yp(),i=de(o);$e(i,{type:"target",get position(){return n()}});var s=h(i),l=h(s);$e(l,{type:"source",get position(){return a()}}),$(()=>W(s,` ${e.data?.label??""} `)),y(t,o),Ce()}var bp=P(" <!>",1);function xp(t,e){ze(e,!0);let n=pe(e,"data",19,()=>({label:"Node"})),a=pe(e,"sourcePosition",19,()=>we.Bottom);ye();var o=bp(),i=de(o),s=h(i);$e(s,{type:"source",get position(){return a()}}),$(()=>W(i,`${n()?.label??""} `)),y(t,o),Ce()}var wp=P(" <!>",1);function kp(t,e){ze(e,!0);let n=pe(e,"data",19,()=>({label:"Node"})),a=pe(e,"targetPosition",19,()=>we.Top);ye();var o=wp(),i=de(o),s=h(i);$e(s,{type:"target",get position(){return a()}}),$(()=>W(i,`${n()?.label??""} `)),y(t,o),Ce()}function Sp(t,e){}function Fa(t,e,n){if(!n||!e)return;const a=n==="root"?e:e.querySelector(`.svelte-flow__${n}`);a&&a.appendChild(t)}function zp(t,e){const n=k(fn),a=k(()=>r(n).domNode);let o;return r(a)?Fa(t,r(a),e):o=Bs(()=>{_e(()=>{Fa(t,r(a),e),o?.()})}),{async update(i){Fa(t,r(a),i)},destroy(){t.parentNode&&t.parentNode.removeChild(t),o?.()}}}function Cp(){let t=Q(typeof window>"u");if(r(t)){const e=Bs(()=>{_e(()=>{_(t,!1),e?.()})})}return{get value(){return r(t)}}}const Ts=t=>hf(t),Ep=t=>Ti(t);function en(t){return t===void 0?void 0:`${t}px`}const sa={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Np=P("<div><!></div>");function Mp(t,e){ze(e,!0);let n=pe(e,"x",3,0),a=pe(e,"y",3,0),o=pe(e,"selectEdgeOnClick",3,!1),i=pe(e,"transparent",3,!1),s=_n(e,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const l=fn(),u=gp("EdgeLabel must be used within a Custom Edge component");let v=k(()=>l.visible.edges.get(u)?.zIndex);var p=Np(),m=()=>{o()&&u&&l.handleEdgeSelection(u)};bn(p,w=>({class:["svelte-flow__edge-label",{transparent:i()},e.class],tabindex:"-1",onclick:m,...s,[ia]:w}),[()=>({display:Cp().value?"none":void 0,cursor:o()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${a()??""}px)`,"pointer-events":"all",width:en(e.width),height:en(e.height),"z-index":r(v)})],void 0,void 0,"svelte-1wg91mu");var f=d(p);Dt(f,()=>e.children??tr),c(p),zt(p,(w,N)=>zp?.(w,N),()=>"edge-labels"),y(t,p),Ce()}var Pp=ut("<path></path>"),Tp=ut('<path fill="none"></path><!><!>',1);function _a(t,e){let n=pe(e,"interactionWidth",3,20),a=_n(e,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var o=Tp(),i=de(o),s=h(i);{var l=p=>{var m=Pp();bn(m,()=>({d:e.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...a})),y(p,m)};Y(s,p=>{n()>0&&p(l)})}var u=h(s);{var v=p=>{Mp(p,{get x(){return e.labelX},get y(){return e.labelY},get style(){return e.labelStyle},selectEdgeOnClick:!0,children:(m,f)=>{ye();var w=qs();$(()=>W(w,e.label)),y(m,w)},$$slots:{default:!0}})};Y(u,p=>{e.label&&p(v)})}$(()=>{xe(i,"id",e.id),xe(i,"d",e.path),De(i,0,Rn(["svelte-flow__edge-path",e.class])),xe(i,"marker-start",e.markerStart),xe(i,"marker-end",e.markerEnd),st(i,e.style)}),y(t,o)}function el(t,e){ze(e,!0);let n=k(()=>Bi({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,curvature:e.pathOptions?.curvature})),a=k(()=>dn(r(n),3)),o=k(()=>r(a)[0]),i=k(()=>r(a)[1]),s=k(()=>r(a)[2]);_a(t,{get id(){return e.id},get path(){return r(o)},get labelX(){return r(i)},get labelY(){return r(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ce()}function Ip(t,e){ze(e,!0);let n=k(()=>No({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition})),a=k(()=>dn(r(n),3)),o=k(()=>r(a)[0]),i=k(()=>r(a)[1]),s=k(()=>r(a)[2]);_a(t,{get path(){return r(o)},get labelX(){return r(i)},get labelY(){return r(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ce()}function Ap(t,e){ze(e,!0);let n=k(()=>Ki({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY})),a=k(()=>dn(r(n),3)),o=k(()=>r(a)[0]),i=k(()=>r(a)[1]),s=k(()=>r(a)[2]);_a(t,{get path(){return r(o)},get labelX(){return r(i)},get labelY(){return r(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ce()}function Dp(t,e){ze(e,!0);let n=k(()=>No({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,borderRadius:0})),a=k(()=>dn(r(n),3)),o=k(()=>r(a)[0]),i=k(()=>r(a)[1]),s=k(()=>r(a)[2]);_a(t,{get path(){return r(o)},get labelX(){return r(i)},get labelY(){return r(s)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),Ce()}class Op{#e;#t;constructor(e,n){this.#e=e,this.#t=Vl(n)}get current(){return this.#t(),this.#e()}}const Rp=/\(.+\)/,Lp=new Set(["all","print","screen","and","or","not","only"]);class Hp extends Op{constructor(e,n){let a=Rp.test(e)||e.split(/[\s,]+/).some(i=>Lp.has(i.trim()))?e:`(${e})`;const o=window.matchMedia(a);super(()=>o.matches,i=>qa(o,"change",i))}}function Vp(t,e,n,a){const o=new Map;return Co(t,{x:0,y:0,width:n,height:a},e,!0).forEach(i=>{o.set(i.id,i)}),o}function Is(t){const{edges:e,defaultEdgeOptions:n,nodeLookup:a,previousEdges:o,connectionMode:i,onerror:s,onlyRenderVisible:l,elevateEdgesOnSelect:u,zIndexMode:v}=t,p=new Map;for(const m of e){const f=a.get(m.source),w=a.get(m.target);if(!f||!w)continue;if(l){const{visibleNodes:I,transform:H,width:O,height:F}=t;if(Mf({sourceNode:f,targetNode:w,width:O,height:F,transform:H}))I.set(f.id,f),I.set(w.id,w);else continue}const N=o.get(m.id);if(N&&m===N.edge&&f==N.sourceNode&&w==N.targetNode){p.set(m.id,N);continue}const E=Rf({id:m.id,sourceNode:f,targetNode:w,sourceHandle:m.sourceHandle||null,targetHandle:m.targetHandle||null,connectionMode:i,onError:s});E&&p.set(m.id,{...n,...m,...E,zIndex:Nf({selected:m.selected,zIndex:m.zIndex??n.zIndex,sourceNode:f,targetNode:w,elevateOnSelect:u,zIndexMode:v}),sourceNode:f,targetNode:w,edge:m})}return p}const tl={input:xp,output:kp,default:$i,group:Sp},nl={straight:Ap,smoothstep:Ip,default:el,step:Dp};function Fp(t,e,n,a,o,i){if(e&&!n&&a&&o){const s=xr(i,{filter:l=>!!((l.width||l.initialWidth)&&(l.height||l.initialHeight))});return Eo(s,a,o,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Bp(t){class e{#e=k(()=>t.props.id??"1");get flowId(){return r(this.#e)}set flowId(a){_(this.#e,a)}#t=Q(null);get domNode(){return r(this.#t)}set domNode(a){_(this.#t,a)}#n=Q(null);get panZoom(){return r(this.#n)}set panZoom(a){_(this.#n,a)}#r=Q(t.width??0);get width(){return r(this.#r)}set width(a){_(this.#r,a)}#a=Q(t.height??0);get height(){return r(this.#a)}set height(a){_(this.#a,a)}#o=Q(t.props.zIndexMode??"basic");get zIndexMode(){return r(this.#o)}set zIndexMode(a){_(this.#o,a)}#s=k(()=>{const a=qf(t.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:t.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&a&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),a});get nodesInitialized(){return r(this.#s)}set nodesInitialized(a){_(this.#s,a)}#i=k(()=>this.panZoom!==null);get viewportInitialized(){return r(this.#i)}set viewportInitialized(a){_(this.#i,a)}#l=k(()=>(Xf(this.connectionLookup,this.edgeLookup,t.edges),t.edges));get _edges(){return r(this.#l)}set _edges(a){_(this.#l,a)}get nodes(){return this.nodesInitialized,t.nodes}set nodes(a){t.nodes=a}get edges(){return this._edges}set edges(a){t.edges=a}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#c=k(()=>{const a=this._prevSelectedNodeIds.size,o=new Set,i=this.nodes.filter(s=>(s.selected&&(o.add(s.id),this._prevSelectedNodeIds.delete(s.id)),s.selected));return(a!==o.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=i),this._prevSelectedNodeIds=o,this._prevSelectedNodes});get selectedNodes(){return r(this.#c)}set selectedNodes(a){_(this.#c,a)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#d=k(()=>{const a=this._prevSelectedEdgeIds.size,o=new Set,i=this.edges.filter(s=>(s.selected&&(o.add(s.id),this._prevSelectedEdgeIds.delete(s.id)),s.selected));return(a!==o.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=i),this._prevSelectedEdgeIds=o,this._prevSelectedEdges});get selectedEdges(){return r(this.#d)}set selectedEdges(a){_(this.#d,a)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=k(()=>{const{nodes:a,_edges:o,_prevVisibleEdges:i,nodeLookup:s,connectionMode:l,onerror:u,onlyRenderVisibleElements:v,defaultEdgeOptions:p,zIndexMode:m}=this;let f,w;const N={edges:o,defaultEdgeOptions:p,previousEdges:i,nodeLookup:s,connectionMode:l,elevateEdgesOnSelect:t.props.elevateEdgesOnSelect??!0,zIndexMode:m,onerror:u};if(v){const{viewport:E,width:I,height:H}=this,O=[E.x,E.y,E.zoom];f=Vp(s,O,I,H),w=Is({...N,onlyRenderVisible:!0,visibleNodes:f,transform:O,width:I,height:H})}else f=this.nodeLookup,w=Is(N);return{nodes:f,edges:w}});get visible(){return r(this.#u)}set visible(a){_(this.#u,a)}#v=k(()=>t.props.nodesDraggable??!0);get nodesDraggable(){return r(this.#v)}set nodesDraggable(a){_(this.#v,a)}#f=k(()=>t.props.nodesConnectable??!0);get nodesConnectable(){return r(this.#f)}set nodesConnectable(a){_(this.#f,a)}#p=k(()=>t.props.elementsSelectable??!0);get elementsSelectable(){return r(this.#p)}set elementsSelectable(a){_(this.#p,a)}#h=k(()=>t.props.nodesFocusable??!0);get nodesFocusable(){return r(this.#h)}set nodesFocusable(a){_(this.#h,a)}#g=k(()=>t.props.edgesFocusable??!0);get edgesFocusable(){return r(this.#g)}set edgesFocusable(a){_(this.#g,a)}#m=k(()=>t.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return r(this.#m)}set disableKeyboardA11y(a){_(this.#m,a)}#_=k(()=>t.props.minZoom??.5);get minZoom(){return r(this.#_)}set minZoom(a){_(this.#_,a)}#y=k(()=>t.props.maxZoom??2);get maxZoom(){return r(this.#y)}set maxZoom(a){_(this.#y,a)}#b=k(()=>t.props.nodeOrigin??[0,0]);get nodeOrigin(){return r(this.#b)}set nodeOrigin(a){_(this.#b,a)}#x=k(()=>t.props.nodeExtent??to);get nodeExtent(){return r(this.#x)}set nodeExtent(a){_(this.#x,a)}#w=k(()=>t.props.translateExtent??to);get translateExtent(){return r(this.#w)}set translateExtent(a){_(this.#w,a)}#k=k(()=>t.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return r(this.#k)}set defaultEdgeOptions(a){_(this.#k,a)}#S=k(()=>t.props.nodeDragThreshold??1);get nodeDragThreshold(){return r(this.#S)}set nodeDragThreshold(a){_(this.#S,a)}#z=k(()=>t.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return r(this.#z)}set autoPanOnNodeDrag(a){_(this.#z,a)}#C=k(()=>t.props.autoPanOnConnect??!0);get autoPanOnConnect(){return r(this.#C)}set autoPanOnConnect(a){_(this.#C,a)}#E=k(()=>t.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return r(this.#E)}set autoPanOnNodeFocus(a){_(this.#E,a)}#N=k(()=>t.props.autoPanSpeed??15);get autoPanSpeed(){return r(this.#N)}set autoPanSpeed(a){_(this.#N,a)}#M=k(()=>t.props.connectionDragThreshold??1);get connectionDragThreshold(){return r(this.#M)}set connectionDragThreshold(a){_(this.#M,a)}fitViewQueued=t.props.fitView??!1;fitViewOptions=t.props.fitViewOptions;fitViewResolver=null;#P=k(()=>t.props.snapGrid??null);get snapGrid(){return r(this.#P)}set snapGrid(a){_(this.#P,a)}#T=Q(!1);get dragging(){return r(this.#T)}set dragging(a){_(this.#T,a)}#I=Q(null);get selectionRect(){return r(this.#I)}set selectionRect(a){_(this.#I,a)}#A=Q(!1);get selectionKeyPressed(){return r(this.#A)}set selectionKeyPressed(a){_(this.#A,a)}#D=Q(!1);get multiselectionKeyPressed(){return r(this.#D)}set multiselectionKeyPressed(a){_(this.#D,a)}#O=Q(!1);get deleteKeyPressed(){return r(this.#O)}set deleteKeyPressed(a){_(this.#O,a)}#R=Q(!1);get panActivationKeyPressed(){return r(this.#R)}set panActivationKeyPressed(a){_(this.#R,a)}#L=Q(!1);get zoomActivationKeyPressed(){return r(this.#L)}set zoomActivationKeyPressed(a){_(this.#L,a)}#H=Q(null);get selectionRectMode(){return r(this.#H)}set selectionRectMode(a){_(this.#H,a)}#V=Q("");get ariaLiveMessage(){return r(this.#V)}set ariaLiveMessage(a){_(this.#V,a)}#F=k(()=>t.props.selectionMode??na.Partial);get selectionMode(){return r(this.#F)}set selectionMode(a){_(this.#F,a)}#B=k(()=>({...tl,...t.props.nodeTypes}));get nodeTypes(){return r(this.#B)}set nodeTypes(a){_(this.#B,a)}#q=k(()=>({...nl,...t.props.edgeTypes}));get edgeTypes(){return r(this.#q)}set edgeTypes(a){_(this.#q,a)}#K=k(()=>t.props.noPanClass??"nopan");get noPanClass(){return r(this.#K)}set noPanClass(a){_(this.#K,a)}#j=k(()=>t.props.noDragClass??"nodrag");get noDragClass(){return r(this.#j)}set noDragClass(a){_(this.#j,a)}#Z=k(()=>t.props.noWheelClass??"nowheel");get noWheelClass(){return r(this.#Z)}set noWheelClass(a){_(this.#Z,a)}#Y=k(()=>zf(t.props.ariaLabelConfig));get ariaLabelConfig(){return r(this.#Y)}set ariaLabelConfig(a){_(this.#Y,a)}#W=Q(Fp(this.nodesInitialized,t.props.fitView,t.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return r(this.#W)}set _viewport(a){_(this.#W,a)}get viewport(){return t.viewport??this._viewport}set viewport(a){t.viewport&&(t.viewport=a),this._viewport=a}#X=Q(no);get _connection(){return r(this.#X)}set _connection(a){_(this.#X,a)}#G=k(()=>this._connection.inProgress?{...this._connection,to:kr(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return r(this.#G)}set connection(a){_(this.#G,a)}#U=k(()=>t.props.connectionMode??Qn.Strict);get connectionMode(){return r(this.#U)}set connectionMode(a){_(this.#U,a)}#Q=k(()=>t.props.connectionRadius??20);get connectionRadius(){return r(this.#Q)}set connectionRadius(a){_(this.#Q,a)}#J=k(()=>t.props.isValidConnection??(()=>!0));get isValidConnection(){return r(this.#J)}set isValidConnection(a){_(this.#J,a)}#$=k(()=>t.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return r(this.#$)}set selectNodesOnDrag(a){_(this.#$,a)}#ee=k(()=>t.props.defaultMarkerColor===void 0?"#b1b1b7":t.props.defaultMarkerColor);get defaultMarkerColor(){return r(this.#ee)}set defaultMarkerColor(a){_(this.#ee,a)}#te=k(()=>Lf(t.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return r(this.#te)}set markers(a){_(this.#te,a)}#ne=k(()=>t.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return r(this.#ne)}set onlyRenderVisibleElements(a){_(this.#ne,a)}#re=k(()=>t.props.onflowerror??xf);get onerror(){return r(this.#re)}set onerror(a){_(this.#re,a)}#ae=k(()=>t.props.ondelete);get ondelete(){return r(this.#ae)}set ondelete(a){_(this.#ae,a)}#oe=k(()=>t.props.onbeforedelete);get onbeforedelete(){return r(this.#oe)}set onbeforedelete(a){_(this.#oe,a)}#se=k(()=>t.props.onbeforeconnect);get onbeforeconnect(){return r(this.#se)}set onbeforeconnect(a){_(this.#se,a)}#ie=k(()=>t.props.onconnect);get onconnect(){return r(this.#ie)}set onconnect(a){_(this.#ie,a)}#le=k(()=>t.props.onconnectstart);get onconnectstart(){return r(this.#le)}set onconnectstart(a){_(this.#le,a)}#ce=k(()=>t.props.onconnectend);get onconnectend(){return r(this.#ce)}set onconnectend(a){_(this.#ce,a)}#de=k(()=>t.props.onbeforereconnect);get onbeforereconnect(){return r(this.#de)}set onbeforereconnect(a){_(this.#de,a)}#ue=k(()=>t.props.onreconnect);get onreconnect(){return r(this.#ue)}set onreconnect(a){_(this.#ue,a)}#ve=k(()=>t.props.onreconnectstart);get onreconnectstart(){return r(this.#ve)}set onreconnectstart(a){_(this.#ve,a)}#fe=k(()=>t.props.onreconnectend);get onreconnectend(){return r(this.#fe)}set onreconnectend(a){_(this.#fe,a)}#pe=k(()=>t.props.clickConnect??!0);get clickConnect(){return r(this.#pe)}set clickConnect(a){_(this.#pe,a)}#he=k(()=>t.props.onclickconnectstart);get onclickconnectstart(){return r(this.#he)}set onclickconnectstart(a){_(this.#he,a)}#ge=k(()=>t.props.onclickconnectend);get onclickconnectend(){return r(this.#ge)}set onclickconnectend(a){_(this.#ge,a)}#me=Q(null);get clickConnectStartHandle(){return r(this.#me)}set clickConnectStartHandle(a){_(this.#me,a)}#_e=k(()=>t.props.onselectiondrag);get onselectiondrag(){return r(this.#_e)}set onselectiondrag(a){_(this.#_e,a)}#ye=k(()=>t.props.onselectiondragstart);get onselectiondragstart(){return r(this.#ye)}set onselectiondragstart(a){_(this.#ye,a)}#be=k(()=>t.props.onselectiondragstop);get onselectiondragstop(){return r(this.#be)}set onselectiondragstop(a){_(this.#be,a)}resolveFitView=async()=>{this.panZoom&&(await yf({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new Hp("(prefers-color-scheme: dark)",t.props.colorModeSSR==="dark");#xe=k(()=>t.props.colorMode==="system"?this._prefersDark.current?"dark":"light":t.props.colorMode??"light");get colorMode(){return r(this.#xe)}set colorMode(a){_(this.#xe,a)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=no,this.clickConnectStartHandle=null,this.viewport=t.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new e}function fn(){const t=so(oo);if(!t)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}const oo=Symbol();function qp(t){const e=Bp(t);function n(x){e.nodeTypes={...tl,...x}}function a(x){e.edgeTypes={...nl,...x}}function o(x){e.edges=If(x,e.edges)}const i=(x,S=!1)=>{e.nodes=e.nodes.map(z=>{if(e.connection.inProgress&&e.connection.fromNode.id===z.id){const C=e.nodeLookup.get(z.id);C&&(e.connection={...e.connection,from:Dn(C,e.connection.fromHandle,we.Left,!0)})}const g=x.get(z.id);return g?{...z,position:g.position,dragging:S}:z})};function s(x){const{changes:S,updatedInternals:z}=Yf(x,e.nodeLookup,e.parentLookup,e.domNode,e.nodeOrigin,e.nodeExtent,e.zIndexMode);if(!z)return;Ff(e.nodeLookup,e.parentLookup,{nodeOrigin:e.nodeOrigin,nodeExtent:e.nodeExtent,zIndexMode:e.zIndexMode}),e.fitViewQueued&&e.resolveFitView();const g=new Map;for(const C of S){const T=e.nodeLookup.get(C.id)?.internals.userNode;if(!T)continue;const D={...T};switch(C.type){case"dimensions":{const V={...D.measured,...C.dimensions};C.setAttributes&&(D.width=C.dimensions?.width??D.width,D.height=C.dimensions?.height??D.height),D.measured=V;break}case"position":D.position=C.position??D.position;break}g.set(C.id,D)}e.nodes=e.nodes.map(C=>g.get(C.id)??C)}function l(x){const S=e.fitViewResolver??Promise.withResolvers();return e.fitViewQueued=!0,e.fitViewOptions=x,e.fitViewResolver=S,e.nodes=[...e.nodes],S.promise}async function u(x,S,z){const g=typeof z?.zoom<"u"?z.zoom:e.maxZoom,C=e.panZoom;return C?(await C.setViewport({x:e.width/2-x*g,y:e.height/2-S*g,zoom:g},{duration:z?.duration,ease:z?.ease,interpolate:z?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function v(x,S){const z=e.panZoom;return z?z.scaleBy(x,S):Promise.resolve(!1)}function p(x){return v(1.2,x)}function m(x){return v(1/1.2,x)}function f(x){const S=e.panZoom;S&&(S.setScaleExtent([x,e.maxZoom]),e.minZoom=x)}function w(x){const S=e.panZoom;S&&(S.setScaleExtent([e.minZoom,x]),e.maxZoom=x)}function N(x){const S=e.panZoom;S&&(S.setTranslateExtent(x),e.translateExtent=x)}function E(x,S=null){let z=!1;const g=x.map(C=>(S?S.has(C.id):!0)&&C.selected?(z=!0,{...C,selected:!1}):C);return[z,g]}function I(x){const S=x?.nodes?new Set(x.nodes.map(V=>V.id)):null,[z,g]=E(e.nodes,S);z&&(e.nodes=g);const C=x?.edges?new Set(x.edges.map(V=>V.id)):null,[T,D]=E(e.edges,C);T&&(e.edges=D)}function H(x){const S=e.multiselectionKeyPressed;e.nodes=e.nodes.map(z=>{const g=x.includes(z.id),C=S&&z.selected||g;return!!z.selected!==C?{...z,selected:C}:z}),S||I({nodes:[]})}function O(x){const S=e.multiselectionKeyPressed;e.edges=e.edges.map(z=>{const g=x.includes(z.id),C=S&&z.selected||g;return!!z.selected!==C?{...z,selected:C}:z}),S||I({edges:[]})}function F(x,S,z){const g=e.nodeLookup.get(x);if(!g){console.warn("012",hr.error012(x));return}e.selectionRect=null,e.selectionRectMode=null,g.selected?(S||g.selected&&e.multiselectionKeyPressed)&&(I({nodes:[g],edges:[]}),requestAnimationFrame(()=>z?.blur())):H([x])}function M(x){const S=e.edgeLookup.get(x);if(!S){console.warn("012",hr.error012(x));return}(S.selectable||e.elementsSelectable&&typeof S.selectable>"u")&&(e.selectionRect=null,e.selectionRectMode=null,S.selected?S.selected&&e.multiselectionKeyPressed&&I({nodes:[],edges:[S]}):O([x]))}function R(x,S){const{nodeExtent:z,snapGrid:g,nodeOrigin:C,nodeLookup:T,nodesDraggable:D,onerror:V}=e,L=new Map,q=g?.[0]??5,j=g?.[1]??5,U=x.x*q*S,X=x.y*j*S;for(const J of T.values()){if(!(J.selected&&(J.draggable||D&&typeof J.draggable>"u")))continue;let re={x:J.internals.positionAbsolute.x+U,y:J.internals.positionAbsolute.y+X};g&&(re=wr(re,g));const{position:ie,positionAbsolute:ne}=Ii({nodeId:J.id,nextPosition:re,nodeLookup:T,nodeExtent:z,nodeOrigin:C,onError:V});J.position=ie,J.internals.positionAbsolute=ne,L.set(J.id,J)}i(L)}function b(x){return Wf({delta:x,panZoom:e.panZoom,transform:[e.viewport.x,e.viewport.y,e.viewport.zoom],translateExtent:e.translateExtent,width:e.width,height:e.height})}const A=x=>{e._connection={...x}};function B(){e._connection=no}function K(){e.resetStoreValues(),I()}return Object.assign(e,{setNodeTypes:n,setEdgeTypes:a,addEdge:o,updateNodePositions:i,updateNodeInternals:s,zoomIn:p,zoomOut:m,fitView:l,setCenter:u,setMinZoom:f,setMaxZoom:w,setTranslateExtent:N,unselectNodesAndEdges:I,addSelectedNodes:H,addSelectedEdges:O,handleNodeSelection:F,handleEdgeSelection:M,moveSelectedNodes:R,panBy:b,updateConnection:A,cancelConnection:B,reset:K})}function Kp(t,e){const{minZoom:n,maxZoom:a,initialViewport:o,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:l,translateExtent:u,setPanZoomInstance:v,onDraggingChange:p,onTransformChange:m}=e,f=up({domNode:t,minZoom:n,maxZoom:a,translateExtent:u,viewport:o,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:l,onDraggingChange:p}),w=f.getViewport();return(o.x!==w.x||o.y!==w.y||o.zoom!==w.zoom)&&m([w.x,w.y,w.zoom]),v(f),f.update(e),{update(N){f.update(N)}}}var jp=P('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Zp(t,e){ze(e,!0);let n=pe(e,"store",15),a=k(()=>n().panActivationKeyPressed||e.panOnDrag),o=k(()=>n().panActivationKeyPressed||e.panOnScroll);const{viewport:i}=n();let s=!1;_e(()=>{!s&&n().viewportInitialized&&(e.oninit?.(),s=!0)});var l=jp(),u=d(l);Dt(u,()=>e.children),c(l),zt(l,(v,p)=>Kp?.(v,p),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:i,onDraggingChange:v=>{n(n().dragging=v,!0)},setPanZoomInstance:v=>{n(n().panZoom=v,!0)},onPanZoomStart:e.onmovestart,onPanZoom:e.onmove,onPanZoomEnd:e.onmoveend,zoomOnScroll:e.zoomOnScroll,zoomOnDoubleClick:e.zoomOnDoubleClick,zoomOnPinch:e.zoomOnPinch,panOnScroll:r(o),panOnDrag:r(a),panOnScrollSpeed:e.panOnScrollSpeed,panOnScrollMode:e.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof e.preventScrolling=="boolean"?e.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:e.paneClickDistance,selectionOnDrag:e.selectionOnDrag,onTransformChange:v=>{n(n().viewport={x:v[0],y:v[1],zoom:v[2]},!0)},connectionInProgress:n().connection.inProgress})),y(t,l),Ce()}function As(t,e){return n=>{n.target===e&&t?.(n)}}function Ds(t){return e=>{const n=t.has(e.id);return!!e.selected!==n?{...e,selected:n}:e}}function Os(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}var Yp=P("<div><!></div>");function Wp(t,e){ze(e,!0);let n=pe(e,"store",15),a=pe(e,"panOnDrag",3,!0),o=pe(e,"paneClickDistance",3,1),i,s=null,l=new Set,u=new Set,v=k(()=>n().panActivationKeyPressed||a()),p=k(()=>n().selectionKeyPressed||!!n().selectionRect||e.selectionOnDrag&&r(v)!==!0),m=k(()=>n().elementsSelectable&&(r(p)||n().selectionRectMode==="user")),f=!1;function w(B){if(s=i?.getBoundingClientRect(),!s)return;const K=B.target===i,Z=!K&&!!B.target.closest(".nokey"),x=e.selectionOnDrag&&K||n().selectionKeyPressed;if(Z||!r(p)||!x||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),f=!1;const{x:S,y:z}=qt(B,s);n(n().selectionRect={width:0,height:0,startX:S,startY:z,x:S,y:z},!0),K||(B.stopPropagation(),B.preventDefault())}function N(B){if(!r(p)||!s||!n().selectionRect)return;const K=qt(B,s),{startX:Z=0,startY:x=0}=n().selectionRect;if(!f){const T=n().selectionKeyPressed?0:o();if(Math.hypot(K.x-Z,K.y-x)<=T)return;n().unselectNodesAndEdges(),e.onselectionstart?.(B)}f=!0;const S={...n().selectionRect,x:K.x<Z?K.x:Z,y:K.y<x?K.y:x,width:Math.abs(K.x-Z),height:Math.abs(K.y-x)},z=l,g=u;l=new Set(Co(n().nodeLookup,S,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===na.Partial,!0).map(T=>T.id));const C=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const T of l){const D=n().connectionLookup.get(T);if(D)for(const{edgeId:V}of D.values()){const L=n().edgeLookup.get(V);L&&(L.selectable??C)&&u.add(V)}}Os(z,l)||n(n().nodes=n().nodes.map(Ds(l)),!0),Os(g,u)||n(n().edges=n().edges.map(Ds(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=S,!0)}function E(B){B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!f&&B.target===i&&O?.(B),n(n().selectionRect=null,!0),f&&n(n().selectionRectMode=l.size>0?"nodes":null,!0),f&&e.onselectionend?.(B))}const I=B=>{if(Array.isArray(r(v))&&r(v).includes(2)){B.preventDefault();return}e.onpanecontextmenu?.({event:B})},H=B=>{f&&(B.stopPropagation(),f=!1)};function O(B){if(f||n().connection.inProgress){f=!1;return}e.onpaneclick?.({event:B}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var F=Yp();let M;var R=k(()=>r(m)?void 0:As(O,i)),b=k(()=>As(I,i)),A=d(F);Dt(A,()=>e.children),c(F),yn(F,B=>i=B,()=>i),$(B=>M=De(F,1,"svelte-flow__pane svelte-flow__container",null,M,B),[()=>({draggable:a()===!0||Array.isArray(a())&&a().includes(0),dragging:n().dragging,selection:r(p)})]),be("click",F,function(...B){r(R)?.apply(this,B)}),jr("pointerdown",F,function(...B){(r(m)?w:void 0)?.apply(this,B)},!0),be("pointermove",F,function(...B){(r(m)?N:void 0)?.apply(this,B)}),be("pointerup",F,function(...B){(r(m)?E:void 0)?.apply(this,B)}),be("contextmenu",F,function(...B){r(b)?.apply(this,B)}),jr("click",F,function(...B){(r(m)?H:void 0)?.apply(this,B)},!0),y(t,F),Ce()}_t(["click","pointermove","pointerup","contextmenu"]);var Xp=P('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Gp(t,e){ze(e,!0);var n=Xp();let a;var o=d(n);Dt(o,()=>e.children),c(n),$(()=>a=st(n,"",a,{transform:`translate(${e.store.viewport.x??""}px, ${e.store.viewport.y??""}px) scale(${e.store.viewport.zoom??""})`})),y(t,n),Ce()}function rl(t,e){const{store:n,onDrag:a,onDragStart:o,onDragStop:i,onNodeMouseDown:s}=e,l=Qf({onDrag:a,onDragStart:o,onDragStop:i,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:v,viewport:p}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:v||[0,0],snapToGrid:!!v,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[p.x,p.y,p.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(v,p){if(p.disabled){l.destroy();return}l.update({domNode:v,noDragClassName:p.noDragClass,handleSelector:p.handleSelector,nodeId:p.nodeId,isSelectable:p.isSelectable,nodeClickDistance:p.nodeClickDistance})}return u(t,e),{update(v){u(t,v)},destroy(){l.destroy()}}}var Up=P('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),Qp=P('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function Jp(t,e){ze(e,!0);var n=Qp(),a=de(n),o=d(a,!0);c(a);var i=h(a,2),s=d(i,!0);c(i);var l=h(i,2);{var u=v=>{var p=Up(),m=d(p,!0);c(p),$(()=>{xe(p,"id",`${$p}-${e.store.flowId}`),W(m,e.store.ariaLiveMessage)}),y(v,p)};Y(l,v=>{e.store.disableKeyboardA11y||v(u)})}$(()=>{xe(a,"id",`${al}-${e.store.flowId}`),W(o,e.store.disableKeyboardA11y?e.store.ariaLabelConfig["node.a11yDescription.default"]:e.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),xe(i,"id",`${ol}-${e.store.flowId}`),W(s,e.store.ariaLabelConfig["edge.a11yDescription.default"])}),y(t,n),Ce()}const al="svelte-flow__node-desc",ol="svelte-flow__edge-desc",$p="svelte-flow__aria-live";var eh=P("<div><!></div>");function th(t,e){ze(e,!0);let n=pe(e,"store",15),a=k(()=>St(e.node.data,()=>({}),!0)),o=k(()=>St(e.node.selected,!1)),i=k(()=>e.node.draggable),s=k(()=>e.node.selectable),l=k(()=>St(e.node.deletable,!0)),u=k(()=>e.node.connectable),v=k(()=>e.node.focusable),p=k(()=>St(e.node.hidden,!1)),m=k(()=>St(e.node.dragging,!1)),f=k(()=>St(e.node.style,"")),w=k(()=>e.node.class),N=k(()=>St(e.node.type,"default")),E=k(()=>e.node.parentId),I=k(()=>e.node.sourcePosition),H=k(()=>e.node.targetPosition),O=k(()=>St(e.node.measured,()=>({width:0,height:0}),!0).width),F=k(()=>St(e.node.measured,()=>({width:0,height:0}),!0).height),M=k(()=>e.node.initialWidth),R=k(()=>e.node.initialHeight),b=k(()=>e.node.width),A=k(()=>e.node.height),B=k(()=>e.node.dragHandle),K=k(()=>St(e.node.internals.z,0)),Z=k(()=>e.node.internals.positionAbsolute.x),x=k(()=>e.node.internals.positionAbsolute.y),S=k(()=>e.node.internals.userNode),{id:z}=e.node,g=k(()=>r(i)??n().nodesDraggable),C=k(()=>r(s)??n().elementsSelectable),T=k(()=>r(u)??n().nodesConnectable),D=k(()=>Ri(e.node)),V=k(()=>!!e.node.internals.handleBounds),L=k(()=>r(D)&&r(V)),q=k(()=>r(v)??n().nodesFocusable);function j(fe){return n().parentLookup.has(fe)}let U=k(()=>j(z)),X=Q(null),J=null,ae=r(N),re=r(I),ie=r(H),ne=k(()=>n().nodeTypes[r(N)]??$i),G=k(()=>n().ariaLabelConfig),oe={get value(){return r(T)}};fp(z),hp(oe);let ee=k(()=>{const fe=r(O)===void 0?r(b)??r(M):r(b),ke=r(F)===void 0?r(A)??r(R):r(A);if(!(fe===void 0&&ke===void 0&&r(f)===void 0))return`${r(f)};${fe?`width:${en(fe)};`:""}${ke?`height:${en(ke)};`:""}`});_e(()=>{(r(N)!==ae||r(I)!==re||r(H)!==ie)&&r(X)!==null&&requestAnimationFrame(()=>{r(X)!==null&&n().updateNodeInternals(new Map([[z,{id:z,nodeElement:r(X),force:!0}]]))}),ae=r(N),re=r(I),ie=r(H)}),_e(()=>{e.resizeObserver&&(!r(L)||r(X)!==J)&&(J&&e.resizeObserver.unobserve(J),r(X)&&e.resizeObserver.observe(r(X)),J=r(X))}),On(()=>{J&&e.resizeObserver?.unobserve(J)});function se(fe){r(C)&&(!n().selectNodesOnDrag||!r(g)||n().nodeDragThreshold>0)&&n().handleNodeSelection(z),e.onnodeclick?.({node:r(S),event:fe})}function te(fe){if(!(Vi(fe)||n().disableKeyboardA11y))if(Pi.includes(fe.key)&&r(C)){const ke=fe.key==="Escape";n().handleNodeSelection(z,ke,r(X))}else r(g)&&e.node.selected&&Object.prototype.hasOwnProperty.call(sa,fe.key)&&(fe.preventDefault(),n(n().ariaLiveMessage=r(G)["node.a11yDescription.ariaLiveMessage"]({direction:fe.key.replace("Arrow","").toLowerCase(),x:~~e.node.internals.positionAbsolute.x,y:~~e.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(sa[fe.key],fe.shiftKey?4:1))}const ue=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!r(X)?.matches(":focus-visible"))return;const{width:fe,height:ke,viewport:Ae}=n();Co(new Map([[z,e.node]]),{x:0,y:0,width:fe,height:ke},[Ae.x,Ae.y,Ae.zoom],!0).length>0||n().setCenter(e.node.position.x+(e.node.measured.width??0)/2,e.node.position.y+(e.node.measured.height??0)/2,{zoom:Ae.zoom})};var le=Te(),he=de(le);{var ve=fe=>{var ke=eh();bn(ke,()=>({"data-id":z,class:["svelte-flow__node",`svelte-flow__node-${r(N)}`,r(w)],style:r(ee),onclick:se,onpointerenter:e.onnodepointerenter?ge=>e.onnodepointerenter({node:r(S),event:ge}):void 0,onpointerleave:e.onnodepointerleave?ge=>e.onnodepointerleave({node:r(S),event:ge}):void 0,onpointermove:e.onnodepointermove?ge=>e.onnodepointermove({node:r(S),event:ge}):void 0,oncontextmenu:e.onnodecontextmenu?ge=>e.onnodecontextmenu({node:r(S),event:ge}):void 0,onkeydown:r(q)?te:void 0,onfocus:r(q)?ue:void 0,tabIndex:r(q)?0:void 0,role:e.node.ariaRole??(r(q)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${al}-${n().flowId}`,...e.node.domAttributes,[lo]:{dragging:r(m),selected:r(o),draggable:r(g),connectable:r(T),selectable:r(C),nopan:r(g),parent:r(U)},[ia]:{"z-index":r(K),transform:`translate(${r(Z)??""}px, ${r(x)??""}px)`,visibility:r(D)?"visible":"hidden"}}));var Ae=d(ke);un(Ae,()=>r(ne),(ge,Oe)=>{Oe(ge,{get data(){return r(a)},get id(){return z},get selected(){return r(o)},get selectable(){return r(C)},get deletable(){return r(l)},get sourcePosition(){return r(I)},get targetPosition(){return r(H)},get zIndex(){return r(K)},get dragging(){return r(m)},get draggable(){return r(g)},get dragHandle(){return r(B)},get parentId(){return r(E)},get type(){return r(N)},get isConnectable(){return r(T)},get positionAbsoluteX(){return r(Z)},get positionAbsoluteY(){return r(x)},get width(){return r(b)},get height(){return r(A)}})}),c(ke),zt(ke,(ge,Oe)=>rl?.(ge,Oe),()=>({nodeId:z,isSelectable:r(C),disabled:!r(g),handleSelector:r(B),noDragClass:n().noDragClass,nodeClickDistance:e.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(ge,Oe,Ze,Xe)=>{e.onnodedrag?.({event:ge,targetNode:Ze,nodes:Xe})},onDragStart:(ge,Oe,Ze,Xe)=>{e.onnodedragstart?.({event:ge,targetNode:Ze,nodes:Xe})},onDragStop:(ge,Oe,Ze,Xe)=>{e.onnodedragstop?.({event:ge,targetNode:Ze,nodes:Xe})},store:n()})),yn(ke,ge=>_(X,ge),()=>r(X)),y(fe,ke)};Y(he,fe=>{r(p)||fe(ve)})}y(t,le),Ce()}var nh=P('<div class="svelte-flow__nodes"></div>');function rh(t,e){ze(e,!0);let n=pe(e,"store",15);const a=typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const s=new Map;i.forEach(l=>{const u=l.target.getAttribute("data-id");s.set(u,{id:u,nodeElement:l.target,force:!0})}),n().updateNodeInternals(s)});On(()=>{a?.disconnect()});var o=nh();je(o,21,()=>n().visible.nodes.values(),i=>i.id,(i,s)=>{th(i,{get node(){return r(s)},get resizeObserver(){return a},get nodeClickDistance(){return e.nodeClickDistance},get onnodeclick(){return e.onnodeclick},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get onnodecontextmenu(){return e.onnodecontextmenu},get store(){return n()},set store(l){n(l)}})}),c(o),y(t,o),Ce()}var ah=ut('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function oh(t,e){ze(e,!0);let n=k(()=>e.edge.id),a=k(()=>e.edge.source),o=k(()=>e.edge.target),i=k(()=>e.edge.sourceX),s=k(()=>e.edge.sourceY),l=k(()=>e.edge.targetX),u=k(()=>e.edge.targetY),v=k(()=>e.edge.sourcePosition),p=k(()=>e.edge.targetPosition),m=k(()=>St(e.edge.animated,!1)),f=k(()=>St(e.edge.selected,!1)),w=k(()=>e.edge.label),N=k(()=>e.edge.labelStyle),E=k(()=>St(e.edge.data,()=>({}),!0)),I=k(()=>e.edge.style),H=k(()=>e.edge.interactionWidth),O=k(()=>St(e.edge.type,"default")),F=k(()=>e.edge.sourceHandle),M=k(()=>e.edge.targetHandle),R=k(()=>e.edge.markerStart),b=k(()=>e.edge.markerEnd),A=k(()=>e.edge.selectable),B=k(()=>e.edge.focusable),K=k(()=>St(e.edge.deletable,!0)),Z=k(()=>e.edge.hidden),x=k(()=>e.edge.zIndex),S=k(()=>e.edge.class),z=k(()=>e.edge.ariaLabel);mp(r(n));let g=null,C=k(()=>r(A)??e.store.elementsSelectable),T=k(()=>r(B)??e.store.edgesFocusable),D=k(()=>e.store.edgeTypes[r(O)]??el),V=k(()=>r(R)?`url('#${ao(r(R),e.store.flowId)}')`:void 0),L=k(()=>r(b)?`url('#${ao(r(b),e.store.flowId)}')`:void 0);function q(re){const ie=e.store.edgeLookup.get(r(n));ie&&(r(C)&&e.store.handleEdgeSelection(r(n)),e.onedgeclick?.({event:re,edge:ie}))}function j(re,ie){const ne=e.store.edgeLookup.get(r(n));ne&&ie({event:re,edge:ne})}function U(re){if(!e.store.disableKeyboardA11y&&Pi.includes(re.key)&&r(C)){const{unselectNodesAndEdges:ie,addSelectedEdges:ne}=e.store;re.key==="Escape"?(g?.blur(),ie({edges:[e.edge]})):ne([r(n)])}}var X=Te(),J=de(X);{var ae=re=>{var ie=ah();let ne;var G=d(ie);bn(G,()=>({class:["svelte-flow__edge",r(S)],"data-id":r(n),onclick:q,oncontextmenu:e.onedgecontextmenu?ee=>{j(ee,e.onedgecontextmenu)}:void 0,onpointerenter:e.onedgepointerenter?ee=>{j(ee,e.onedgepointerenter)}:void 0,onpointerleave:e.onedgepointerleave?ee=>{j(ee,e.onedgepointerleave)}:void 0,"aria-label":r(z)===null?void 0:r(z)?r(z):`Edge from ${r(a)} to ${r(o)}`,"aria-describedby":r(T)?`${ol}-${e.store.flowId}`:void 0,role:e.edge.ariaRole??(r(T)?"group":"img"),"aria-roledescription":"edge",onkeydown:r(T)?U:void 0,tabindex:r(T)?0:void 0,...e.edge.domAttributes,[lo]:{animated:r(m),selected:r(f),selectable:r(C)}}));var oe=d(G);un(oe,()=>r(D),(ee,se)=>{se(ee,{get id(){return r(n)},get source(){return r(a)},get target(){return r(o)},get sourceX(){return r(i)},get sourceY(){return r(s)},get targetX(){return r(l)},get targetY(){return r(u)},get sourcePosition(){return r(v)},get targetPosition(){return r(p)},get animated(){return r(m)},get selected(){return r(f)},get label(){return r(w)},get labelStyle(){return r(N)},get data(){return r(E)},get style(){return r(I)},get interactionWidth(){return r(H)},get selectable(){return r(C)},get deletable(){return r(K)},get type(){return r(O)},get sourceHandleId(){return r(F)},get targetHandleId(){return r(M)},get markerStart(){return r(V)},get markerEnd(){return r(L)}})}),c(G),yn(G,ee=>g=ee,()=>g),c(ie),$(()=>ne=st(ie,"",ne,{"z-index":r(x)})),y(re,ie)};Y(J,re=>{r(Z)||re(ae)})}y(t,X),Ce()}var sh=ut("<defs></defs>");function ih(t,e){ze(e,!1);const n=fn();Ls();var a=sh();je(a,5,()=>n.markers,o=>o.id,(o,i)=>{uh(o,We(()=>r(i)))}),c(a),y(t,a),Ce()}var lh=ut('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),ch=ut('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),dh=ut('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function uh(t,e){ze(e,!0);let n=pe(e,"width",3,12.5),a=pe(e,"height",3,12.5),o=pe(e,"markerUnits",3,"strokeWidth"),i=pe(e,"orient",3,"auto-start-reverse"),s=pe(e,"color",3,"none");var l=dh(),u=d(l);{var v=m=>{var f=lh();let w;$(()=>{xe(f,"stroke-width",e.strokeWidth),w=st(f,"",w,{stroke:s()})}),y(m,f)},p=m=>{var f=ch();let w;$(()=>{xe(f,"stroke-width",e.strokeWidth),w=st(f,"",w,{stroke:s(),fill:s()})}),y(m,f)};Y(u,m=>{e.type===ra.Arrow?m(v):e.type===ra.ArrowClosed&&m(p,1)})}c(l),$(()=>{xe(l,"id",e.id),xe(l,"markerWidth",`${n()}`),xe(l,"markerHeight",`${a()}`),xe(l,"markerUnits",o()),xe(l,"orient",i())}),y(t,l),Ce()}var vh=P('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function fh(t,e){ze(e,!0);let n=pe(e,"store",15);var a=vh(),o=d(a),i=d(o);ih(i,{}),c(o);var s=h(o,2);je(s,17,()=>n().visible.edges.values(),l=>l.id,(l,u)=>{oh(l,{get edge(){return r(u)},get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return n()},set store(v){n(v)}})}),c(a),y(t,a),Ce()}var ph=P('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function sl(t,e){ze(e,!0);let n=pe(e,"x",3,0),a=pe(e,"y",3,0),o=pe(e,"width",3,0),i=pe(e,"height",3,0),s=pe(e,"isVisible",3,!0);var l=Te(),u=de(l);{var v=p=>{var m=ph();let f;$(w=>f=st(m,"",f,w),[()=>({width:typeof o()=="string"?o():en(o()),height:typeof i()=="string"?i():en(i()),transform:`translate(${n()}px, ${a()}px)`})]),y(p,m)};Y(u,p=>{s()&&p(v)})}y(t,l),Ce()}var hh=P("<div><!></div>");function gh(t,e){ze(e,!0);let n=Q(void 0);_e(()=>{e.store.disableKeyboardA11y||r(n)?.focus({preventScroll:!0})});let a=k(()=>{if(e.store.selectionRectMode==="nodes"){e.store.nodes;const m=xr(e.store.nodeLookup,{filter:f=>!!f.selected});if(m.width>0&&m.height>0)return m}return null});function o(m){const f=e.store.nodes.filter(w=>w.selected);e.onselectioncontextmenu?.({nodes:f,event:m})}function i(m){const f=e.store.nodes.filter(w=>w.selected);e.onselectionclick?.({nodes:f,event:m})}function s(m){Object.prototype.hasOwnProperty.call(sa,m.key)&&(m.preventDefault(),e.store.moveSelectedNodes(sa[m.key],m.shiftKey?4:1))}var l=Te(),u=de(l);{var v=m=>{var f=hh();let w;var N=d(f);sl(N,{width:"100%",height:"100%",x:0,y:0}),c(f),zt(f,(E,I)=>rl?.(E,I),()=>({disabled:!1,store:e.store,onDrag:(E,I,H,O)=>{e.onnodedrag?.({event:E,targetNode:null,nodes:O})},onDragStart:(E,I,H,O)=>{e.onnodedragstart?.({event:E,targetNode:null,nodes:O})},onDragStop:(E,I,H,O)=>{e.onnodedragstop?.({event:E,targetNode:null,nodes:O})}})),yn(f,E=>_(n,E),()=>r(n)),$(E=>{De(f,1,Rn(["svelte-flow__selection-wrapper",e.store.noPanClass]),"svelte-sf2y5e"),xe(f,"role",e.store.disableKeyboardA11y?void 0:"button"),xe(f,"tabindex",e.store.disableKeyboardA11y?void 0:-1),w=st(f,"",w,E)},[()=>({width:en(r(a).width),height:en(r(a).height),transform:`translate(${r(a).x??""}px, ${r(a).y??""}px)`})]),be("contextmenu",f,o),be("click",f,i),be("keydown",f,function(...E){(e.store.disableKeyboardA11y?void 0:s)?.apply(this,E)}),y(m,f)},p=k(()=>e.store.selectionRectMode==="nodes"&&r(a)&&ln(r(a).x)&&ln(r(a).y));Y(u,m=>{r(p)&&m(v)})}y(t,l),Ce()}_t(["contextmenu","click","keydown"]);function mh(t){switch(t){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Gt(t,e){let{enabled:n=!0,trigger:a,type:o="keydown"}=e;function i(l){const u=Array.isArray(a)?a:[a],v=[l.metaKey,l.altKey,l.shiftKey,l.ctrlKey].reduce((p,m,f)=>m?p|1<<f:p,0);for(const p of u){const m={preventDefault:!1,enabled:!0,...p},{modifier:f,key:w,callback:N,preventDefault:E,enabled:I}=m;if(I){if(l.key!==w)continue;if(f===null||f===!1){if(v!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const O=Array.isArray(f)?f:[f];let F=!1;for(const M of O)if((Array.isArray(M)?M:[M]).reduce((b,A)=>b|mh(A),0)===v){F=!0;break}if(!F)continue}E&&l.preventDefault();const H={node:t,trigger:m,originalEvent:l};t.dispatchEvent(new CustomEvent("shortcut",{detail:H})),N?.(H)}}}let s;return n&&(s=qa(t,o,i)),{update:l=>{const{enabled:u=!0,type:v="keydown"}=l;n&&(!u||o!==v)?s?.():!n&&u&&(s=qa(t,v,i)),n=u,o=v,a=l.trigger},destroy:()=>{s?.()}}}function _h(){const t=k(fn),e=i=>{const s=Ts(i)?i:r(t).nodeLookup.get(i.id),l=s.parentId?Sf(s.position,s.measured,s.parentId,r(t).nodeLookup,r(t).nodeOrigin):s.position,u={...s,position:l,width:s.measured?.width??s.width,height:s.measured?.height??s.height};return $n(u)};function n(i,s,l={replace:!1}){r(t).nodes=Qt(()=>r(t).nodes).map(u=>{if(u.id===i){const v=typeof s=="function"?s(u):s;return l?.replace&&Ts(v)?v:{...u,...v}}return u})}function a(i,s,l={replace:!1}){r(t).edges=Qt(()=>r(t).edges).map(u=>{if(u.id===i){const v=typeof s=="function"?s(u):s;return l.replace&&Ep(v)?v:{...u,...v}}return u})}const o=i=>r(t).nodeLookup.get(i);return{zoomIn:r(t).zoomIn,zoomOut:r(t).zoomOut,getInternalNode:o,getNode:i=>o(i)?.internals.userNode,getNodes:i=>i===void 0?r(t).nodes:Rs(r(t).nodeLookup,i),getEdge:i=>r(t).edgeLookup.get(i),getEdges:i=>i===void 0?r(t).edges:Rs(r(t).edgeLookup,i),setZoom:(i,s)=>{const l=r(t).panZoom;return l?l.scaleTo(i,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>r(t).viewport.zoom,setViewport:async(i,s)=>{const l=r(t).viewport;return r(t).panZoom?(await r(t).panZoom.setViewport({x:i.x??l.x,y:i.y??l.y,zoom:i.zoom??l.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>$s(r(t).viewport),setCenter:async(i,s,l)=>r(t).setCenter(i,s,l),fitView:i=>r(t).fitView(i),fitBounds:async(i,s)=>{if(!r(t).panZoom)return Promise.resolve(!1);const l=Eo(i,r(t).width,r(t).height,r(t).minZoom,r(t).maxZoom,s?.padding??.1);return await r(t).panZoom.setViewport(l,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(i,s=!0,l)=>{const u=ys(i),v=u?i:e(i);return v?(l||r(t).nodes).filter(p=>{const m=r(t).nodeLookup.get(p.id);if(!m||!u&&p.id===i.id)return!1;const f=$n(m),w=gr(f,v);return s&&w>0||w>=f.width*f.height||w>=v.width*v.height}):[]},isNodeIntersecting:(i,s,l=!0)=>{const v=ys(i)?i:e(i);if(!v)return!1;const p=gr(v,s);return l&&p>0||p>=s.width*s.height||p>=v.width*v.height},deleteElements:async({nodes:i=[],edges:s=[]})=>{const{nodes:l,edges:u}=await bf({nodesToRemove:i,edgesToRemove:s,nodes:r(t).nodes,edges:r(t).edges,onBeforeDelete:r(t).onbeforedelete});return l&&(r(t).nodes=Qt(()=>r(t).nodes).filter(v=>!l.some(({id:p})=>p===v.id))),u&&(r(t).edges=Qt(()=>r(t).edges).filter(v=>!u.some(({id:p})=>p===v.id))),(l.length>0||u.length>0)&&r(t).ondelete?.({nodes:l,edges:u}),{deletedNodes:l,deletedEdges:u}},screenToFlowPosition:(i,s={snapToGrid:!0})=>{if(!r(t).domNode)return i;const l=s.snapToGrid?r(t).snapGrid:!1,{x:u,y:v,zoom:p}=r(t).viewport,{x:m,y:f}=r(t).domNode.getBoundingClientRect(),w={x:i.x-m,y:i.y-f};return kr(w,[u,v,p],l!==null,l||[1,1])},flowToScreenPosition:i=>{if(!r(t).domNode)return i;const{x:s,y:l,zoom:u}=r(t).viewport,{x:v,y:p}=r(t).domNode.getBoundingClientRect(),m=oa(i,[s,l,u]);return{x:m.x+v,y:m.y+p}},toObject:()=>structuredClone({nodes:[...r(t).nodes],edges:[...r(t).edges],viewport:{...r(t).viewport}}),updateNode:n,updateNodeData:(i,s,l)=>{const u=r(t).nodeLookup.get(i)?.internals.userNode;if(!u)return;const v=typeof s=="function"?s(u):s;n(i,p=>({...p,data:l?.replace?v:{...p.data,...v}}))},updateEdge:a,getNodesBounds:i=>gf(i,{nodeLookup:r(t).nodeLookup,nodeOrigin:r(t).nodeOrigin}),getHandleConnections:({type:i,id:s,nodeId:l})=>Array.from(r(t).connectionLookup.get(`${l}-${i}-${s??null}`)?.values()??[])}}function Rs(t,e){const n=[];for(const a of e){const o=t.get(a);if(o){const i="internals"in o?o.internals?.userNode:o;n.push(i)}}return n}function yh(t,e){ze(e,!0);let n=pe(e,"store",15),a=pe(e,"selectionKey",3,"Shift"),o=pe(e,"multiSelectionKey",19,()=>mr()?"Meta":"Control"),i=pe(e,"deleteKey",3,"Backspace"),s=pe(e,"panActivationKey",3," "),l=pe(e,"zoomActivationKey",19,()=>mr()?"Meta":"Control"),{deleteElements:u}=_h();function v(E){return E!==null&&typeof E=="object"}function p(E){return v(E)?E.modifier||[]:[]}function m(E){return E==null?"":v(E)?E.key:E}function f(E,I){return(Array.isArray(E)?E:[E]).map(O=>{const F=m(O);return{key:F,modifier:p(O),enabled:F!==null,callback:I}})}function w(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function N(){const E=n().nodes.filter(H=>H.selected),I=n().edges.filter(H=>H.selected);u({nodes:E,edges:I})}jr("blur",It,w),jr("contextmenu",It,w),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(a(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(a(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(o(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(o(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(i(),E=>{!(E.originalEvent.ctrlKey||E.originalEvent.metaKey||E.originalEvent.shiftKey)&&!Vi(E.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),N())}),type:"keydown"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(i(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(l(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),zt(It,(E,I)=>Gt?.(E,I),()=>({trigger:f(l(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Ce()}var bh=ut('<path fill="none" class="svelte-flow__connection-path"></path>'),xh=ut('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function wh(t,e){ze(e,!0);let n=k(()=>{if(!e.store.connection.inProgress)return"";const s={sourceX:e.store.connection.from.x,sourceY:e.store.connection.from.y,sourcePosition:e.store.connection.fromPosition,targetX:e.store.connection.to.x,targetY:e.store.connection.to.y,targetPosition:e.store.connection.toPosition};switch(e.type){case gn.Bezier:{const[l]=Bi(s);return l}case gn.Straight:{const[l]=Ki(s);return l}case gn.Step:case gn.SmoothStep:{const[l]=No({...s,borderRadius:e.type===gn.Step?0:void 0});return l}}});var a=Te(),o=de(a);{var i=s=>{var l=xh(),u=d(l),v=d(u);{var p=f=>{var w=Te(),N=de(w);un(N,()=>e.LineComponent,(E,I)=>{I(E,{})}),y(f,w)},m=f=>{var w=bh();$(()=>{xe(w,"d",r(n)),st(w,e.style)}),y(f,w)};Y(v,f=>{e.LineComponent?f(p):f(m,!1)})}c(u),c(l),$(f=>{xe(l,"width",e.store.width),xe(l,"height",e.store.height),st(l,e.containerStyle),De(u,0,f)},[()=>Rn(["svelte-flow__connection",pf(e.store.connection.isValid)])]),y(s,l)};Y(o,s=>{e.store.connection.inProgress&&s(i)})}y(t,a),Ce()}var kh=P("<div><!></div>");function Do(t,e){ze(e,!0);let n=pe(e,"position",3,"top-right"),a=_n(e,["$$slots","$$events","$$legacy","position","style","class","children"]),o=k(()=>`${n()}`.split("-"));var i=kh();bn(i,l=>({class:l,style:e.style,...a}),[()=>["svelte-flow__panel",e.class,...r(o)]]);var s=d(i);Dt(s,()=>e.children??tr),c(i),y(t,i),Ce()}var Sh=P('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function zh(t,e){ze(e,!0);let n=pe(e,"position",3,"bottom-right");var a=Te(),o=de(a);{var i=s=>{Do(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,u)=>{var v=Sh();y(l,v)},$$slots:{default:!0}})};Y(o,s=>{e.proOptions?.hideAttribution||s(i)})}y(t,a),Ce()}var Ch=P("<div><!></div>");function Eh(t,e){ze(e,!0);let n=pe(e,"domNode",15),a=pe(e,"clientWidth",15),o=pe(e,"clientHeight",15),i=k(()=>e.rest.class),s=k(()=>Fl(e.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function l(p){p.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),e.rest.onscroll&&e.rest.onscroll(p)}var u=Ch();bn(u,p=>({class:["svelte-flow","svelte-flow__container",r(i),e.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:l,...r(s),[ia]:p}),[()=>({width:en(e.width),height:en(e.height)})],void 0,void 0,"svelte-mkap6j");var v=d(u);Dt(v,()=>e.children??tr),c(u),yn(u,p=>n(p),()=>n()),Qo(u,"clientHeight",o),Qo(u,"clientWidth",a),y(t,u),Ce()}var Nh=P('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),Mh=P("<!> <!>",1),Ph=P("<!> <!> <!> <!> <!>",1);function Th(t,e){ze(e,!0);let n=pe(e,"paneClickDistance",3,1),a=pe(e,"nodeClickDistance",3,1),o=pe(e,"panOnScrollMode",19,()=>Yn.Free),i=pe(e,"preventScrolling",3,!0),s=pe(e,"zoomOnScroll",3,!0),l=pe(e,"zoomOnDoubleClick",3,!0),u=pe(e,"zoomOnPinch",3,!0),v=pe(e,"panOnScroll",3,!1),p=pe(e,"panOnScrollSpeed",3,.5),m=pe(e,"panOnDrag",3,!0),f=pe(e,"selectionOnDrag",3,!1),w=pe(e,"connectionLineType",19,()=>gn.Bezier),N=pe(e,"nodes",31,()=>$t([])),E=pe(e,"edges",31,()=>$t([])),I=pe(e,"viewport",15,void 0),H=_n(e,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),O=qp({props:H,width:e.width,height:e.height,get nodes(){return N()},set nodes(M){N(M)},get edges(){return E()},set edges(M){E(M)},get viewport(){return I()},set viewport(M){I(M)}});const F=so(oo);F&&F.setStore&&F.setStore(O),Fs(oo,{provider:!1,getStore(){return O}}),_e(()=>{const M={nodes:O.selectedNodes,edges:O.selectedEdges};Qt(()=>e.onselectionchange)?.(M);for(const R of O.selectionChangeHandlers.values())R(M)}),On(()=>{O.reset()}),Eh(t,{get colorMode(){return O.colorMode},get width(){return e.width},get height(){return e.height},get rest(){return H},get domNode(){return O.domNode},set domNode(M){O.domNode=M},get clientWidth(){return O.width},set clientWidth(M){O.width=M},get clientHeight(){return O.height},set clientHeight(M){O.height=M},children:(M,R)=>{var b=Ph(),A=de(b);yh(A,{get selectionKey(){return e.selectionKey},get deleteKey(){return e.deleteKey},get panActivationKey(){return e.panActivationKey},get multiSelectionKey(){return e.multiSelectionKey},get zoomActivationKey(){return e.zoomActivationKey},get store(){return O},set store(S){O=S}});var B=h(A,2);Zp(B,{get panOnScrollMode(){return o()},get preventScrolling(){return i()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return l()},get zoomOnPinch(){return u()},get panOnScroll(){return v()},get panOnScrollSpeed(){return p()},get panOnDrag(){return m()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get onmovestart(){return e.onmovestart},get onmove(){return e.onmove},get onmoveend(){return e.onmoveend},get oninit(){return e.oninit},get store(){return O},set store(S){O=S},children:(S,z)=>{Wp(S,{get onpaneclick(){return e.onpaneclick},get onpanecontextmenu(){return e.onpanecontextmenu},get onselectionstart(){return e.onselectionstart},get onselectionend(){return e.onselectionend},get panOnDrag(){return m()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get store(){return O},set store(g){O=g},children:(g,C)=>{var T=Mh(),D=de(T);Gp(D,{get store(){return O},set store(L){O=L},children:(L,q)=>{var j=Nh(),U=h(de(j),2);fh(U,{get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return O},set store(re){O=re}});var X=h(U,4);wh(X,{get type(){return w()},get LineComponent(){return e.connectionLineComponent},get containerStyle(){return e.connectionLineContainerStyle},get style(){return e.connectionLineStyle},get store(){return O},set store(re){O=re}});var J=h(X,2);rh(J,{get nodeClickDistance(){return a()},get onnodeclick(){return e.onnodeclick},get onnodecontextmenu(){return e.onnodecontextmenu},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return O},set store(re){O=re}});var ae=h(J,2);gh(ae,{get onselectionclick(){return e.onselectionclick},get onselectioncontextmenu(){return e.onselectioncontextmenu},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return O},set store(re){O=re}}),ye(2),y(L,j)},$$slots:{default:!0}});var V=h(D,2);{let L=k(()=>!!(O.selectionRect&&O.selectionRectMode==="user")),q=k(()=>O.selectionRect?.width),j=k(()=>O.selectionRect?.height),U=k(()=>O.selectionRect?.x),X=k(()=>O.selectionRect?.y);sl(V,{get isVisible(){return r(L)},get width(){return r(q)},get height(){return r(j)},get x(){return r(U)},get y(){return r(X)}})}y(g,T)},$$slots:{default:!0}})},$$slots:{default:!0}});var K=h(B,2);zh(K,{get proOptions(){return e.proOptions},get position(){return e.attributionPosition}});var Z=h(K,2);Jp(Z,{get store(){return O}});var x=h(Z,2);Dt(x,()=>e.children??tr),y(M,b)},$$slots:{default:!0}}),Ce()}var Ih=P("<button><!></button>");function Lr(t,e){let n=_n(e,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var a=Ih();bn(a,()=>({type:"button",onclick:e.onclick,class:["svelte-flow__controls-button",e.class],...n,[ia]:{"--xy-controls-button-background-color-props":e.bgColor,"--xy-controls-button-background-color-hover-props":e.bgColorHover,"--xy-controls-button-color-props":e.color,"--xy-controls-button-color-hover-props":e.colorHover,"--xy-controls-button-border-color-props":e.borderColor}}));var o=d(a);Dt(o,()=>e.children??tr),c(a),y(t,a)}var Ah=ut('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function Dh(t){var e=Ah();y(t,e)}var Oh=ut('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function Rh(t){var e=Oh();y(t,e)}var Lh=ut('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function Hh(t){var e=Lh();y(t,e)}var Vh=ut('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function Fh(t){var e=Vh();y(t,e)}var Bh=ut('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function qh(t){var e=Bh();y(t,e)}var Kh=P("<!> <!>",1),jh=P("<!> <!> <!> <!> <!> <!>",1);function Zh(t,e){ze(e,!0);let n=pe(e,"position",3,"bottom-left"),a=pe(e,"orientation",3,"vertical"),o=pe(e,"showZoom",3,!0),i=pe(e,"showFitView",3,!0),s=pe(e,"showLock",3,!0),l=_n(e,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=k(fn);const v={bgColor:e.buttonBgColor,bgColorHover:e.buttonBgColorHover,color:e.buttonColor,colorHover:e.buttonColorHover,borderColor:e.buttonBorderColor};let p=k(()=>r(u).nodesDraggable||r(u).nodesConnectable||r(u).elementsSelectable),m=k(()=>r(u).viewport.zoom<=r(u).minZoom),f=k(()=>r(u).viewport.zoom>=r(u).maxZoom),w=k(()=>r(u).ariaLabelConfig),N=k(()=>a()==="horizontal"?"horizontal":"vertical");const E=()=>{r(u).zoomIn()},I=()=>{r(u).zoomOut()},H=()=>{r(u).fitView(e.fitViewOptions)},O=()=>{let F=!r(p);r(u).nodesDraggable=F,r(u).nodesConnectable=F,r(u).elementsSelectable=F};{let F=k(()=>["svelte-flow__controls",r(N),e.class]);Do(t,We({get class(){return r(F)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return r(w)["controls.ariaLabel"]},get style(){return e.style}},()=>l,{children:(M,R)=>{var b=jh(),A=de(b);{var B=L=>{var q=Te(),j=de(q);Dt(j,()=>e.before),y(L,q)};Y(A,L=>{e.before&&L(B)})}var K=h(A,2);{var Z=L=>{var q=Kh(),j=de(q);Lr(j,We({onclick:E,class:"svelte-flow__controls-zoomin",get title(){return r(w)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return r(w)["controls.zoomIn.ariaLabel"]},get disabled(){return r(f)}},()=>v,{children:(X,J)=>{Dh(X)},$$slots:{default:!0}}));var U=h(j,2);Lr(U,We({onclick:I,class:"svelte-flow__controls-zoomout",get title(){return r(w)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return r(w)["controls.zoomOut.ariaLabel"]},get disabled(){return r(m)}},()=>v,{children:(X,J)=>{Rh(X)},$$slots:{default:!0}})),y(L,q)};Y(K,L=>{o()&&L(Z)})}var x=h(K,2);{var S=L=>{Lr(L,We({class:"svelte-flow__controls-fitview",onclick:H,get title(){return r(w)["controls.fitView.ariaLabel"]},get"aria-label"(){return r(w)["controls.fitView.ariaLabel"]}},()=>v,{children:(q,j)=>{Hh(q)},$$slots:{default:!0}}))};Y(x,L=>{i()&&L(S)})}var z=h(x,2);{var g=L=>{Lr(L,We({class:"svelte-flow__controls-interactive",onclick:O,get title(){return r(w)["controls.interactive.ariaLabel"]},get"aria-label"(){return r(w)["controls.interactive.ariaLabel"]}},()=>v,{children:(q,j)=>{var U=Te(),X=de(U);{var J=re=>{qh(re)},ae=re=>{Fh(re)};Y(X,re=>{r(p)?re(J):re(ae,!1)})}y(q,U)},$$slots:{default:!0}}))};Y(z,L=>{s()&&L(g)})}var C=h(z,2);{var T=L=>{var q=Te(),j=de(q);Dt(j,()=>e.children),y(L,q)};Y(C,L=>{e.children&&L(T)})}var D=h(C,2);{var V=L=>{var q=Te(),j=de(q);Dt(j,()=>e.after),y(L,q)};Y(D,L=>{e.after&&L(V)})}y(M,b)},$$slots:{default:!0}}))}Ce()}var cn;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(cn||(cn={}));var Yh=ut("<circle></circle>");function Wh(t,e){var n=Yh();$(()=>{xe(n,"cx",e.radius),xe(n,"cy",e.radius),xe(n,"r",e.radius),De(n,0,Rn(["svelte-flow__background-pattern","dots",e.class]))}),y(t,n)}var Xh=ut("<path></path>");function Gh(t,e){ze(e,!0);var n=Xh();$(()=>{xe(n,"stroke-width",e.lineWidth),xe(n,"d",`M${e.dimensions[0]/2} 0 V${e.dimensions[1]} M0 ${e.dimensions[1]/2} H${e.dimensions[0]}`),De(n,0,Rn(["svelte-flow__background-pattern",e.variant,e.class]))}),y(t,n),Ce()}const Uh={[cn.Dots]:1,[cn.Lines]:1,[cn.Cross]:6};var Qh=ut('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Jh(t,e){ze(e,!0);let n=pe(e,"variant",19,()=>cn.Dots),a=pe(e,"gap",3,20),o=pe(e,"lineWidth",3,1),i=k(fn),s=k(()=>n()===cn.Dots),l=k(()=>n()===cn.Cross),u=k(()=>Array.isArray(a())?a():[a(),a()]),v=k(()=>`background-pattern-${r(i).flowId}-${e.id??""}`),p=k(()=>[r(u)[0]*r(i).viewport.zoom||1,r(u)[1]*r(i).viewport.zoom||1]),m=k(()=>(e.size??Uh[n()])*r(i).viewport.zoom),f=k(()=>r(l)?[r(m),r(m)]:r(p)),w=k(()=>r(s)?[r(m)/2,r(m)/2]:[r(f)[0]/2,r(f)[1]/2]);var N=Qh();let E;var I=d(N),H=d(I);{var O=R=>{{let b=k(()=>r(m)/2);Wh(R,{get radius(){return r(b)},get class(){return e.patternClass}})}},F=R=>{Gh(R,{get dimensions(){return r(f)},get variant(){return n()},get lineWidth(){return o()},get class(){return e.patternClass}})};Y(H,R=>{r(s)?R(O):R(F,!1)})}c(I);var M=h(I);c(N),$(()=>{De(N,0,Rn(["svelte-flow__background","svelte-flow__container",e.class])),E=st(N,"",E,{"--xy-background-color-props":e.bgColor,"--xy-background-pattern-color-props":e.patternColor}),xe(I,"id",r(v)),xe(I,"x",r(i).viewport.x%r(p)[0]),xe(I,"y",r(i).viewport.y%r(p)[1]),xe(I,"width",r(p)[0]),xe(I,"height",r(p)[1]),xe(I,"patternTransform",`translate(-${r(w)[0]},-${r(w)[1]})`),xe(M,"fill",`url(#${r(v)})`)}),y(t,N),Ce()}function $h(t){const e=k(fn),n=k(()=>r(e).nodeLookup),a=k(()=>r(e).nodes),o=k(()=>(r(a),r(n).get(t)));return{get current(){return r(o)}}}var eg=ut("<rect></rect>");function tg(t,e){ze(e,!0);let n=pe(e,"borderRadius",3,5),a=pe(e,"strokeWidth",3,2),o=k(()=>$h(e.id)),i=k(()=>{if(!r(o).current)return{width:0,height:0,x:0,y:0};const{width:N,height:E}=xn(r(o).current);return{width:e.width??N,height:e.height??E,x:e.x??r(o).current.internals.positionAbsolute.x,y:e.y??r(o).current.internals.positionAbsolute.y}}),s=k(()=>r(i).width),l=k(()=>r(i).height),u=k(()=>r(i).x),v=k(()=>r(i).y);var p=Te(),m=de(p);{var f=N=>{const E=k(()=>e.nodeComponent);var I=Te(),H=de(I);un(H,()=>r(E),(O,F)=>{F(O,{get id(){return e.id},get x(){return r(u)},get y(){return r(v)},get width(){return r(s)},get height(){return r(l)},get borderRadius(){return n()},get class(){return e.class},get color(){return e.color},get shapeRendering(){return e.shapeRendering},get strokeColor(){return e.strokeColor},get strokeWidth(){return a()},get selected(){return e.selected}})}),y(N,I)},w=N=>{var E=eg();let I,H;$(()=>{I=De(E,0,Rn(["svelte-flow__minimap-node",e.class]),null,I,{selected:e.selected}),xe(E,"x",r(u)),xe(E,"y",r(v)),xe(E,"rx",n()),xe(E,"ry",n()),xe(E,"width",r(s)),xe(E,"height",r(l)),xe(E,"shape-rendering",e.shapeRendering),H=st(E,"",H,{fill:e.color,stroke:e.strokeColor,"stroke-width":a()})}),y(N,E)};Y(m,N=>{e.nodeComponent?N(f):N(w,!1)})}y(t,p),Ce()}function ng(t,e){const n=rp({domNode:t,panZoom:e.panZoom,getTransform:()=>{const{viewport:o}=e.store;return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});n.update({translateExtent:e.translateExtent,width:e.width,height:e.height,inversePan:e.inversePan,zoomStep:e.zoomStep,pannable:e.pannable,zoomable:e.zoomable});function a(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:a,destroy(){n.destroy()}}}const Ba=t=>t instanceof Function?t:()=>t;var rg=ut("<title> </title>"),ag=ut('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),og=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function sg(t,e){ze(e,!0);let n=pe(e,"position",3,"bottom-right"),a=pe(e,"nodeStrokeColor",3,"transparent"),o=pe(e,"nodeClass",3,""),i=pe(e,"nodeBorderRadius",3,5),s=pe(e,"nodeStrokeWidth",3,2),l=pe(e,"width",3,200),u=pe(e,"height",3,150),v=pe(e,"pannable",3,!0),p=pe(e,"zoomable",3,!0),m=_n(e,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","nodeComponent","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),f=k(fn),w=k(()=>r(f).ariaLabelConfig);const N=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let E=k(()=>`svelte-flow__minimap-desc-${r(f).flowId}`),I=k(()=>({x:-r(f).viewport.x/r(f).viewport.zoom,y:-r(f).viewport.y/r(f).viewport.zoom,width:r(f).width/r(f).viewport.zoom,height:r(f).height/r(f).viewport.zoom})),H=k(()=>Oi(xr(r(f).nodeLookup,{filter:C=>!C.hidden}),r(I))),O=k(()=>r(H).width/l()),F=k(()=>r(H).height/u()),M=k(()=>Math.max(r(O),r(F))),R=k(()=>r(M)*l()),b=k(()=>r(M)*u()),A=k(()=>5*r(M)),B=k(()=>r(H).x-(r(R)-r(H).width)/2-r(A)),K=k(()=>r(H).y-(r(b)-r(H).height)/2-r(A)),Z=k(()=>r(R)+r(A)*2),x=k(()=>r(b)+r(A)*2);const S=()=>r(M);var z=og(),g=de(z);{let C=k(()=>["svelte-flow__minimap",e.class]);cc(g,()=>({"--xy-minimap-background-color-props":e.bgColor})),Do(g.lastChild,We({get position(){return n()},get class(){return r(C)},"data-testid":"svelte-flow__minimap"},()=>m,{children:(T,D)=>{var V=Te(),L=de(V);{var q=j=>{var U=ag();let X;var J=d(U);{var ae=ne=>{var G=rg(),oe=d(G,!0);c(G),$(()=>{xe(G,"id",r(E)),W(oe,e.ariaLabel??r(w)["minimap.ariaLabel"])}),y(ne,G)};Y(J,ne=>{(e.ariaLabel??r(w)["minimap.ariaLabel"])&&ne(ae)})}var re=h(J);je(re,17,()=>r(f).nodes,ne=>ne.id,(ne,G)=>{const oe=k(()=>r(f).nodeLookup.get(r(G).id));var ee=Te(),se=de(ee);{var te=le=>{{let he=k(()=>e.nodeColor===void 0?void 0:Ba(e.nodeColor)(r(G))),ve=k(()=>Ba(a())(r(G))),fe=k(()=>Ba(o())(r(G)));tg(le,{get id(){return r(oe).id},get selected(){return r(oe).selected},get nodeComponent(){return e.nodeComponent},get color(){return r(he)},get borderRadius(){return i()},get strokeColor(){return r(ve)},get strokeWidth(){return s()},get shapeRendering(){return N},get class(){return r(fe)}})}},ue=k(()=>r(oe)&&Ri(r(oe))&&!r(oe).hidden);Y(se,le=>{r(ue)&&le(te)})}y(ne,ee)});var ie=h(re);c(U),zt(U,(ne,G)=>ng?.(ne,G),()=>({store:r(f),panZoom:r(f).panZoom,getViewScale:S,translateExtent:r(f).translateExtent,width:r(f).width,height:r(f).height,inversePan:e.inversePan,zoomStep:e.zoomStep,pannable:v(),zoomable:p()})),$(()=>{xe(U,"width",l()),xe(U,"height",u()),xe(U,"viewBox",`${r(B)??""} ${r(K)??""} ${r(Z)??""} ${r(x)??""}`),xe(U,"aria-labelledby",r(E)),X=st(U,"",X,{"--xy-minimap-mask-background-color-props":e.maskColor,"--xy-minimap-mask-stroke-color-props":e.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":e.maskStrokeWidth?e.maskStrokeWidth*r(M):void 0}),xe(ie,"d",`M${r(B)-r(A)},${r(K)-r(A)}h${r(Z)+r(A)*2}v${r(x)+r(A)*2}h${-r(Z)-r(A)*2}z
      M${r(I).x??""},${r(I).y??""}h${r(I).width??""}v${r(I).height??""}h${-r(I).width}z`)}),y(j,U)};Y(L,j=>{r(f).panZoom&&j(q)})}y(T,V)},$$slots:{default:!0}})),c(g)}y(t,z),Ce()}var ig=P('<span class="model-badge svelte-uofr5c"> </span>'),lg=P('<span class="multimodal-badge svelte-uofr5c" title="Multimodal enabled"><!></span>'),cg=P('<span class="state-icon svelte-uofr5c"><!></span>'),dg=P('<span class="state-icon state-error svelte-uofr5c"><!></span>'),ug=P('<div class="description-text svelte-uofr5c"> </div>'),vg=P('<div class="instructions-section svelte-uofr5c"><span class="section-label svelte-uofr5c">Instructions</span> <p class="instructions-text svelte-uofr5c"> </p></div>'),fg=P('<div><div class="agent-header svelte-uofr5c"><div class="header-top-row svelte-uofr5c"><div class="header-badges svelte-uofr5c"><!> <!></div> <span class="settings-icon svelte-uofr5c"><!></span></div> <div class="header-main-row svelte-uofr5c"><span></span> <!> <span class="agent-title svelte-uofr5c"> </span> <!> <!></div></div> <div class="agent-body svelte-uofr5c"><div class="pins-row svelte-uofr5c"><div class="pin pin-in svelte-uofr5c"><span class="pin-dot svelte-uofr5c"></span><span class="pin-label svelte-uofr5c">Exec In</span></div> <div class="pin pin-out svelte-uofr5c"><span class="pin-label svelte-uofr5c">Exec Out</span><span class="pin-dot svelte-uofr5c"></span></div></div> <!> <!></div> <!> <!></div>');function pg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=k(()=>!!e.data.multimodal?.vision_enabled),o=Q(!1);_e(()=>{if(r(n)==="complete"){_(o,!0);const D=setTimeout(()=>{_(o,!1)},3e3);return()=>clearTimeout(D)}else _(o,!1)});var i=fg();let s;var l=d(i),u=d(l),v=d(u),p=d(v);{var m=D=>{var V=ig(),L=d(V,!0);c(V),$(()=>W(L,e.data.model)),y(D,V)};Y(p,D=>{e.data.model&&D(m)})}var f=h(p,2);{var w=D=>{var V=lg(),L=d(V);Xr(L,{size:10}),c(V),y(D,V)};Y(f,D=>{r(a)&&D(w)})}c(v);var N=h(v,2),E=d(N);uo(E,{size:11}),c(N),c(u);var I=h(u,2),H=d(I);let O;var F=h(H,2);cr(F,{size:14});var M=h(F,2),R=d(M,!0);c(M);var b=h(M,2);{var A=D=>{var V=cg(),L=d(V);Kt(L,{size:13}),c(V),jt(3,V,()=>Zt,()=>({duration:200,start:.6})),y(D,V)};Y(b,D=>{r(o)&&D(A)})}var B=h(b,2);{var K=D=>{var V=dg(),L=d(V);Rt(L,{size:13}),c(V),y(D,V)};Y(B,D=>{r(n)==="error"&&D(K)})}c(I),c(l);var Z=h(l,2),x=h(d(Z),2);{var S=D=>{var V=ug(),L=d(V);c(V),$((q,j)=>W(L,`${q??""}${j??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),y(D,V)};Y(x,D=>{e.data.description&&D(S)})}var z=h(x,2);{var g=D=>{var V=vg(),L=h(d(V),2),q=d(L,!0);c(L),c(V),$(()=>W(q,e.data.instructions)),y(D,V)};Y(z,D=>{e.data.instructions&&D(g)})}c(Z);var C=h(Z,2);$e(C,{type:"target",get position(){return we.Left}});var T=h(C,2);$e(T,{type:"source",get position(){return we.Right}}),c(i),$(()=>{s=De(i,1,"agent-node svelte-uofr5c",null,s,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),O=De(H,1,"status-dot svelte-uofr5c",null,O,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(o)}),W(R,e.data.label||"Agent")}),y(t,i),Ce()}var hg=P('<span class="state-icon svelte-107d6w1"><!></span>'),gg=P('<span class="state-icon state-error svelte-107d6w1"><!></span>'),mg=P('<div class="prop-row svelte-107d6w1"><span class="prop-key svelte-107d6w1">tool</span><span class="prop-val svelte-107d6w1"> </span></div>'),_g=P('<div class="tool-description svelte-107d6w1"> </div>'),yg=P('<div class="prop-row svelte-107d6w1"><span class="prop-key svelte-107d6w1">timeout</span><span class="prop-val svelte-107d6w1"> </span></div>'),bg=P('<div><div class="tool-header svelte-107d6w1"><div class="header-row svelte-107d6w1"><span></span> <div class="tool-icon-wrap svelte-107d6w1"><!></div> <span class="tool-title svelte-107d6w1"> </span> <!> <!></div></div> <div class="tool-body svelte-107d6w1"><div class="pins-row svelte-107d6w1"><div class="pin pin-in svelte-107d6w1"><span class="pin-dot svelte-107d6w1"></span><span class="pin-label svelte-107d6w1">Exec In</span></div> <div class="pin pin-out svelte-107d6w1"><span class="pin-label svelte-107d6w1">Exec Out</span><span class="pin-dot svelte-107d6w1"></span></div></div> <!> <!> <!></div> <!> <!></div>');function xg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const x=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(x)}else _(a,!1)});var o=bg();let i;var s=d(o),l=d(s),u=d(l);let v;var p=h(u,2),m=d(p);Wn(m,{size:13}),c(p);var f=h(p,2),w=d(f,!0);c(f);var N=h(f,2);{var E=x=>{var S=hg(),z=d(S);Kt(z,{size:12}),c(S),jt(3,S,()=>Zt,()=>({duration:200,start:.6})),y(x,S)};Y(N,x=>{r(a)&&x(E)})}var I=h(N,2);{var H=x=>{var S=gg(),z=d(S);Rt(z,{size:12}),c(S),y(x,S)};Y(I,x=>{r(n)==="error"&&x(H)})}c(l),c(s);var O=h(s,2),F=h(d(O),2);{var M=x=>{var S=mg(),z=h(d(S)),g=d(z,!0);c(z),c(S),$(()=>W(g,e.data.tool_name)),y(x,S)};Y(F,x=>{e.data.tool_name&&x(M)})}var R=h(F,2);{var b=x=>{var S=_g(),z=d(S);c(S),$((g,C)=>W(z,`${g??""}${C??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),y(x,S)};Y(R,x=>{e.data.description&&x(b)})}var A=h(R,2);{var B=x=>{var S=yg(),z=h(d(S)),g=d(z);c(z),c(S),$(()=>W(g,`${e.data.timeout??""}s`)),y(x,S)};Y(A,x=>{e.data.timeout&&x(B)})}c(O);var K=h(O,2);$e(K,{type:"target",get position(){return we.Left}});var Z=h(K,2);$e(Z,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"tool-node svelte-107d6w1",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),v=De(u,1,"status-dot svelte-107d6w1",null,v,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(a)}),W(w,e.data.label||"Tool")}),y(t,o),Ce()}var wg=P('<span class="state-icon svelte-15a1m3"><!></span>'),kg=P('<span class="state-icon state-error svelte-15a1m3"><!></span>'),Sg=P('<div class="pattern-name svelte-15a1m3"> </div>'),zg=P('<div class="reason-description svelte-15a1m3"> </div>'),Cg=P('<div class="steps-row svelte-15a1m3"><span class="steps-label svelte-15a1m3">Max Steps</span> <span class="steps-badge svelte-15a1m3"> </span></div>'),Eg=P('<div><div class="reason-header svelte-15a1m3"><div class="header-row svelte-15a1m3"><span></span> <div class="brain-icon-wrap svelte-15a1m3"><!></div> <span class="reason-title svelte-15a1m3"> </span> <!> <!></div> <!></div> <div class="reason-body svelte-15a1m3"><div class="pins-row svelte-15a1m3"><div class="pin pin-in svelte-15a1m3"><span class="pin-dot svelte-15a1m3"></span><span class="pin-label svelte-15a1m3">Exec In</span></div> <div class="pin pin-out svelte-15a1m3"><span class="pin-label svelte-15a1m3">Exec Out</span><span class="pin-dot svelte-15a1m3"></span></div></div> <!> <!></div> <!> <!></div>');function Ng(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const x=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(x)}else _(a,!1)});var o=Eg();let i;var s=d(o),l=d(s),u=d(l);let v;var p=h(u,2),m=d(p);Zr(m,{size:14}),c(p);var f=h(p,2),w=d(f,!0);c(f);var N=h(f,2);{var E=x=>{var S=wg(),z=d(S);Kt(z,{size:12}),c(S),jt(3,S,()=>Zt,()=>({duration:200,start:.6})),y(x,S)};Y(N,x=>{r(a)&&x(E)})}var I=h(N,2);{var H=x=>{var S=kg(),z=d(S);Rt(z,{size:12}),c(S),y(x,S)};Y(I,x=>{r(n)==="error"&&x(H)})}c(l);var O=h(l,2);{var F=x=>{var S=Sg(),z=d(S,!0);c(S),$(()=>W(z,e.data.pattern)),y(x,S)};Y(O,x=>{e.data.pattern&&x(F)})}c(s);var M=h(s,2),R=h(d(M),2);{var b=x=>{var S=zg(),z=d(S);c(S),$((g,C)=>W(z,`${g??""}${C??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),y(x,S)};Y(R,x=>{e.data.description&&x(b)})}var A=h(R,2);{var B=x=>{var S=Cg(),z=h(d(S),2),g=d(z,!0);c(z),c(S),$(()=>W(g,e.data.maxSteps)),y(x,S)};Y(A,x=>{e.data.maxSteps&&x(B)})}c(M);var K=h(M,2);$e(K,{type:"target",get position(){return we.Left}});var Z=h(K,2);$e(Z,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"reason-node svelte-15a1m3",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),v=De(u,1,"status-dot svelte-15a1m3",null,v,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(a)}),W(w,e.data.label||"Reasoning")}),y(t,o),Ce()}var Mg=P('<span class="state-icon svelte-9dvt8o"><!></span>'),Pg=P('<span class="state-icon state-error svelte-9dvt8o"><!></span>'),Tg=P('<div class="condition-expr svelte-9dvt8o"><code class="expr-code svelte-9dvt8o"> </code></div>'),Ig=P('<div class="cond-description svelte-9dvt8o"> </div>'),Ag=P('<div><div class="cond-header svelte-9dvt8o"><div class="hex-accent svelte-9dvt8o"></div> <div class="header-content svelte-9dvt8o"><span></span> <!> <span class="cond-title svelte-9dvt8o"> </span> <!> <!></div></div> <div class="cond-body svelte-9dvt8o"><!> <!> <div class="branch-pins svelte-9dvt8o"><div class="branch-in svelte-9dvt8o"><span class="pin-dot dot-in svelte-9dvt8o"></span> <span class="pin-label svelte-9dvt8o">In</span></div> <div class="branch-outputs svelte-9dvt8o"><div class="branch-out branch-true svelte-9dvt8o"><span class="pin-label label-true svelte-9dvt8o">True</span> <span class="pin-dot dot-true svelte-9dvt8o"></span></div> <div class="branch-out branch-false svelte-9dvt8o"><span class="pin-label label-false svelte-9dvt8o">False</span> <span class="pin-dot dot-false svelte-9dvt8o"></span></div></div></div></div> <!> <!> <!></div>');function Dg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const K=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(K)}else _(a,!1)});var o=Ag();let i;var s=d(o),l=h(d(s),2),u=d(l);let v;var p=h(u,2);dr(p,{size:13});var m=h(p,2),f=d(m,!0);c(m);var w=h(m,2);{var N=K=>{var Z=Mg(),x=d(Z);Kt(x,{size:12}),c(Z),jt(3,Z,()=>Zt,()=>({duration:200,start:.6})),y(K,Z)};Y(w,K=>{r(a)&&K(N)})}var E=h(w,2);{var I=K=>{var Z=Pg(),x=d(Z);Rt(x,{size:12}),c(Z),y(K,Z)};Y(E,K=>{r(n)==="error"&&K(I)})}c(l),c(s);var H=h(s,2),O=d(H);{var F=K=>{var Z=Tg(),x=d(Z),S=d(x,!0);c(x),c(Z),$(()=>W(S,e.data.condition)),y(K,Z)};Y(O,K=>{e.data.condition&&K(F)})}var M=h(O,2);{var R=K=>{var Z=Ig(),x=d(Z);c(Z),$((S,z)=>W(x,`${S??""}${z??""}`),[()=>String(e.data.description).slice(0,60),()=>String(e.data.description).length>60?"":""]),y(K,Z)};Y(M,K=>{e.data.description&&K(R)})}ye(2),c(H);var b=h(H,2);$e(b,{type:"target",get position(){return we.Left}});var A=h(b,2);$e(A,{type:"source",get position(){return we.Right},id:"true",style:"top: 35%;"});var B=h(A,2);$e(B,{type:"source",get position(){return we.Right},id:"false",style:"top: 65%;"}),c(o),$(()=>{i=De(o,1,"cond-node svelte-9dvt8o",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),v=De(u,1,"status-dot svelte-9dvt8o",null,v,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(a)}),W(f,e.data.label||"Condition")}),y(t,o),Ce()}var Og=P('<span class="bp-state svelte-mcwl9o"><!></span>'),Rg=P('<span class="bp-state bp-state-error svelte-mcwl9o"><!></span>'),Lg=P('<div class="bp-prop svelte-mcwl9o"><span class="bp-key svelte-mcwl9o">action</span><span class="bp-val svelte-mcwl9o"> </span></div>'),Hg=P('<div class="bp-prop svelte-mcwl9o"><span class="bp-key svelte-mcwl9o">namespace</span><span class="bp-val svelte-mcwl9o"> </span></div>'),Vg=P('<div><div class="bp-header svelte-mcwl9o"><!> <span class="bp-title svelte-mcwl9o"> </span> <!> <!></div> <div class="bp-body svelte-mcwl9o"><div class="bp-pins svelte-mcwl9o"><div class="bp-pin-in svelte-mcwl9o"><span class="bp-dot svelte-mcwl9o"></span><span class="bp-pin-label">Exec In</span></div> <div class="bp-pin-out svelte-mcwl9o"><span class="bp-pin-label">Exec Out</span><span class="bp-dot svelte-mcwl9o"></span></div></div> <!> <!></div> <!> <!></div>');function Fg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const R=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(R)}else _(a,!1)});var o=Vg();let i;var s=d(o),l=d(s);co(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=R=>{var b=Og(),A=d(b);Kt(A,{size:12}),c(b),jt(3,b,()=>Zt,()=>({duration:200,start:.6})),y(R,b)};Y(p,R=>{r(a)&&R(m)})}var f=h(p,2);{var w=R=>{var b=Rg(),A=d(b);Rt(A,{size:12}),c(b),y(R,b)};Y(f,R=>{r(n)==="error"&&R(w)})}c(s);var N=h(s,2),E=h(d(N),2);{var I=R=>{var b=Lg(),A=h(d(b)),B=d(A,!0);c(A),c(b),$(()=>W(B,e.data.memory_action)),y(R,b)};Y(E,R=>{e.data.memory_action&&R(I)})}var H=h(E,2);{var O=R=>{var b=Hg(),A=h(d(b)),B=d(A,!0);c(A),c(b),$(()=>W(B,e.data.namespace)),y(R,b)};Y(H,R=>{e.data.namespace&&R(O)})}c(N);var F=h(N,2);$e(F,{type:"target",get position(){return we.Left}});var M=h(F,2);$e(M,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"bp-node svelte-mcwl9o",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(v,e.data.label||"Memory")}),y(t,o),Ce()}var Bg=P('<span class="bp-state svelte-1y5xb8x"><!></span>'),qg=P('<span class="bp-state bp-state-error svelte-1y5xb8x"><!></span>'),Kg=P('<div class="bp-prop svelte-1y5xb8x"><span class="bp-key svelte-1y5xb8x">rule</span><span class="bp-val svelte-1y5xb8x"> </span></div>'),jg=P('<div class="bp-prop svelte-1y5xb8x"><span class="bp-key svelte-1y5xb8x">on_fail</span><span class="bp-val svelte-1y5xb8x"> </span></div>'),Zg=P('<div><div class="bp-header svelte-1y5xb8x"><!> <span class="bp-title svelte-1y5xb8x"> </span> <!> <!></div> <div class="bp-body svelte-1y5xb8x"><div class="bp-pins svelte-1y5xb8x"><div class="bp-pin-in svelte-1y5xb8x"><span class="bp-dot svelte-1y5xb8x"></span><span class="bp-pin-label">Exec In</span></div> <div class="bp-pin-out svelte-1y5xb8x"><span class="bp-pin-label">Exec Out</span><span class="bp-dot svelte-1y5xb8x"></span></div></div> <!> <!></div> <!> <!></div>');function Yg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const R=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(R)}else _(a,!1)});var o=Zg();let i;var s=d(o),l=d(s);vo(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=R=>{var b=Bg(),A=d(b);Kt(A,{size:12}),c(b),jt(3,b,()=>Zt,()=>({duration:200,start:.6})),y(R,b)};Y(p,R=>{r(a)&&R(m)})}var f=h(p,2);{var w=R=>{var b=qg(),A=d(b);Rt(A,{size:12}),c(b),y(R,b)};Y(f,R=>{r(n)==="error"&&R(w)})}c(s);var N=h(s,2),E=h(d(N),2);{var I=R=>{var b=Kg(),A=h(d(b)),B=d(A,!0);c(A),c(b),$(()=>W(B,e.data.validation_rule)),y(R,b)};Y(E,R=>{e.data.validation_rule&&R(I)})}var H=h(E,2);{var O=R=>{var b=jg(),A=h(d(b)),B=d(A,!0);c(A),c(b),$(()=>W(B,e.data.fail_action)),y(R,b)};Y(H,R=>{e.data.fail_action&&R(O)})}c(N);var F=h(N,2);$e(F,{type:"target",get position(){return we.Left}});var M=h(F,2);$e(M,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"bp-node svelte-1y5xb8x",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(v,e.data.label||"Validator")}),y(t,o),Ce()}var Wg=P('<span class="bp-state svelte-1ebq9zd"><!></span>'),Xg=P('<span class="bp-state bp-state-error svelte-1ebq9zd"><!></span>'),Gg=P('<div class="bp-prop svelte-1ebq9zd"><span class="bp-key svelte-1ebq9zd">desc</span><span class="bp-val svelte-1ebq9zd"> </span></div>'),Ug=P('<div class="bp-prop svelte-1ebq9zd"><span class="bp-key svelte-1ebq9zd">code</span><span class="bp-val svelte-1ebq9zd"> </span></div>'),Qg=P('<div><div class="bp-header svelte-1ebq9zd"><!> <span class="bp-title svelte-1ebq9zd"> </span> <!> <!></div> <div class="bp-body svelte-1ebq9zd"><div class="bp-pins svelte-1ebq9zd"><div class="bp-pin-in svelte-1ebq9zd"><span class="bp-dot svelte-1ebq9zd"></span><span class="bp-pin-label">In</span></div> <div class="bp-pin-out svelte-1ebq9zd"><span class="bp-pin-label">Out</span><span class="bp-dot svelte-1ebq9zd"></span></div></div> <!> <!></div> <!> <!></div>');function Jg(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const R=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(R)}else _(a,!1)});var o=Qg();let i;var s=d(o),l=d(s);la(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=R=>{var b=Wg(),A=d(b);Kt(A,{size:12}),c(b),jt(3,b,()=>Zt,()=>({duration:200,start:.6})),y(R,b)};Y(p,R=>{r(a)&&R(m)})}var f=h(p,2);{var w=R=>{var b=Xg(),A=d(b);Rt(A,{size:12}),c(b),y(R,b)};Y(f,R=>{r(n)==="error"&&R(w)})}c(s);var N=h(s,2),E=h(d(N),2);{var I=R=>{var b=Gg(),A=h(d(b)),B=d(A,!0);c(A),c(b),$(()=>W(B,e.data.description)),y(R,b)};Y(E,R=>{e.data.description&&R(I)})}var H=h(E,2);{var O=R=>{var b=Ug(),A=h(d(b)),B=d(A);c(A),c(b),$((K,Z)=>W(B,`${K??""}${Z??""}`),[()=>String(e.data.code).split(`
`)[0].slice(0,30),()=>String(e.data.code).length>30?"...":""]),y(R,b)};Y(H,R=>{e.data.code&&R(O)})}c(N);var F=h(N,2);$e(F,{type:"target",get position(){return we.Left}});var M=h(F,2);$e(M,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"bp-node svelte-1ebq9zd",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(v,e.data.label||"Code")}),y(t,o),Ce()}var $g=P('<span class="bp-state svelte-5h9d64"><!></span>'),em=P('<span class="bp-state bp-state-error svelte-5h9d64"><!></span>'),tm=P('<div class="bp-prop svelte-5h9d64"><span class="bp-key svelte-5h9d64">split</span><span class="bp-val svelte-5h9d64"> </span></div>'),nm=P('<div class="bp-prop svelte-5h9d64"><span class="bp-key svelte-5h9d64">max</span><span class="bp-val svelte-5h9d64"> </span></div>'),rm=P('<div><div class="bp-header svelte-5h9d64"><!> <span class="bp-title svelte-5h9d64"> </span> <!> <!></div> <div class="bp-body svelte-5h9d64"><div class="bp-pins-multi svelte-5h9d64"><div class="bp-pin-col-left svelte-5h9d64"><div class="bp-pin-in svelte-5h9d64"><span class="bp-dot svelte-5h9d64"></span><span class="bp-pin-label">In</span></div></div> <div class="bp-pin-col-right svelte-5h9d64"><div class="bp-pin-out svelte-5h9d64"><span class="bp-pin-label">Out 1</span><span class="bp-dot svelte-5h9d64"></span></div> <div class="bp-pin-out svelte-5h9d64"><span class="bp-pin-label">Out 2</span><span class="bp-dot svelte-5h9d64"></span></div></div></div> <!> <!></div> <!> <!> <!></div>');function am(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const b=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(b)}else _(a,!1)});var o=rm();let i;var s=d(o),l=d(s);fo(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=b=>{var A=$g(),B=d(A);Kt(B,{size:12}),c(A),jt(3,A,()=>Zt,()=>({duration:200,start:.6})),y(b,A)};Y(p,b=>{r(a)&&b(m)})}var f=h(p,2);{var w=b=>{var A=em(),B=d(A);Rt(B,{size:12}),c(A),y(b,A)};Y(f,b=>{r(n)==="error"&&b(w)})}c(s);var N=h(s,2),E=h(d(N),2);{var I=b=>{var A=tm(),B=h(d(A)),K=d(B,!0);c(B),c(A),$(()=>W(K,e.data.split_expression)),y(b,A)};Y(E,b=>{e.data.split_expression&&b(I)})}var H=h(E,2);{var O=b=>{var A=nm(),B=h(d(A)),K=d(B,!0);c(B),c(A),$(()=>W(K,e.data.max_concurrent)),y(b,A)};Y(H,b=>{e.data.max_concurrent&&b(O)})}c(N);var F=h(N,2);$e(F,{type:"target",get position(){return we.Left}});var M=h(F,2);$e(M,{type:"source",get position(){return we.Right},id:"out-1",style:"top: 33%;"});var R=h(M,2);$e(R,{type:"source",get position(){return we.Right},id:"out-2",style:"top: 66%;"}),c(o),$(()=>{i=De(o,1,"bp-node svelte-5h9d64",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(v,e.data.label||"Fan Out")}),y(t,o),Ce()}var om=P('<span class="bp-state svelte-k2gv2h"><!></span>'),sm=P('<span class="bp-state bp-state-error svelte-k2gv2h"><!></span>'),im=P('<div class="bp-prop svelte-k2gv2h"><span class="bp-key svelte-k2gv2h">merge</span><span class="bp-val svelte-k2gv2h"> </span></div>'),lm=P('<div class="bp-prop svelte-k2gv2h"><span class="bp-key svelte-k2gv2h">timeout</span><span class="bp-val svelte-k2gv2h"> </span></div>'),cm=P('<div><div class="bp-header svelte-k2gv2h"><!> <span class="bp-title svelte-k2gv2h"> </span> <!> <!></div> <div class="bp-body svelte-k2gv2h"><div class="bp-pins-multi svelte-k2gv2h"><div class="bp-pin-col-left svelte-k2gv2h"><div class="bp-pin-in svelte-k2gv2h"><span class="bp-dot svelte-k2gv2h"></span><span class="bp-pin-label">In 1</span></div> <div class="bp-pin-in svelte-k2gv2h"><span class="bp-dot svelte-k2gv2h"></span><span class="bp-pin-label">In 2</span></div></div> <div class="bp-pin-col-right svelte-k2gv2h"><div class="bp-pin-out svelte-k2gv2h"><span class="bp-pin-label">Out</span><span class="bp-dot svelte-k2gv2h"></span></div></div></div> <!> <!></div> <!> <!> <!></div>');function dm(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=Q(!1);_e(()=>{if(r(n)==="complete"){_(a,!0);const b=setTimeout(()=>{_(a,!1)},3e3);return()=>clearTimeout(b)}else _(a,!1)});var o=cm();let i;var s=d(o),l=d(s);po(l,{size:12});var u=h(l,2),v=d(u,!0);c(u);var p=h(u,2);{var m=b=>{var A=om(),B=d(A);Kt(B,{size:12}),c(A),jt(3,A,()=>Zt,()=>({duration:200,start:.6})),y(b,A)};Y(p,b=>{r(a)&&b(m)})}var f=h(p,2);{var w=b=>{var A=sm(),B=d(A);Rt(B,{size:12}),c(A),y(b,A)};Y(f,b=>{r(n)==="error"&&b(w)})}c(s);var N=h(s,2),E=h(d(N),2);{var I=b=>{var A=im(),B=h(d(A)),K=d(B,!0);c(B),c(A),$(()=>W(K,e.data.merge_expression)),y(b,A)};Y(E,b=>{e.data.merge_expression&&b(I)})}var H=h(E,2);{var O=b=>{var A=lm(),B=h(d(A)),K=d(B);c(B),c(A),$(()=>W(K,`${e.data.merge_timeout??""}s`)),y(b,A)};Y(H,b=>{e.data.merge_timeout&&b(O)})}c(N);var F=h(N,2);$e(F,{type:"target",get position(){return we.Left},id:"in-1",style:"top: 33%;"});var M=h(F,2);$e(M,{type:"target",get position(){return we.Left},id:"in-2",style:"top: 66%;"});var R=h(M,2);$e(R,{type:"source",get position(){return we.Right}}),c(o),$(()=>{i=De(o,1,"bp-node svelte-k2gv2h",null,i,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(v,e.data.label||"Fan In")}),y(t,o),Ce()}var um=P('<span class="state-icon svelte-170rmgf"><!></span>'),vm=P('<span class="state-icon state-error svelte-170rmgf"><!></span>'),fm=P('<div class="description-text svelte-170rmgf"> </div>'),pm=P('<div><div class="input-header svelte-170rmgf"><div class="header-top-row svelte-170rmgf"><div class="header-badges svelte-170rmgf"><span class="trigger-badge svelte-170rmgf"> </span></div> <span class="settings-icon svelte-170rmgf"><!></span></div> <div class="header-main-row svelte-170rmgf"><span></span> <div class="icon-wrap svelte-170rmgf"><!></div> <span class="input-title svelte-170rmgf"> </span> <!> <!></div></div> <div class="input-body svelte-170rmgf"><div class="pins-row svelte-170rmgf"><div class="pin-spacer svelte-170rmgf"></div> <div class="pin pin-out svelte-170rmgf"><span class="pin-label svelte-170rmgf">Exec Out</span><span class="pin-dot svelte-170rmgf"></span></div></div> <!> <div class="config-section svelte-170rmgf"><span class="section-label svelte-170rmgf">Trigger Config</span> <p class="config-text svelte-170rmgf"> </p></div></div> <!></div>');function hm(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=k(()=>e.data.trigger_type??"Manual"),o=Q(!1),i=k(()=>()=>{switch(r(a).toLowerCase()){case"http":return e.data.endpoint?`${e.data.method??"POST"} ${e.data.endpoint}`:"HTTP endpoint";case"queue":return e.data.queue_name?`Queue: ${e.data.queue_name}`:"Message queue";case"schedule":return e.data.cron?`Cron: ${e.data.cron}`:"Scheduled trigger";case"file":return e.data.watch_path?`Watch: ${e.data.watch_path}`:"File watcher";default:return"Manual execution"}});_e(()=>{if(r(n)==="complete"){_(o,!0);const D=setTimeout(()=>{_(o,!1)},3e3);return()=>clearTimeout(D)}else _(o,!1)});var s=pm();let l;var u=d(s),v=d(u),p=d(v),m=d(p),f=d(m,!0);c(m),c(p);var w=h(p,2),N=d(w);uo(N,{size:11}),c(w),c(v);var E=h(v,2),I=d(E);let H;var O=h(I,2),F=d(O);Ys(F,{size:14}),c(O);var M=h(O,2),R=d(M,!0);c(M);var b=h(M,2);{var A=D=>{var V=um(),L=d(V);Kt(L,{size:13}),c(V),jt(3,V,()=>Zt,()=>({duration:200,start:.6})),y(D,V)};Y(b,D=>{r(o)&&D(A)})}var B=h(b,2);{var K=D=>{var V=vm(),L=d(V);Rt(L,{size:13}),c(V),y(D,V)};Y(B,D=>{r(n)==="error"&&D(K)})}c(E),c(u);var Z=h(u,2),x=h(d(Z),2);{var S=D=>{var V=fm(),L=d(V);c(V),$((q,j)=>W(L,`${q??""}${j??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),y(D,V)};Y(x,D=>{e.data.description&&D(S)})}var z=h(x,2),g=h(d(z),2),C=d(g,!0);c(g),c(z),c(Z);var T=h(Z,2);$e(T,{type:"source",get position(){return we.Right}}),c(s),$(D=>{l=De(s,1,"input-node svelte-170rmgf",null,l,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(f,r(a)),H=De(I,1,"status-dot svelte-170rmgf",null,H,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(o)}),W(R,e.data.label||"Input"),W(C,D)},[()=>r(i)()]),y(t,s),Ce()}var gm=P('<span class="state-icon svelte-198t6xy"><!></span>'),mm=P('<span class="state-icon state-error svelte-198t6xy"><!></span>'),_m=P('<div class="description-text svelte-198t6xy"> </div>'),ym=P('<div><div class="output-header svelte-198t6xy"><div class="header-top-row svelte-198t6xy"><div class="header-badges svelte-198t6xy"><span class="dest-badge svelte-198t6xy"> </span></div> <span class="settings-icon svelte-198t6xy"><!></span></div> <div class="header-main-row svelte-198t6xy"><span></span> <div class="icon-wrap svelte-198t6xy"><!></div> <span class="output-title svelte-198t6xy"> </span> <!> <!></div></div> <div class="output-body svelte-198t6xy"><div class="pins-row svelte-198t6xy"><div class="pin pin-in svelte-198t6xy"><span class="pin-dot svelte-198t6xy"></span><span class="pin-label svelte-198t6xy">Exec In</span></div> <div class="pin-spacer svelte-198t6xy"></div></div> <!> <div class="config-section svelte-198t6xy"><span class="section-label svelte-198t6xy">Destination Config</span> <p class="config-text svelte-198t6xy"> </p></div></div> <!></div>');function bm(t,e){ze(e,!0);let n=k(()=>e.data._executionState??"idle"),a=k(()=>e.data.destination_type??"Response"),o=Q(!1),i=k(()=>()=>{switch(r(a).toLowerCase()){case"response":return e.data.format?`Format: ${e.data.format}`:"Direct response";case"queue":return e.data.queue_name?`Queue: ${e.data.queue_name}`:"Message queue";case"webhook":return e.data.webhook_url?`URL: ${e.data.webhook_url}`:"Webhook delivery";case"store":return e.data.store_path?`Path: ${e.data.store_path}`:"Persistent store";default:return"Output destination"}});_e(()=>{if(r(n)==="complete"){_(o,!0);const D=setTimeout(()=>{_(o,!1)},3e3);return()=>clearTimeout(D)}else _(o,!1)});var s=ym();let l;var u=d(s),v=d(u),p=d(v),m=d(p),f=d(m,!0);c(m),c(p);var w=h(p,2),N=d(w);uo(N,{size:11}),c(w),c(v);var E=h(v,2),I=d(E);let H;var O=h(I,2),F=d(O);ca(F,{size:14}),c(O);var M=h(O,2),R=d(M,!0);c(M);var b=h(M,2);{var A=D=>{var V=gm(),L=d(V);Kt(L,{size:13}),c(V),jt(3,V,()=>Zt,()=>({duration:200,start:.6})),y(D,V)};Y(b,D=>{r(o)&&D(A)})}var B=h(b,2);{var K=D=>{var V=mm(),L=d(V);Rt(L,{size:13}),c(V),y(D,V)};Y(B,D=>{r(n)==="error"&&D(K)})}c(E),c(u);var Z=h(u,2),x=h(d(Z),2);{var S=D=>{var V=_m(),L=d(V);c(V),$((q,j)=>W(L,`${q??""}${j??""}`),[()=>String(e.data.description).slice(0,80),()=>String(e.data.description).length>80?"":""]),y(D,V)};Y(x,D=>{e.data.description&&D(S)})}var z=h(x,2),g=h(d(z),2),C=d(g,!0);c(g),c(z),c(Z);var T=h(Z,2);$e(T,{type:"target",get position(){return we.Left}}),c(s),$(D=>{l=De(s,1,"output-node svelte-198t6xy",null,l,{"exec-running":r(n)==="running","exec-complete":r(n)==="complete","exec-error":r(n)==="error"}),W(f,r(a)),H=De(I,1,"status-dot svelte-198t6xy",null,H,{"dot-idle":r(n)==="idle","dot-running":r(n)==="running","dot-error":r(n)==="error","dot-complete":r(n)==="complete"||r(o)}),W(R,e.data.label||"Output"),W(C,D)},[()=>r(i)()]),y(t,s),Ce()}var xm=P("<!> <!> <!>",1),wm=P('<div class="stats-bar svelte-e4xfdd"><div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Nodes</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Agents</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Tools</span> <span class="stat-value svelte-e4xfdd"> </span></div> <div class="stat-divider svelte-e4xfdd"></div> <div class="stat-item svelte-e4xfdd"><!> <span class="stat-label svelte-e4xfdd">Links</span> <span class="stat-value svelte-e4xfdd"> </span></div></div>'),km=P('<div class="empty-overlay svelte-e4xfdd"><div class="empty-container svelte-e4xfdd"><!> <h2 class="empty-headline svelte-e4xfdd">Start building your pipeline</h2> <p class="empty-hint svelte-e4xfdd">Click components in the left panel to add them, or press Cmd+K to search</p></div></div>'),Sm=P('<div class="canvas-wrapper svelte-e4xfdd"><!> <!> <!></div>');function zm(t,e){ze(e,!0);const n=()=>at(an,"$nodes",o),a=()=>at(Mn,"$edges",o),[o,i]=Ot(),s={input:hm,output:bm,agent:pg,tool:xg,reasoning:Ng,condition:Dg,memory:Fg,validator:Yg,custom_code:Jg,fan_out:am,fan_in:dm};let l=k(()=>n().length===0),u=k(()=>n().length),v=k(()=>n().filter(O=>O.type==="agent").length),p=k(()=>n().filter(O=>O.type==="tool").length),m=k(()=>a().length);var f=Sm(),w=d(f);Th(w,{get nodeTypes(){return s},fitView:!0,colorMode:"dark",defaultEdgeOptions:{type:"smoothstep",animated:!0,style:"stroke: #cbd5e1; stroke-width: 2.5px;"},onnodeclick:({node:O})=>mn.set(O.id),onpaneclick:()=>mn.set(null),get nodes(){return Yo(),n()},set nodes(O){Zo(an,O)},get edges(){return Yo(),a()},set edges(O){Zo(Mn,O)},children:(O,F)=>{var M=xm(),R=de(M);Zh(R,{position:"bottom-left"});var b=h(R,2);sg(b,{position:"bottom-right"});var A=h(b,2);Jh(A,{get variant(){return cn.Dots},gap:24,size:1,color:"#2a2a3a"}),y(O,M)},$$slots:{default:!0}});var N=h(w,2);{var E=O=>{var F=wm(),M=d(F),R=d(M);vc(R,{size:12});var b=h(R,4),A=d(b,!0);c(b),c(M);var B=h(M,4),K=d(B);cr(K,{size:12});var Z=h(K,4),x=d(Z,!0);c(Z),c(B);var S=h(B,4),z=d(S);Wn(z,{size:12});var g=h(z,4),C=d(g,!0);c(g),c(S);var T=h(S,4),D=d(T);fc(D,{size:12});var V=h(D,4),L=d(V,!0);c(V),c(T),c(F),$(()=>{W(A,r(u)),W(x,r(v)),W(C,r(p)),W(L,r(m))}),y(O,F)};Y(N,O=>{r(l)||O(E)})}var I=h(N,2);{var H=O=>{var F=km(),M=d(F),R=d(M);Pc(R,{size:40}),ye(4),c(M),c(F),y(O,F)};Y(I,O=>{r(l)&&O(H)})}c(f),y(t,f),Ce(),i()}var Cm=P('<textarea class="field-input field-textarea svelte-nvi5du" rows="3"></textarea>'),Em=P('<input class="field-input svelte-nvi5du" type="number"/>'),Nm=P('<option class="svelte-nvi5du"> </option>'),Mm=P('<select class="field-input field-select svelte-nvi5du"></select>'),Pm=P("<option></option>"),Tm=P('<input class="field-input svelte-nvi5du" type="text"/> <datalist></datalist>',1),Im=P('<input class="field-input svelte-nvi5du" type="text"/>'),Am=P('<div class="form-field svelte-nvi5du"><label class="field-label svelte-nvi5du"> </label> <!></div>');function Ne(t,e){ze(e,!0);let n=pe(e,"type",3,"text"),a=pe(e,"value",15,""),o=pe(e,"placeholder",3,""),i=pe(e,"options",19,()=>[]);const s=Math.random().toString(36).slice(2,8);let l=k(()=>`field-${(e.label??"input").replace(/\s+/g,"-").toLowerCase()}-${s}`),u=k(()=>`dl-${(e.label??"input").replace(/\s+/g,"-").toLowerCase()}-${s}`);function v(F){const M=F.target;M.style.height="auto",M.style.height=M.scrollHeight+"px"}var p=Am(),m=d(p),f=d(m,!0);c(m);var w=h(m,2);{var N=F=>{var M=Cm();Bl(M),$(()=>{xe(M,"id",r(l)),xe(M,"placeholder",o())}),be("input",M,v),on(M,a),y(F,M)},E=F=>{var M=Em();Ct(M),$(()=>{xe(M,"id",r(l)),xe(M,"placeholder",o())}),on(M,a),y(F,M)},I=F=>{var M=Mm();je(M,21,i,wt,(R,b)=>{var A=Nm(),B=d(A,!0);c(A);var K={};$(()=>{W(B,r(b)),K!==(K=r(b))&&(A.value=(A.__value=r(b))??"")}),y(R,A)}),c(M),$(()=>xe(M,"id",r(l))),ql(M,a),y(F,M)},H=F=>{var M=Tm(),R=de(M);Ct(R);var b=h(R,2);je(b,21,i,wt,(A,B)=>{var K=Pm(),Z={};$(()=>{Z!==(Z=r(B))&&(K.value=(K.__value=r(B))??"")}),y(A,K)}),c(b),$(()=>{xe(R,"id",r(l)),xe(R,"placeholder",o()),xe(R,"list",r(u)),xe(b,"id",r(u))}),on(R,a),y(F,M)},O=F=>{var M=Im();Ct(M),$(()=>{xe(M,"id",r(l)),xe(M,"placeholder",o())}),on(M,a),y(F,M)};Y(w,F=>{n()==="textarea"?F(N):n()==="number"?F(E,1):n()==="select"?F(I,2):n()==="datalist"?F(H,3):F(O,!1)})}c(p),$(()=>{xe(m,"for",r(l)),W(f,e.label)}),y(t,p),Ce()}_t(["input"]);const il=[{id:"calculator",name:"Calculator",description:"Safe mathematical expression evaluator. Supports arithmetic, functions (sqrt, sin, cos, log, etc.), and constants (pi, e).",category:"Utility",tags:["math","calculator","utility"],parameters:[{name:"expression",type:"string",description:"Math expression to evaluate",required:!0}]},{id:"datetime",name:"Date & Time",description:"Current date/time information with timezone support.",category:"Utility",tags:["datetime","utility"],parameters:[{name:"action",type:"select",description:"What to retrieve",required:!0,options:["now","date","time","timestamp","timezones"]},{name:"timezone",type:"string",description:"IANA timezone (e.g. America/New_York)",required:!1,default:"UTC"},{name:"format",type:"string",description:"strftime format string",required:!1}]},{id:"filesystem",name:"File System",description:"Read, write, and list files. Sandboxed to a base directory with path-traversal protection.",category:"I/O",tags:["filesystem","io"],parameters:[{name:"action",type:"select",description:"File operation",required:!0,options:["read","write","list"]},{name:"path",type:"string",description:"File or directory path",required:!0},{name:"content",type:"string",description:"Content to write (for write action)",required:!1}]},{id:"http",name:"HTTP Client",description:"Make HTTP requests with connection pooling. Supports GET, POST, PUT, DELETE.",category:"Web",tags:["http","web"],parameters:[{name:"url",type:"string",description:"Target URL",required:!0},{name:"method",type:"select",description:"HTTP method",required:!1,default:"GET",options:["GET","POST","PUT","DELETE","PATCH"]},{name:"body",type:"string",description:"Request body (JSON)",required:!1},{name:"headers",type:"string",description:"Request headers (JSON)",required:!1}]},{id:"json",name:"JSON",description:"Parse, validate, extract, and format JSON data. Supports dot-path extraction.",category:"Utility",tags:["json","utility"],parameters:[{name:"action",type:"select",description:"JSON operation",required:!0,options:["parse","validate","extract","format","keys"]},{name:"data",type:"string",description:"JSON data to process",required:!0},{name:"path",type:"string",description:"Dot-path for extraction (e.g. address.city)",required:!1}]},{id:"text",name:"Text Processing",description:"Count, extract, truncate, replace, and split text using regex patterns.",category:"Utility",tags:["text","utility"],parameters:[{name:"action",type:"select",description:"Text operation",required:!0,options:["count","extract","truncate","replace","split"]},{name:"text",type:"string",description:"Input text",required:!0},{name:"pattern",type:"string",description:"Regex pattern (for extract/replace/split)",required:!1},{name:"replacement",type:"string",description:"Replacement string (for replace)",required:!1}]},{id:"shell",name:"Shell",description:"Execute shell commands from an explicit allowlist. Sandboxed for safety.",category:"System",tags:["shell","system"],parameters:[{name:"command",type:"string",description:"Command to execute (must be in allowlist)",required:!0}]},{id:"search",name:"Search",description:"Web search tool (abstract -- requires implementation of _search method).",category:"Web",tags:["search","web"],parameters:[{name:"query",type:"string",description:"Search query",required:!0}]},{id:"database",name:"Database",description:"Execute SQL queries (abstract -- requires implementation). Read-only by default with SQL injection detection.",category:"I/O",tags:["database","sql"],parameters:[{name:"query",type:"string",description:"SQL query (SELECT/WITH only in read-only mode)",required:!0},{name:"params",type:"string",description:"Query parameters (JSON)",required:!1}]}];function Dm(t){return il.find(e=>e.id===t)}const ll=[{id:"react",name:"ReAct",description:"Reason-Act-Observe loop. The agent thinks, takes an action (tool call), observes the result, and repeats until done.",defaultMaxSteps:10,bestFor:"Tasks requiring tool interaction and iterative problem-solving",configKeys:["max_steps"]},{id:"chain_of_thought",name:"Chain of Thought",description:"Step-by-step reasoning without actions. The agent breaks down the problem into logical steps and thinks through each one.",defaultMaxSteps:10,bestFor:"Pure logic, analysis, and reasoning tasks without tool needs",configKeys:["max_steps"]},{id:"plan_and_execute",name:"Plan & Execute",description:"Generates a multi-step plan first, then executes each step sequentially. Can replan on failure.",defaultMaxSteps:15,bestFor:"Complex multi-step tasks that benefit from upfront planning",configKeys:["max_steps","allow_replan"]},{id:"reflexion",name:"Reflexion",description:"Execute-Critique-Retry loop. Generates output, critiques it for quality, and retries with feedback if unsatisfactory.",defaultMaxSteps:5,bestFor:"Quality-sensitive outputs that benefit from self-review",configKeys:["max_steps"]},{id:"tree_of_thoughts",name:"Tree of Thoughts",description:"Generates multiple solution branches, evaluates each with a score, and selects the best. Explores the solution space broadly.",defaultMaxSteps:3,bestFor:"Creative and exploratory problems with multiple valid approaches",configKeys:["branching_factor","max_depth"]},{id:"goal_decomposition",name:"Goal Decomposition",description:"Breaks a large goal into phases and tasks, then executes each task. Can delegate sub-tasks to other patterns.",defaultMaxSteps:20,bestFor:"Large ambiguous goals that need structured decomposition",configKeys:["max_steps","task_pattern"]}];function Om(t){return ll.find(e=>e.id===t)}var Rm=P('<!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Exposes an HTTP endpoint that triggers this pipeline when called.</p></div>',1),Lm=P("<!> <!> <!>",1),Hm=P('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Runs the pipeline on a schedule using standard cron syntax.</p></div>',1),Vm=P("<!> <!>",1),Fm=P('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Manual trigger. Run the pipeline via the Run button or API call.</p></div>'),Bm=P("<!> <!> <!> <!>",1),qm=P("<!> <!>",1),Km=P("<!> <!>",1),jm=P('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Returns the pipeline output as an API response.</p></div>'),Zm=P("<!> <!> <!> <!>",1),Ym=P('<div class="mm-options svelte-16rdffs"><div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Accepted file types</span> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>Images</span></label> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>PDFs</span></label> <label class="mm-check svelte-16rdffs"><input type="checkbox" class="svelte-16rdffs"/><span>Documents</span></label></div> <div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Max file size</span> <div class="mm-range-row svelte-16rdffs"><input type="range" class="mm-range svelte-16rdffs" min="1" max="50" step="1"/> <span class="mm-range-val svelte-16rdffs"> </span></div></div> <div class="mm-group svelte-16rdffs"><span class="mm-group-label svelte-16rdffs">Image detail</span> <div class="mm-radio-row svelte-16rdffs"><label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>Auto</span></label> <label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>Low</span></label> <label class="mm-radio svelte-16rdffs"><input type="radio" name="mm-detail" class="svelte-16rdffs"/><span>High</span></label></div></div></div>'),Wm=P('<!> <div class="form-field svelte-16rdffs"><label class="field-label svelte-16rdffs">MODEL</label> <!></div> <!> <!> <!> <!> <div class="mm-section svelte-16rdffs"><button class="mm-toggle svelte-16rdffs"><span class="mm-toggle-label svelte-16rdffs">Multimodal</span> <span><span class="mm-toggle-thumb svelte-16rdffs"></span></span></button> <!></div>',1),Xm=P('<div class="info-param-row svelte-16rdffs"><span class="info-param-name svelte-16rdffs"> </span> <span class="info-param-type svelte-16rdffs"> </span></div>'),Gm=P('<div class="info-params svelte-16rdffs"></div>'),Um=P('<div class="info-card svelte-16rdffs"><div class="info-card-header svelte-16rdffs"><!> <span> </span></div> <p class="info-card-text svelte-16rdffs"> </p> <!></div>'),Qm=P('<div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Custom tool. Define the tool name as registered in the framework tool registry.</p></div>'),Jm=P("<!> <!> <!> <!> <!>",1),$m=P('<div class="info-card svelte-16rdffs"><div class="info-card-header svelte-16rdffs"><!> <span> </span></div> <p class="info-card-text svelte-16rdffs"> </p> <p class="info-card-hint svelte-16rdffs"> </p></div>'),e1=P("<!> <!> <!> <!> <!>",1),t1=P('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Routes flow based on a key in the pipeline context. Connect the True and False handles to different downstream nodes. Use configure_node to set branches as a JSON dict mapping values to paths.</p></div>',1),n1=P('<p class="info-card-text svelte-16rdffs">Saves the current pipeline state/output to memory for later retrieval.</p>'),r1=P('<p class="info-card-text svelte-16rdffs">Loads previously saved state from memory and injects it into the pipeline context.</p>'),a1=P('<p class="info-card-text svelte-16rdffs">Wipes all stored memory. Use with caution.</p>'),o1=P('<p class="info-card-text svelte-16rdffs">Select an action: store saves data, retrieve loads it, clear wipes memory.</p>'),s1=P('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div> <!>',1),i1=P('<p class="info-card-text svelte-16rdffs">Ensures the output is not empty, null, or blank.</p>'),l1=P('<p class="info-card-text svelte-16rdffs">Validates that the output is a string type.</p>'),c1=P('<p class="info-card-text svelte-16rdffs">Validates that the output is a list/array.</p>'),d1=P('<p class="info-card-text svelte-16rdffs">Validates that the output is a dictionary/object.</p>'),u1=P('<p class="info-card-text svelte-16rdffs">Custom validation rule. Define the rule key as registered in the framework.</p>'),v1=P('<p class="info-card-text svelte-16rdffs">Select a validation rule to apply to the pipeline output before passing downstream.</p>'),f1=P('<!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div> <!>',1),p1=P('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Must define: <code>async def execute(context, inputs) -> Any</code></p></div>',1),h1=P('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><p class="info-card-text svelte-16rdffs">Splits a single input into multiple items for parallel processing across downstream branches.</p></div>',1),g1=P('<p class="info-card-text svelte-16rdffs">Concatenates all branch results into a single string.</p>'),m1=P('<p class="info-card-text svelte-16rdffs">Collects all branch results into a list.</p>'),_1=P('<p class="info-card-text svelte-16rdffs">Merges results from parallel branches back into a single output.</p>'),y1=P('<!> <!> <!> <div class="info-card info-card-muted svelte-16rdffs"><!></div>',1),b1=P('<button class="connection-item svelte-16rdffs"><span class="connection-node-name svelte-16rdffs"> </span> <!> <span class="connection-this svelte-16rdffs">this</span></button>'),x1=P('<div class="connection-group svelte-16rdffs"><span class="connection-label svelte-16rdffs">Inputs</span> <!></div>'),w1=P('<button class="connection-item svelte-16rdffs"><span class="connection-this svelte-16rdffs">this</span> <!> <span class="connection-node-name svelte-16rdffs"> </span></button>'),k1=P('<div class="connection-group svelte-16rdffs"><span class="connection-label svelte-16rdffs">Outputs</span> <!></div>'),S1=P('<div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs"><!> Connections</div> <div class="connections-list svelte-16rdffs"><!> <!></div></div>'),z1=P('<aside class="config-panel svelte-16rdffs"><div class="panel-header svelte-16rdffs"><div class="header-left svelte-16rdffs"><div class="header-icon svelte-16rdffs"><!></div> <div class="header-info svelte-16rdffs"><span class="header-title svelte-16rdffs"> </span> <span class="header-id svelte-16rdffs"> </span></div></div> <button class="close-btn svelte-16rdffs" title="Close panel"><!></button></div> <div class="panel-body svelte-16rdffs"><div class="node-type-row svelte-16rdffs"><span class="node-type-badge svelte-16rdffs"> </span></div> <div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs">Configuration</div> <div class="field-group svelte-16rdffs"><!></div></div> <!> <div class="section svelte-16rdffs"><div class="section-title svelte-16rdffs">Position</div> <div class="position-row svelte-16rdffs"><span class="position-value svelte-16rdffs"> </span> <span class="position-value svelte-16rdffs"> </span></div></div> <div class="section danger-section svelte-16rdffs"><button class="delete-btn svelte-16rdffs" title="Delete this node"><!> <span>Delete Node</span></button></div></div></aside>');function C1(t,e){ze(e,!0);const n=()=>at(Kl,"$selectedNode",s),a=()=>at(Mn,"$edges",s),o=()=>at(an,"$nodes",s),i=()=>at(mn,"$selectedNodeId",s),[s,l]=Ot(),u=[],v={input:Ys,output:ca,agent:cr,tool:Wn,reasoning:Zr,condition:Ws,memory:co,validator:vo,custom_code:la,fan_out:fo,fan_in:po},p={input:"#10b981",output:"#3b82f6",agent:"#6366f1",tool:"#8b5cf6",reasoning:"#ec4899",condition:"#06b6d4",memory:"#06b6d4",validator:"#f59e0b",custom_code:"#3b82f6",fan_out:"#8888a0",fan_in:"#8888a0"},m={input:"Input",output:"Output",agent:"Agent",tool:"Tool",reasoning:"Reasoning",condition:"Condition",memory:"Memory",validator:"Validator",custom_code:"Custom Code",fan_out:"Fan Out",fan_in:"Fan In"},f=ll.map(ce=>ce.id),w=["custom",...il.map(ce=>ce.id)];let N=k(()=>Om(r(R))),E=k(()=>Dm(r(j))),I=Q(""),H=Q(""),O=Q(""),F=Q(""),M=Q(""),R=Q(""),b=Q(""),A=Q(""),B=Q(""),K=Q(""),Z=Q(""),x=Q(""),S=Q(""),z=Q(""),g=Q(""),C=Q(""),T=Q(""),D=Q(""),V=Q(""),L=Q(""),q=Q(""),j=Q(""),U=Q(""),X=Q(""),J=Q(""),ae=Q(""),re=Q("manual"),ie=Q("response"),ne=Q("kafka"),G=Q(""),oe=Q(""),ee=Q(""),se=Q("UTC"),te=Q("POST"),ue=Q(!1),le=Q("*/*"),he=Q("50"),ve=Q(""),fe=Q("file"),ke=Q(""),Ae=Q(""),ge=Q(!1),Oe=Q(!0),Ze=Q(!1),Xe=Q(!1),it=Q(10),Ge=Q("auto"),ct=Q(null),Nt=!1,gt=k(()=>n()?a().filter(ce=>ce.target===n().id):[]),dt=k(()=>n()?a().filter(ce=>ce.source===n().id):[]);function xt(ce){const Ie=o().find(et=>et.id===ce);return Ie?.data?.label||Ie?.id||ce}_e(()=>{const ce=n();ce&&ce.id!==r(ct)&&(Nt=!0,_(ct,ce.id,!0),Qt(()=>{_(I,ce.data.label??"",!0),_(H,ce.data.model??"",!0),_(O,ce.data.instructions??"",!0),_(F,ce.data.description??"",!0),_(M,ce.data.timeout!=null?String(ce.data.timeout):"",!0),_(R,ce.data.pattern??"",!0),_(b,ce.data.maxSteps!=null?String(ce.data.maxSteps):"",!0),_(A,ce.data.condition??"",!0),_(B,ce.data.backend??"",!0),_(K,ce.data.connection_string??"",!0),_(Z,ce.data.namespace??"",!0),_(x,ce.data.schema_type??"",!0),_(S,ce.data.validation_rules??"",!0),_(z,ce.data.fail_action??"",!0),_(g,ce.data.code??"",!0),_(C,ce.data.strategy??"",!0),_(T,ce.data.max_concurrent!=null?String(ce.data.max_concurrent):"",!0),_(D,ce.data.merge_strategy??"",!0),_(V,ce.data.merge_timeout!=null?String(ce.data.merge_timeout):"",!0),_(L,ce.data.temperature!=null?String(ce.data.temperature):"",!0),_(q,ce.data.max_tokens!=null?String(ce.data.max_tokens):"",!0),_(j,ce.data.tool_name??"",!0),_(U,ce.data.memory_action??"",!0),_(X,ce.data.validation_rule??"",!0),_(J,ce.data.split_expression??"",!0),_(ae,ce.data.merge_expression??"",!0),_(re,ce.data.trigger_type??"manual",!0),_(ie,ce.data.destination_type??"response",!0),_(ne,ce.data.queue_broker??"kafka",!0),_(G,ce.data.queue_topic??"",!0),_(oe,ce.data.queue_group_id??"",!0),_(ee,ce.data.cron_expression??"",!0),_(se,ce.data.cron_timezone??"UTC",!0),_(te,ce.data.http_method??"POST",!0),_(ue,ce.data.http_auth_required??!1,!0),_(le,ce.data.file_types??"*/*",!0),_(he,ce.data.file_max_size_mb!=null?String(ce.data.file_max_size_mb):"50",!0),_(ve,ce.data.webhook_url??"",!0),_(fe,ce.data.store_type??"file",!0),_(ke,ce.data.store_path??"",!0),_(Ae,ce.data.schema_json??"",!0);const Ie=ce.data.multimodal;_(ge,Ie?.vision_enabled??!1,!0);const et=Ie?.supported_file_types??["image/png","image/jpeg"];_(Oe,et.some(lt=>lt.startsWith("image/")),!0),_(Ze,et.includes("application/pdf"),!0),_(Xe,et.some(lt=>lt.includes("document")||lt.includes("msword")),!0),_(it,Ie?.max_file_size_mb??10,!0),_(Ge,Ie?.image_detail??"auto",!0)}),Nt=!1),ce||_(ct,null)});function Me(ce,Ie){Nt||Qt(()=>{const et=i();if(!et)return;["timeout","maxSteps","max_concurrent","merge_timeout","temperature","max_tokens"].includes(ce)?Na(et,ce,Ie===""?void 0:Number(Ie)):Na(et,ce,Ie)})}_e(()=>{Me("label",r(I))}),_e(()=>{Me("model",r(H))}),_e(()=>{Me("instructions",r(O))}),_e(()=>{Me("description",r(F))}),_e(()=>{Me("timeout",r(M))}),_e(()=>{Me("pattern",r(R))}),_e(()=>{Me("maxSteps",r(b))}),_e(()=>{Me("condition",r(A))}),_e(()=>{Me("backend",r(B))}),_e(()=>{Me("connection_string",r(K))}),_e(()=>{Me("namespace",r(Z))}),_e(()=>{Me("schema_type",r(x))}),_e(()=>{Me("validation_rules",r(S))}),_e(()=>{Me("fail_action",r(z))}),_e(()=>{Me("code",r(g))}),_e(()=>{Me("strategy",r(C))}),_e(()=>{Me("max_concurrent",r(T))}),_e(()=>{Me("merge_strategy",r(D))}),_e(()=>{Me("merge_timeout",r(V))}),_e(()=>{Me("temperature",r(L))}),_e(()=>{Me("max_tokens",r(q))}),_e(()=>{Me("tool_name",r(j))}),_e(()=>{Me("memory_action",r(U))}),_e(()=>{Me("validation_rule",r(X))}),_e(()=>{Me("split_expression",r(J))}),_e(()=>{Me("merge_expression",r(ae))}),_e(()=>{Me("trigger_type",r(re))}),_e(()=>{Me("destination_type",r(ie))}),_e(()=>{Me("queue_broker",r(ne))}),_e(()=>{Me("queue_topic",r(G))}),_e(()=>{Me("queue_group_id",r(oe))}),_e(()=>{Me("cron_expression",r(ee))}),_e(()=>{Me("cron_timezone",r(se))}),_e(()=>{Me("http_method",r(te))}),_e(()=>{Me("file_types",r(le))}),_e(()=>{Me("file_max_size_mb",r(he))}),_e(()=>{Me("webhook_url",r(ve))}),_e(()=>{Me("store_type",r(fe))}),_e(()=>{Me("store_path",r(ke))}),_e(()=>{Me("schema_json",r(Ae))}),_e(()=>{const ce=r(ge),Ie=r(Oe),et=r(Ze),lt=r(Xe),vt=r(it),yt=r(Ge);Nt||Qt(()=>{const bt=i();if(!bt)return;const Mt=o().find(Ht=>Ht.id===bt);if(!Mt||Mt.type!=="agent")return;const Lt=[];Ie&&Lt.push("image/png","image/jpeg"),et&&Lt.push("application/pdf"),lt&&Lt.push("application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"),Na(bt,"multimodal",{vision_enabled:ce,supported_file_types:Lt,max_file_size_mb:vt,image_detail:yt})})});function pn(){mn.set(null)}function wn(){const ce=n();if(!ce)return;const Ie=ce.id;an.update(et=>et.filter(lt=>lt.id!==Ie)),Mn.update(et=>et.filter(lt=>lt.source!==Ie&&lt.target!==Ie)),mn.set(null)}function hn(ce){mn.set(ce)}var Sr=Te(),Qe=de(Sr);{var kt=ce=>{const Ie=k(n),et=k(()=>v[r(Ie).type??""]??cr),lt=k(()=>p[r(Ie).type??""]??"#ff6b35");var vt=z1(),yt=d(vt),bt=d(yt),Mt=d(bt);let Lt;var Ht=d(Mt);un(Ht,()=>r(et),(Re,Le)=>{Le(Re,{size:14})}),c(Mt);var Wt=h(Mt,2),kn=d(Wt),Sn=d(kn);c(kn);var Ln=h(kn,2),rr=d(Ln,!0);c(Ln),c(Wt),c(bt);var ya=h(bt,2),cl=d(ya);Ks(cl,{size:14}),c(ya),c(yt);var Oo=h(yt,2),ba=d(Oo),xa=d(ba);let Ro;var dl=d(xa,!0);c(xa),c(ba);var wa=h(ba,2),Lo=h(d(wa),2),ul=d(Lo);{var vl=Re=>{var Le=Bm(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Input node name",get value(){return r(I)},set value(me){_(I,me,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Trigger Type",type:"select",options:["manual","http","queue","schedule","file_upload"],get value(){return r(re)},set value(me){_(re,me,!0)}});var qe=h(Ke,2);{var Ye=me=>{var He=Rm(),Ee=de(He);Ne(Ee,{label:"HTTP Method",type:"select",options:["GET","POST","PUT","PATCH"],get value(){return r(te)},set value(Pe){_(te,Pe,!0)}}),ye(2),y(me,He)},ft=me=>{var He=Lm(),Ee=de(He);Ne(Ee,{label:"Broker",type:"select",options:["kafka","rabbitmq","redis"],get value(){return r(ne)},set value(ht){_(ne,ht,!0)}});var Pe=h(Ee,2);Ne(Pe,{label:"Topic / Queue",type:"text",placeholder:"pipeline-input",get value(){return r(G)},set value(ht){_(G,ht,!0)}});var Fe=h(Pe,2);Ne(Fe,{label:"Group ID",type:"text",placeholder:"studio-group",get value(){return r(oe)},set value(ht){_(oe,ht,!0)}}),y(me,He)},pt=me=>{var He=Hm(),Ee=de(He);Ne(Ee,{label:"Cron Expression",type:"text",placeholder:"0 */6 * * *",get value(){return r(ee)},set value(Fe){_(ee,Fe,!0)}});var Pe=h(Ee,2);Ne(Pe,{label:"Timezone",type:"text",placeholder:"UTC",get value(){return r(se)},set value(Fe){_(se,Fe,!0)}}),ye(2),y(me,He)},Je=me=>{var He=Vm(),Ee=de(He);Ne(Ee,{label:"Accepted Types",type:"text",placeholder:"application/pdf, text/csv",get value(){return r(le)},set value(Fe){_(le,Fe,!0)}});var Pe=h(Ee,2);Ne(Pe,{label:"Max Size (MB)",type:"number",placeholder:"50",get value(){return r(he)},set value(Fe){_(he,Fe,!0)}}),y(me,He)},Ve=me=>{var He=Fm();y(me,He)};Y(qe,me=>{r(re)==="http"?me(Ye):r(re)==="queue"?me(ft,1):r(re)==="schedule"?me(pt,2):r(re)==="file_upload"?me(Je,3):me(Ve,!1)})}var Se=h(qe,2);Ne(Se,{label:"Input Schema (JSON)",type:"textarea",placeholder:'{"type": "object", "properties": {}}',get value(){return r(Ae)},set value(me){_(Ae,me,!0)}}),y(Re,Le)},fl=Re=>{var Le=Zm(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Output node name",get value(){return r(I)},set value(Se){_(I,Se,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Destination",type:"select",options:["response","queue","webhook","store"],get value(){return r(ie)},set value(Se){_(ie,Se,!0)}});var qe=h(Ke,2);{var Ye=Se=>{var me=qm(),He=de(me);Ne(He,{label:"Broker",type:"select",options:["kafka","rabbitmq","redis"],get value(){return r(ne)},set value(Pe){_(ne,Pe,!0)}});var Ee=h(He,2);Ne(Ee,{label:"Topic / Queue",type:"text",placeholder:"pipeline-output",get value(){return r(G)},set value(Pe){_(G,Pe,!0)}}),y(Se,me)},ft=Se=>{Ne(Se,{label:"Webhook URL",type:"text",placeholder:"https://example.com/callback",get value(){return r(ve)},set value(me){_(ve,me,!0)}})},pt=Se=>{var me=Km(),He=de(me);Ne(He,{label:"Storage Type",type:"select",options:["file","database"],get value(){return r(fe)},set value(Pe){_(fe,Pe,!0)}});var Ee=h(He,2);Ne(Ee,{label:"Path / Table",type:"text",placeholder:"/tmp/results.json",get value(){return r(ke)},set value(Pe){_(ke,Pe,!0)}}),y(Se,me)},Je=Se=>{var me=jm();y(Se,me)};Y(qe,Se=>{r(ie)==="queue"?Se(Ye):r(ie)==="webhook"?Se(ft,1):r(ie)==="store"?Se(pt,2):Se(Je,!1)})}var Ve=h(qe,2);Ne(Ve,{label:"Response Schema (JSON)",type:"textarea",placeholder:'{"type": "object", "properties": {}}',get value(){return r(Ae)},set value(Se){_(Ae,Se,!0)}}),y(Re,Le)},pl=Re=>{var Le=Wm(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Agent name",get value(){return r(I)},set value(Fe){_(I,Fe,!0)}});var Ke=h(Be,2),qe=h(d(Ke),2);Ql(qe,{placeholder:"Select model...",get value(){return r(H)},set value(Fe){_(H,Fe,!0)}}),c(Ke);var Ye=h(Ke,2);Ne(Ye,{label:"Instructions",type:"textarea",placeholder:"System instructions for this agent...",get value(){return r(O)},set value(Fe){_(O,Fe,!0)}});var ft=h(Ye,2);Ne(ft,{label:"Description",type:"text",placeholder:"Agent description",get value(){return r(F)},set value(Fe){_(F,Fe,!0)}});var pt=h(ft,2);Ne(pt,{label:"Temperature",type:"number",placeholder:"0.7",get value(){return r(L)},set value(Fe){_(L,Fe,!0)}});var Je=h(pt,2);Ne(Je,{label:"Max Tokens",type:"number",placeholder:"4096",get value(){return r(q)},set value(Fe){_(q,Fe,!0)}});var Ve=h(Je,2),Se=d(Ve),me=h(d(Se),2);let He;c(Se);var Ee=h(Se,2);{var Pe=Fe=>{var ht=Ym(),Vt=d(ht),nn=h(d(Vt),2),Xt=d(nn);Ct(Xt),ye(),c(nn);var zn=h(nn,2),zr=d(zn);Ct(zr),ye(),c(zn);var Hn=h(zn,2),Vn=d(Hn);Ct(Vn),ye(),c(Hn),c(Vt);var Cn=h(Vt,2),Cr=h(d(Cn),2),Fn=d(Cr);Ct(Fn);var Er=h(Fn,2),Nl=d(Er);c(Er),c(Cr),c(Cn);var qo=h(Cn,2),Ko=h(d(qo),2),Ca=d(Ko),Nr=d(Ca);Ct(Nr),Nr.value=Nr.__value="auto",ye(),c(Ca);var Ea=h(Ca,2),Mr=d(Ea);Ct(Mr),Mr.value=Mr.__value="low",ye(),c(Ea);var jo=h(Ea,2),Pr=d(jo);Ct(Pr),Pr.value=Pr.__value="high",ye(),c(jo),c(Ko),c(qo),c(ht),$(()=>W(Nl,`${r(it)??""} MB`)),Ma(Xt,()=>r(Oe),Pt=>_(Oe,Pt)),Ma(zr,()=>r(Ze),Pt=>_(Ze,Pt)),Ma(Vn,()=>r(Xe),Pt=>_(Xe,Pt)),on(Fn,()=>r(it),Pt=>_(it,Pt)),Pa(u,[],Nr,()=>r(Ge),Pt=>_(Ge,Pt)),Pa(u,[],Mr,()=>r(Ge),Pt=>_(Ge,Pt)),Pa(u,[],Pr,()=>r(Ge),Pt=>_(Ge,Pt)),y(Fe,ht)};Y(Ee,Fe=>{r(ge)&&Fe(Pe)})}c(Ve),$(()=>He=De(me,1,"mm-toggle-switch svelte-16rdffs",null,He,{"mm-on":r(ge)})),be("click",Se,()=>_(ge,!r(ge))),y(Re,Le)},hl=Re=>{var Le=Jm(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Tool label on canvas",get value(){return r(I)},set value(Ve){_(I,Ve,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Tool Type",type:"select",get options(){return w},get value(){return r(j)},set value(Ve){_(j,Ve,!0)}});var qe=h(Ke,2);{var Ye=Ve=>{var Se=Um(),me=d(Se),He=d(me);Xs(He,{size:11});var Ee=h(He,2),Pe=d(Ee,!0);c(Ee),c(me);var Fe=h(me,2),ht=d(Fe,!0);c(Fe);var Vt=h(Fe,2);{var nn=Xt=>{var zn=Gm();je(zn,21,()=>r(E).parameters,wt,(zr,Hn)=>{var Vn=Xm(),Cn=d(Vn),Cr=d(Cn,!0);c(Cn);var Fn=h(Cn,2),Er=d(Fn);c(Fn),c(Vn),$(()=>{W(Cr,r(Hn).name),W(Er,`${r(Hn).type??""}${r(Hn).required?"":"?"}`)}),y(zr,Vn)}),c(zn),y(Xt,zn)};Y(Vt,Xt=>{r(E).parameters.length>0&&Xt(nn)})}c(Se),$(()=>{W(Pe,r(E).name),W(ht,r(E).description)}),y(Ve,Se)},ft=Ve=>{var Se=Qm();y(Ve,Se)};Y(qe,Ve=>{r(E)?Ve(Ye):r(j)==="custom"&&Ve(ft,1)})}var pt=h(qe,2);Ne(pt,{label:"Description",type:"textarea",placeholder:"What this tool does",get value(){return r(F)},set value(Ve){_(F,Ve,!0)}});var Je=h(pt,2);Ne(Je,{label:"Timeout (seconds)",type:"number",placeholder:"30",get value(){return r(M)},set value(Ve){_(M,Ve,!0)}}),y(Re,Le)},gl=Re=>{var Le=e1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Reasoning name",get value(){return r(I)},set value(Je){_(I,Je,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Pattern",type:"select",get options(){return f},get value(){return r(R)},set value(Je){_(R,Je,!0)}});var qe=h(Ke,2);{var Ye=Je=>{var Ve=$m(),Se=d(Ve),me=d(Se);Zr(me,{size:11});var He=h(me,2),Ee=d(He,!0);c(He),c(Se);var Pe=h(Se,2),Fe=d(Pe,!0);c(Pe);var ht=h(Pe,2),Vt=d(ht);c(ht),c(Ve),$(()=>{W(Ee,r(N).name),W(Fe,r(N).description),W(Vt,`Best for: ${r(N).bestFor??""}`)}),y(Je,Ve)};Y(qe,Je=>{r(N)&&Je(Ye)})}var ft=h(qe,2);{let Je=k(()=>r(N)?String(r(N).defaultMaxSteps):"10");Ne(ft,{label:"Max Steps",type:"number",get placeholder(){return r(Je)},get value(){return r(b)},set value(Ve){_(b,Ve,!0)}})}var pt=h(ft,2);Ne(pt,{label:"Description",type:"text",placeholder:"Reasoning strategy description",get value(){return r(F)},set value(Je){_(F,Je,!0)}}),y(Re,Le)},ml=Re=>{var Le=t1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Condition name",get value(){return r(I)},set value(qe){_(I,qe,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Condition Key",type:"text",placeholder:"e.g. document_type, status",get value(){return r(A)},set value(qe){_(A,qe,!0)}}),ye(2),y(Re,Le)},_l=Re=>{var Le=s1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Memory name",get value(){return r(I)},set value(me){_(I,me,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Action",type:"select",options:["store","retrieve","clear"],get value(){return r(U)},set value(me){_(U,me,!0)}});var qe=h(Ke,2),Ye=d(qe);{var ft=me=>{var He=n1();y(me,He)},pt=me=>{var He=r1();y(me,He)},Je=me=>{var He=a1();y(me,He)},Ve=me=>{var He=o1();y(me,He)};Y(Ye,me=>{r(U)==="store"?me(ft):r(U)==="retrieve"?me(pt,1):r(U)==="clear"?me(Je,2):me(Ve,!1)})}c(qe);var Se=h(qe,2);Ne(Se,{label:"Namespace",type:"text",placeholder:"default",get value(){return r(Z)},set value(me){_(Z,me,!0)}}),y(Re,Le)},yl=Re=>{var Le=f1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Validator name",get value(){return r(I)},set value(Ee){_(I,Ee,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Validation Rule",type:"select",options:["not_empty","is_string","is_list","is_dict","custom"],get value(){return r(X)},set value(Ee){_(X,Ee,!0)}});var qe=h(Ke,2),Ye=d(qe);{var ft=Ee=>{var Pe=i1();y(Ee,Pe)},pt=Ee=>{var Pe=l1();y(Ee,Pe)},Je=Ee=>{var Pe=c1();y(Ee,Pe)},Ve=Ee=>{var Pe=d1();y(Ee,Pe)},Se=Ee=>{var Pe=u1();y(Ee,Pe)},me=Ee=>{var Pe=v1();y(Ee,Pe)};Y(Ye,Ee=>{r(X)==="not_empty"?Ee(ft):r(X)==="is_string"?Ee(pt,1):r(X)==="is_list"?Ee(Je,2):r(X)==="is_dict"?Ee(Ve,3):r(X)==="custom"?Ee(Se,4):Ee(me,!1)})}c(qe);var He=h(qe,2);Ne(He,{label:"On Failure",type:"select",options:["reject","retry","fallback","log"],get value(){return r(z)},set value(Ee){_(z,Ee,!0)}}),y(Re,Le)},bl=Re=>{var Le=p1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Code block name",get value(){return r(I)},set value(Ye){_(I,Ye,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Description",type:"text",placeholder:"What this code does",get value(){return r(F)},set value(Ye){_(F,Ye,!0)}});var qe=h(Ke,2);Ne(qe,{label:"Python Code",type:"textarea",placeholder:"async def execute(context, inputs):     return inputs",get value(){return r(g)},set value(Ye){_(g,Ye,!0)}}),ye(2),y(Re,Le)},xl=Re=>{var Le=h1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Fan Out name",get value(){return r(I)},set value(Ye){_(I,Ye,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Split Expression",type:"text",placeholder:"How to split input for parallel branches",get value(){return r(J)},set value(Ye){_(J,Ye,!0)}});var qe=h(Ke,2);Ne(qe,{label:"Max Concurrent",type:"number",placeholder:"10",get value(){return r(T)},set value(Ye){_(T,Ye,!0)}}),ye(2),y(Re,Le)},wl=Re=>{var Le=y1(),Be=de(Le);Ne(Be,{label:"Name",type:"text",placeholder:"Fan In name",get value(){return r(I)},set value(Se){_(I,Se,!0)}});var Ke=h(Be,2);Ne(Ke,{label:"Merge Expression",type:"select",options:["concat","collect"],get value(){return r(ae)},set value(Se){_(ae,Se,!0)}});var qe=h(Ke,2);Ne(qe,{label:"Timeout (seconds)",type:"number",placeholder:"30",get value(){return r(V)},set value(Se){_(V,Se,!0)}});var Ye=h(qe,2),ft=d(Ye);{var pt=Se=>{var me=g1();y(Se,me)},Je=Se=>{var me=m1();y(Se,me)},Ve=Se=>{var me=_1();y(Se,me)};Y(ft,Se=>{r(ae)==="concat"?Se(pt):r(ae)==="collect"?Se(Je,1):Se(Ve,!1)})}c(Ye),y(Re,Le)},kl=Re=>{Ne(Re,{label:"Name",type:"text",placeholder:"Node name",get value(){return r(I)},set value(Le){_(I,Le,!0)}})};Y(ul,Re=>{r(Ie).type==="input"?Re(vl):r(Ie).type==="output"?Re(fl,1):r(Ie).type==="agent"?Re(pl,2):r(Ie).type==="tool"?Re(hl,3):r(Ie).type==="reasoning"?Re(gl,4):r(Ie).type==="condition"?Re(ml,5):r(Ie).type==="memory"?Re(_l,6):r(Ie).type==="validator"?Re(yl,7):r(Ie).type==="custom_code"?Re(bl,8):r(Ie).type==="fan_out"?Re(xl,9):r(Ie).type==="fan_in"?Re(wl,10):Re(kl,!1)})}c(Lo),c(wa);var Ho=h(wa,2);{var Sl=Re=>{var Le=S1(),Be=d(Le),Ke=d(Be);Jl(Ke,{size:12}),ye(),c(Be);var qe=h(Be,2),Ye=d(qe);{var ft=Ve=>{var Se=x1(),me=h(d(Se),2);je(me,17,()=>r(gt),wt,(He,Ee)=>{var Pe=b1(),Fe=d(Pe),ht=d(Fe,!0);c(Fe);var Vt=h(Fe,2);Uo(Vt,{size:10}),ye(2),c(Pe),$((nn,Xt)=>{xe(Pe,"title",`Select ${nn??""}`),W(ht,Xt)},[()=>xt(r(Ee).source),()=>xt(r(Ee).source)]),be("click",Pe,()=>hn(r(Ee).source)),y(He,Pe)}),c(Se),y(Ve,Se)};Y(Ye,Ve=>{r(gt).length>0&&Ve(ft)})}var pt=h(Ye,2);{var Je=Ve=>{var Se=k1(),me=h(d(Se),2);je(me,17,()=>r(dt),wt,(He,Ee)=>{var Pe=w1(),Fe=h(d(Pe),2);Uo(Fe,{size:10});var ht=h(Fe,2),Vt=d(ht,!0);c(ht),c(Pe),$((nn,Xt)=>{xe(Pe,"title",`Select ${nn??""}`),W(Vt,Xt)},[()=>xt(r(Ee).target),()=>xt(r(Ee).target)]),be("click",Pe,()=>hn(r(Ee).target)),y(He,Pe)}),c(Se),y(Ve,Se)};Y(pt,Ve=>{r(dt).length>0&&Ve(Je)})}c(qe),c(Le),y(Re,Le)};Y(Ho,Re=>{(r(gt).length>0||r(dt).length>0)&&Re(Sl)})}var ka=h(Ho,2),Vo=h(d(ka),2),Sa=d(Vo),zl=d(Sa);c(Sa);var Fo=h(Sa,2),Cl=d(Fo);c(Fo),c(Vo),c(ka);var Bo=h(ka,2),za=d(Bo),El=d(za);Xn(El,{size:13}),ye(2),c(za),c(Bo),c(Oo),c(vt),$((Re,Le)=>{Lt=st(Mt,"",Lt,{"--node-color":r(lt)}),W(Sn,`${m[r(Ie).type??""]??"Node"??""} Properties`),W(rr,r(Ie).id),Ro=st(xa,"",Ro,{"--badge-color":r(lt)}),W(dl,m[r(Ie).type??""]??r(Ie).type),W(zl,`X: ${Re??""}`),W(Cl,`Y: ${Le??""}`)},[()=>Math.round(r(Ie).position.x),()=>Math.round(r(Ie).position.y)]),be("click",ya,pn),be("click",za,wn),y(ce,vt)};Y(Qe,ce=>{n()&&ce(kt)})}y(t,Sr),Ce(),l()}_t(["click"]);var E1=P("<button><!> <span>Properties</span></button>"),N1=P('<button class="palette-item svelte-1ecj58j"><div class="palette-icon svelte-1ecj58j"><!></div> <span class="palette-label svelte-1ecj58j"> </span></button>'),M1=P('<button class="palette-item svelte-1ecj58j"><div class="palette-icon svelte-1ecj58j"><!></div> <span class="palette-label svelte-1ecj58j"> </span></button>'),P1=P('<div class="palette-items svelte-1ecj58j"><div class="palette-group-label svelte-1ecj58j">Pipeline I/O</div> <!> <div class="palette-group-label svelte-1ecj58j" style="margin-top: 8px;">Processing</div> <!></div>'),T1=P('<aside><div class="resize-handle svelte-1ecj58j"></div> <div class="panel-tab-header svelte-1ecj58j"><button><!> <span>Components</span></button> <!></div> <div class="panel-content svelte-1ecj58j"><!></div></aside>');function I1(t,e){ze(e,!0);const n=()=>at(mn,"$selectedNodeId",a),[a,o]=Ot();let i=Q(320),s=Q(!1),l=Q(0),u=Q(0);function v(z){z.preventDefault(),_(s,!0),_(l,z.clientX,!0),_(u,r(i),!0),document.addEventListener("mousemove",p),document.addEventListener("mouseup",m)}function p(z){r(s)&&_(i,Math.max(240,Math.min(480,r(u)+(r(l)-z.clientX))),!0)}function m(){_(s,!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)}On(()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)});const f=[{type:"input",label:"Input",icon:wc,color:"#22c55e",group:"io"},{type:"output",label:"Output",icon:kc,color:"#ef4444",group:"io"},{type:"agent",label:"Agent",icon:cr,color:"#6366f1"},{type:"tool",label:"Tool",icon:Wn,color:"#8b5cf6"},{type:"reasoning",label:"Reasoning",icon:Zr,color:"#ec4899"},{type:"condition",label:"Condition",icon:Ws,color:"#f59e0b"},{type:"memory",label:"Memory",icon:co,color:"#06b6d4"},{type:"validator",label:"Validator",icon:vo,color:"#f59e0b"},{type:"custom_code",label:"Code",icon:la,color:"#3b82f6"},{type:"fan_out",label:"Fan Out",icon:fo,color:"#64748b"},{type:"fan_in",label:"Fan In",icon:po,color:"#64748b"}];function w(z){const g=parseInt(z.slice(1,3),16),C=parseInt(z.slice(3,5),16),T=parseInt(z.slice(5,7),16);return`rgba(${g}, ${C}, ${T}, 0.15)`}let N=k(()=>n()?"properties":"components");var E=T1();let I,H;var O=d(E),F=h(O,2),M=d(F);let R;var b=d(M);jl(b,{size:12}),ye(2),c(M);var A=h(M,2);{var B=z=>{var g=E1();let C;var T=d(g);Ec(T,{size:12}),ye(2),c(g),$(()=>C=De(g,1,"panel-tab-btn svelte-1ecj58j",null,C,{active:r(N)==="properties"})),be("click",g,()=>{}),y(z,g)};Y(A,z=>{n()&&z(B)})}c(F);var K=h(F,2),Z=d(K);{var x=z=>{C1(z,{})},S=z=>{var g=P1(),C=h(d(g),2);je(C,17,()=>f.filter(D=>D.group==="io"),wt,(D,V)=>{var L=N1(),q=d(L);let j;var U=d(q);un(U,()=>r(V).icon,(ae,re)=>{re(ae,{size:14})}),c(q);var X=h(q,2),J=d(X,!0);c(X),c(L),$(ae=>{xe(L,"title",`Add ${r(V).label} node`),j=st(q,"",j,ae),W(J,r(V).label)},[()=>({background:w(r(V).color),color:r(V).color})]),be("click",L,()=>Wo(r(V).type,r(V).label)),y(D,L)});var T=h(C,4);je(T,17,()=>f.filter(D=>!D.group),wt,(D,V)=>{var L=M1(),q=d(L);let j;var U=d(q);un(U,()=>r(V).icon,(ae,re)=>{re(ae,{size:14})}),c(q);var X=h(q,2),J=d(X,!0);c(X),c(L),$(ae=>{xe(L,"title",`Add ${r(V).label} node`),j=st(q,"",j,ae),W(J,r(V).label)},[()=>({background:w(r(V).color),color:r(V).color})]),be("click",L,()=>Wo(r(V).type,r(V).label)),y(D,L)}),c(g),y(z,g)};Y(Z,z=>{r(N)==="properties"&&n()?z(x):z(S,!1)})}c(K),c(E),$(()=>{I=De(E,1,"component-panel svelte-1ecj58j",null,I,{dragging:r(s)}),H=st(E,"",H,{width:`${r(i)??""}px`}),R=De(M,1,"panel-tab-btn svelte-1ecj58j",null,R,{active:r(N)==="components"})}),be("mousedown",O,v),be("click",M,()=>{n()&&mn.set(null)}),y(t,E),Ce(),o()}_t(["mousedown","click"]);var A1=P('<div class="empty-state svelte-dlnc6c"><span class="empty-text svelte-dlnc6c">No execution events yet. Run your pipeline to see logs here.</span></div>'),D1=P('<span class="log-node svelte-dlnc6c"> </span>'),O1=P('<span class="log-pipeline svelte-dlnc6c"> </span>'),R1=P('<span class="log-extra svelte-dlnc6c"> </span>'),L1=P('<div class="log-line svelte-dlnc6c"><span class="log-timestamp svelte-dlnc6c"> </span> <span> </span> <!> <!> <!></div>'),H1=P('<div class="console-tab svelte-dlnc6c"><div class="console-toolbar svelte-dlnc6c"><span class="event-count svelte-dlnc6c"> </span> <button class="toolbar-btn svelte-dlnc6c" title="Clear console"><!></button></div> <div class="console-output svelte-dlnc6c"><!></div></div>');function V1(t,e){ze(e,!0);const n=()=>at(Ka,"$executionEvents",a),[a,o]=Ot();let i=Q(void 0),s=Q(0);_e(()=>{const b=n();b.length>r(s)&&r(i)&&requestAnimationFrame(()=>{r(i)&&(r(i).scrollTop=r(i).scrollHeight)}),_(s,b.length,!0)});function l(){Ka.set([])}function u(b){const A=new Date(b),B=String(A.getHours()).padStart(2,"0"),K=String(A.getMinutes()).padStart(2,"0"),Z=String(A.getSeconds()).padStart(2,"0"),x=String(A.getMilliseconds()).padStart(3,"0");return`${B}:${K}:${Z}.${x}`}function v(b){switch(b){case"node_start":return"badge-info";case"node_complete":case"pipeline_complete":return"badge-success";case"node_error":return"badge-error";case"node_skip":return"badge-warning";default:return""}}function p(b){switch(b){case"node_start":return"START";case"node_complete":return"DONE";case"node_error":return"ERROR";case"node_skip":return"SKIP";case"pipeline_complete":return"COMPLETE";default:return b}}function m(b){return b.type==="node_complete"&&b.latency_ms!=null?`${b.latency_ms}ms`:b.type==="node_error"&&b.error?b.error:b.type==="pipeline_complete"&&b.duration_ms!=null?`Total: ${b.duration_ms}ms`:""}var f=H1(),w=d(f),N=d(w),E=d(N);c(N);var I=h(N,2),H=d(I);Xn(H,{size:13}),c(I),c(w);var O=h(w,2),F=d(O);{var M=b=>{var A=A1();y(b,A)},R=b=>{var A=Te(),B=de(A);je(B,1,n,wt,(K,Z)=>{const x=k(()=>m(r(Z)));var S=L1(),z=d(S),g=d(z,!0);c(z);var C=h(z,2),T=d(C,!0);c(C);var D=h(C,2);{var V=X=>{var J=D1(),ae=d(J,!0);c(J),$(()=>W(ae,r(Z).node_id)),y(X,J)};Y(D,X=>{r(Z).node_id&&X(V)})}var L=h(D,2);{var q=X=>{var J=O1(),ae=d(J,!0);c(J),$(()=>W(ae,r(Z).pipeline_name)),y(X,J)};Y(L,X=>{r(Z).pipeline_name&&X(q)})}var j=h(L,2);{var U=X=>{var J=R1(),ae=d(J,!0);c(J),$(()=>W(ae,r(x))),y(X,J)};Y(j,X=>{r(x)&&X(U)})}c(S),$((X,J,ae)=>{W(g,X),De(C,1,`log-badge ${J??""}`,"svelte-dlnc6c"),W(T,ae)},[()=>u(r(Z).timestamp??""),()=>v(r(Z).type),()=>p(r(Z).type)]),y(K,S)}),y(b,A)};Y(F,b=>{n().length===0?b(M):b(R,!1)})}c(O),yn(O,b=>_(i,b),()=>r(i)),c(f),$(()=>W(E,`${n().length??""} events`)),be("click",I,l),y(t,f),Ce(),o()}_t(["click"]);var F1=P('<span class="auto-sync-indicator svelte-a1zyks">Auto-syncing...</span>'),B1=P('<div class="code-state spinning-indicator svelte-a1zyks"><span class="svelte-a1zyks">Generating code...</span></div>'),q1=P('<div class="code-state code-error svelte-a1zyks"><span class="svelte-a1zyks"> </span></div>'),K1=P('<tr class="code-line svelte-a1zyks"><td class="line-number svelte-a1zyks"></td><td class="line-content svelte-a1zyks"><!></td></tr>'),j1=P('<div class="code-block-wrapper svelte-a1zyks"><table class="code-table svelte-a1zyks" role="presentation"><tbody class="svelte-a1zyks"></tbody></table></div>'),Z1=P('<div class="code-state svelte-a1zyks"><span class="svelte-a1zyks">Add nodes to your pipeline to generate code.</span></div>'),Y1=P('<div class="code-tab svelte-a1zyks"><div class="code-toolbar svelte-a1zyks"><span class="toolbar-label svelte-a1zyks">Generated Python <!></span> <div class="toolbar-actions svelte-a1zyks"><button><span class="auto-toggle-label svelte-a1zyks">Auto</span> <span class="auto-toggle-track svelte-a1zyks"><span class="auto-toggle-thumb svelte-a1zyks"></span></span></button> <button class="toolbar-btn svelte-a1zyks" title="Copy to clipboard"><!></button> <button title="Regenerate code"><!></button></div></div> <div class="code-content svelte-a1zyks"><!></div></div>');function W1(t,e){ze(e,!0);let n=Q(""),a=Q(!1),o=Q(""),i=Q(!1),s=Q(!0),l=Q(!1),u=null,v=null,p=Q("");function m(){const G=Bn(an),oe=Bn(Mn),ee=G.map(te=>({id:te.id,type:te.type,label:te.data?.label??"",model:te.data?.model??"",instructions:te.data?.instructions??""})),se=oe.map(te=>({id:te.id,source:te.source,target:te.target}));return JSON.stringify({nodes:ee,edges:se})}function f(){const G=Bn(an),oe=Bn(Mn),ee=G.map(te=>({id:te.id,type:te.type,label:te.data?.label??"",position:te.position,data:te.data})),se=oe.map(te=>({id:te.id,source:te.source,target:te.target}));return{nodes:ee,edges:se}}async function w(){_(a,!0),_(o,""),_(l,!1);try{const G=f(),oe=await ot.codegen.toCode(G);_(n,oe.code,!0)}catch(G){_(o,G instanceof Error?G.message:"Code generation failed",!0),_(n,"")}finally{_(a,!1)}}async function N(){if(r(n))try{await navigator.clipboard.writeText(r(n)),_(i,!0),u&&clearTimeout(u),u=setTimeout(()=>{_(i,!1),u=null},2e3)}catch{}}function E(){_(s,!r(s)),r(s)||I()}function I(){v&&(clearTimeout(v),v=null),_(l,!1)}function H(G){return G.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function O(G){const oe=H(G),ee=[];let se=0;const te=new RegExp(['("""[\\s\\S]*?""")',"('''[\\s\\S]*?''')","(#[^\\n]*)",'("(?:[^"\\\\\\n]|\\\\.)*")',"('(?:[^'\\\\\\n]|\\\\.)*')","\\b(def)(\\s+)(\\w+)","\\b(class)(\\s+)(\\w+)","(@\\w+(?:\\.\\w+)*)","\\b(from|import|return|if|else|elif|for|while|try|except|finally|with|as|async|await|yield|raise|pass|break|continue|and|or|not|in|is|None|True|False)\\b","\\b(print|len|range|type|str|int|float|list|dict|set|tuple|isinstance|super)(?=\\s*\\()","\\b(\\d+\\.?\\d*(?:e[+-]?\\d+)?)\\b"].join("|"),"g");let ue;for(te.lastIndex=0;(ue=te.exec(oe))!==null;)ue.index>se&&ee.push(oe.slice(se,ue.index)),ue[1]!==void 0?ee.push(`<span class="hl-string">${ue[1]}</span>`):ue[2]!==void 0?ee.push(`<span class="hl-string">${ue[2]}</span>`):ue[3]!==void 0?ee.push(`<span class="hl-comment">${ue[3]}</span>`):ue[4]!==void 0?ee.push(`<span class="hl-string">${ue[4]}</span>`):ue[5]!==void 0?ee.push(`<span class="hl-string">${ue[5]}</span>`):ue[6]!==void 0?ee.push(`<span class="hl-keyword">${ue[6]}</span>${ue[7]}<span class="hl-funcname">${ue[8]}</span>`):ue[9]!==void 0?ee.push(`<span class="hl-keyword">${ue[9]}</span>${ue[10]}<span class="hl-funcname">${ue[11]}</span>`):ue[12]!==void 0?ee.push(`<span class="hl-decorator">${ue[12]}</span>`):ue[13]!==void 0?ee.push(`<span class="hl-keyword">${ue[13]}</span>`):ue[14]!==void 0?ee.push(`<span class="hl-builtin">${ue[14]}</span>`):ue[15]!==void 0?ee.push(`<span class="hl-number">${ue[15]}</span>`):ee.push(ue[0]),se=ue.index+ue[0].length;return se<oe.length&&ee.push(oe.slice(se)),ee.join("")}let F=k(()=>r(n)?O(r(n)):""),M=k(()=>r(F)?r(F).split(`
`):[]),R=null,b=null;function A(){if(!r(s))return;const G=m();G===r(p)||(_(p,G,!0),Bn(an).length===0)||r(a)||(I(),_(l,!0),v=setTimeout(()=>{_(l,!1),v=null,w()},800))}io(()=>{_(p,m(),!0),Bn(an).length>0&&w(),R=an.subscribe(()=>{A()}),b=Mn.subscribe(()=>{A()})}),On(()=>{u&&clearTimeout(u),I(),R&&R(),b&&b()});var B=Y1(),K=d(B),Z=d(K),x=h(d(Z));{var S=G=>{var oe=F1();y(G,oe)};Y(x,G=>{r(l)&&G(S)})}c(Z);var z=h(Z,2),g=d(z);let C;var T=h(g,2),D=d(T);{var V=G=>{ho(G,{size:13})},L=G=>{Gs(G,{size:13})};Y(D,G=>{r(i)?G(V):G(L,!1)})}c(T);var q=h(T,2);let j;var U=d(q);mt(U,{size:13}),c(q),c(z),c(K);var X=h(K,2),J=d(X);{var ae=G=>{var oe=B1();y(G,oe)},re=G=>{var oe=q1(),ee=d(oe),se=d(ee,!0);c(ee),c(oe),$(()=>W(se,r(o))),y(G,oe)},ie=G=>{var oe=j1(),ee=d(oe),se=d(ee);je(se,21,()=>r(M),wt,(te,ue,le)=>{var he=K1(),ve=d(he);ve.textContent=le+1;var fe=h(ve),ke=d(fe);$l(ke,()=>r(ue)),c(fe),c(he),y(te,he)}),c(se),c(ee),c(oe),y(G,oe)},ne=G=>{var oe=Z1();y(G,oe)};Y(J,G=>{r(a)?G(ae):r(o)?G(re,1):r(n)?G(ie,2):G(ne,!1)})}c(X),c(B),$(()=>{C=De(g,1,"auto-toggle svelte-a1zyks",null,C,{active:r(s)}),xe(g,"title",r(s)?"Disable auto-sync":"Enable auto-sync"),T.disabled=!r(n),j=De(q,1,"toolbar-btn svelte-a1zyks",null,j,{spinning:r(a)}),q.disabled=r(a)}),be("click",g,E),be("click",T,N),be("click",q,w),y(t,B),Ce()}_t(["click"]);var X1=P('<div class="empty-state svelte-164d9ci"><div class="empty-icon svelte-164d9ci"><!></div> <span class="empty-text svelte-164d9ci">Run your pipeline to see the execution timeline</span></div>'),G1=P('<button><div></div> <span class="dot-label svelte-164d9ci"> </span></button>'),U1=P('<button class="debug-btn active svelte-164d9ci" title="Compare checkpoints"><!> <span> </span></button>'),Q1=P('<span class="debug-hint svelte-164d9ci">Shift+click another checkpoint to compare</span>'),J1=P('<div class="debug-controls svelte-164d9ci"><button class="debug-btn svelte-164d9ci" title="Rewind to this checkpoint"><!> <span>Rewind</span></button> <button class="debug-btn svelte-164d9ci" title="Fork from this checkpoint"><!> <span>Fork</span></button> <!></div>'),$1=P('<span class="diff-key svelte-164d9ci"> </span>'),e_=P('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-added svelte-164d9ci">Added</span> <!></div>'),t_=P('<span class="diff-key svelte-164d9ci"> </span>'),n_=P('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-removed svelte-164d9ci">Removed</span> <!></div>'),r_=P('<span class="diff-key svelte-164d9ci"> </span>'),a_=P('<div class="diff-section svelte-164d9ci"><span class="diff-label diff-changed svelte-164d9ci">Changed</span> <!></div>'),o_=P('<span class="diff-empty svelte-164d9ci">No differences</span>'),s_=P('<div class="diff-panel svelte-164d9ci"><div class="diff-header svelte-164d9ci"> </div> <div class="diff-body svelte-164d9ci"><!> <!> <!> <!></div></div>'),i_=P('<span class="branch-parent svelte-164d9ci"> </span>'),l_=P('<div class="detail-branch svelte-164d9ci"><!> <span> </span> <!></div>'),c_=P('<div class="json-row svelte-164d9ci"><span class="json-key svelte-164d9ci"> </span> <span class="json-value svelte-164d9ci"> </span></div>'),d_=P('<span class="json-empty svelte-164d9ci">empty</span>'),u_=P('<div class="json-tree svelte-164d9ci"><!> <!></div>'),v_=P('<div class="json-row svelte-164d9ci"><span class="json-key svelte-164d9ci"> </span> <span class="json-value svelte-164d9ci"> </span></div>'),f_=P('<span class="json-empty svelte-164d9ci">empty</span>'),p_=P('<div class="json-tree svelte-164d9ci"><!> <!></div>'),h_=P('<div class="detail-panel svelte-164d9ci"><div class="detail-header svelte-164d9ci"><span class="detail-node-badge svelte-164d9ci"> </span> <span class="detail-time svelte-164d9ci"> </span> <span class="detail-timestamp svelte-164d9ci"> </span></div> <!> <div class="json-section svelte-164d9ci"><button class="json-toggle svelte-164d9ci"><!> <span class="json-label svelte-164d9ci">State</span> <span class="json-count svelte-164d9ci"> </span></button> <!></div> <div class="json-section svelte-164d9ci"><button class="json-toggle svelte-164d9ci"><!> <span class="json-label svelte-164d9ci">Inputs</span> <span class="json-count svelte-164d9ci"> </span></button> <!></div></div>'),g_=P('<div class="timeline-toolbar svelte-164d9ci"><div class="toolbar-left svelte-164d9ci"><span class="toolbar-label svelte-164d9ci">Timeline</span> <span class="checkpoint-count svelte-164d9ci"> </span></div> <button class="toolbar-btn svelte-164d9ci" title="Clear checkpoints"><!></button></div> <div class="timeline-scroll svelte-164d9ci"><div class="timeline-track svelte-164d9ci"><div class="timeline-line svelte-164d9ci"></div> <!></div></div> <!> <!> <!>',1),m_=P('<div class="timeline-tab svelte-164d9ci"><!></div>');function __(t,e){ze(e,!0);const n=()=>at(En,"$checkpoints",a),[a,o]=Ot();let i=Q(null),s=Q(null),l=Q(null),u=Q(void 0),v=Q(0),p=Q(!0),m=Q(!1),f=k(()=>r(i)!==null?n().find(x=>x.index===r(i)):void 0);_e(()=>{const x=n();x.length>r(v)&&r(u)&&requestAnimationFrame(()=>{r(u)&&(r(u).scrollLeft=r(u).scrollWidth)}),_(v,x.length,!0)}),io(async()=>{try{const x=await ot.checkpoints.list();En.set(x)}catch{}});function w(x,S){S.shiftKey&&r(i)!==null&&r(i)!==x.index?(_(s,x.index,!0),N()):(_(i,x.index,!0),_(s,null),_(l,null))}async function N(){if(!(r(i)===null||r(s)===null))try{_(l,await ot.checkpoints.diff(r(i),r(s)),!0)}catch{_(l,null)}}async function E(){try{await ot.checkpoints.clear(),En.set([]),_(i,null),_(s,null),_(l,null)}catch{En.set([]),_(i,null),_(s,null),_(l,null)}}async function I(){if(!(!r(f)||r(i)===null))try{await ot.checkpoints.rewind(r(i)),En.update(x=>x.filter(S=>S.index<=r(i))),_(s,null),_(l,null),Ue(`Rewound to checkpoint #${r(i)}`,"info")}catch{Ue("Failed to rewind checkpoint","error")}}async function H(){if(!(!r(f)||r(i)===null))try{const x=await ot.checkpoints.fork(r(i),r(f).state);En.update(S=>[...S,x]),_(i,x.index,!0)}catch{}}function O(x){if(!x)return"";const S=Date.now(),z=new Date(x).getTime(),g=S-z,C=Math.floor(g/1e3);if(C<5)return"just now";if(C<60)return`${C}s ago`;const T=Math.floor(C/60);if(T<60)return`${T}m ago`;const D=Math.floor(T/60);return D<24?`${D}h ago`:new Date(x).toLocaleDateString()}function F(x){if(!x)return"";const S=new Date(x),z=String(S.getHours()).padStart(2,"0"),g=String(S.getMinutes()).padStart(2,"0"),C=String(S.getSeconds()).padStart(2,"0");return`${z}:${g}:${C}`}function M(x){return x.includes("agent")?"var(--color-node-agent, #6366f1)":x.includes("tool")?"var(--color-node-tool, #8b5cf6)":x.includes("reason")?"var(--color-node-reasoning, #ec4899)":x.includes("pipeline")?"var(--color-node-pipeline, #06b6d4)":"var(--color-accent, #ff6b35)"}function R(x){return x.branch_id?"var(--color-info, #3b82f6)":"var(--color-accent, #ff6b35)"}function b(x){return typeof x=="string"?`"${x}"`:x===null?"null":x===void 0?"undefined":typeof x=="object"?JSON.stringify(x,null,2):String(x)}var A=m_(),B=d(A);{var K=x=>{var S=X1(),z=d(S),g=d(z);go(g,{size:32}),c(z),ye(2),c(S),y(x,S)},Z=x=>{var S=g_(),z=de(S),g=d(z),C=h(d(g),2),T=d(C);c(C),c(g);var D=h(g,2),V=d(D);Xn(V,{size:13}),c(D),c(z);var L=h(z,2),q=d(L),j=h(d(q),2);je(j,1,n,ne=>ne.index,(ne,G)=>{const oe=k(()=>r(i)===r(G).index),ee=k(()=>r(s)===r(G).index);var se=G1();let te;var ue=d(se);let le;var he=h(ue,2),ve=d(he,!0);c(he),c(se),$((fe,ke)=>{te=De(se,1,"checkpoint-dot-wrapper svelte-164d9ci",null,te,{selected:r(oe),compare:r(ee)}),xe(se,"title",`${r(G).node_id??""} - ${fe??""}${r(G).branch_id?` (branch: ${r(G).branch_id})`:""}`),le=De(ue,1,"checkpoint-dot svelte-164d9ci",null,le,{selected:r(oe),compare:r(ee),forked:!!r(G).branch_id}),st(ue,`--dot-color: ${ke??""}`),W(ve,r(G).index)},[()=>F(r(G).timestamp),()=>R(r(G))]),be("click",se,fe=>w(r(G),fe)),y(ne,se)}),c(q),c(L),yn(L,ne=>_(u,ne),()=>r(u));var U=h(L,2);{var X=ne=>{var G=J1(),oe=d(G),ee=d(oe);Cc(ee,{size:13}),ye(2),c(oe);var se=h(oe,2),te=d(se);dr(te,{size:13}),ye(2),c(se);var ue=h(se,2);{var le=ve=>{var fe=U1(),ke=d(fe);_c(ke,{size:13});var Ae=h(ke,2),ge=d(Ae);c(Ae),c(fe),$(()=>W(ge,`Compare #${r(i)??""} vs #${r(s)??""}`)),be("click",fe,N),y(ve,fe)},he=ve=>{var fe=Q1();y(ve,fe)};Y(ue,ve=>{r(s)!==null?ve(le):ve(he,!1)})}c(G),be("click",oe,I),be("click",se,H),y(ne,G)};Y(U,ne=>{r(f)&&ne(X)})}var J=h(U,2);{var ae=ne=>{var G=s_(),oe=d(G),ee=d(oe);c(oe);var se=h(oe,2),te=d(se);{var ue=ge=>{var Oe=e_(),Ze=h(d(Oe),2);je(Ze,17,()=>r(l).added,wt,(Xe,it)=>{var Ge=$1(),ct=d(Ge,!0);c(Ge),$(()=>W(ct,r(it))),y(Xe,Ge)}),c(Oe),y(ge,Oe)};Y(te,ge=>{r(l).added.length>0&&ge(ue)})}var le=h(te,2);{var he=ge=>{var Oe=n_(),Ze=h(d(Oe),2);je(Ze,17,()=>r(l).removed,wt,(Xe,it)=>{var Ge=t_(),ct=d(Ge,!0);c(Ge),$(()=>W(ct,r(it))),y(Xe,Ge)}),c(Oe),y(ge,Oe)};Y(le,ge=>{r(l).removed.length>0&&ge(he)})}var ve=h(le,2);{var fe=ge=>{var Oe=a_(),Ze=h(d(Oe),2);je(Ze,17,()=>r(l).changed,wt,(Xe,it)=>{var Ge=r_(),ct=d(Ge,!0);c(Ge),$(()=>W(ct,r(it))),y(Xe,Ge)}),c(Oe),y(ge,Oe)};Y(ve,ge=>{r(l).changed.length>0&&ge(fe)})}var ke=h(ve,2);{var Ae=ge=>{var Oe=o_();y(ge,Oe)};Y(ke,ge=>{r(l).added.length===0&&r(l).removed.length===0&&r(l).changed.length===0&&ge(Ae)})}c(se),c(G),$(()=>W(ee,`Diff: #${r(i)??""} vs #${r(s)??""}`)),y(ne,G)};Y(J,ne=>{r(l)&&ne(ae)})}var re=h(J,2);{var ie=ne=>{var G=h_(),oe=d(G),ee=d(oe),se=d(ee,!0);c(ee);var te=h(ee,2),ue=d(te,!0);c(te);var le=h(te,2),he=d(le,!0);c(le),c(oe);var ve=h(oe,2);{var fe=Qe=>{var kt=l_(),ce=d(kt);dr(ce,{size:12});var Ie=h(ce,2),et=d(Ie);c(Ie);var lt=h(Ie,2);{var vt=yt=>{var bt=i_(),Mt=d(bt);c(bt),$(()=>W(Mt,`from checkpoint #${r(f).parent_index??""}`)),y(yt,bt)};Y(lt,yt=>{r(f).parent_index!==null&&r(f).parent_index!==void 0&&yt(vt)})}c(kt),$(()=>W(et,`Branch: ${r(f).branch_id??""}`)),y(Qe,kt)};Y(ve,Qe=>{r(f).branch_id&&Qe(fe)})}var ke=h(ve,2),Ae=d(ke),ge=d(Ae);{var Oe=Qe=>{Yr(Qe,{size:12})},Ze=Qe=>{Wr(Qe,{size:12})};Y(ge,Qe=>{r(p)?Qe(Oe):Qe(Ze,!1)})}var Xe=h(ge,4),it=d(Xe);c(Xe),c(Ae);var Ge=h(Ae,2);{var ct=Qe=>{var kt=u_(),ce=d(kt);je(ce,17,()=>Object.entries(r(f).state),wt,(vt,yt)=>{var bt=k(()=>dn(r(yt),2));let Mt=()=>r(bt)[0],Lt=()=>r(bt)[1];var Ht=c_(),Wt=d(Ht),kn=d(Wt);c(Wt);var Sn=h(Wt,2),Ln=d(Sn,!0);c(Sn),c(Ht),$(rr=>{W(kn,`${Mt()??""}:`),W(Ln,rr)},[()=>b(Lt())]),y(vt,Ht)});var Ie=h(ce,2);{var et=vt=>{var yt=d_();y(vt,yt)},lt=k(()=>Object.keys(r(f).state).length===0);Y(Ie,vt=>{r(lt)&&vt(et)})}c(kt),y(Qe,kt)};Y(Ge,Qe=>{r(p)&&Qe(ct)})}c(ke);var Nt=h(ke,2),gt=d(Nt),dt=d(gt);{var xt=Qe=>{Yr(Qe,{size:12})},Me=Qe=>{Wr(Qe,{size:12})};Y(dt,Qe=>{r(m)?Qe(xt):Qe(Me,!1)})}var pn=h(dt,4),wn=d(pn);c(pn),c(gt);var hn=h(gt,2);{var Sr=Qe=>{var kt=p_(),ce=d(kt);je(ce,17,()=>Object.entries(r(f).inputs),wt,(vt,yt)=>{var bt=k(()=>dn(r(yt),2));let Mt=()=>r(bt)[0],Lt=()=>r(bt)[1];var Ht=v_(),Wt=d(Ht),kn=d(Wt);c(Wt);var Sn=h(Wt,2),Ln=d(Sn,!0);c(Sn),c(Ht),$(rr=>{W(kn,`${Mt()??""}:`),W(Ln,rr)},[()=>b(Lt())]),y(vt,Ht)});var Ie=h(ce,2);{var et=vt=>{var yt=f_();y(vt,yt)},lt=k(()=>Object.keys(r(f).inputs).length===0);Y(Ie,vt=>{r(lt)&&vt(et)})}c(kt),y(Qe,kt)};Y(hn,Qe=>{r(m)&&Qe(Sr)})}c(Nt),c(G),$((Qe,kt,ce,Ie,et,lt)=>{st(ee,`background: ${Qe??""}20; color: ${kt??""}`),W(se,r(f).node_id),W(ue,ce),W(he,Ie),W(it,`${et??""} keys`),W(wn,`${lt??""} keys`)},[()=>M(r(f).node_id),()=>M(r(f).node_id),()=>O(r(f).timestamp),()=>F(r(f).timestamp),()=>Object.keys(r(f).state).length,()=>Object.keys(r(f).inputs).length]),be("click",Ae,()=>_(p,!r(p))),be("click",gt,()=>_(m,!r(m))),y(ne,G)};Y(re,ne=>{r(f)&&ne(ie)})}$(()=>W(T,`${n().length??""} checkpoint${n().length===1?"":"s"}`)),be("click",D,E),y(x,S)};Y(B,x=>{n().length===0?x(K):x(Z,!1)})}c(A),y(t,A),Ce(),o()}_t(["click"]);var y_=P('<div class="empty-state svelte-1jltp3m"><!> <span>Loading history...</span></div>'),b_=P('<div class="empty-state svelte-1jltp3m"><!> <span>No version history yet</span></div>'),x_=P('<div class="confirm-bar svelte-1jltp3m"><span class="confirm-text svelte-1jltp3m"> </span> <button class="confirm-btn confirm-yes svelte-1jltp3m">Restore</button> <button class="confirm-btn confirm-no svelte-1jltp3m">Cancel</button></div>'),w_=P('<div><div class="version-icon svelte-1jltp3m"><!></div> <div class="version-info svelte-1jltp3m"><span class="version-sha svelte-1jltp3m"> </span> <span class="version-message svelte-1jltp3m"> </span> <span class="version-time svelte-1jltp3m"> </span></div> <div class="version-actions svelte-1jltp3m"><button><!></button> <button title="Restore to this version"><!></button></div> <!></div>'),k_=P('<div class="history-panel svelte-1jltp3m"><div class="header svelte-1jltp3m"><span class="title svelte-1jltp3m">Version History</span> <button class="refresh-btn svelte-1jltp3m" title="Refresh history"><!></button></div> <div class="versions-list svelte-1jltp3m"><!></div></div>');function S_(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",a),[a,o]=Ot();let i=Q($t([])),s=Q(!1),l=Q(null);async function u(){const R=n();if(R){_(s,!0);try{_(i,await ot.projects.getHistory(R.name),!0)}catch{_(i,[],!0)}finally{_(s,!1)}}}async function v(R){const b=n();if(b)try{await ot.projects.bookmarkVersion(b.name,R,`bookmark-${R.slice(0,7)}`),await u(),Ue("Version bookmarked","success")}catch{Ue("Failed to bookmark","error")}}async function p(R){const b=n();if(b)try{await ot.projects.restoreVersion(b.name,R),_(l,null),await u(),Ue("Restored to version "+R.slice(0,7),"success")}catch{Ue("Failed to restore","error")}}function m(R){const b=Date.now(),A=new Date(R).getTime(),B=b-A,K=Math.floor(B/6e4);if(K<1)return"just now";if(K<60)return`${K}m ago`;const Z=Math.floor(K/60);return Z<24?`${Z}h ago`:`${Math.floor(Z/24)}d ago`}_e(()=>{n()&&u()});var f=k_(),w=d(f),N=h(d(w),2),E=d(N);mt(E,{size:13}),c(N),c(w);var I=h(w,2),H=d(I);{var O=R=>{var b=y_(),A=d(b);mt(A,{size:16,class:"spin"}),ye(2),c(b),y(R,b)},F=R=>{var b=b_(),A=d(b);Jo(A,{size:16}),ye(2),c(b),y(R,b)},M=R=>{var b=Te(),A=de(b);je(A,17,()=>r(i),B=>B.sha,(B,K)=>{var Z=w_();let x;var S=d(Z),z=d(S);Jo(z,{size:14}),c(S);var g=h(S,2),C=d(g),T=d(C,!0);c(C);var D=h(C,2),V=d(D,!0);c(D);var L=h(D,2),q=d(L,!0);c(L),c(g);var j=h(g,2),U=d(j);let X;var J=d(U);{let oe=k(()=>r(K).bookmarked?"currentColor":"none");Nc(J,{size:13,get fill(){return r(oe)}})}c(U);var ae=h(U,2);let re;var ie=d(ae);Sc(ie,{size:13}),c(ae),c(j);var ne=h(j,2);{var G=oe=>{var ee=x_(),se=d(ee),te=d(se);c(se);var ue=h(se,2),le=h(ue,2);c(ee),$(he=>W(te,`Restore to ${he??""}?`),[()=>r(K).sha.slice(0,7)]),be("click",ue,()=>p(r(K).sha)),be("click",le,()=>_(l,null)),y(oe,ee)};Y(ne,oe=>{r(l)===r(K).sha&&oe(G)})}c(Z),$((oe,ee)=>{x=De(Z,1,"version-item svelte-1jltp3m",null,x,{confirming:r(l)===r(K).sha}),W(T,oe),W(V,r(K).message),W(q,ee),X=De(U,1,"action-btn bookmark-btn svelte-1jltp3m",null,X,{bookmarked:r(K).bookmarked}),xe(U,"title",r(K).bookmarked?"Bookmarked":"Bookmark this version"),re=De(ae,1,"action-btn restore-btn svelte-1jltp3m",null,re,{visible:r(l)===r(K).sha})},[()=>r(K).sha.slice(0,7),()=>m(r(K).timestamp)]),be("click",U,()=>v(r(K).sha)),be("click",ae,()=>_(l,r(K).sha,!0)),y(B,Z)}),y(R,b)};Y(H,R=>{r(s)?R(O):r(i).length===0?R(F,1):R(M,!1)})}c(I),c(f),$(()=>N.disabled=r(s)),be("click",N,u),y(t,f),Ce(),o()}_t(["click"]);var z_=P('<div class="empty-state svelte-1g6pzvd"><!> <span>Loading...</span></div>'),C_=P('<div class="empty-state svelte-1g6pzvd"><!> <span>No connectors available</span></div>'),E_=P('<span class="installed-badge svelte-1g6pzvd">Installed</span>'),N_=P("<!> Install",1),M_=P('<button class="install-btn svelte-1g6pzvd"><!></button>'),P_=P('<div class="connector-card svelte-1g6pzvd"><div class="connector-icon svelte-1g6pzvd"> </div> <div class="connector-info svelte-1g6pzvd"><div class="connector-header-row svelte-1g6pzvd"><span class="connector-name svelte-1g6pzvd"> </span> <!></div> <span class="connector-desc svelte-1g6pzvd"> </span> <span class="connector-category svelte-1g6pzvd"> </span></div> <div class="connector-actions svelte-1g6pzvd"><!></div></div>'),T_=P('<div class="connector-grid svelte-1g6pzvd"></div>'),I_=P('<div class="empty-state svelte-1g6pzvd"><!> <span>No custom tools defined. Create one to get started.</span></div>'),A_=P('<div class="tool-item svelte-1g6pzvd"><div class="tool-info svelte-1g6pzvd"><span class="tool-name svelte-1g6pzvd"> </span> <span class="tool-type svelte-1g6pzvd"> </span> <span class="tool-desc svelte-1g6pzvd"> </span></div> <div class="tool-actions svelte-1g6pzvd"><button class="icon-btn svelte-1g6pzvd" title="Delete tool"><!></button></div></div>'),D_=P('<div class="tools-list svelte-1g6pzvd"></div>'),O_=P('<div class="panel svelte-1g6pzvd"><div class="header svelte-1g6pzvd"><div class="sub-tabs svelte-1g6pzvd"><button><!> Connectors</button> <button><!> Custom Tools</button></div> <button class="action-btn svelte-1g6pzvd" title="Refresh"><!></button></div> <div class="content svelte-1g6pzvd"><!></div></div>');function R_(t,e){ze(e,!0);let n=Q("connectors"),a=Q(!1),o=Q($t([])),i=Q(null),s=Q($t([]));async function l(){_(a,!0);try{_(o,await ot.customTools.catalog(),!0)}catch{_(o,[],!0),Ue("Failed to load connector catalog","error")}finally{_(a,!1)}}async function u(){_(a,!0);try{_(s,await ot.customTools.list(),!0)}catch{_(s,[],!0),Ue("Failed to load custom tools","error")}finally{_(a,!1)}}async function v(x){_(i,x,!0);try{await ot.customTools.installConnector(x),Ue("Connector installed","success"),await l()}catch{Ue("Failed to install connector","error")}finally{_(i,null)}}async function p(x){try{await ot.customTools.delete(x),Ue("Tool deleted","success"),await u()}catch{Ue("Failed to delete tool","error")}}_e(()=>{r(n)==="connectors"?l():u()});var m=O_(),f=d(m),w=d(f),N=d(w);let E;var I=d(N);Ya(I,{size:12}),ye(),c(N);var H=h(N,2);let O;var F=d(H);Wn(F,{size:12}),ye(),c(H),c(w);var M=h(w,2),R=d(M);mt(R,{size:13}),c(M),c(f);var b=h(f,2),A=d(b);{var B=x=>{var S=z_(),z=d(S);mt(z,{size:16}),ye(2),c(S),y(x,S)},K=x=>{var S=Te(),z=de(S);{var g=T=>{var D=C_(),V=d(D);Ya(V,{size:16}),ye(2),c(D),y(T,D)},C=T=>{var D=T_();je(D,21,()=>r(o),V=>V.id,(V,L)=>{var q=P_(),j=d(q),U=d(j,!0);c(j);var X=h(j,2),J=d(X),ae=d(J),re=d(ae,!0);c(ae);var ie=h(ae,2);{var ne=he=>{var ve=E_();y(he,ve)};Y(ie,he=>{r(L).installed&&he(ne)})}c(J);var G=h(J,2),oe=d(G,!0);c(G);var ee=h(G,2),se=d(ee,!0);c(ee),c(X);var te=h(X,2),ue=d(te);{var le=he=>{var ve=M_(),fe=d(ve);{var ke=ge=>{var Oe=qs("Installing...");y(ge,Oe)},Ae=ge=>{var Oe=N_(),Ze=de(Oe);ca(Ze,{size:11}),ye(),y(ge,Oe)};Y(fe,ge=>{r(i)===r(L).id?ge(ke):ge(Ae,!1)})}c(ve),$(()=>ve.disabled=r(i)===r(L).id),be("click",ve,()=>v(r(L).id)),y(he,ve)};Y(ue,he=>{r(L).installed||he(le)})}c(te),c(q),$(()=>{W(U,r(L).icon),W(re,r(L).name),W(oe,r(L).description),W(se,r(L).category)}),y(V,q)}),c(D),y(T,D)};Y(z,T=>{r(o).length===0?T(g):T(C,!1)})}y(x,S)},Z=x=>{var S=Te(),z=de(S);{var g=T=>{var D=I_(),V=d(D);Wn(V,{size:16}),ye(2),c(D),y(T,D)},C=T=>{var D=D_();je(D,21,()=>r(s),V=>V.name,(V,L)=>{var q=A_(),j=d(q),U=d(j),X=d(U,!0);c(U);var J=h(U,2),ae=d(J,!0);c(J);var re=h(J,2),ie=d(re,!0);c(re),c(j);var ne=h(j,2),G=d(ne),oe=d(G);Xn(oe,{size:13}),c(G),c(ne),c(q),$(()=>{W(X,r(L).name),W(ae,r(L).tool_type),W(ie,r(L).description)}),be("click",G,()=>p(r(L).name)),y(V,q)}),c(D),y(T,D)};Y(z,T=>{r(s).length===0?T(g):T(C,!1)})}y(x,S)};Y(A,x=>{r(a)?x(B):r(n)==="connectors"?x(K,1):x(Z,!1)})}c(b),c(m),$(()=>{E=De(N,1,"sub-tab svelte-1g6pzvd",null,E,{active:r(n)==="connectors"}),O=De(H,1,"sub-tab svelte-1g6pzvd",null,O,{active:r(n)==="tools"})}),be("click",N,()=>_(n,"connectors")),be("click",H,()=>_(n,"tools")),be("click",M,()=>r(n)==="connectors"?l():u()),y(t,m),Ce()}_t(["click"]);var L_=P('<div class="mini-empty svelte-3xr44d"><!> <span>Loading...</span></div>'),H_=P('<div class="mini-empty svelte-3xr44d"><!> <span>No datasets. Upload a JSON or CSV file to get started.</span></div>'),V_=P('<button><!> <span class="ds-name svelte-3xr44d"> </span> <span class="ds-meta svelte-3xr44d"> </span></button>'),F_=P('<div class="dataset-list svelte-3xr44d"></div>'),B_=P('<span class="result-error svelte-3xr44d"> </span>'),q_=P('<div><span class="result-icon svelte-3xr44d"><!></span> <span class="result-input svelte-3xr44d"> </span> <!></div>'),K_=P('<div class="results-list svelte-3xr44d"></div>'),j_=P('<div class="section svelte-3xr44d"><div class="section-label svelte-3xr44d">Results</div> <div class="metrics-row svelte-3xr44d"><div class="metric-card svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Total</span></div> <div class="metric-card success svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Passed</span></div> <div class="metric-card error svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Failed</span></div> <div class="metric-card svelte-3xr44d"><span class="metric-value svelte-3xr44d"> </span> <span class="metric-label svelte-3xr44d">Pass Rate</span></div></div> <!></div>'),Z_=P('<div class="panel svelte-3xr44d"><div class="header svelte-3xr44d"><span class="title svelte-3xr44d">Evaluate</span> <div class="header-actions svelte-3xr44d"><button class="action-btn text-btn svelte-3xr44d"><!> Upload Dataset</button> <button class="action-btn svelte-3xr44d" title="Refresh"><!></button></div> <input type="file" accept=".json,.jsonl,.csv" style="display:none"/></div> <div class="content svelte-3xr44d"><div class="section svelte-3xr44d"><div class="section-label svelte-3xr44d">Datasets</div> <!></div> <div class="run-section svelte-3xr44d"><button class="run-btn svelte-3xr44d"><!> </button></div> <!></div></div>');function Y_(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",a),[a,o]=Ot();let i=Q(!1),s=Q($t([])),l=Q(null),u=Q(!1),v=Q(null),p=Q(void 0);async function m(){const L=n();if(L){_(i,!0);try{_(s,await ot.evaluate.listDatasets(L.name),!0)}catch{_(s,[],!0),Ue("Failed to load datasets","error")}finally{_(i,!1)}}}async function f(){if(!n()){Ue("Select a project first","error");return}r(p)?.click()}async function w(L){const q=n();if(!q)return;const j=L.target,U=j.files?.[0];if(U){try{const X=await ot.evaluate.uploadDataset(q.name,U);Ue(`Dataset uploaded: ${X.test_cases} test cases`,"success"),await m()}catch{Ue("Failed to upload dataset","error")}j.value=""}}async function N(){const L=n();if(!(!L||!r(l))){_(u,!0),_(v,null);try{const q=js();_(v,await ot.evaluate.run(L.name,r(l),q),!0),Ue(`Evaluation complete: ${r(v).pass_rate.toFixed(1)}% pass rate`,"success")}catch{Ue("Evaluation failed","error")}finally{_(u,!1)}}}_e(()=>{n()&&m()});var E=Z_(),I=d(E),H=h(d(I),2),O=d(H),F=d(O);Mc(F,{size:12}),ye(),c(O);var M=h(O,2),R=d(M);mt(R,{size:13}),c(M),c(H);var b=h(H,2);yn(b,L=>_(p,L),()=>r(p)),c(I);var A=h(I,2),B=d(A),K=h(d(B),2);{var Z=L=>{var q=L_(),j=d(q);mt(j,{size:13}),ye(2),c(q),y(L,q)},x=L=>{var q=H_(),j=d(q);Xo(j,{size:13}),ye(2),c(q),y(L,q)},S=L=>{var q=F_();je(q,21,()=>r(s),j=>j.filename,(j,U)=>{var X=V_();let J;var ae=d(X);Xo(ae,{size:12});var re=h(ae,2),ie=d(re,!0);c(re);var ne=h(re,2),G=d(ne);c(ne),c(X),$(()=>{J=De(X,1,"dataset-item svelte-3xr44d",null,J,{selected:r(l)===r(U).filename}),W(ie,r(U).filename),W(G,`${r(U).test_cases??""} cases`)}),be("click",X,()=>_(l,r(U).filename,!0)),y(j,X)}),c(q),y(L,q)};Y(K,L=>{r(i)?L(Z):r(s).length===0?L(x,1):L(S,!1)})}c(B);var z=h(B,2),g=d(z),C=d(g);ec(C,{size:12});var T=h(C);c(g),c(z);var D=h(z,2);{var V=L=>{var q=j_(),j=h(d(q),2),U=d(j),X=d(U),J=d(X,!0);c(X),ye(2),c(U);var ae=h(U,2),re=d(ae),ie=d(re,!0);c(re),ye(2),c(ae);var ne=h(ae,2),G=d(ne),oe=d(G,!0);c(G),ye(2),c(ne);var ee=h(ne,2),se=d(ee),te=d(se);c(se),ye(2),c(ee),c(j);var ue=h(j,2);{var le=he=>{var ve=K_();je(ve,21,()=>r(v).results,wt,(fe,ke)=>{var Ae=q_();let ge;var Oe=d(Ae),Ze=d(Oe);{var Xe=dt=>{hc(dt,{size:12})},it=dt=>{gc(dt,{size:12})};Y(Ze,dt=>{r(ke).passed?dt(Xe):dt(it,!1)})}c(Oe);var Ge=h(Oe,2),ct=d(Ge,!0);c(Ge);var Nt=h(Ge,2);{var gt=dt=>{var xt=B_(),Me=d(xt,!0);c(xt),$(()=>W(Me,r(ke).error)),y(dt,xt)};Y(Nt,dt=>{r(ke).error&&dt(gt)})}c(Ae),$(()=>{ge=De(Ae,1,"result-row svelte-3xr44d",null,ge,{passed:r(ke).passed,failed:!r(ke).passed}),W(ct,r(ke).input)}),y(fe,Ae)}),c(ve),y(he,ve)};Y(ue,he=>{r(v).results.length>0&&he(le)})}c(q),$(he=>{W(J,r(v).total),W(ie,r(v).passed),W(oe,r(v).failed),W(te,`${he??""}%`)},[()=>r(v).pass_rate.toFixed(1)]),y(L,q)};Y(D,L=>{r(v)&&L(V)})}c(A),c(E),$(()=>{g.disabled=!r(l)||r(u)||!n(),W(T,` ${r(u)?"Running...":"Run Evaluation"}`)}),be("click",O,f),be("click",M,m),be("change",b,w),be("click",g,N),y(t,E),Ce(),o()}_t(["click","change"]);var W_=P('<button class="icon-btn svelte-oe5i1m" title="Remove variant"><!></button>'),X_=P('<div class="variant-row svelte-oe5i1m"><input class="form-input small svelte-oe5i1m" type="text" placeholder="Name"/> <input class="form-input small svelte-oe5i1m" type="text" placeholder="Pipeline"/> <div class="traffic-input svelte-oe5i1m"><input class="form-input tiny svelte-oe5i1m" type="number"/> <span class="traffic-pct svelte-oe5i1m">%</span></div> <!></div>'),G_=P('<div class="create-form svelte-oe5i1m"><div class="form-row svelte-oe5i1m"><label class="form-label svelte-oe5i1m">Name</label> <input class="form-input svelte-oe5i1m" type="text" placeholder="Experiment name"/></div> <div class="form-row svelte-oe5i1m"><label class="form-label svelte-oe5i1m">Variants</label> <div class="variants-config svelte-oe5i1m"><!> <button class="add-variant-btn svelte-oe5i1m"><!> Add variant</button></div></div> <div class="form-actions svelte-oe5i1m"><button class="create-btn svelte-oe5i1m">Create Experiment</button> <button class="cancel-btn svelte-oe5i1m">Cancel</button></div></div>'),U_=P('<div class="empty-state svelte-oe5i1m"><!> <span>Loading...</span></div>'),Q_=P('<div class="empty-state svelte-oe5i1m"><!> <span>No experiments yet. Create one to A/B test pipeline variants.</span></div>'),J_=P('<div class="variant-item svelte-oe5i1m"><span class="variant-name svelte-oe5i1m"> </span> <div class="traffic-bar-container svelte-oe5i1m"><div class="traffic-bar svelte-oe5i1m"></div></div> <span class="variant-traffic svelte-oe5i1m"> </span></div>'),$_=P('<div class="experiment-card svelte-oe5i1m"><div class="exp-header svelte-oe5i1m"><!> <span class="exp-name svelte-oe5i1m"> </span> <span> </span> <span class="exp-date svelte-oe5i1m"> </span> <button class="icon-btn svelte-oe5i1m" title="Delete experiment"><!></button></div> <div class="variants-list svelte-oe5i1m"></div></div>'),e0=P('<div class="experiment-list svelte-oe5i1m"></div>'),t0=P('<div class="panel svelte-oe5i1m"><div class="header svelte-oe5i1m"><span class="title svelte-oe5i1m">Experiments</span> <div class="header-actions svelte-oe5i1m"><button class="action-btn text-btn svelte-oe5i1m"><!> New</button> <button class="action-btn svelte-oe5i1m" title="Refresh"><!></button></div></div> <div class="content svelte-oe5i1m"><!> <!></div></div>');function n0(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",a),[a,o]=Ot();let i=Q(!1),s=Q($t([])),l=Q(!1),u=Q(""),v=Q($t([{name:"Control",pipeline:"default",traffic:50},{name:"Variant A",pipeline:"default",traffic:50}]));async function p(){const g=n();if(g){_(i,!0);try{_(s,await ot.experiments.list(g.name),!0)}catch{_(s,[],!0),Ue("Failed to load experiments","error")}finally{_(i,!1)}}}async function m(){const g=n();if(!(!g||!r(u).trim()))try{await ot.experiments.create(g.name,r(u).trim(),r(v)),Ue("Experiment created","success"),_(u,""),_(l,!1),_(v,[{name:"Control",pipeline:"default",traffic:50},{name:"Variant A",pipeline:"default",traffic:50}],!0),await p()}catch{Ue("Failed to create experiment","error")}}async function f(g){const C=n();if(C)try{await ot.experiments.delete(C.name,g),Ue("Experiment deleted","success"),await p()}catch{Ue("Failed to delete experiment","error")}}function w(){const g=r(v).length+1;_(v,[...r(v),{name:`Variant ${String.fromCharCode(64+g)}`,pipeline:"default",traffic:0}],!0)}function N(g){_(v,r(v).filter((C,T)=>T!==g),!0)}function E(g){switch(g){case"running":return"badge-running";case"completed":return"badge-completed";default:return"badge-draft"}}_e(()=>{n()&&p()});var I=t0(),H=d(I),O=h(d(H),2),F=d(O),M=d(F);Go(M,{size:12}),ye(),c(F);var R=h(F,2),b=d(R);mt(b,{size:13}),c(R),c(O),c(H);var A=h(H,2),B=d(A);{var K=g=>{var C=G_(),T=d(C),D=h(d(T),2);Ct(D),c(T);var V=h(T,2),L=h(d(V),2),q=d(L);je(q,17,()=>r(v),wt,(re,ie,ne)=>{var G=X_(),oe=d(G);Ct(oe);var ee=h(oe,2);Ct(ee);var se=h(ee,2),te=d(se);Ct(te),xe(te,"min",0),xe(te,"max",100),ye(2),c(se);var ue=h(se,2);{var le=he=>{var ve=W_(),fe=d(ve);Xn(fe,{size:11}),c(ve),be("click",ve,()=>N(ne)),y(he,ve)};Y(ue,he=>{r(v).length>2&&he(le)})}c(G),on(oe,()=>r(ie).name,he=>r(ie).name=he),on(ee,()=>r(ie).pipeline,he=>r(ie).pipeline=he),on(te,()=>r(ie).traffic,he=>r(ie).traffic=he),y(re,G)});var j=h(q,2),U=d(j);Go(U,{size:11}),ye(),c(j),c(L),c(V);var X=h(V,2),J=d(X),ae=h(J,2);c(X),c(C),$(re=>J.disabled=re,[()=>!r(u).trim()]),on(D,()=>r(u),re=>_(u,re)),be("click",j,w),be("click",J,m),be("click",ae,()=>_(l,!1)),y(g,C)};Y(B,g=>{r(l)&&g(K)})}var Z=h(B,2);{var x=g=>{var C=U_(),T=d(C);mt(T,{size:16}),ye(2),c(C),y(g,C)},S=g=>{var C=Q_(),T=d(C);Us(T,{size:16}),ye(2),c(C),y(g,C)},z=g=>{var C=e0();je(C,21,()=>r(s),T=>T.id,(T,D)=>{var V=$_(),L=d(V),q=d(L);dr(q,{size:13});var j=h(q,2),U=d(j,!0);c(j);var X=h(j,2),J=d(X,!0);c(X);var ae=h(X,2),re=d(ae,!0);c(ae);var ie=h(ae,2),ne=d(ie);Xn(ne,{size:12}),c(ie),c(L);var G=h(L,2);je(G,21,()=>r(D).variants,oe=>oe.name,(oe,ee)=>{var se=J_(),te=d(se),ue=d(te,!0);c(te);var le=h(te,2),he=d(le);let ve;c(le);var fe=h(le,2),ke=d(fe);c(fe),c(se),$(()=>{W(ue,r(ee).name),ve=st(he,"",ve,{width:`${r(ee).traffic??""}%`}),W(ke,`${r(ee).traffic??""}%`)}),y(oe,se)}),c(G),c(V),$((oe,ee)=>{W(U,r(D).name),De(X,1,`status-badge ${oe??""}`,"svelte-oe5i1m"),W(J,r(D).status),W(re,ee)},[()=>E(r(D).status),()=>new Date(r(D).created_at).toLocaleDateString()]),be("click",ie,()=>f(r(D).id)),y(T,V)}),c(C),y(g,C)};Y(Z,g=>{r(i)?g(x):r(s).length===0&&!r(l)?g(S,1):g(z,!1)})}c(A),c(I),be("click",F,()=>_(l,!r(l))),be("click",R,p),y(t,I),Ce(),o()}_t(["click"]);var r0=P("<!> Copied",1),a0=P("<!> Copy",1),o0=P('<button class="action-btn text-btn svelte-1boqyeh" title="Copy code"><!></button> <button class="action-btn text-btn svelte-1boqyeh" title="Download as .py"><!> Download</button>',1),s0=P("<!> Generating...",1),i0=P("<!> Export as Python",1),l0=P('<div class="code-container svelte-1boqyeh"><pre class="code-block svelte-1boqyeh"><code class="svelte-1boqyeh"> </code></pre></div>'),c0=P('<div class="empty-state svelte-1boqyeh"><!> <span>Generating Python code...</span></div>'),d0=P('<div class="empty-state svelte-1boqyeh"><!> <span>Click "Export as Python" to generate deployable code from your pipeline.</span></div>'),u0=P('<div class="panel svelte-1boqyeh"><div class="header svelte-1boqyeh"><span class="title svelte-1boqyeh">Deploy / Export</span> <div class="header-actions svelte-1boqyeh"><!> <button class="export-btn svelte-1boqyeh"><!></button></div></div> <div class="content svelte-1boqyeh"><!></div></div>');function v0(t,e){ze(e,!0);let n=Q(!1),a=Q(""),o=Q(!1);async function i(){_(n,!0),_(a,"");try{const b=js(),A=await ot.codegen.toCode(b);_(a,A.code,!0),Ue("Code generated successfully","success")}catch{Ue("Failed to generate code","error")}finally{_(n,!1)}}async function s(){if(r(a))try{await navigator.clipboard.writeText(r(a)),_(o,!0),Ue("Copied to clipboard","info"),setTimeout(()=>_(o,!1),2e3)}catch{Ue("Failed to copy","error")}}function l(){if(!r(a))return;const b=new Blob([r(a)],{type:"text/x-python"}),A=URL.createObjectURL(b),B=document.createElement("a");B.href=A,B.download="pipeline.py",B.click(),URL.revokeObjectURL(A),Ue("Download started","info")}var u=u0(),v=d(u),p=h(d(v),2),m=d(p);{var f=b=>{var A=o0(),B=de(A),K=d(B);{var Z=g=>{var C=r0(),T=de(C);ho(T,{size:12}),ye(),y(g,C)},x=g=>{var C=a0(),T=de(C);Gs(T,{size:12}),ye(),y(g,C)};Y(K,g=>{r(o)?g(Z):g(x,!1)})}c(B);var S=h(B,2),z=d(S);ca(z,{size:12}),ye(),c(S),be("click",B,s),be("click",S,l),y(b,A)};Y(m,b=>{r(a)&&b(f)})}var w=h(m,2),N=d(w);{var E=b=>{var A=s0(),B=de(A);mt(B,{size:12}),ye(),y(b,A)},I=b=>{var A=i0(),B=de(A);ja(B,{size:12}),ye(),y(b,A)};Y(N,b=>{r(n)?b(E):b(I,!1)})}c(w),c(p),c(v);var H=h(v,2),O=d(H);{var F=b=>{var A=l0(),B=d(A),K=d(B),Z=d(K,!0);c(K),c(B),c(A),$(()=>W(Z,r(a))),y(b,A)},M=b=>{var A=c0(),B=d(A);mt(B,{size:16}),ye(2),c(A),y(b,A)},R=b=>{var A=d0(),B=d(A);ja(B,{size:16}),ye(2),c(A),y(b,A)};Y(O,b=>{r(a)?b(F):r(n)?b(M,1):b(R,!1)})}c(H),c(u),$(()=>w.disabled=r(n)),be("click",w,i),y(t,u),Ce()}_t(["click"]);var f0=P('<div class="empty-state svelte-1bsb2d0"><!> <span>Loading usage data...</span></div>'),p0=P('<div class="empty-state svelte-1bsb2d0"><!> <span>No usage data available. Run a pipeline to see metrics.</span></div>'),h0=P('<div class="table-row svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span></div>'),g0=P('<div class="breakdown-group svelte-1bsb2d0"><div class="breakdown-title svelte-1bsb2d0">By Model</div> <div class="breakdown-table svelte-1bsb2d0"><div class="table-header svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0">Model</span> <span class="col-num svelte-1bsb2d0">Requests</span> <span class="col-num svelte-1bsb2d0">Tokens</span> <span class="col-num svelte-1bsb2d0">Cost</span></div> <!></div></div>'),m0=P('<div class="table-row svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span> <span class="col-num svelte-1bsb2d0"> </span></div>'),_0=P('<div class="breakdown-group svelte-1bsb2d0"><div class="breakdown-title svelte-1bsb2d0">By Agent</div> <div class="breakdown-table svelte-1bsb2d0"><div class="table-header svelte-1bsb2d0"><span class="col-name svelte-1bsb2d0">Agent</span> <span class="col-num svelte-1bsb2d0">Requests</span> <span class="col-num svelte-1bsb2d0">Tokens</span> <span class="col-num svelte-1bsb2d0">Cost</span></div> <!></div></div>'),y0=P('<div class="metrics-grid svelte-1bsb2d0"><div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Requests</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Tokens</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Total Cost</span></div></div> <div class="metric-card svelte-1bsb2d0"><div class="metric-icon svelte-1bsb2d0"><!></div> <div class="metric-body svelte-1bsb2d0"><span class="metric-value svelte-1bsb2d0"> </span> <span class="metric-label svelte-1bsb2d0">Avg Latency</span></div></div></div> <div class="breakdown-section svelte-1bsb2d0"><!> <!></div>',1),b0=P('<div class="panel svelte-1bsb2d0"><div class="header svelte-1bsb2d0"><span class="title svelte-1bsb2d0">Monitor</span> <button class="action-btn svelte-1bsb2d0" title="Refresh"><!></button></div> <div class="content svelte-1bsb2d0"><!></div></div>');function x0(t,e){ze(e,!0);let n=Q(!1),a=Q(null);async function o(){_(n,!0);try{_(a,await ot.monitoring.usage(),!0)}catch{_(a,null),Ue("Failed to load usage data","error")}finally{_(n,!1)}}function i(H){return H>=1e6?`${(H/1e6).toFixed(1)}M`:H>=1e3?`${(H/1e3).toFixed(1)}K`:H.toString()}function s(H){return`$${H.toFixed(4)}`}function l(H,O){return O===0?"0ms":`${Math.round(H/O)}ms`}_e(()=>{o()});var u=b0(),v=d(u),p=h(d(v),2),m=d(p);mt(m,{size:13}),c(p),c(v);var f=h(v,2),w=d(f);{var N=H=>{var O=f0(),F=d(O);mt(F,{size:16}),ye(2),c(O),y(H,O)},E=H=>{var O=p0(),F=d(O);Qs(F,{size:16}),ye(2),c(O),y(H,O)},I=H=>{var O=y0(),F=de(O),M=d(F),R=d(M),b=d(R);yc(b,{size:14}),c(R);var A=h(R,2),B=d(A),K=d(B,!0);c(B),ye(2),c(A),c(M);var Z=h(M,2),x=d(Z),S=d(x);tc(S,{size:14}),c(x);var z=h(x,2),g=d(z),C=d(g,!0);c(g),ye(2),c(z),c(Z);var T=h(Z,2),D=d(T),V=d(D);mc(V,{size:14}),c(D);var L=h(D,2),q=d(L),j=d(q,!0);c(q),ye(2),c(L),c(T);var U=h(T,2),X=d(U),J=d(X);go(J,{size:14}),c(X);var ae=h(X,2),re=d(ae),ie=d(re,!0);c(re),ye(2),c(ae),c(U),c(F);var ne=h(F,2),G=d(ne);{var oe=le=>{var he=g0(),ve=h(d(he),2),fe=h(d(ve),2);je(fe,17,()=>Object.entries(r(a).by_model),([ke,Ae])=>ke,(ke,Ae)=>{var ge=k(()=>dn(r(Ae),2));let Oe=()=>r(ge)[0],Ze=()=>r(ge)[1];var Xe=h0(),it=d(Xe),Ge=d(it,!0);c(it);var ct=h(it,2),Nt=d(ct,!0);c(ct);var gt=h(ct,2),dt=d(gt,!0);c(gt);var xt=h(gt,2),Me=d(xt,!0);c(xt),c(Xe),$((pn,wn,hn)=>{W(Ge,Oe()),W(Nt,pn),W(dt,wn),W(Me,hn)},[()=>i(Ze().requests),()=>i(Ze().total_tokens),()=>s(Ze().cost_usd)]),y(ke,Xe)}),c(ve),c(he),y(le,he)},ee=k(()=>Object.keys(r(a).by_model).length>0);Y(G,le=>{r(ee)&&le(oe)})}var se=h(G,2);{var te=le=>{var he=_0(),ve=h(d(he),2),fe=h(d(ve),2);je(fe,17,()=>Object.entries(r(a).by_agent),([ke,Ae])=>ke,(ke,Ae)=>{var ge=k(()=>dn(r(Ae),2));let Oe=()=>r(ge)[0],Ze=()=>r(ge)[1];var Xe=m0(),it=d(Xe),Ge=d(it,!0);c(it);var ct=h(it,2),Nt=d(ct,!0);c(ct);var gt=h(ct,2),dt=d(gt,!0);c(gt);var xt=h(gt,2),Me=d(xt,!0);c(xt),c(Xe),$((pn,wn,hn)=>{W(Ge,Oe()),W(Nt,pn),W(dt,wn),W(Me,hn)},[()=>i(Ze().requests),()=>i(Ze().total_tokens),()=>s(Ze().cost_usd)]),y(ke,Xe)}),c(ve),c(he),y(le,he)},ue=k(()=>Object.keys(r(a).by_agent).length>0);Y(se,le=>{r(ue)&&le(te)})}c(ne),$((le,he,ve,fe)=>{W(K,le),W(C,he),W(j,ve),W(ie,fe)},[()=>i(r(a).total_requests),()=>i(r(a).total_tokens),()=>s(r(a).total_cost_usd),()=>l(r(a).total_latency_ms,r(a).total_requests)]),y(H,O)};Y(w,H=>{r(n)&&!r(a)?H(N):r(a)?H(I,!1):H(E,1)})}c(f),c(u),$(()=>p.disabled=r(n)),be("click",p,o),y(t,u),Ce()}_t(["click"]);var w0=P('<button class="back-btn svelte-tctccr" title="Back to file list"><!></button> <span class="file-path svelte-tctccr"> </span>',1),k0=P('<span class="title svelte-tctccr">Files</span>'),S0=P('<div class="empty-state svelte-tctccr"><!> <span>Loading file...</span></div>'),z0=P('<div class="code-viewer svelte-tctccr"><pre class="code-block svelte-tctccr"><code class="svelte-tctccr"> </code></pre></div>'),C0=P('<div class="empty-state svelte-tctccr"><!> <span>Loading files...</span></div>'),E0=P('<div class="empty-state svelte-tctccr"><!> <span>No files in this project.</span></div>'),N0=P('<div class="file-item dir svelte-tctccr"><!> <span class="file-name svelte-tctccr"> </span></div>'),M0=P("<span> </span>"),P0=P('<button class="file-item svelte-tctccr"><!> <span class="file-name svelte-tctccr"> </span> <!> <span class="file-size svelte-tctccr"> </span> <!></button>'),T0=P('<div class="file-list svelte-tctccr"></div>'),I0=P('<div class="panel svelte-tctccr"><div class="header svelte-tctccr"><!> <button class="action-btn svelte-tctccr" title="Refresh"><!></button></div> <div class="content svelte-tctccr"><!></div></div>');function A0(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",a),[a,o]=Ot();let i=Q(!1),s=Q($t([])),l=Q(null),u=Q(""),v=Q(!1);async function p(){const z=n();if(z){_(i,!0);try{_(s,await ot.files.list(z.name),!0)}catch{_(s,[],!0)}finally{_(i,!1)}}}async function m(z){const g=n();if(g){_(v,!0),_(l,z,!0);try{const C=await ot.files.read(g.name,z);_(u,C.content,!0)}catch{_(u,"// Failed to load file content")}finally{_(v,!1)}}}function f(){_(l,null),_(u,"")}function w(z){const g=z.split(".");return g.length>1?g[g.length-1]:""}function N(z){switch(w(z)){case"py":return"ext-python";case"ts":case"js":return"ext-js";case"json":return"ext-json";case"yaml":case"yml":return"ext-yaml";case"md":return"ext-md";default:return""}}function E(z){return z<1024?`${z} B`:z<1024*1024?`${(z/1024).toFixed(1)} KB`:`${(z/(1024*1024)).toFixed(1)} MB`}_e(()=>{n()&&(_(l,null),_(u,""),p())});var I=I0(),H=d(I),O=d(H);{var F=z=>{var g=w0(),C=de(g),T=d(C);uc(T,{size:13}),c(C);var D=h(C,2),V=d(D,!0);c(D),$(()=>W(V,r(l))),be("click",C,f),y(z,g)},M=z=>{var g=k0();y(z,g)};Y(O,z=>{r(l)?z(F):z(M,!1)})}var R=h(O,2),b=d(R);mt(b,{size:13}),c(R),c(H);var A=h(H,2),B=d(A);{var K=z=>{var g=Te(),C=de(g);{var T=V=>{var L=S0(),q=d(L);mt(q,{size:16}),ye(2),c(L),y(V,L)},D=V=>{var L=z0(),q=d(L),j=d(q),U=d(j,!0);c(j),c(q),c(L),$(()=>W(U,r(u))),y(V,L)};Y(C,V=>{r(v)?V(T):V(D,!1)})}y(z,g)},Z=z=>{var g=C0(),C=d(g);mt(C,{size:16}),ye(2),c(g),y(z,g)},x=z=>{var g=E0(),C=d(g);Js(C,{size:16}),ye(2),c(g),y(z,g)},S=z=>{var g=T0();je(g,21,()=>r(s),C=>C.path,(C,T)=>{var D=Te(),V=de(D);{var L=j=>{var U=N0(),X=d(U);ic(X,{size:13});var J=h(X,2),ae=d(J,!0);c(J),c(U),$(()=>W(ae,r(T).name)),y(j,U)},q=j=>{var U=P0(),X=d(U);nc(X,{size:13});var J=h(X,2),ae=d(J,!0);c(J);var re=h(J,2);{var ie=se=>{var te=M0(),ue=d(te,!0);c(te),$((le,he)=>{De(te,1,`file-ext ${le??""}`,"svelte-tctccr"),W(ue,he)},[()=>N(r(T).name),()=>w(r(T).name)]),y(se,te)},ne=k(()=>w(r(T).name));Y(re,se=>{r(ne)&&se(ie)})}var G=h(re,2),oe=d(G,!0);c(G);var ee=h(G,2);Wr(ee,{size:11}),c(U),$(se=>{W(ae,r(T).name),W(oe,se)},[()=>E(r(T).size)]),be("click",U,()=>m(r(T).path)),y(j,U)};Y(V,j=>{r(T).is_dir?j(L):j(q,!1)})}y(C,D)}),c(g),y(z,g)};Y(B,z=>{r(l)?z(K):r(i)?z(Z,1):r(s).length===0?z(x,2):z(S,!1)})}c(A),c(I),be("click",R,p),y(t,I),Ce(),o()}_t(["click"]);var D0=P('<span class="oracle-badge svelte-b2w21g"> </span>'),O0=P("<!> <span>Analyzing...</span>",1),R0=P("<!> <span>Analyze</span>",1),L0=P('<div class="oracle-empty svelte-b2w21g"><!> <p class="svelte-b2w21g">No insights yet</p> <p class="oracle-empty-hint svelte-b2w21g">Click "Analyze" to review your pipeline, or insights will appear automatically as you build.</p></div>'),H0=P('<div class="insight-body svelte-b2w21g"><p class="insight-desc svelte-b2w21g"> </p></div>'),V0=P('<div class="insight-actions svelte-b2w21g"><button class="insight-btn approve svelte-b2w21g" title="Approve and send to Architect"><!> <span>Approve</span></button> <button class="insight-btn skip svelte-b2w21g" title="Skip this insight"><!> <span>Skip</span></button></div>'),F0=P('<div class="insight-status-badge approved-badge svelte-b2w21g">Sent to Architect</div>'),B0=P('<div class="insight-status-badge skipped-badge svelte-b2w21g">Skipped</div>'),q0=P('<div><div class="insight-header svelte-b2w21g" role="button" tabindex="0"><span class="insight-severity svelte-b2w21g"><!></span> <span class="insight-title svelte-b2w21g"> </span> <span class="insight-time svelte-b2w21g"> </span></div> <!> <!></div>'),K0=P(`<div class="oracle-panel svelte-b2w21g"><div class="oracle-header svelte-b2w21g"><div class="oracle-title-row svelte-b2w21g"><!> <span class="oracle-title svelte-b2w21g">Oracle's Insights</span> <!></div> <button class="oracle-analyze-btn svelte-b2w21g"><!></button></div> <div class="oracle-content svelte-b2w21g"><!></div></div>`);function j0(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",s),a=()=>at(Zs,"$oracleInsights",s),o=()=>at(Yl,"$oracleConnected",s),i=()=>at(Wl,"$oracleAnalyzing",s),[s,l]=Ot(),u={info:{icon:Xs,color:"#3b82f6",label:"Info"},warning:{icon:rc,color:"#f59e0b",label:"Warning"},suggestion:{icon:xc,color:"#8b5cf6",label:"Suggestion"},critical:{icon:Rt,color:"#ef4444",label:"Critical"}};function v(g){return u[g]??u.info}function p(g){if(!g)return"";try{return new Date(g).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}catch{return""}}let m=Q(null);function f(g){_(m,r(m)===g?null:g,!0)}async function w(g){const C=n();if(!C)return;const T=await Gl(C.name,g.id);T&&window.dispatchEvent(new CustomEvent("oracle-approved",{detail:{instruction:T}}))}async function N(g){const C=n();C&&await Ul(C.name,g.id)}let E=k(()=>a().filter(g=>g.status==="pending").length);var I=K0(),H=d(I),O=d(H),F=d(O);Xr(F,{size:14});var M=h(F,4);{var R=g=>{var C=D0(),T=d(C,!0);c(C),$(()=>W(T,r(E))),y(g,C)};Y(M,g=>{r(E)>0&&g(R)})}c(O);var b=h(O,2),A=d(b);{var B=g=>{var C=O0(),T=de(C);Xl(T,{size:12,class:"oracle-spinner"}),ye(2),y(g,C)},K=g=>{var C=R0(),T=de(C);zc(T,{size:12}),ye(2),y(g,C)};Y(A,g=>{i()?g(B):g(K,!1)})}c(b),c(H);var Z=h(H,2),x=d(Z);{var S=g=>{var C=L0(),T=d(C);Xr(T,{size:24}),ye(4),c(C),y(g,C)},z=g=>{var C=Te(),T=de(C);je(T,1,a,D=>D.id,(D,V)=>{const L=k(()=>v(r(V).severity)),q=k(()=>r(L).icon);var j=q0();let U;var X=d(j),J=d(X);let ae;var re=d(J);un(re,()=>r(q),(ve,fe)=>{fe(ve,{size:13})}),c(J);var ie=h(J,2),ne=d(ie,!0);c(ie);var G=h(ie,2),oe=d(G,!0);c(G),c(X);var ee=h(X,2);{var se=ve=>{var fe=H0(),ke=d(fe),Ae=d(ke,!0);c(ke),c(fe),$(()=>W(Ae,r(V).description)),y(ve,fe)};Y(ee,ve=>{r(m)===r(V).id&&ve(se)})}var te=h(ee,2);{var ue=ve=>{var fe=V0(),ke=d(fe),Ae=d(ke);ho(Ae,{size:11}),ye(2),c(ke);var ge=h(ke,2),Oe=d(ge);Ks(Oe,{size:11}),ye(2),c(ge),c(fe),be("click",ke,()=>w(r(V))),be("click",ge,()=>N(r(V))),y(ve,fe)},le=ve=>{var fe=F0();y(ve,fe)},he=ve=>{var fe=B0();y(ve,fe)};Y(te,ve=>{r(V).status==="pending"?ve(ue):r(V).status==="approved"?ve(le,1):ve(he,!1)})}c(j),$(ve=>{U=De(j,1,"insight-card svelte-b2w21g",null,U,{approved:r(V).status==="approved",skipped:r(V).status==="skipped"}),ae=st(J,"",ae,{color:r(L).color}),W(ne,r(V).title),W(oe,ve)},[()=>p(r(V).timestamp)]),be("click",X,()=>f(r(V).id)),be("keydown",X,ve=>ve.key==="Enter"&&f(r(V).id)),y(D,j)}),y(g,C)};Y(x,g=>{a().length===0?g(S):g(z,!1)})}c(Z),c(I),$(()=>b.disabled=!o()||i()),be("click",b,function(...g){Zl?.apply(this,g)}),y(t,I),Ce(),l()}_t(["click","keydown"]);var Z0=P('<div class="empty-state svelte-o0ko81"><!> <span>Loading executions...</span></div>'),Y0=P('<div class="empty-state svelte-o0ko81"><!> <span>No executions yet. Start the runtime and trigger a pipeline to see results.</span></div>'),W0=P('<div class="exec-detail svelte-o0ko81"><div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">ID</span> <code class="detail-value svelte-o0ko81"> </code></div> <div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">Status</span> <span class="detail-value svelte-o0ko81"> </span></div> <div class="detail-row svelte-o0ko81"><span class="detail-label svelte-o0ko81">Duration</span> <code class="detail-value svelte-o0ko81"> </code></div></div>'),X0=P('<div class="table-row-wrapper svelte-o0ko81"><button class="table-row svelte-o0ko81"><span class="col-status svelte-o0ko81"><span class="status-dot svelte-o0ko81"></span></span> <span class="col-id svelte-o0ko81"><code class="svelte-o0ko81"> </code></span> <span class="col-duration svelte-o0ko81"><code class="svelte-o0ko81"> </code></span> <span class="col-expand svelte-o0ko81"><!></span></button> <!></div>'),G0=P('<div class="exec-table svelte-o0ko81"><div class="table-header svelte-o0ko81"><span class="col-status svelte-o0ko81">Status</span> <span class="col-id svelte-o0ko81">Execution ID</span> <span class="col-duration svelte-o0ko81">Duration</span> <span class="col-expand svelte-o0ko81"></span></div> <!></div>'),U0=P('<div class="panel svelte-o0ko81"><div class="header svelte-o0ko81"><span class="title svelte-o0ko81">Executions</span> <button class="action-btn svelte-o0ko81" title="Refresh"><!></button></div> <div class="content svelte-o0ko81"><!></div></div>');function Q0(t,e){ze(e,!0);const n=()=>at(nr,"$currentProject",o),a=()=>at(Za,"$bottomPanelTab",o),[o,i]=Ot();let s=Q(!1),l=Q($t([])),u=Q(null),v=k(()=>n()?.name??""),p=k(a);async function m(){if(r(v)){_(s,!0);try{const K=await ot.runtime.executions(r(v));_(l,K.executions??[],!0)}catch{_(l,[],!0),Ue("Failed to load executions","error")}finally{_(s,!1)}}}function f(K){_(u,r(u)===K?null:K,!0)}function w(K){return K==null?"--":K<1e3?`${K}ms`:`${(K/1e3).toFixed(2)}s`}function N(K){return K.length<=12?K:K.slice(0,8)+"..."}function E(K){switch(K.toLowerCase()){case"completed":case"success":return"var(--color-success)";case"running":case"in_progress":return"#f59e0b";case"failed":case"error":return"var(--color-error)";default:return"var(--color-text-secondary)"}}_e(()=>{r(p)==="executions"&&r(v)&&m()}),_e(()=>{if(r(p)!=="executions"||!r(v))return;const K=setInterval(m,1e4);return()=>clearInterval(K)});var I=U0(),H=d(I),O=h(d(H),2),F=d(O);mt(F,{size:13}),c(O),c(H);var M=h(H,2),R=d(M);{var b=K=>{var Z=Z0(),x=d(Z);mt(x,{size:16}),ye(2),c(Z),y(K,Z)},A=K=>{var Z=Y0(),x=d(Z);ei(x,{size:16}),ye(2),c(Z),y(K,Z)},B=K=>{var Z=G0(),x=h(d(Z),2);je(x,17,()=>r(l),S=>S.execution_id,(S,z)=>{var g=X0(),C=d(g),T=d(C),D=d(T);let V;c(T);var L=h(T,2),q=d(L),j=d(q,!0);c(q),c(L);var U=h(L,2),X=d(U),J=d(X,!0);c(X),c(U);var ae=h(U,2),re=d(ae);{var ie=ee=>{Yr(ee,{size:12})},ne=ee=>{Wr(ee,{size:12})};Y(re,ee=>{r(u)===r(z).execution_id?ee(ie):ee(ne,!1)})}c(ae),c(C);var G=h(C,2);{var oe=ee=>{var se=W0(),te=d(se),ue=h(d(te),2),le=d(ue,!0);c(ue),c(te);var he=h(te,2),ve=h(d(he),2);let fe;var ke=d(ve,!0);c(ve),c(he);var Ae=h(he,2),ge=h(d(Ae),2),Oe=d(ge,!0);c(ge),c(Ae),c(se),$((Ze,Xe)=>{W(le,r(z).execution_id),fe=st(ve,"",fe,Ze),W(ke,r(z).status),W(Oe,Xe)},[()=>({color:E(r(z).status)}),()=>w(r(z).duration_ms)]),y(ee,se)};Y(G,ee=>{r(u)===r(z).execution_id&&ee(oe)})}c(g),$((ee,se,te)=>{V=st(D,"",V,ee),xe(L,"title",r(z).execution_id),W(j,se),W(J,te)},[()=>({background:E(r(z).status)}),()=>N(r(z).execution_id),()=>w(r(z).duration_ms)]),be("click",C,()=>f(r(z).execution_id)),y(S,g)}),c(Z),y(K,Z)};Y(R,K=>{r(s)&&r(l).length===0?K(b):r(l).length===0?K(A,1):K(B,!1)})}c(M),c(I),$(()=>O.disabled=r(s)),be("click",O,m),y(t,I),Ce(),i()}_t(["click"]);var J0=P('<div class="drag-handle svelte-1m9rotx"><div class="drag-indicator svelte-1m9rotx"></div></div>'),$0=P('<span class="tab-badge error svelte-1m9rotx"> </span>'),ey=P('<span class="tab-badge accent svelte-1m9rotx"> </span>'),ty=P('<span class="tab-badge accent svelte-1m9rotx"> </span>'),ny=P("<button><!> <span> </span> <!></button>"),ry=P('<div class="tab-content svelte-1m9rotx"><!></div>'),ay=P('<div><!> <div class="tab-bar svelte-1m9rotx"><div class="tab-list svelte-1m9rotx"></div> <button class="toggle-btn svelte-1m9rotx"><!></button></div> <!></div>');function oy(t,e){ze(e,!0);const n=()=>at(Ka,"$executionEvents",l),a=()=>at(En,"$checkpoints",l),o=()=>at(Zs,"$oracleInsights",l),i=()=>at(Ta,"$bottomPanelOpen",l),s=()=>at(Za,"$bottomPanelTab",l),[l,u]=Ot(),v=k(()=>n().filter(q=>q.type==="node_error").length),p=k(()=>a().length),m=k(()=>o().filter(q=>q.status==="pending").length),f=[{id:"console",label:"Console",icon:ac},{id:"code",label:"Code",icon:la},{id:"timeline",label:"Timeline",icon:go},{id:"integrations",label:"Integrate",icon:Ya},{id:"evaluate",label:"Evaluate",icon:Us},{id:"experiments",label:"Experiments",icon:dr},{id:"deploy",label:"Deploy",icon:ja},{id:"monitor",label:"Monitor",icon:Qs},{id:"files",label:"Files",icon:Js},{id:"history",label:"History",icon:bc},{id:"oracle",label:"Oracle",icon:Xr},{id:"executions",label:"Executions",icon:ei}];let w=Q(320),N=Q(!1),E=Q(0),I=Q(0);const H=120;function O(){Ta.update(q=>!q)}function F(q){Za.set(q),i()||Ta.set(!0)}function M(q){q.preventDefault(),_(N,!0),_(E,q.clientY,!0),_(I,r(w),!0),document.addEventListener("mousemove",R),document.addEventListener("mouseup",b)}function R(q){if(!r(N))return;const j=Math.floor(window.innerHeight*.6),U=r(E)-q.clientY,X=Math.max(H,Math.min(j,r(I)+U));_(w,X,!0)}function b(){_(N,!1),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",b)}On(()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",b)});var A=ay();let B,K;var Z=d(A);{var x=q=>{var j=J0();be("mousedown",j,M),y(q,j)};Y(Z,q=>{i()&&q(x)})}var S=h(Z,2),z=d(S);je(z,21,()=>f,q=>q.id,(q,j)=>{const U=k(()=>r(j).icon);var X=ny();let J;var ae=d(X);un(ae,()=>r(U),(se,te)=>{te(se,{size:13})});var re=h(ae,2),ie=d(re,!0);c(re);var ne=h(re,2);{var G=se=>{var te=$0(),ue=d(te,!0);c(te),$(()=>W(ue,r(v)>99?"99+":r(v))),y(se,te)},oe=se=>{var te=ey(),ue=d(te,!0);c(te),$(()=>W(ue,r(p)>99?"99+":r(p))),y(se,te)},ee=se=>{var te=ty(),ue=d(te,!0);c(te),$(()=>W(ue,r(m)>99?"99+":r(m))),y(se,te)};Y(ne,se=>{r(j).id==="console"&&r(v)>0?se(G):r(j).id==="timeline"&&r(p)>0?se(oe,1):r(j).id==="oracle"&&r(m)>0&&se(ee,2)})}c(X),$(()=>{J=De(X,1,"tab-btn svelte-1m9rotx",null,J,{active:s()===r(j).id}),W(ie,r(j).label)}),be("click",X,()=>F(r(j).id)),y(q,X)}),c(z);var g=h(z,2),C=d(g);{var T=q=>{Yr(q,{size:14})},D=q=>{pc(q,{size:14})};Y(C,q=>{i()?q(T):q(D,!1)})}c(g),c(S);var V=h(S,2);{var L=q=>{var j=ry(),U=d(j);{var X=le=>{V1(le,{})},J=le=>{W1(le,{})},ae=le=>{__(le,{})},re=le=>{R_(le,{})},ie=le=>{Y_(le,{})},ne=le=>{n0(le,{})},G=le=>{v0(le,{})},oe=le=>{x0(le,{})},ee=le=>{A0(le,{})},se=le=>{S_(le,{})},te=le=>{j0(le,{})},ue=le=>{Q0(le,{})};Y(U,le=>{s()==="console"?le(X):s()==="code"?le(J,1):s()==="timeline"?le(ae,2):s()==="integrations"?le(re,3):s()==="evaluate"?le(ie,4):s()==="experiments"?le(ne,5):s()==="deploy"?le(G,6):s()==="monitor"?le(oe,7):s()==="files"?le(ee,8):s()==="history"?le(se,9):s()==="oracle"?le(te,10):s()==="executions"&&le(ue,11)})}c(j),y(q,j)};Y(V,q=>{i()&&q(L)})}c(A),$(()=>{B=De(A,1,"bottom-panel svelte-1m9rotx",null,B,{dragging:r(N)}),K=st(A,"",K,{height:i()?`${r(w)}px`:"36px"}),xe(g,"title",i()?"Collapse panel":"Expand panel")}),be("click",g,O),y(t,A),Ce(),u()}_t(["mousedown","click"]);var sy=P('<div class="construct-page svelte-1ri5xm6"><div class="top-area svelte-1ri5xm6"><!> <!></div> <!></div>');function gy(t,e){ze(e,!1),io(()=>oc()),On(()=>sc()),Ls();var n=sy(),a=d(n),o=d(a);zm(o,{});var i=h(o,2);I1(i,{}),c(a);var s=h(a,2);oy(s,{}),c(n),y(t,n),Ce()}export{gy as component};
