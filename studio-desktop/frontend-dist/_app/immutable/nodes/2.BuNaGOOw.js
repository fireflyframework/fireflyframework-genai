import"../chunks/DsnmJJEf.js";import{f as be,g as ye,i as m,G as Qe,p as Ve,I as R,J as Ye,z as q,K as z,t as a,j as Ze,D as o,B as i,A as j,L as P,C as s,M as ue,N as et,O as ee,F as A}from"../chunks/DCyBifBO.js";import{l as xe,s as we,b as tt,i as D,a as at,c as st}from"../chunks/v7tHB-Lt.js";import{I as ze,s as je,P as K,e as te,b as it,a as nt,c as rt,d as O,f as ge,D as U,B as ae,g as se,p as ot,X as ct,h as lt,F as vt,L as dt,l as pt,i as ut}from"../chunks/BAxs8Xtu.js";import{g as W}from"../chunks/DhiGuJwU.js";import{p as me,c as he}from"../chunks/BCCFcAOv.js";import"../chunks/l8YpzWR9.js";import{S as ie,I as gt,a as mt}from"../chunks/CdQ27ih8.js";import{A as fe}from"../chunks/DQfFYHAU.js";function _e(S,f){const F=xe(f,["children","$$slots","$$events","$$legacy"]);const I=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];ze(S,we({name:"flame"},()=>F,{get iconNode(){return I},children:(C,$)=>{var l=be(),_=ye(l);je(_,f,"default",{}),m(C,l)},$$slots:{default:!0}}))}function G(S,f){const F=xe(f,["children","$$slots","$$events","$$legacy"]);const I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]];ze(S,we({name:"users"},()=>F,{get iconNode(){return I},children:(C,$)=>{var l=be(),_=ye(l);je(_,f,"default",{}),m(C,l)},$$slots:{default:!0}}))}var ht=j('<div class="attachment-chip svelte-1uha8ag"><span class="chip-icon svelte-1uha8ag"><!></span> <span class="chip-name svelte-1uha8ag"> </span> <span class="chip-size svelte-1uha8ag"> </span> <button class="chip-remove svelte-1uha8ag" title="Remove"><!></button></div>'),ft=j('<div class="attachment-chips svelte-1uha8ag"></div>'),_t=j('<p class="sending-hint svelte-1uha8ag">Creating your project...</p>'),bt=j('<button class="template-card svelte-1uha8ag"><div class="template-icon svelte-1uha8ag"><!></div> <div class="template-info svelte-1uha8ag"><span class="template-name svelte-1uha8ag"> </span> <span class="template-desc svelte-1uha8ag"> </span></div> <div class="template-arrow svelte-1uha8ag"><!></div></button>'),yt=j('<button class="recent-card svelte-1uha8ag"><div class="recent-card-icon svelte-1uha8ag"><!></div> <div class="recent-card-info svelte-1uha8ag"><span class="recent-card-name svelte-1uha8ag"> </span> <span class="recent-card-date svelte-1uha8ag"> </span></div> <div class="recent-card-arrow svelte-1uha8ag"><!></div></button>'),xt=j('<section class="recent-section svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><span class="svelte-1uha8ag">Recent projects</span></div> <div class="recent-row svelte-1uha8ag"></div></section>'),wt=j('<div class="home-page svelte-1uha8ag"><div class="bg-effects svelte-1uha8ag" aria-hidden="true"><div class="bg-orb bg-orb-1 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-2 svelte-1uha8ag"></div> <div class="bg-orb bg-orb-3 svelte-1uha8ag"></div> <div class="bg-grid svelte-1uha8ag"></div> <div class="bg-vignette svelte-1uha8ag"></div></div> <div class="page-content svelte-1uha8ag"><section class="hero-section svelte-1uha8ag"><div class="hero-icon svelte-1uha8ag"><div class="hero-icon-glow svelte-1uha8ag"></div> <!></div> <h1 class="hero-title svelte-1uha8ag">What do you want to build?</h1> <p class="hero-subtitle svelte-1uha8ag">Design, test, and deploy AI agent pipelines visually</p></section> <section class="prompt-section svelte-1uha8ag"><div><button class="prompt-action-btn attach-btn svelte-1uha8ag" title="Attach files"><!></button> <input type="file" multiple="" accept=".py,.js,.ts,.jsx,.tsx,.json,.md,.txt,.csv,.yaml,.yml,.xml,.html,.css,.sql,.sh,.pdf,.doc,.docx,.png,.jpg,.jpeg,.gif,.webp,.svg" style="display:none" class="svelte-1uha8ag"/> <div class="prompt-input-area svelte-1uha8ag"><!> <textarea class="prompt-input svelte-1uha8ag" placeholder="Describe the AI agent pipeline you want to create..." rows="2"></textarea></div> <button class="prompt-action-btn send-btn svelte-1uha8ag" title="Send"><!></button></div> <!></section> <section class="templates-section svelte-1uha8ag"><div class="section-label svelte-1uha8ag"><!> <span class="svelte-1uha8ag">Or start from a template</span></div> <div class="templates-row svelte-1uha8ag"></div></section> <!></div></div>');function It(S,f){Ve(f,!0);const F=()=>st(ot,"$projects",I),[I,C]=at();let $=R(""),l=R(!1),_=R(void 0),b=R(Ye([]));function $e(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function ke(e){if(e.type.startsWith("image/"))return"image";if(e.type.includes("pdf")||e.type.includes("word")||e.type.includes("document"))return"document";if(e.type.startsWith("text/")||e.type.includes("json")||e.type.includes("javascript")||e.type.includes("yaml")||e.type.includes("xml"))return"text";const t=e.name.split(".").pop()?.toLowerCase()??"";return["py","js","ts","jsx","tsx","json","md","txt","csv","yaml","yml","xml","html","css","sql","sh","go","rs","java","rb","r"].includes(t)?"text":["png","jpg","jpeg","gif","webp","svg","bmp"].includes(t)?"image":["pdf","doc","docx","odt","rtf"].includes(t)?"document":"other"}function Pe(e){const t=e.target;if(t.files&&t.files.length>0){for(const r of Array.from(t.files))r.size>20*1024*1024||P(b,[...a(b),{id:`att-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:r.name,size:r.size,category:ke(r),file:r}],!0);t.value=""}}function Ae(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const v=n.result,d=v.includes(",")?v.split(",")[1]:v;t(d)},n.onerror=r,n.readAsDataURL(e)})}function De(e){P(b,a(b).filter(t=>t.id!==e),!0)}function Se(){a(_)?.click()}const ne=ee(()=>(F()??[]).slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10)),Fe=ee(()=>a(ne).length>0);function Ie(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}}function Ce(e){switch(e){case"blank":return K;case"simple-qa":return se;case"reasoning-pipeline":return ae;case"multi-agent":return G;case"rag-pipeline":return U;default:return ie}}const Le=ee(()=>[...ge.map(e=>({id:e.id,name:e.name,description:e.description,icon:Ce(e.id),exists:!0})),...["multi-agent","rag-pipeline"].filter(e=>!ge.find(t=>t.id===e)).map(e=>({id:e,name:e==="multi-agent"?"Multi-Agent Team":"RAG Pipeline",description:e==="multi-agent"?"Coordinate multiple agents with different roles":"Retrieval-augmented generation with vector search",icon:e==="multi-agent"?G:U,exists:!1}))]);async function re(){const e=a($).trim();if(!(!e||a(l))){P(l,!0);try{const t=await Promise.all(a(b).map(async n=>({name:n.file.name,size:n.file.size,category:n.category,type:n.file.type||"application/octet-stream",data:await Ae(n.file),docType:"auto"})));me.set({text:e,attachments:t.length>0?t:void 0});const{name:r}=await rt.assistant.inferProjectName(e);await O(r),he.set(!0),W("/construct")}catch(t){console.error("[home] Failed to create project from prompt:",t),me.set({text:e});const r=`project-${Date.now()}`;await O(r),he.set(!0),W("/construct")}finally{P(l,!1)}}}function Me(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),re())}async function Ne(e){if(e.exists){const t=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await O(t||"untitled"),pt(e.id)}else{const t=e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await O(t||"untitled")}W("/construct")}async function Te(e){ut(e),W("/construct")}var H=wt(),oe=o(i(H),2),J=i(oe),ce=i(J),Be=o(i(ce),2);_e(Be,{size:28}),s(ce),ue(4),s(J);var X=o(J,2),T=i(X);let le;var L=i(T),Ee=i(L);K(Ee,{size:18}),s(L);var Q=o(L,2);tt(Q,e=>P(_,e),()=>a(_));var V=o(Q,2),ve=i(V);{var Re=e=>{var t=ft();te(t,21,()=>a(b),r=>r.id,(r,n)=>{var v=ht(),d=i(v),y=i(d);{var M=p=>{gt(p,{size:11})},x=p=>{vt(p,{size:11})};D(y,p=>{a(n).category==="image"?p(M):p(x,!1)})}s(d);var u=o(d,2),N=i(u,!0);s(u);var g=o(u,2),w=i(g,!0);s(g);var h=o(g,2),k=i(h);ct(k,{size:10}),s(h),s(v),q(p=>{lt(u,"title",a(n).name),A(N,a(n).name),A(w,p)},[()=>$e(a(n).size)]),z("click",h,()=>De(a(n).id)),m(r,v)}),s(t),m(e,t)};D(ve,e=>{a(b).length>0&&e(Re)})}var B=o(ve,2);et(B),s(V);var E=o(V,2),qe=i(E);{var Ke=e=>{dt(e,{size:18,class:"spinner-icon"})},Oe=e=>{mt(e,{size:18})};D(qe,e=>{a(l)?e(Ke):e(Oe,!1)})}s(E),s(T);var Ue=o(T,2);{var We=e=>{var t=_t();m(e,t)};D(Ue,e=>{a(l)&&e(We)})}s(X);var Y=o(X,2),Z=i(Y),Ge=i(Z);ie(Ge,{size:13}),ue(2),s(Z);var de=o(Z,2);te(de,21,()=>a(Le),e=>e.id,(e,t)=>{var r=bt(),n=i(r),v=i(n);{var d=c=>{K(c,{size:20})},y=c=>{se(c,{size:20})},M=c=>{ae(c,{size:20})},x=c=>{G(c,{size:20})},u=c=>{U(c,{size:20})},N=c=>{ie(c,{size:20})};D(v,c=>{a(t).icon===K?c(d):a(t).icon===se?c(y,1):a(t).icon===ae?c(M,2):a(t).icon===G?c(x,3):a(t).icon===U?c(u,4):c(N,!1)})}s(n);var g=o(n,2),w=i(g),h=i(w,!0);s(w);var k=o(w,2),p=i(k,!0);s(k),s(g);var pe=o(g,2),Xe=i(pe);fe(Xe,{size:14}),s(pe),s(r),q(()=>{A(h,a(t).name),A(p,a(t).description)}),z("click",r,()=>Ne(a(t))),m(e,r)}),s(de),s(Y);var He=o(Y,2);{var Je=e=>{var t=xt(),r=o(i(t),2);te(r,21,()=>a(ne),n=>n.name,(n,v)=>{var d=yt(),y=i(d),M=i(y);_e(M,{size:16}),s(y);var x=o(y,2),u=i(x),N=i(u,!0);s(u);var g=o(u,2),w=i(g,!0);s(g),s(x);var h=o(x,2),k=i(h);fe(k,{size:14}),s(h),s(d),q(p=>{A(N,a(v).name),A(w,p)},[()=>Ie(a(v).created_at)]),z("click",d,()=>Te(a(v))),m(n,d)}),s(r),s(t),m(e,t)};D(He,e=>{a(Fe)&&e(Je)})}s(oe),s(H),q(e=>{le=nt(T,1,"prompt-box svelte-1uha8ag",null,le,{disabled:a(l)}),L.disabled=a(l),B.disabled=a(l),E.disabled=e},[()=>a(l)||!a($).trim()]),z("click",L,Se),z("change",Q,Pe),z("keydown",B,Me),it(B,()=>a($),e=>P($,e)),z("click",E,re),m(S,H),Ze(),C()}Qe(["click","change","keydown"]);export{It as component};
